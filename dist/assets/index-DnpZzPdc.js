var zE=Object.defineProperty;var $y=e=>{throw TypeError(e)};var HE=(e,t,r)=>t in e?zE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ye=(e,t,r)=>HE(e,typeof t!="symbol"?t+"":t,r),Wy=(e,t,r)=>t.has(e)||$y("Cannot "+r);var Pr=(e,t,r)=>(Wy(e,t,"read from private field"),r?r.call(e):t.get(e)),Ls=(e,t,r)=>t.has(e)?$y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Bn=(e,t,r,n)=>(Wy(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);function qE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function Xv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yw={exports:{}},Ff={},_w={exports:{}},$r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Symbol.for("react.element"),KE=Symbol.for("react.portal"),GE=Symbol.for("react.fragment"),YE=Symbol.for("react.strict_mode"),QE=Symbol.for("react.profiler"),JE=Symbol.for("react.provider"),XE=Symbol.for("react.context"),ZE=Symbol.for("react.forward_ref"),ek=Symbol.for("react.suspense"),tk=Symbol.for("react.memo"),rk=Symbol.for("react.lazy"),Vy=Symbol.iterator;function nk(e){return e===null||typeof e!="object"?null:(e=Vy&&e[Vy]||e["@@iterator"],typeof e=="function"?e:null)}var bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ww=Object.assign,Sw={};function Au(e,t,r){this.props=e,this.context=t,this.refs=Sw,this.updater=r||bw}Au.prototype.isReactComponent={};Au.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Au.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xw(){}xw.prototype=Au.prototype;function Zv(e,t,r){this.props=e,this.context=t,this.refs=Sw,this.updater=r||bw}var e0=Zv.prototype=new xw;e0.constructor=Zv;ww(e0,Au.prototype);e0.isPureReactComponent=!0;var zy=Array.isArray,Rw=Object.prototype.hasOwnProperty,t0={current:null},Ew={key:!0,ref:!0,__self:!0,__source:!0};function kw(e,t,r){var n,s={},a=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(a=""+t.key),t)Rw.call(t,n)&&!Ew.hasOwnProperty(n)&&(s[n]=t[n]);var p=arguments.length-2;if(p===1)s.children=r;else if(1<p){for(var u=Array(p),i=0;i<p;i++)u[i]=arguments[i+2];s.children=u}if(e&&e.defaultProps)for(n in p=e.defaultProps,p)s[n]===void 0&&(s[n]=p[n]);return{$$typeof:lp,type:e,key:a,ref:h,props:s,_owner:t0.current}}function sk(e,t){return{$$typeof:lp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function r0(e){return typeof e=="object"&&e!==null&&e.$$typeof===lp}function ak(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Hy=/\/+/g;function Cm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ak(""+e.key):t.toString(36)}function Th(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(a){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case lp:case KE:h=!0}}if(h)return h=e,s=s(h),e=n===""?"."+Cm(h,0):n,zy(s)?(r="",e!=null&&(r=e.replace(Hy,"$&/")+"/"),Th(s,t,r,"",function(i){return i})):s!=null&&(r0(s)&&(s=sk(s,r+(!s.key||h&&h.key===s.key?"":(""+s.key).replace(Hy,"$&/")+"/")+e)),t.push(s)),1;if(h=0,n=n===""?".":n+":",zy(e))for(var p=0;p<e.length;p++){a=e[p];var u=n+Cm(a,p);h+=Th(a,t,r,u,s)}else if(u=nk(e),typeof u=="function")for(e=u.call(e),p=0;!(a=e.next()).done;)a=a.value,u=n+Cm(a,p++),h+=Th(a,t,r,u,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function eh(e,t,r){if(e==null)return e;var n=[],s=0;return Th(e,n,"","",function(a){return t.call(r,a,s++)}),n}function ik(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sa={current:null},Ph={transition:null},ok={ReactCurrentDispatcher:sa,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:t0};function Cw(){throw Error("act(...) is not supported in production builds of React.")}$r.Children={map:eh,forEach:function(e,t,r){eh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return eh(e,function(){t++}),t},toArray:function(e){return eh(e,function(t){return t})||[]},only:function(e){if(!r0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$r.Component=Au;$r.Fragment=GE;$r.Profiler=QE;$r.PureComponent=Zv;$r.StrictMode=YE;$r.Suspense=ek;$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok;$r.act=Cw;$r.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ww({},e.props),s=e.key,a=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,h=t0.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(u in t)Rw.call(t,u)&&!Ew.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&p!==void 0?p[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){p=Array(u);for(var i=0;i<u;i++)p[i]=arguments[i+2];n.children=p}return{$$typeof:lp,type:e.type,key:s,ref:a,props:n,_owner:h}};$r.createContext=function(e){return e={$$typeof:XE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JE,_context:e},e.Consumer=e};$r.createElement=kw;$r.createFactory=function(e){var t=kw.bind(null,e);return t.type=e,t};$r.createRef=function(){return{current:null}};$r.forwardRef=function(e){return{$$typeof:ZE,render:e}};$r.isValidElement=r0;$r.lazy=function(e){return{$$typeof:rk,_payload:{_status:-1,_result:e},_init:ik}};$r.memo=function(e,t){return{$$typeof:tk,type:e,compare:t===void 0?null:t}};$r.startTransition=function(e){var t=Ph.transition;Ph.transition={};try{e()}finally{Ph.transition=t}};$r.unstable_act=Cw;$r.useCallback=function(e,t){return sa.current.useCallback(e,t)};$r.useContext=function(e){return sa.current.useContext(e)};$r.useDebugValue=function(){};$r.useDeferredValue=function(e){return sa.current.useDeferredValue(e)};$r.useEffect=function(e,t){return sa.current.useEffect(e,t)};$r.useId=function(){return sa.current.useId()};$r.useImperativeHandle=function(e,t,r){return sa.current.useImperativeHandle(e,t,r)};$r.useInsertionEffect=function(e,t){return sa.current.useInsertionEffect(e,t)};$r.useLayoutEffect=function(e,t){return sa.current.useLayoutEffect(e,t)};$r.useMemo=function(e,t){return sa.current.useMemo(e,t)};$r.useReducer=function(e,t,r){return sa.current.useReducer(e,t,r)};$r.useRef=function(e){return sa.current.useRef(e)};$r.useState=function(e){return sa.current.useState(e)};$r.useSyncExternalStore=function(e,t,r){return sa.current.useSyncExternalStore(e,t,r)};$r.useTransition=function(){return sa.current.useTransition()};$r.version="18.3.1";_w.exports=$r;var D=_w.exports;const _t=Xv(D),yl=qE({__proto__:null,default:_t},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck=D,lk=Symbol.for("react.element"),uk=Symbol.for("react.fragment"),dk=Object.prototype.hasOwnProperty,pk=ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hk={key:!0,ref:!0,__self:!0,__source:!0};function Tw(e,t,r){var n,s={},a=null,h=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)dk.call(t,n)&&!hk.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:lk,type:e,key:a,ref:h,props:s,_owner:pk.current}}Ff.Fragment=uk;Ff.jsx=Tw;Ff.jsxs=Tw;yw.exports=Ff;var v=yw.exports,Rg={},Pw={exports:{}},Ia={},Ow={exports:{}},Nw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,j){var G=A.length;A.push(j);e:for(;0<G;){var de=G-1>>>1,te=A[de];if(0<s(te,j))A[de]=j,A[G]=te,G=de;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var j=A[0],G=A.pop();if(G!==j){A[0]=G;e:for(var de=0,te=A.length,J=te>>>1;de<J;){var ae=2*(de+1)-1,be=A[ae],xe=ae+1,se=A[xe];if(0>s(be,G))xe<te&&0>s(se,be)?(A[de]=se,A[xe]=G,de=xe):(A[de]=be,A[ae]=G,de=ae);else if(xe<te&&0>s(se,G))A[de]=se,A[xe]=G,de=xe;else break e}}return j}function s(A,j){var G=A.sortIndex-j.sortIndex;return G!==0?G:A.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var h=Date,p=h.now();e.unstable_now=function(){return h.now()-p}}var u=[],i=[],g=1,_=null,f=3,o=!1,w=!1,l=!1,y=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(A){for(var j=r(i);j!==null;){if(j.callback===null)n(i);else if(j.startTime<=A)n(i),j.sortIndex=j.expirationTime,t(u,j);else break;j=r(i)}}function x(A){if(l=!1,S(A),!w)if(r(u)!==null)w=!0,M(k);else{var j=r(i);j!==null&&L(x,j.startTime-A)}}function k(A,j){w=!1,l&&(l=!1,d(C),C=-1),o=!0;var G=f;try{for(S(j),_=r(u);_!==null&&(!(_.expirationTime>j)||A&&!b());){var de=_.callback;if(typeof de=="function"){_.callback=null,f=_.priorityLevel;var te=de(_.expirationTime<=j);j=e.unstable_now(),typeof te=="function"?_.callback=te:_===r(u)&&n(u),S(j)}else n(u);_=r(u)}if(_!==null)var J=!0;else{var ae=r(i);ae!==null&&L(x,ae.startTime-j),J=!1}return J}finally{_=null,f=G,o=!1}}var I=!1,T=null,C=-1,E=5,c=-1;function b(){return!(e.unstable_now()-c<E)}function R(){if(T!==null){var A=e.unstable_now();c=A;var j=!0;try{j=T(!0,A)}finally{j?P():(I=!1,T=null)}}else I=!1}var P;if(typeof m=="function")P=function(){m(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,N=O.port2;O.port1.onmessage=R,P=function(){N.postMessage(null)}}else P=function(){y(R,0)};function M(A){T=A,I||(I=!0,P())}function L(A,j){C=y(function(){A(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||o||(w=!0,M(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var G=f;f=j;try{return A()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var G=f;f=A;try{return j()}finally{f=G}},e.unstable_scheduleCallback=function(A,j,G){var de=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,A){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,A={id:g++,callback:j,priorityLevel:A,startTime:G,expirationTime:te,sortIndex:-1},G>de?(A.sortIndex=G,t(i,A),r(u)===null&&A===r(i)&&(l?(d(C),C=-1):l=!0,L(x,G-de))):(A.sortIndex=te,t(u,A),w||o||(w=!0,M(k))),A},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(A){var j=f;return function(){var G=f;f=j;try{return A.apply(this,arguments)}finally{f=G}}}})(Nw);Ow.exports=Nw;var fk=Ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk=D,Aa=fk;function wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,Ud={};function _l(e,t){wu(e,t),wu(e+"Capture",t)}function wu(e,t){for(Ud[e]=t,e=0;e<t.length;e++)Aw.add(t[e])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eg=Object.prototype.hasOwnProperty,gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qy={},Ky={};function vk(e){return Eg.call(Ky,e)?!0:Eg.call(qy,e)?!1:gk.test(e)?Ky[e]=!0:(qy[e]=!0,!1)}function yk(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _k(e,t,r,n){if(t===null||typeof t>"u"||yk(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function aa(e,t,r,n,s,a,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=h}var $s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$s[e]=new aa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$s[t]=new aa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$s[e]=new aa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$s[e]=new aa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$s[e]=new aa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$s[e]=new aa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$s[e]=new aa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$s[e]=new aa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$s[e]=new aa(e,5,!1,e.toLowerCase(),null,!1,!1)});var n0=/[\-:]([a-z])/g;function s0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(n0,s0);$s[t]=new aa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(n0,s0);$s[t]=new aa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(n0,s0);$s[t]=new aa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$s[e]=new aa(e,1,!1,e.toLowerCase(),null,!1,!1)});$s.xlinkHref=new aa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$s[e]=new aa(e,1,!1,e.toLowerCase(),null,!0,!0)});function a0(e,t,r,n){var s=$s.hasOwnProperty(t)?$s[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_k(t,r,s,n)&&(r=null),n||s===null?vk(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var so=mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,th=Symbol.for("react.element"),Xl=Symbol.for("react.portal"),Zl=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),Iw=Symbol.for("react.provider"),Dw=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),Tg=Symbol.for("react.suspense_list"),c0=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),Mw=Symbol.for("react.offscreen"),Gy=Symbol.iterator;function hd(e){return e===null||typeof e!="object"?null:(e=Gy&&e[Gy]||e["@@iterator"],typeof e=="function"?e:null)}var rs=Object.assign,Tm;function Ed(e){if(Tm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Tm=t&&t[1]||""}return`
`+Tm+e}var Pm=!1;function Om(e,t){if(!e||Pm)return"";Pm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(i){var n=i}Reflect.construct(e,[],t)}else{try{t.call()}catch(i){n=i}e.call(t.prototype)}else{try{throw Error()}catch(i){n=i}e()}}catch(i){if(i&&n&&typeof i.stack=="string"){for(var s=i.stack.split(`
`),a=n.stack.split(`
`),h=s.length-1,p=a.length-1;1<=h&&0<=p&&s[h]!==a[p];)p--;for(;1<=h&&0<=p;h--,p--)if(s[h]!==a[p]){if(h!==1||p!==1)do if(h--,p--,0>p||s[h]!==a[p]){var u=`
`+s[h].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=h&&0<=p);break}}}finally{Pm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ed(e):""}function bk(e){switch(e.tag){case 5:return Ed(e.type);case 16:return Ed("Lazy");case 13:return Ed("Suspense");case 19:return Ed("SuspenseList");case 0:case 2:case 15:return e=Om(e.type,!1),e;case 11:return e=Om(e.type.render,!1),e;case 1:return e=Om(e.type,!0),e;default:return""}}function Pg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zl:return"Fragment";case Xl:return"Portal";case kg:return"Profiler";case i0:return"StrictMode";case Cg:return"Suspense";case Tg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dw:return(e.displayName||"Context")+".Consumer";case Iw:return(e._context.displayName||"Context")+".Provider";case o0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case c0:return t=e.displayName||null,t!==null?t:Pg(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return Pg(e(t))}catch{}}return null}function wk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pg(t);case 8:return t===i0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sk(e){var t=Lw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(h){n=""+h,a.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rh(e){e._valueTracker||(e._valueTracker=Sk(e))}function jw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Xh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Og(e,t){var r=t.checked;return rs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Yy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=cc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bw(e,t){t=t.checked,t!=null&&a0(e,"checked",t,!1)}function Ng(e,t){Bw(e,t);var r=cc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ag(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ag(e,t.type,cc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ag(e,t,r){(t!=="number"||Xh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var kd=Array.isArray;function uu(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+cc(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ig(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(wt(91));return rs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(wt(92));if(kd(r)){if(1<r.length)throw Error(wt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:cc(r)}}function Fw(e,t){var r=cc(t.value),n=cc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Xy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nh,$w=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nh=nh||document.createElement("div"),nh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $d(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Nd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys(Nd).forEach(function(e){xk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nd[t]=Nd[e]})});function Ww(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Nd.hasOwnProperty(e)&&Nd[e]?(""+t).trim():t+"px"}function Vw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ww(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Rk=rs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mg(e,t){if(t){if(Rk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(wt(62))}}function Lg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=null;function l0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bg=null,du=null,pu=null;function Zy(e){if(e=pp(e)){if(typeof Bg!="function")throw Error(wt(280));var t=e.stateNode;t&&(t=zf(t),Bg(e.stateNode,e.type,t))}}function zw(e){du?pu?pu.push(e):pu=[e]:du=e}function Hw(){if(du){var e=du,t=pu;if(pu=du=null,Zy(e),t)for(e=0;e<t.length;e++)Zy(t[e])}}function qw(e,t){return e(t)}function Kw(){}var Nm=!1;function Gw(e,t,r){if(Nm)return e(t,r);Nm=!0;try{return qw(e,t,r)}finally{Nm=!1,(du!==null||pu!==null)&&(Kw(),Hw())}}function Wd(e,t){var r=e.stateNode;if(r===null)return null;var n=zf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(wt(231,t,typeof r));return r}var Fg=!1;if(Ji)try{var fd={};Object.defineProperty(fd,"passive",{get:function(){Fg=!0}}),window.addEventListener("test",fd,fd),window.removeEventListener("test",fd,fd)}catch{Fg=!1}function Ek(e,t,r,n,s,a,h,p,u){var i=Array.prototype.slice.call(arguments,3);try{t.apply(r,i)}catch(g){this.onError(g)}}var Ad=!1,Zh=null,ef=!1,Ug=null,kk={onError:function(e){Ad=!0,Zh=e}};function Ck(e,t,r,n,s,a,h,p,u){Ad=!1,Zh=null,Ek.apply(kk,arguments)}function Tk(e,t,r,n,s,a,h,p,u){if(Ck.apply(this,arguments),Ad){if(Ad){var i=Zh;Ad=!1,Zh=null}else throw Error(wt(198));ef||(ef=!0,Ug=i)}}function bl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Yw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function e_(e){if(bl(e)!==e)throw Error(wt(188))}function Pk(e){var t=e.alternate;if(!t){if(t=bl(e),t===null)throw Error(wt(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return e_(s),e;if(a===n)return e_(s),t;a=a.sibling}throw Error(wt(188))}if(r.return!==n.return)r=s,n=a;else{for(var h=!1,p=s.child;p;){if(p===r){h=!0,r=s,n=a;break}if(p===n){h=!0,n=s,r=a;break}p=p.sibling}if(!h){for(p=a.child;p;){if(p===r){h=!0,r=a,n=s;break}if(p===n){h=!0,n=a,r=s;break}p=p.sibling}if(!h)throw Error(wt(189))}}if(r.alternate!==n)throw Error(wt(190))}if(r.tag!==3)throw Error(wt(188));return r.stateNode.current===r?e:t}function Qw(e){return e=Pk(e),e!==null?Jw(e):null}function Jw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jw(e);if(t!==null)return t;e=e.sibling}return null}var Xw=Aa.unstable_scheduleCallback,t_=Aa.unstable_cancelCallback,Ok=Aa.unstable_shouldYield,Nk=Aa.unstable_requestPaint,ls=Aa.unstable_now,Ak=Aa.unstable_getCurrentPriorityLevel,u0=Aa.unstable_ImmediatePriority,Zw=Aa.unstable_UserBlockingPriority,tf=Aa.unstable_NormalPriority,Ik=Aa.unstable_LowPriority,e1=Aa.unstable_IdlePriority,Uf=null,xi=null;function Dk(e){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(Uf,e,void 0,(e.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:jk,Mk=Math.log,Lk=Math.LN2;function jk(e){return e>>>=0,e===0?32:31-(Mk(e)/Lk|0)|0}var sh=64,ah=4194304;function Cd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,h=r&268435455;if(h!==0){var p=h&~s;p!==0?n=Cd(p):(a&=h,a!==0&&(n=Cd(a)))}else h=r&~s,h!==0?n=Cd(h):a!==0&&(n=Cd(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ii(t),s=1<<r,n|=e[r],t&=~s;return n}function Bk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fk(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var h=31-ii(a),p=1<<h,u=s[h];u===-1?(!(p&r)||p&n)&&(s[h]=Bk(p,t)):u<=t&&(e.expiredLanes|=p),a&=~p}}function $g(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t1(){var e=sh;return sh<<=1,!(sh&4194240)&&(sh=64),e}function Am(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function up(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ii(t),e[t]=r}function Uk(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ii(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function d0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ii(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var _n=0;function r1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var n1,p0,s1,a1,i1,Wg=!1,ih=[],Jo=null,Xo=null,Zo=null,Vd=new Map,zd=new Map,zo=[],$k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r_(e,t){switch(e){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Vd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(t.pointerId)}}function md(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=pp(t),t!==null&&p0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Wk(e,t,r,n,s){switch(t){case"focusin":return Jo=md(Jo,e,t,r,n,s),!0;case"dragenter":return Xo=md(Xo,e,t,r,n,s),!0;case"mouseover":return Zo=md(Zo,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Vd.set(a,md(Vd.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,zd.set(a,md(zd.get(a)||null,e,t,r,n,s)),!0}return!1}function o1(e){var t=Qc(e.target);if(t!==null){var r=bl(t);if(r!==null){if(t=r.tag,t===13){if(t=Yw(r),t!==null){e.blockedOn=t,i1(e.priority,function(){s1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);jg=n,r.target.dispatchEvent(n),jg=null}else return t=pp(r),t!==null&&p0(t),e.blockedOn=r,!1;t.shift()}return!0}function n_(e,t,r){Oh(e)&&r.delete(t)}function Vk(){Wg=!1,Jo!==null&&Oh(Jo)&&(Jo=null),Xo!==null&&Oh(Xo)&&(Xo=null),Zo!==null&&Oh(Zo)&&(Zo=null),Vd.forEach(n_),zd.forEach(n_)}function gd(e,t){e.blockedOn===t&&(e.blockedOn=null,Wg||(Wg=!0,Aa.unstable_scheduleCallback(Aa.unstable_NormalPriority,Vk)))}function Hd(e){function t(s){return gd(s,e)}if(0<ih.length){gd(ih[0],e);for(var r=1;r<ih.length;r++){var n=ih[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jo!==null&&gd(Jo,e),Xo!==null&&gd(Xo,e),Zo!==null&&gd(Zo,e),Vd.forEach(t),zd.forEach(t),r=0;r<zo.length;r++)n=zo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zo.length&&(r=zo[0],r.blockedOn===null);)o1(r),r.blockedOn===null&&zo.shift()}var hu=so.ReactCurrentBatchConfig,nf=!0;function zk(e,t,r,n){var s=_n,a=hu.transition;hu.transition=null;try{_n=1,h0(e,t,r,n)}finally{_n=s,hu.transition=a}}function Hk(e,t,r,n){var s=_n,a=hu.transition;hu.transition=null;try{_n=4,h0(e,t,r,n)}finally{_n=s,hu.transition=a}}function h0(e,t,r,n){if(nf){var s=Vg(e,t,r,n);if(s===null)Wm(e,t,n,sf,r),r_(e,n);else if(Wk(s,e,t,r,n))n.stopPropagation();else if(r_(e,n),t&4&&-1<$k.indexOf(e)){for(;s!==null;){var a=pp(s);if(a!==null&&n1(a),a=Vg(e,t,r,n),a===null&&Wm(e,t,n,sf,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Wm(e,t,n,null,r)}}var sf=null;function Vg(e,t,r,n){if(sf=null,e=l0(n),e=Qc(e),e!==null)if(t=bl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Yw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sf=e,null}function c1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ak()){case u0:return 1;case Zw:return 4;case tf:case Ik:return 16;case e1:return 536870912;default:return 16}default:return 16}}var qo=null,f0=null,Nh=null;function l1(){if(Nh)return Nh;var e,t=f0,r=t.length,n,s="value"in qo?qo.value:qo.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===s[a-n];n++);return Nh=s.slice(e,1<n?1-n:void 0)}function Ah(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oh(){return!0}function s_(){return!1}function Da(e){function t(r,n,s,a,h){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(r=e[p],this[p]=r?r(a):a[p]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?oh:s_,this.isPropagationStopped=s_,this}return rs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),t}var Iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m0=Da(Iu),dp=rs({},Iu,{view:0,detail:0}),qk=Da(dp),Im,Dm,vd,$f=rs({},dp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vd&&(vd&&e.type==="mousemove"?(Im=e.screenX-vd.screenX,Dm=e.screenY-vd.screenY):Dm=Im=0,vd=e),Im)},movementY:function(e){return"movementY"in e?e.movementY:Dm}}),a_=Da($f),Kk=rs({},$f,{dataTransfer:0}),Gk=Da(Kk),Yk=rs({},dp,{relatedTarget:0}),Mm=Da(Yk),Qk=rs({},Iu,{animationName:0,elapsedTime:0,pseudoElement:0}),Jk=Da(Qk),Xk=rs({},Iu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zk=Da(Xk),eC=rs({},Iu,{data:0}),i_=Da(eC),tC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nC[e])?!!t[e]:!1}function g0(){return sC}var aC=rs({},dp,{key:function(e){if(e.key){var t=tC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ah(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g0,charCode:function(e){return e.type==="keypress"?Ah(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ah(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iC=Da(aC),oC=rs({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o_=Da(oC),cC=rs({},dp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g0}),lC=Da(cC),uC=rs({},Iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=Da(uC),pC=rs({},$f,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hC=Da(pC),fC=[9,13,27,32],v0=Ji&&"CompositionEvent"in window,Id=null;Ji&&"documentMode"in document&&(Id=document.documentMode);var mC=Ji&&"TextEvent"in window&&!Id,u1=Ji&&(!v0||Id&&8<Id&&11>=Id),c_=" ",l_=!1;function d1(e,t){switch(e){case"keyup":return fC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eu=!1;function gC(e,t){switch(e){case"compositionend":return p1(t);case"keypress":return t.which!==32?null:(l_=!0,c_);case"textInput":return e=t.data,e===c_&&l_?null:e;default:return null}}function vC(e,t){if(eu)return e==="compositionend"||!v0&&d1(e,t)?(e=l1(),Nh=f0=qo=null,eu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u1&&t.locale!=="ko"?null:t.data;default:return null}}var yC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yC[e.type]:t==="textarea"}function h1(e,t,r,n){zw(n),t=af(t,"onChange"),0<t.length&&(r=new m0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Dd=null,qd=null;function _C(e){R1(e,0)}function Wf(e){var t=nu(e);if(jw(t))return e}function bC(e,t){if(e==="change")return t}var f1=!1;if(Ji){var Lm;if(Ji){var jm="oninput"in document;if(!jm){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),jm=typeof d_.oninput=="function"}Lm=jm}else Lm=!1;f1=Lm&&(!document.documentMode||9<document.documentMode)}function p_(){Dd&&(Dd.detachEvent("onpropertychange",m1),qd=Dd=null)}function m1(e){if(e.propertyName==="value"&&Wf(qd)){var t=[];h1(t,qd,e,l0(e)),Gw(_C,t)}}function wC(e,t,r){e==="focusin"?(p_(),Dd=t,qd=r,Dd.attachEvent("onpropertychange",m1)):e==="focusout"&&p_()}function SC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wf(qd)}function xC(e,t){if(e==="click")return Wf(t)}function RC(e,t){if(e==="input"||e==="change")return Wf(t)}function EC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ci=typeof Object.is=="function"?Object.is:EC;function Kd(e,t){if(ci(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Eg.call(t,s)||!ci(e[s],t[s]))return!1}return!0}function h_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function f_(e,t){var r=h_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h_(r)}}function g1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v1(){for(var e=window,t=Xh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Xh(e.document)}return t}function y0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kC(e){var t=v1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&g1(r.ownerDocument.documentElement,r)){if(n!==null&&y0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=f_(r,a);var h=f_(r,n);s&&h&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CC=Ji&&"documentMode"in document&&11>=document.documentMode,tu=null,zg=null,Md=null,Hg=!1;function m_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hg||tu==null||tu!==Xh(n)||(n=tu,"selectionStart"in n&&y0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Md&&Kd(Md,n)||(Md=n,n=af(zg,"onSelect"),0<n.length&&(t=new m0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=tu)))}function ch(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ru={animationend:ch("Animation","AnimationEnd"),animationiteration:ch("Animation","AnimationIteration"),animationstart:ch("Animation","AnimationStart"),transitionend:ch("Transition","TransitionEnd")},Bm={},y1={};Ji&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function Vf(e){if(Bm[e])return Bm[e];if(!ru[e])return e;var t=ru[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in y1)return Bm[e]=t[r];return e}var _1=Vf("animationend"),b1=Vf("animationiteration"),w1=Vf("animationstart"),S1=Vf("transitionend"),x1=new Map,g_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pc(e,t){x1.set(e,t),_l(t,[e])}for(var Fm=0;Fm<g_.length;Fm++){var Um=g_[Fm],TC=Um.toLowerCase(),PC=Um[0].toUpperCase()+Um.slice(1);pc(TC,"on"+PC)}pc(_1,"onAnimationEnd");pc(b1,"onAnimationIteration");pc(w1,"onAnimationStart");pc("dblclick","onDoubleClick");pc("focusin","onFocus");pc("focusout","onBlur");pc(S1,"onTransitionEnd");wu("onMouseEnter",["mouseout","mouseover"]);wu("onMouseLeave",["mouseout","mouseover"]);wu("onPointerEnter",["pointerout","pointerover"]);wu("onPointerLeave",["pointerout","pointerover"]);_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_l("onBeforeInput",["compositionend","keypress","textInput","paste"]);_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function v_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Tk(n,t,void 0,e),e.currentTarget=null}function R1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var h=n.length-1;0<=h;h--){var p=n[h],u=p.instance,i=p.currentTarget;if(p=p.listener,u!==a&&s.isPropagationStopped())break e;v_(s,p,i),a=u}else for(h=0;h<n.length;h++){if(p=n[h],u=p.instance,i=p.currentTarget,p=p.listener,u!==a&&s.isPropagationStopped())break e;v_(s,p,i),a=u}}}if(ef)throw e=Ug,ef=!1,Ug=null,e}function Un(e,t){var r=t[Qg];r===void 0&&(r=t[Qg]=new Set);var n=e+"__bubble";r.has(n)||(E1(t,e,2,!1),r.add(n))}function $m(e,t,r){var n=0;t&&(n|=4),E1(r,e,n,t)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Gd(e){if(!e[lh]){e[lh]=!0,Aw.forEach(function(r){r!=="selectionchange"&&(OC.has(r)||$m(r,!1,e),$m(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lh]||(t[lh]=!0,$m("selectionchange",!1,t))}}function E1(e,t,r,n){switch(c1(t)){case 1:var s=zk;break;case 4:s=Hk;break;default:s=h0}r=s.bind(null,t,r,e),s=void 0,!Fg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wm(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var p=n.stateNode.containerInfo;if(p===s||p.nodeType===8&&p.parentNode===s)break;if(h===4)for(h=n.return;h!==null;){var u=h.tag;if((u===3||u===4)&&(u=h.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;h=h.return}for(;p!==null;){if(h=Qc(p),h===null)return;if(u=h.tag,u===5||u===6){n=a=h;continue e}p=p.parentNode}}n=n.return}Gw(function(){var i=a,g=l0(r),_=[];e:{var f=x1.get(e);if(f!==void 0){var o=m0,w=e;switch(e){case"keypress":if(Ah(r)===0)break e;case"keydown":case"keyup":o=iC;break;case"focusin":w="focus",o=Mm;break;case"focusout":w="blur",o=Mm;break;case"beforeblur":case"afterblur":o=Mm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=Gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=lC;break;case _1:case b1:case w1:o=Jk;break;case S1:o=dC;break;case"scroll":o=qk;break;case"wheel":o=hC;break;case"copy":case"cut":case"paste":o=Zk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=o_}var l=(t&4)!==0,y=!l&&e==="scroll",d=l?f!==null?f+"Capture":null:f;l=[];for(var m=i,S;m!==null;){S=m;var x=S.stateNode;if(S.tag===5&&x!==null&&(S=x,d!==null&&(x=Wd(m,d),x!=null&&l.push(Yd(m,x,S)))),y)break;m=m.return}0<l.length&&(f=new o(f,w,null,r,g),_.push({event:f,listeners:l}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",o=e==="mouseout"||e==="pointerout",f&&r!==jg&&(w=r.relatedTarget||r.fromElement)&&(Qc(w)||w[Xi]))break e;if((o||f)&&(f=g.window===g?g:(f=g.ownerDocument)?f.defaultView||f.parentWindow:window,o?(w=r.relatedTarget||r.toElement,o=i,w=w?Qc(w):null,w!==null&&(y=bl(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(o=null,w=i),o!==w)){if(l=a_,x="onMouseLeave",d="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(l=o_,x="onPointerLeave",d="onPointerEnter",m="pointer"),y=o==null?f:nu(o),S=w==null?f:nu(w),f=new l(x,m+"leave",o,r,g),f.target=y,f.relatedTarget=S,x=null,Qc(g)===i&&(l=new l(d,m+"enter",w,r,g),l.target=S,l.relatedTarget=y,x=l),y=x,o&&w)t:{for(l=o,d=w,m=0,S=l;S;S=Gl(S))m++;for(S=0,x=d;x;x=Gl(x))S++;for(;0<m-S;)l=Gl(l),m--;for(;0<S-m;)d=Gl(d),S--;for(;m--;){if(l===d||d!==null&&l===d.alternate)break t;l=Gl(l),d=Gl(d)}l=null}else l=null;o!==null&&y_(_,f,o,l,!1),w!==null&&y!==null&&y_(_,y,w,l,!0)}}e:{if(f=i?nu(i):window,o=f.nodeName&&f.nodeName.toLowerCase(),o==="select"||o==="input"&&f.type==="file")var k=bC;else if(u_(f))if(f1)k=RC;else{k=SC;var I=wC}else(o=f.nodeName)&&o.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=xC);if(k&&(k=k(e,i))){h1(_,k,r,g);break e}I&&I(e,f,i),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Ag(f,"number",f.value)}switch(I=i?nu(i):window,e){case"focusin":(u_(I)||I.contentEditable==="true")&&(tu=I,zg=i,Md=null);break;case"focusout":Md=zg=tu=null;break;case"mousedown":Hg=!0;break;case"contextmenu":case"mouseup":case"dragend":Hg=!1,m_(_,r,g);break;case"selectionchange":if(CC)break;case"keydown":case"keyup":m_(_,r,g)}var T;if(v0)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else eu?d1(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(u1&&r.locale!=="ko"&&(eu||C!=="onCompositionStart"?C==="onCompositionEnd"&&eu&&(T=l1()):(qo=g,f0="value"in qo?qo.value:qo.textContent,eu=!0)),I=af(i,C),0<I.length&&(C=new i_(C,e,null,r,g),_.push({event:C,listeners:I}),T?C.data=T:(T=p1(r),T!==null&&(C.data=T)))),(T=mC?gC(e,r):vC(e,r))&&(i=af(i,"onBeforeInput"),0<i.length&&(g=new i_("onBeforeInput","beforeinput",null,r,g),_.push({event:g,listeners:i}),g.data=T))}R1(_,t)})}function Yd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function af(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Wd(e,r),a!=null&&n.unshift(Yd(e,a,s)),a=Wd(e,t),a!=null&&n.push(Yd(e,a,s))),e=e.return}return n}function Gl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y_(e,t,r,n,s){for(var a=t._reactName,h=[];r!==null&&r!==n;){var p=r,u=p.alternate,i=p.stateNode;if(u!==null&&u===n)break;p.tag===5&&i!==null&&(p=i,s?(u=Wd(r,a),u!=null&&h.unshift(Yd(r,u,p))):s||(u=Wd(r,a),u!=null&&h.push(Yd(r,u,p)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var NC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function __(e){return(typeof e=="string"?e:""+e).replace(NC,`
`).replace(AC,"")}function uh(e,t,r){if(t=__(t),__(e)!==t&&r)throw Error(wt(425))}function of(){}var qg=null,Kg=null;function Gg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yg=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(e){return b_.resolve(null).then(e).catch(MC)}:Yg;function MC(e){setTimeout(function(){throw e})}function Vm(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Hd(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Hd(t)}function ec(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function w_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Du=Math.random().toString(36).slice(2),_i="__reactFiber$"+Du,Qd="__reactProps$"+Du,Xi="__reactContainer$"+Du,Qg="__reactEvents$"+Du,LC="__reactListeners$"+Du,jC="__reactHandles$"+Du;function Qc(e){var t=e[_i];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xi]||r[_i]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=w_(e);e!==null;){if(r=e[_i])return r;e=w_(e)}return t}e=r,r=e.parentNode}return null}function pp(e){return e=e[_i]||e[Xi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(wt(33))}function zf(e){return e[Qd]||null}var Jg=[],su=-1;function hc(e){return{current:e}}function $n(e){0>su||(e.current=Jg[su],Jg[su]=null,su--)}function Mn(e,t){su++,Jg[su]=e.current,e.current=t}var lc={},Js=hc(lc),ma=hc(!1),ol=lc;function Su(e,t){var r=e.type.contextTypes;if(!r)return lc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ga(e){return e=e.childContextTypes,e!=null}function cf(){$n(ma),$n(Js)}function S_(e,t,r){if(Js.current!==lc)throw Error(wt(168));Mn(Js,t),Mn(ma,r)}function k1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(wt(108,wk(e)||"Unknown",s));return rs({},r,n)}function lf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lc,ol=Js.current,Mn(Js,e),Mn(ma,ma.current),!0}function x_(e,t,r){var n=e.stateNode;if(!n)throw Error(wt(169));r?(e=k1(e,t,ol),n.__reactInternalMemoizedMergedChildContext=e,$n(ma),$n(Js),Mn(Js,e)):$n(ma),Mn(ma,r)}var Hi=null,Hf=!1,zm=!1;function C1(e){Hi===null?Hi=[e]:Hi.push(e)}function BC(e){Hf=!0,C1(e)}function fc(){if(!zm&&Hi!==null){zm=!0;var e=0,t=_n;try{var r=Hi;for(_n=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Hi=null,Hf=!1}catch(s){throw Hi!==null&&(Hi=Hi.slice(e+1)),Xw(u0,fc),s}finally{_n=t,zm=!1}}return null}var au=[],iu=0,uf=null,df=0,Va=[],za=0,cl=null,qi=1,Ki="";function Kc(e,t){au[iu++]=df,au[iu++]=uf,uf=e,df=t}function T1(e,t,r){Va[za++]=qi,Va[za++]=Ki,Va[za++]=cl,cl=e;var n=qi;e=Ki;var s=32-ii(n)-1;n&=~(1<<s),r+=1;var a=32-ii(t)+s;if(30<a){var h=s-s%5;a=(n&(1<<h)-1).toString(32),n>>=h,s-=h,qi=1<<32-ii(t)+s|r<<s|n,Ki=a+e}else qi=1<<a|r<<s|n,Ki=e}function _0(e){e.return!==null&&(Kc(e,1),T1(e,1,0))}function b0(e){for(;e===uf;)uf=au[--iu],au[iu]=null,df=au[--iu],au[iu]=null;for(;e===cl;)cl=Va[--za],Va[za]=null,Ki=Va[--za],Va[za]=null,qi=Va[--za],Va[za]=null}var Ca=null,ka=null,Kn=!1,ai=null;function P1(e,t){var r=qa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function R_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ca=e,ka=ec(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ca=e,ka=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cl!==null?{id:qi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ca=e,ka=null,!0):!1;default:return!1}}function Xg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zg(e){if(Kn){var t=ka;if(t){var r=t;if(!R_(e,t)){if(Xg(e))throw Error(wt(418));t=ec(r.nextSibling);var n=Ca;t&&R_(e,t)?P1(n,r):(e.flags=e.flags&-4097|2,Kn=!1,Ca=e)}}else{if(Xg(e))throw Error(wt(418));e.flags=e.flags&-4097|2,Kn=!1,Ca=e}}}function E_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ca=e}function dh(e){if(e!==Ca)return!1;if(!Kn)return E_(e),Kn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gg(e.type,e.memoizedProps)),t&&(t=ka)){if(Xg(e))throw O1(),Error(wt(418));for(;t;)P1(e,t),t=ec(t.nextSibling)}if(E_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ka=ec(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ka=null}}else ka=Ca?ec(e.stateNode.nextSibling):null;return!0}function O1(){for(var e=ka;e;)e=ec(e.nextSibling)}function xu(){ka=Ca=null,Kn=!1}function w0(e){ai===null?ai=[e]:ai.push(e)}var FC=so.ReactCurrentBatchConfig;function yd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(wt(309));var n=r.stateNode}if(!n)throw Error(wt(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(h){var p=s.refs;h===null?delete p[a]:p[a]=h},t._stringRef=a,t)}if(typeof e!="string")throw Error(wt(284));if(!r._owner)throw Error(wt(290,e))}return e}function ph(e,t){throw e=Object.prototype.toString.call(t),Error(wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function k_(e){var t=e._init;return t(e._payload)}function N1(e){function t(d,m){if(e){var S=d.deletions;S===null?(d.deletions=[m],d.flags|=16):S.push(m)}}function r(d,m){if(!e)return null;for(;m!==null;)t(d,m),m=m.sibling;return null}function n(d,m){for(d=new Map;m!==null;)m.key!==null?d.set(m.key,m):d.set(m.index,m),m=m.sibling;return d}function s(d,m){return d=sc(d,m),d.index=0,d.sibling=null,d}function a(d,m,S){return d.index=S,e?(S=d.alternate,S!==null?(S=S.index,S<m?(d.flags|=2,m):S):(d.flags|=2,m)):(d.flags|=1048576,m)}function h(d){return e&&d.alternate===null&&(d.flags|=2),d}function p(d,m,S,x){return m===null||m.tag!==6?(m=Jm(S,d.mode,x),m.return=d,m):(m=s(m,S),m.return=d,m)}function u(d,m,S,x){var k=S.type;return k===Zl?g(d,m,S.props.children,x,S.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wo&&k_(k)===m.type)?(x=s(m,S.props),x.ref=yd(d,m,S),x.return=d,x):(x=Fh(S.type,S.key,S.props,null,d.mode,x),x.ref=yd(d,m,S),x.return=d,x)}function i(d,m,S,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=Xm(S,d.mode,x),m.return=d,m):(m=s(m,S.children||[]),m.return=d,m)}function g(d,m,S,x,k){return m===null||m.tag!==7?(m=nl(S,d.mode,x,k),m.return=d,m):(m=s(m,S),m.return=d,m)}function _(d,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Jm(""+m,d.mode,S),m.return=d,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case th:return S=Fh(m.type,m.key,m.props,null,d.mode,S),S.ref=yd(d,null,m),S.return=d,S;case Xl:return m=Xm(m,d.mode,S),m.return=d,m;case Wo:var x=m._init;return _(d,x(m._payload),S)}if(kd(m)||hd(m))return m=nl(m,d.mode,S,null),m.return=d,m;ph(d,m)}return null}function f(d,m,S,x){var k=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:p(d,m,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case th:return S.key===k?u(d,m,S,x):null;case Xl:return S.key===k?i(d,m,S,x):null;case Wo:return k=S._init,f(d,m,k(S._payload),x)}if(kd(S)||hd(S))return k!==null?null:g(d,m,S,x,null);ph(d,S)}return null}function o(d,m,S,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return d=d.get(S)||null,p(m,d,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case th:return d=d.get(x.key===null?S:x.key)||null,u(m,d,x,k);case Xl:return d=d.get(x.key===null?S:x.key)||null,i(m,d,x,k);case Wo:var I=x._init;return o(d,m,S,I(x._payload),k)}if(kd(x)||hd(x))return d=d.get(S)||null,g(m,d,x,k,null);ph(m,x)}return null}function w(d,m,S,x){for(var k=null,I=null,T=m,C=m=0,E=null;T!==null&&C<S.length;C++){T.index>C?(E=T,T=null):E=T.sibling;var c=f(d,T,S[C],x);if(c===null){T===null&&(T=E);break}e&&T&&c.alternate===null&&t(d,T),m=a(c,m,C),I===null?k=c:I.sibling=c,I=c,T=E}if(C===S.length)return r(d,T),Kn&&Kc(d,C),k;if(T===null){for(;C<S.length;C++)T=_(d,S[C],x),T!==null&&(m=a(T,m,C),I===null?k=T:I.sibling=T,I=T);return Kn&&Kc(d,C),k}for(T=n(d,T);C<S.length;C++)E=o(T,d,C,S[C],x),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?C:E.key),m=a(E,m,C),I===null?k=E:I.sibling=E,I=E);return e&&T.forEach(function(b){return t(d,b)}),Kn&&Kc(d,C),k}function l(d,m,S,x){var k=hd(S);if(typeof k!="function")throw Error(wt(150));if(S=k.call(S),S==null)throw Error(wt(151));for(var I=k=null,T=m,C=m=0,E=null,c=S.next();T!==null&&!c.done;C++,c=S.next()){T.index>C?(E=T,T=null):E=T.sibling;var b=f(d,T,c.value,x);if(b===null){T===null&&(T=E);break}e&&T&&b.alternate===null&&t(d,T),m=a(b,m,C),I===null?k=b:I.sibling=b,I=b,T=E}if(c.done)return r(d,T),Kn&&Kc(d,C),k;if(T===null){for(;!c.done;C++,c=S.next())c=_(d,c.value,x),c!==null&&(m=a(c,m,C),I===null?k=c:I.sibling=c,I=c);return Kn&&Kc(d,C),k}for(T=n(d,T);!c.done;C++,c=S.next())c=o(T,d,C,c.value,x),c!==null&&(e&&c.alternate!==null&&T.delete(c.key===null?C:c.key),m=a(c,m,C),I===null?k=c:I.sibling=c,I=c);return e&&T.forEach(function(R){return t(d,R)}),Kn&&Kc(d,C),k}function y(d,m,S,x){if(typeof S=="object"&&S!==null&&S.type===Zl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case th:e:{for(var k=S.key,I=m;I!==null;){if(I.key===k){if(k=S.type,k===Zl){if(I.tag===7){r(d,I.sibling),m=s(I,S.props.children),m.return=d,d=m;break e}}else if(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wo&&k_(k)===I.type){r(d,I.sibling),m=s(I,S.props),m.ref=yd(d,I,S),m.return=d,d=m;break e}r(d,I);break}else t(d,I);I=I.sibling}S.type===Zl?(m=nl(S.props.children,d.mode,x,S.key),m.return=d,d=m):(x=Fh(S.type,S.key,S.props,null,d.mode,x),x.ref=yd(d,m,S),x.return=d,d=x)}return h(d);case Xl:e:{for(I=S.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){r(d,m.sibling),m=s(m,S.children||[]),m.return=d,d=m;break e}else{r(d,m);break}else t(d,m);m=m.sibling}m=Xm(S,d.mode,x),m.return=d,d=m}return h(d);case Wo:return I=S._init,y(d,m,I(S._payload),x)}if(kd(S))return w(d,m,S,x);if(hd(S))return l(d,m,S,x);ph(d,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(r(d,m.sibling),m=s(m,S),m.return=d,d=m):(r(d,m),m=Jm(S,d.mode,x),m.return=d,d=m),h(d)):r(d,m)}return y}var Ru=N1(!0),A1=N1(!1),pf=hc(null),hf=null,ou=null,S0=null;function x0(){S0=ou=hf=null}function R0(e){var t=pf.current;$n(pf),e._currentValue=t}function ev(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function fu(e,t){hf=e,S0=ou=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fa=!0),e.firstContext=null)}function Ga(e){var t=e._currentValue;if(S0!==e)if(e={context:e,memoizedValue:t,next:null},ou===null){if(hf===null)throw Error(wt(308));ou=e,hf.dependencies={lanes:0,firstContext:e}}else ou=ou.next=e;return t}var Jc=null;function E0(e){Jc===null?Jc=[e]:Jc.push(e)}function I1(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,E0(t)):(r.next=s.next,s.next=r),t.interleaved=r,Zi(e,n)}function Zi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vo=!1;function k0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,cn&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Zi(e,r)}return s=n.interleaved,s===null?(t.next=t,E0(n)):(t.next=s.next,s.next=t),n.interleaved=t,Zi(e,r)}function Ih(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,d0(e,r)}}function C_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=h:a=a.next=h,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ff(e,t,r,n){var s=e.updateQueue;Vo=!1;var a=s.firstBaseUpdate,h=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var u=p,i=u.next;u.next=null,h===null?a=i:h.next=i,h=u;var g=e.alternate;g!==null&&(g=g.updateQueue,p=g.lastBaseUpdate,p!==h&&(p===null?g.firstBaseUpdate=i:p.next=i,g.lastBaseUpdate=u))}if(a!==null){var _=s.baseState;h=0,g=i=u=null,p=a;do{var f=p.lane,o=p.eventTime;if((n&f)===f){g!==null&&(g=g.next={eventTime:o,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var w=e,l=p;switch(f=t,o=r,l.tag){case 1:if(w=l.payload,typeof w=="function"){_=w.call(o,_,f);break e}_=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=l.payload,f=typeof w=="function"?w.call(o,_,f):w,f==null)break e;_=rs({},_,f);break e;case 2:Vo=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[p]:f.push(p))}else o={eventTime:o,lane:f,tag:p.tag,payload:p.payload,callback:p.callback,next:null},g===null?(i=g=o,u=_):g=g.next=o,h|=f;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;f=p,p=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(g===null&&(u=_),s.baseState=u,s.firstBaseUpdate=i,s.lastBaseUpdate=g,t=s.shared.interleaved,t!==null){s=t;do h|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);ul|=h,e.lanes=h,e.memoizedState=_}}function T_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(wt(191,s));s.call(n)}}}var hp={},Ri=hc(hp),Jd=hc(hp),Xd=hc(hp);function Xc(e){if(e===hp)throw Error(wt(174));return e}function C0(e,t){switch(Mn(Xd,t),Mn(Jd,e),Mn(Ri,hp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Dg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Dg(t,e)}$n(Ri),Mn(Ri,t)}function Eu(){$n(Ri),$n(Jd),$n(Xd)}function M1(e){Xc(Xd.current);var t=Xc(Ri.current),r=Dg(t,e.type);t!==r&&(Mn(Jd,e),Mn(Ri,r))}function T0(e){Jd.current===e&&($n(Ri),$n(Jd))}var Zn=hc(0);function mf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hm=[];function P0(){for(var e=0;e<Hm.length;e++)Hm[e]._workInProgressVersionPrimary=null;Hm.length=0}var Dh=so.ReactCurrentDispatcher,qm=so.ReactCurrentBatchConfig,ll=0,ts=null,ws=null,Ps=null,gf=!1,Ld=!1,Zd=0,UC=0;function Ks(){throw Error(wt(321))}function O0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ci(e[r],t[r]))return!1;return!0}function N0(e,t,r,n,s,a){if(ll=a,ts=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dh.current=e===null||e.memoizedState===null?zC:HC,e=r(n,s),Ld){a=0;do{if(Ld=!1,Zd=0,25<=a)throw Error(wt(301));a+=1,Ps=ws=null,t.updateQueue=null,Dh.current=qC,e=r(n,s)}while(Ld)}if(Dh.current=vf,t=ws!==null&&ws.next!==null,ll=0,Ps=ws=ts=null,gf=!1,t)throw Error(wt(300));return e}function A0(){var e=Zd!==0;return Zd=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?ts.memoizedState=Ps=e:Ps=Ps.next=e,Ps}function Ya(){if(ws===null){var e=ts.alternate;e=e!==null?e.memoizedState:null}else e=ws.next;var t=Ps===null?ts.memoizedState:Ps.next;if(t!==null)Ps=t,ws=e;else{if(e===null)throw Error(wt(310));ws=e,e={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},Ps===null?ts.memoizedState=Ps=e:Ps=Ps.next=e}return Ps}function ep(e,t){return typeof t=="function"?t(e):t}function Km(e){var t=Ya(),r=t.queue;if(r===null)throw Error(wt(311));r.lastRenderedReducer=e;var n=ws,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var h=s.next;s.next=a.next,a.next=h}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var p=h=null,u=null,i=a;do{var g=i.lane;if((ll&g)===g)u!==null&&(u=u.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),n=i.hasEagerState?i.eagerState:e(n,i.action);else{var _={lane:g,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};u===null?(p=u=_,h=n):u=u.next=_,ts.lanes|=g,ul|=g}i=i.next}while(i!==null&&i!==a);u===null?h=n:u.next=p,ci(n,t.memoizedState)||(fa=!0),t.memoizedState=n,t.baseState=h,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ts.lanes|=a,ul|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gm(e){var t=Ya(),r=t.queue;if(r===null)throw Error(wt(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var h=s=s.next;do a=e(a,h.action),h=h.next;while(h!==s);ci(a,t.memoizedState)||(fa=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function L1(){}function j1(e,t){var r=ts,n=Ya(),s=t(),a=!ci(n.memoizedState,s);if(a&&(n.memoizedState=s,fa=!0),n=n.queue,I0(U1.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ps!==null&&Ps.memoizedState.tag&1){if(r.flags|=2048,tp(9,F1.bind(null,r,n,s,t),void 0,null),Os===null)throw Error(wt(349));ll&30||B1(r,t,s)}return s}function B1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ts.updateQueue,t===null?(t={lastEffect:null,stores:null},ts.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function F1(e,t,r,n){t.value=r,t.getSnapshot=n,$1(t)&&W1(e)}function U1(e,t,r){return r(function(){$1(t)&&W1(e)})}function $1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ci(e,r)}catch{return!0}}function W1(e){var t=Zi(e,1);t!==null&&oi(t,e,1,-1)}function P_(e){var t=yi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:e},t.queue=e,e=e.dispatch=VC.bind(null,ts,e),[t.memoizedState,e]}function tp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ts.updateQueue,t===null?(t={lastEffect:null,stores:null},ts.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function V1(){return Ya().memoizedState}function Mh(e,t,r,n){var s=yi();ts.flags|=e,s.memoizedState=tp(1|t,r,void 0,n===void 0?null:n)}function qf(e,t,r,n){var s=Ya();n=n===void 0?null:n;var a=void 0;if(ws!==null){var h=ws.memoizedState;if(a=h.destroy,n!==null&&O0(n,h.deps)){s.memoizedState=tp(t,r,a,n);return}}ts.flags|=e,s.memoizedState=tp(1|t,r,a,n)}function O_(e,t){return Mh(8390656,8,e,t)}function I0(e,t){return qf(2048,8,e,t)}function z1(e,t){return qf(4,2,e,t)}function H1(e,t){return qf(4,4,e,t)}function q1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K1(e,t,r){return r=r!=null?r.concat([e]):null,qf(4,4,q1.bind(null,t,e),r)}function D0(){}function G1(e,t){var r=Ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Y1(e,t){var r=Ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Q1(e,t,r){return ll&21?(ci(r,t)||(r=t1(),ts.lanes|=r,ul|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fa=!0),e.memoizedState=r)}function $C(e,t){var r=_n;_n=r!==0&&4>r?r:4,e(!0);var n=qm.transition;qm.transition={};try{e(!1),t()}finally{_n=r,qm.transition=n}}function J1(){return Ya().memoizedState}function WC(e,t,r){var n=nc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},X1(e))Z1(t,r);else if(r=I1(e,t,r,n),r!==null){var s=na();oi(r,e,n,s),eS(r,t,n)}}function VC(e,t,r){var n=nc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(X1(e))Z1(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var h=t.lastRenderedState,p=a(h,r);if(s.hasEagerState=!0,s.eagerState=p,ci(p,h)){var u=t.interleaved;u===null?(s.next=s,E0(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=I1(e,t,s,n),r!==null&&(s=na(),oi(r,e,n,s),eS(r,t,n))}}function X1(e){var t=e.alternate;return e===ts||t!==null&&t===ts}function Z1(e,t){Ld=gf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eS(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,d0(e,r)}}var vf={readContext:Ga,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},zC={readContext:Ga,useCallback:function(e,t){return yi().memoizedState=[e,t===void 0?null:t],e},useContext:Ga,useEffect:O_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mh(4194308,4,q1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mh(4,2,e,t)},useMemo:function(e,t){var r=yi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=WC.bind(null,ts,e),[n.memoizedState,e]},useRef:function(e){var t=yi();return e={current:e},t.memoizedState=e},useState:P_,useDebugValue:D0,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=P_(!1),t=e[0];return e=$C.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ts,s=yi();if(Kn){if(r===void 0)throw Error(wt(407));r=r()}else{if(r=t(),Os===null)throw Error(wt(349));ll&30||B1(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,O_(U1.bind(null,n,a,e),[e]),n.flags|=2048,tp(9,F1.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=yi(),t=Os.identifierPrefix;if(Kn){var r=Ki,n=qi;r=(n&~(1<<32-ii(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=UC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HC={readContext:Ga,useCallback:G1,useContext:Ga,useEffect:I0,useImperativeHandle:K1,useInsertionEffect:z1,useLayoutEffect:H1,useMemo:Y1,useReducer:Km,useRef:V1,useState:function(){return Km(ep)},useDebugValue:D0,useDeferredValue:function(e){var t=Ya();return Q1(t,ws.memoizedState,e)},useTransition:function(){var e=Km(ep)[0],t=Ya().memoizedState;return[e,t]},useMutableSource:L1,useSyncExternalStore:j1,useId:J1,unstable_isNewReconciler:!1},qC={readContext:Ga,useCallback:G1,useContext:Ga,useEffect:I0,useImperativeHandle:K1,useInsertionEffect:z1,useLayoutEffect:H1,useMemo:Y1,useReducer:Gm,useRef:V1,useState:function(){return Gm(ep)},useDebugValue:D0,useDeferredValue:function(e){var t=Ya();return ws===null?t.memoizedState=e:Q1(t,ws.memoizedState,e)},useTransition:function(){var e=Gm(ep)[0],t=Ya().memoizedState;return[e,t]},useMutableSource:L1,useSyncExternalStore:j1,useId:J1,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){t=rs({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:rs({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Kf={isMounted:function(e){return(e=e._reactInternals)?bl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=na(),s=nc(e),a=Yi(n,s);a.payload=t,r!=null&&(a.callback=r),t=tc(e,a,s),t!==null&&(oi(t,e,s,n),Ih(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=na(),s=nc(e),a=Yi(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=tc(e,a,s),t!==null&&(oi(t,e,s,n),Ih(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=na(),n=nc(e),s=Yi(r,n);s.tag=2,t!=null&&(s.callback=t),t=tc(e,s,n),t!==null&&(oi(t,e,n,r),Ih(t,e,n))}};function N_(e,t,r,n,s,a,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,h):t.prototype&&t.prototype.isPureReactComponent?!Kd(r,n)||!Kd(s,a):!0}function tS(e,t,r){var n=!1,s=lc,a=t.contextType;return typeof a=="object"&&a!==null?a=Ga(a):(s=ga(t)?ol:Js.current,n=t.contextTypes,a=(n=n!=null)?Su(e,s):lc),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function A_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Kf.enqueueReplaceState(t,t.state,null)}function rv(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},k0(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Ga(a):(a=ga(t)?ol:Js.current,s.context=Su(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(tv(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Kf.enqueueReplaceState(s,s.state,null),ff(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ku(e,t){try{var r="",n=t;do r+=bk(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Ym(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var KC=typeof WeakMap=="function"?WeakMap:Map;function rS(e,t,r){r=Yi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_f||(_f=!0,hv=n),nv(e,t)},r}function nS(e,t,r){r=Yi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){nv(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){nv(e,t),typeof n!="function"&&(rc===null?rc=new Set([this]):rc.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function I_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new KC;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=oT.bind(null,e,t,r),t.then(e,e))}function D_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M_(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yi(-1,1),t.tag=2,tc(r,t,1))),r.lanes|=1),e)}var GC=so.ReactCurrentOwner,fa=!1;function ta(e,t,r,n){t.child=e===null?A1(t,null,r,n):Ru(t,e.child,r,n)}function L_(e,t,r,n,s){r=r.render;var a=t.ref;return fu(t,s),n=N0(e,t,r,n,a,s),r=A0(),e!==null&&!fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,eo(e,t,s)):(Kn&&r&&_0(t),t.flags|=1,ta(e,t,n,s),t.child)}function j_(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!W0(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,sS(e,t,a,n,s)):(e=Fh(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var h=a.memoizedProps;if(r=r.compare,r=r!==null?r:Kd,r(h,n)&&e.ref===t.ref)return eo(e,t,s)}return t.flags|=1,e=sc(a,n),e.ref=t.ref,e.return=t,t.child=e}function sS(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Kd(a,n)&&e.ref===t.ref)if(fa=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(fa=!0);else return t.lanes=e.lanes,eo(e,t,s)}return sv(e,t,r,n,s)}function aS(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(lu,Ra),Ra|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mn(lu,Ra),Ra|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Mn(lu,Ra),Ra|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Mn(lu,Ra),Ra|=n;return ta(e,t,s,r),t.child}function iS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sv(e,t,r,n,s){var a=ga(r)?ol:Js.current;return a=Su(t,a),fu(t,s),r=N0(e,t,r,n,a,s),n=A0(),e!==null&&!fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,eo(e,t,s)):(Kn&&n&&_0(t),t.flags|=1,ta(e,t,r,s),t.child)}function B_(e,t,r,n,s){if(ga(r)){var a=!0;lf(t)}else a=!1;if(fu(t,s),t.stateNode===null)Lh(e,t),tS(t,r,n),rv(t,r,n,s),n=!0;else if(e===null){var h=t.stateNode,p=t.memoizedProps;h.props=p;var u=h.context,i=r.contextType;typeof i=="object"&&i!==null?i=Ga(i):(i=ga(r)?ol:Js.current,i=Su(t,i));var g=r.getDerivedStateFromProps,_=typeof g=="function"||typeof h.getSnapshotBeforeUpdate=="function";_||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==n||u!==i)&&A_(t,h,n,i),Vo=!1;var f=t.memoizedState;h.state=f,ff(t,n,h,s),u=t.memoizedState,p!==n||f!==u||ma.current||Vo?(typeof g=="function"&&(tv(t,r,g,n),u=t.memoizedState),(p=Vo||N_(t,r,p,n,f,u,i))?(_||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),h.props=n,h.state=u,h.context=i,n=p):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,D1(e,t),p=t.memoizedProps,i=t.type===t.elementType?p:ri(t.type,p),h.props=i,_=t.pendingProps,f=h.context,u=r.contextType,typeof u=="object"&&u!==null?u=Ga(u):(u=ga(r)?ol:Js.current,u=Su(t,u));var o=r.getDerivedStateFromProps;(g=typeof o=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==_||f!==u)&&A_(t,h,n,u),Vo=!1,f=t.memoizedState,h.state=f,ff(t,n,h,s);var w=t.memoizedState;p!==_||f!==w||ma.current||Vo?(typeof o=="function"&&(tv(t,r,o,n),w=t.memoizedState),(i=Vo||N_(t,r,i,n,f,w,u)||!1)?(g||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,w,u),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,w,u)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),h.props=n,h.state=w,h.context=u,n=i):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return av(e,t,r,n,a,s)}function av(e,t,r,n,s,a){iS(e,t);var h=(t.flags&128)!==0;if(!n&&!h)return s&&x_(t,r,!1),eo(e,t,a);n=t.stateNode,GC.current=t;var p=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=Ru(t,e.child,null,a),t.child=Ru(t,null,p,a)):ta(e,t,p,a),t.memoizedState=n.state,s&&x_(t,r,!0),t.child}function oS(e){var t=e.stateNode;t.pendingContext?S_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&S_(e,t.context,!1),C0(e,t.containerInfo)}function F_(e,t,r,n,s){return xu(),w0(s),t.flags|=256,ta(e,t,r,n),t.child}var iv={dehydrated:null,treeContext:null,retryLane:0};function ov(e){return{baseLanes:e,cachePool:null,transitions:null}}function cS(e,t,r){var n=t.pendingProps,s=Zn.current,a=!1,h=(t.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(s&2)!==0),p?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Mn(Zn,s&1),e===null)return Zg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=n.children,e=n.fallback,a?(n=t.mode,a=t.child,h={mode:"hidden",children:h},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=h):a=Qf(h,n,0,null),e=nl(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ov(r),t.memoizedState=iv,e):M0(t,h));if(s=e.memoizedState,s!==null&&(p=s.dehydrated,p!==null))return YC(e,t,h,n,p,s,r);if(a){a=n.fallback,h=t.mode,s=e.child,p=s.sibling;var u={mode:"hidden",children:n.children};return!(h&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=sc(s,u),n.subtreeFlags=s.subtreeFlags&14680064),p!==null?a=sc(p,a):(a=nl(a,h,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,h=e.child.memoizedState,h=h===null?ov(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},a.memoizedState=h,a.childLanes=e.childLanes&~r,t.memoizedState=iv,n}return a=e.child,e=a.sibling,n=sc(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function M0(e,t){return t=Qf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hh(e,t,r,n){return n!==null&&w0(n),Ru(t,e.child,null,r),e=M0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YC(e,t,r,n,s,a,h){if(r)return t.flags&256?(t.flags&=-257,n=Ym(Error(wt(422))),hh(e,t,h,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Qf({mode:"visible",children:n.children},s,0,null),a=nl(a,s,h,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Ru(t,e.child,null,h),t.child.memoizedState=ov(h),t.memoizedState=iv,a);if(!(t.mode&1))return hh(e,t,h,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var p=n.dgst;return n=p,a=Error(wt(419)),n=Ym(a,n,void 0),hh(e,t,h,n)}if(p=(h&e.childLanes)!==0,fa||p){if(n=Os,n!==null){switch(h&-h){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|h)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zi(e,s),oi(n,e,s,-1))}return $0(),n=Ym(Error(wt(421))),hh(e,t,h,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=cT.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ka=ec(s.nextSibling),Ca=t,Kn=!0,ai=null,e!==null&&(Va[za++]=qi,Va[za++]=Ki,Va[za++]=cl,qi=e.id,Ki=e.overflow,cl=t),t=M0(t,n.children),t.flags|=4096,t)}function U_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ev(e.return,t,r)}function Qm(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function lS(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(ta(e,t,n.children,r),n=Zn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U_(e,r,t);else if(e.tag===19)U_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Mn(Zn,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&mf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Qm(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&mf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Qm(t,!0,r,null,a);break;case"together":Qm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function eo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ul|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(wt(153));if(t.child!==null){for(e=t.child,r=sc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=sc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function QC(e,t,r){switch(t.tag){case 3:oS(t),xu();break;case 5:M1(t);break;case 1:ga(t.type)&&lf(t);break;case 4:C0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Mn(pf,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Mn(Zn,Zn.current&1),t.flags|=128,null):r&t.child.childLanes?cS(e,t,r):(Mn(Zn,Zn.current&1),e=eo(e,t,r),e!==null?e.sibling:null);Mn(Zn,Zn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return lS(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mn(Zn,Zn.current),n)break;return null;case 22:case 23:return t.lanes=0,aS(e,t,r)}return eo(e,t,r)}var uS,cv,dS,pS;uS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cv=function(){};dS=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Xc(Ri.current);var a=null;switch(r){case"input":s=Og(e,s),n=Og(e,n),a=[];break;case"select":s=rs({},s,{value:void 0}),n=rs({},n,{value:void 0}),a=[];break;case"textarea":s=Ig(e,s),n=Ig(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=of)}Mg(r,n);var h;r=null;for(i in s)if(!n.hasOwnProperty(i)&&s.hasOwnProperty(i)&&s[i]!=null)if(i==="style"){var p=s[i];for(h in p)p.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else i!=="dangerouslySetInnerHTML"&&i!=="children"&&i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ud.hasOwnProperty(i)?a||(a=[]):(a=a||[]).push(i,null));for(i in n){var u=n[i];if(p=s!=null?s[i]:void 0,n.hasOwnProperty(i)&&u!==p&&(u!=null||p!=null))if(i==="style")if(p){for(h in p)!p.hasOwnProperty(h)||u&&u.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in u)u.hasOwnProperty(h)&&p[h]!==u[h]&&(r||(r={}),r[h]=u[h])}else r||(a||(a=[]),a.push(i,r)),r=u;else i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,p=p?p.__html:void 0,u!=null&&p!==u&&(a=a||[]).push(i,u)):i==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(i,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(i)?(u!=null&&i==="onScroll"&&Un("scroll",e),a||p===u||(a=[])):(a=a||[]).push(i,u))}r&&(a=a||[]).push("style",r);var i=a;(t.updateQueue=i)&&(t.flags|=4)}};pS=function(e,t,r,n){r!==n&&(t.flags|=4)};function _d(e,t){if(!Kn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function JC(e,t,r){var n=t.pendingProps;switch(b0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:return ga(t.type)&&cf(),Gs(t),null;case 3:return n=t.stateNode,Eu(),$n(ma),$n(Js),P0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(dh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ai!==null&&(gv(ai),ai=null))),cv(e,t),Gs(t),null;case 5:T0(t);var s=Xc(Xd.current);if(r=t.type,e!==null&&t.stateNode!=null)dS(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(wt(166));return Gs(t),null}if(e=Xc(Ri.current),dh(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[_i]=t,n[Qd]=a,e=(t.mode&1)!==0,r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(s=0;s<Td.length;s++)Un(Td[s],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Yy(n,a),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Un("invalid",n);break;case"textarea":Jy(n,a),Un("invalid",n)}Mg(r,a),s=null;for(var h in a)if(a.hasOwnProperty(h)){var p=a[h];h==="children"?typeof p=="string"?n.textContent!==p&&(a.suppressHydrationWarning!==!0&&uh(n.textContent,p,e),s=["children",p]):typeof p=="number"&&n.textContent!==""+p&&(a.suppressHydrationWarning!==!0&&uh(n.textContent,p,e),s=["children",""+p]):Ud.hasOwnProperty(h)&&p!=null&&h==="onScroll"&&Un("scroll",n)}switch(r){case"input":rh(n),Qy(n,a,!0);break;case"textarea":rh(n),Xy(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=of)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{h=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[_i]=t,e[Qd]=n,uS(e,t,!1,!1),t.stateNode=e;e:{switch(h=Lg(r,n),r){case"dialog":Un("cancel",e),Un("close",e),s=n;break;case"iframe":case"object":case"embed":Un("load",e),s=n;break;case"video":case"audio":for(s=0;s<Td.length;s++)Un(Td[s],e);s=n;break;case"source":Un("error",e),s=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),s=n;break;case"details":Un("toggle",e),s=n;break;case"input":Yy(e,n),s=Og(e,n),Un("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=rs({},n,{value:void 0}),Un("invalid",e);break;case"textarea":Jy(e,n),s=Ig(e,n),Un("invalid",e);break;default:s=n}Mg(r,s),p=s;for(a in p)if(p.hasOwnProperty(a)){var u=p[a];a==="style"?Vw(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$w(e,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&$d(e,u):typeof u=="number"&&$d(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ud.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Un("scroll",e):u!=null&&a0(e,a,u,h))}switch(r){case"input":rh(e),Qy(e,n,!1);break;case"textarea":rh(e),Xy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+cc(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?uu(e,!!n.multiple,a,!1):n.defaultValue!=null&&uu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=of)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&t.stateNode!=null)pS(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(wt(166));if(r=Xc(Xd.current),Xc(Ri.current),dh(t)){if(n=t.stateNode,r=t.memoizedProps,n[_i]=t,(a=n.nodeValue!==r)&&(e=Ca,e!==null))switch(e.tag){case 3:uh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&uh(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_i]=t,t.stateNode=n}return Gs(t),null;case 13:if($n(Zn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Kn&&ka!==null&&t.mode&1&&!(t.flags&128))O1(),xu(),t.flags|=98560,a=!1;else if(a=dh(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(wt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(wt(317));a[_i]=t}else xu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else ai!==null&&(gv(ai),ai=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Zn.current&1?Ss===0&&(Ss=3):$0())),t.updateQueue!==null&&(t.flags|=4),Gs(t),null);case 4:return Eu(),cv(e,t),e===null&&Gd(t.stateNode.containerInfo),Gs(t),null;case 10:return R0(t.type._context),Gs(t),null;case 17:return ga(t.type)&&cf(),Gs(t),null;case 19:if($n(Zn),a=t.memoizedState,a===null)return Gs(t),null;if(n=(t.flags&128)!==0,h=a.rendering,h===null)if(n)_d(a,!1);else{if(Ss!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=mf(e),h!==null){for(t.flags|=128,_d(a,!1),n=h.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,h=a.alternate,h===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,e=h.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Mn(Zn,Zn.current&1|2),t.child}e=e.sibling}a.tail!==null&&ls()>Cu&&(t.flags|=128,n=!0,_d(a,!1),t.lanes=4194304)}else{if(!n)if(e=mf(h),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_d(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!Kn)return Gs(t),null}else 2*ls()-a.renderingStartTime>Cu&&r!==1073741824&&(t.flags|=128,n=!0,_d(a,!1),t.lanes=4194304);a.isBackwards?(h.sibling=t.child,t.child=h):(r=a.last,r!==null?r.sibling=h:t.child=h,a.last=h)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ls(),t.sibling=null,r=Zn.current,Mn(Zn,n?r&1|2:r&1),t):(Gs(t),null);case 22:case 23:return U0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ra&1073741824&&(Gs(t),t.subtreeFlags&6&&(t.flags|=8192)):Gs(t),null;case 24:return null;case 25:return null}throw Error(wt(156,t.tag))}function XC(e,t){switch(b0(t),t.tag){case 1:return ga(t.type)&&cf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eu(),$n(ma),$n(Js),P0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return T0(t),null;case 13:if($n(Zn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(wt(340));xu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $n(Zn),null;case 4:return Eu(),null;case 10:return R0(t.type._context),null;case 22:case 23:return U0(),null;case 24:return null;default:return null}}var fh=!1,Ys=!1,ZC=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function cu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ss(e,t,n)}else r.current=null}function lv(e,t,r){try{r()}catch(n){ss(e,t,n)}}var $_=!1;function eT(e,t){if(qg=nf,e=v1(),y0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var h=0,p=-1,u=-1,i=0,g=0,_=e,f=null;t:for(;;){for(var o;_!==r||s!==0&&_.nodeType!==3||(p=h+s),_!==a||n!==0&&_.nodeType!==3||(u=h+n),_.nodeType===3&&(h+=_.nodeValue.length),(o=_.firstChild)!==null;)f=_,_=o;for(;;){if(_===e)break t;if(f===r&&++i===s&&(p=h),f===a&&++g===n&&(u=h),(o=_.nextSibling)!==null)break;_=f,f=_.parentNode}_=o}r=p===-1||u===-1?null:{start:p,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kg={focusedElem:e,selectionRange:r},nf=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var l=w.memoizedProps,y=w.memoizedState,d=t.stateNode,m=d.getSnapshotBeforeUpdate(t.elementType===t.type?l:ri(t.type,l),y);d.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(wt(163))}}catch(x){ss(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return w=$_,$_=!1,w}function jd(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&lv(t,r,a)}s=s.next}while(s!==n)}}function Gf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function uv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hS(e){var t=e.alternate;t!==null&&(e.alternate=null,hS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_i],delete t[Qd],delete t[Qg],delete t[LC],delete t[jC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fS(e){return e.tag===5||e.tag===3||e.tag===4}function W_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=of));else if(n!==4&&(e=e.child,e!==null))for(dv(e,t,r),e=e.sibling;e!==null;)dv(e,t,r),e=e.sibling}function pv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pv(e,t,r),e=e.sibling;e!==null;)pv(e,t,r),e=e.sibling}var js=null,ni=!1;function jo(e,t,r){for(r=r.child;r!==null;)mS(e,t,r),r=r.sibling}function mS(e,t,r){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(Uf,r)}catch{}switch(r.tag){case 5:Ys||cu(r,t);case 6:var n=js,s=ni;js=null,jo(e,t,r),js=n,ni=s,js!==null&&(ni?(e=js,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):js.removeChild(r.stateNode));break;case 18:js!==null&&(ni?(e=js,r=r.stateNode,e.nodeType===8?Vm(e.parentNode,r):e.nodeType===1&&Vm(e,r),Hd(e)):Vm(js,r.stateNode));break;case 4:n=js,s=ni,js=r.stateNode.containerInfo,ni=!0,jo(e,t,r),js=n,ni=s;break;case 0:case 11:case 14:case 15:if(!Ys&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,h=a.destroy;a=a.tag,h!==void 0&&(a&2||a&4)&&lv(r,t,h),s=s.next}while(s!==n)}jo(e,t,r);break;case 1:if(!Ys&&(cu(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(p){ss(r,t,p)}jo(e,t,r);break;case 21:jo(e,t,r);break;case 22:r.mode&1?(Ys=(n=Ys)||r.memoizedState!==null,jo(e,t,r),Ys=n):jo(e,t,r);break;default:jo(e,t,r)}}function V_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ZC),t.forEach(function(n){var s=lT.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Za(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,h=t,p=h;e:for(;p!==null;){switch(p.tag){case 5:js=p.stateNode,ni=!1;break e;case 3:js=p.stateNode.containerInfo,ni=!0;break e;case 4:js=p.stateNode.containerInfo,ni=!0;break e}p=p.return}if(js===null)throw Error(wt(160));mS(a,h,s),js=null,ni=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(i){ss(s,t,i)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gS(t,e),t=t.sibling}function gS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Za(t,e),gi(e),n&4){try{jd(3,e,e.return),Gf(3,e)}catch(l){ss(e,e.return,l)}try{jd(5,e,e.return)}catch(l){ss(e,e.return,l)}}break;case 1:Za(t,e),gi(e),n&512&&r!==null&&cu(r,r.return);break;case 5:if(Za(t,e),gi(e),n&512&&r!==null&&cu(r,r.return),e.flags&32){var s=e.stateNode;try{$d(s,"")}catch(l){ss(e,e.return,l)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,h=r!==null?r.memoizedProps:a,p=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{p==="input"&&a.type==="radio"&&a.name!=null&&Bw(s,a),Lg(p,h);var i=Lg(p,a);for(h=0;h<u.length;h+=2){var g=u[h],_=u[h+1];g==="style"?Vw(s,_):g==="dangerouslySetInnerHTML"?$w(s,_):g==="children"?$d(s,_):a0(s,g,_,i)}switch(p){case"input":Ng(s,a);break;case"textarea":Fw(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var o=a.value;o!=null?uu(s,!!a.multiple,o,!1):f!==!!a.multiple&&(a.defaultValue!=null?uu(s,!!a.multiple,a.defaultValue,!0):uu(s,!!a.multiple,a.multiple?[]:"",!1))}s[Qd]=a}catch(l){ss(e,e.return,l)}}break;case 6:if(Za(t,e),gi(e),n&4){if(e.stateNode===null)throw Error(wt(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(l){ss(e,e.return,l)}}break;case 3:if(Za(t,e),gi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hd(t.containerInfo)}catch(l){ss(e,e.return,l)}break;case 4:Za(t,e),gi(e);break;case 13:Za(t,e),gi(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(B0=ls())),n&4&&V_(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(Ys=(i=Ys)||g,Za(t,e),Ys=i):Za(t,e),gi(e),n&8192){if(i=e.memoizedState!==null,(e.stateNode.isHidden=i)&&!g&&e.mode&1)for(Qt=e,g=e.child;g!==null;){for(_=Qt=g;Qt!==null;){switch(f=Qt,o=f.child,f.tag){case 0:case 11:case 14:case 15:jd(4,f,f.return);break;case 1:cu(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(l){ss(n,r,l)}}break;case 5:cu(f,f.return);break;case 22:if(f.memoizedState!==null){H_(_);continue}}o!==null?(o.return=f,Qt=o):H_(_)}g=g.sibling}e:for(g=null,_=e;;){if(_.tag===5){if(g===null){g=_;try{s=_.stateNode,i?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(p=_.stateNode,u=_.memoizedProps.style,h=u!=null&&u.hasOwnProperty("display")?u.display:null,p.style.display=Ww("display",h))}catch(l){ss(e,e.return,l)}}}else if(_.tag===6){if(g===null)try{_.stateNode.nodeValue=i?"":_.memoizedProps}catch(l){ss(e,e.return,l)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;g===_&&(g=null),_=_.return}g===_&&(g=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Za(t,e),gi(e),n&4&&V_(e);break;case 21:break;default:Za(t,e),gi(e)}}function gi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(fS(r)){var n=r;break e}r=r.return}throw Error(wt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($d(s,""),n.flags&=-33);var a=W_(e);pv(e,a,s);break;case 3:case 4:var h=n.stateNode.containerInfo,p=W_(e);dv(e,p,h);break;default:throw Error(wt(161))}}catch(u){ss(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tT(e,t,r){Qt=e,vS(e)}function vS(e,t,r){for(var n=(e.mode&1)!==0;Qt!==null;){var s=Qt,a=s.child;if(s.tag===22&&n){var h=s.memoizedState!==null||fh;if(!h){var p=s.alternate,u=p!==null&&p.memoizedState!==null||Ys;p=fh;var i=Ys;if(fh=h,(Ys=u)&&!i)for(Qt=s;Qt!==null;)h=Qt,u=h.child,h.tag===22&&h.memoizedState!==null?q_(s):u!==null?(u.return=h,Qt=u):q_(s);for(;a!==null;)Qt=a,vS(a),a=a.sibling;Qt=s,fh=p,Ys=i}z_(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Qt=a):z_(e)}}function z_(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ys||Gf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ys)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&T_(t,a,n);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}T_(t,h,r)}break;case 5:var p=t.stateNode;if(r===null&&t.flags&4){r=p;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var i=t.alternate;if(i!==null){var g=i.memoizedState;if(g!==null){var _=g.dehydrated;_!==null&&Hd(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(wt(163))}Ys||t.flags&512&&uv(t)}catch(f){ss(t,t.return,f)}}if(t===e){Qt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Qt=r;break}Qt=t.return}}function H_(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Qt=r;break}Qt=t.return}}function q_(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gf(4,t)}catch(u){ss(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){ss(t,s,u)}}var a=t.return;try{uv(t)}catch(u){ss(t,a,u)}break;case 5:var h=t.return;try{uv(t)}catch(u){ss(t,h,u)}}}catch(u){ss(t,t.return,u)}if(t===e){Qt=null;break}var p=t.sibling;if(p!==null){p.return=t.return,Qt=p;break}Qt=t.return}}var rT=Math.ceil,yf=so.ReactCurrentDispatcher,L0=so.ReactCurrentOwner,Ka=so.ReactCurrentBatchConfig,cn=0,Os=null,vs=null,Us=0,Ra=0,lu=hc(0),Ss=0,rp=null,ul=0,Yf=0,j0=0,Bd=null,ha=null,B0=0,Cu=1/0,zi=null,_f=!1,hv=null,rc=null,mh=!1,Ko=null,bf=0,Fd=0,fv=null,jh=-1,Bh=0;function na(){return cn&6?ls():jh!==-1?jh:jh=ls()}function nc(e){return e.mode&1?cn&2&&Us!==0?Us&-Us:FC.transition!==null?(Bh===0&&(Bh=t1()),Bh):(e=_n,e!==0||(e=window.event,e=e===void 0?16:c1(e.type)),e):1}function oi(e,t,r,n){if(50<Fd)throw Fd=0,fv=null,Error(wt(185));up(e,r,n),(!(cn&2)||e!==Os)&&(e===Os&&(!(cn&2)&&(Yf|=r),Ss===4&&Ho(e,Us)),va(e,n),r===1&&cn===0&&!(t.mode&1)&&(Cu=ls()+500,Hf&&fc()))}function va(e,t){var r=e.callbackNode;Fk(e,t);var n=rf(e,e===Os?Us:0);if(n===0)r!==null&&t_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&t_(r),t===1)e.tag===0?BC(K_.bind(null,e)):C1(K_.bind(null,e)),DC(function(){!(cn&6)&&fc()}),r=null;else{switch(r1(n)){case 1:r=u0;break;case 4:r=Zw;break;case 16:r=tf;break;case 536870912:r=e1;break;default:r=tf}r=ES(r,yS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function yS(e,t){if(jh=-1,Bh=0,cn&6)throw Error(wt(327));var r=e.callbackNode;if(mu()&&e.callbackNode!==r)return null;var n=rf(e,e===Os?Us:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=wf(e,n);else{t=n;var s=cn;cn|=2;var a=bS();(Os!==e||Us!==t)&&(zi=null,Cu=ls()+500,rl(e,t));do try{aT();break}catch(p){_S(e,p)}while(!0);x0(),yf.current=a,cn=s,vs!==null?t=0:(Os=null,Us=0,t=Ss)}if(t!==0){if(t===2&&(s=$g(e),s!==0&&(n=s,t=mv(e,s))),t===1)throw r=rp,rl(e,0),Ho(e,n),va(e,ls()),r;if(t===6)Ho(e,n);else{if(s=e.current.alternate,!(n&30)&&!nT(s)&&(t=wf(e,n),t===2&&(a=$g(e),a!==0&&(n=a,t=mv(e,a))),t===1))throw r=rp,rl(e,0),Ho(e,n),va(e,ls()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(wt(345));case 2:Gc(e,ha,zi);break;case 3:if(Ho(e,n),(n&130023424)===n&&(t=B0+500-ls(),10<t)){if(rf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){na(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yg(Gc.bind(null,e,ha,zi),t);break}Gc(e,ha,zi);break;case 4:if(Ho(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var h=31-ii(n);a=1<<h,h=t[h],h>s&&(s=h),n&=~a}if(n=s,n=ls()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rT(n/1960))-n,10<n){e.timeoutHandle=Yg(Gc.bind(null,e,ha,zi),n);break}Gc(e,ha,zi);break;case 5:Gc(e,ha,zi);break;default:throw Error(wt(329))}}}return va(e,ls()),e.callbackNode===r?yS.bind(null,e):null}function mv(e,t){var r=Bd;return e.current.memoizedState.isDehydrated&&(rl(e,t).flags|=256),e=wf(e,t),e!==2&&(t=ha,ha=r,t!==null&&gv(t)),e}function gv(e){ha===null?ha=e:ha.push.apply(ha,e)}function nT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ci(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t){for(t&=~j0,t&=~Yf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ii(t),n=1<<r;e[r]=-1,t&=~n}}function K_(e){if(cn&6)throw Error(wt(327));mu();var t=rf(e,0);if(!(t&1))return va(e,ls()),null;var r=wf(e,t);if(e.tag!==0&&r===2){var n=$g(e);n!==0&&(t=n,r=mv(e,n))}if(r===1)throw r=rp,rl(e,0),Ho(e,t),va(e,ls()),r;if(r===6)throw Error(wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gc(e,ha,zi),va(e,ls()),null}function F0(e,t){var r=cn;cn|=1;try{return e(t)}finally{cn=r,cn===0&&(Cu=ls()+500,Hf&&fc())}}function dl(e){Ko!==null&&Ko.tag===0&&!(cn&6)&&mu();var t=cn;cn|=1;var r=Ka.transition,n=_n;try{if(Ka.transition=null,_n=1,e)return e()}finally{_n=n,Ka.transition=r,cn=t,!(cn&6)&&fc()}}function U0(){Ra=lu.current,$n(lu)}function rl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,IC(r)),vs!==null)for(r=vs.return;r!==null;){var n=r;switch(b0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&cf();break;case 3:Eu(),$n(ma),$n(Js),P0();break;case 5:T0(n);break;case 4:Eu();break;case 13:$n(Zn);break;case 19:$n(Zn);break;case 10:R0(n.type._context);break;case 22:case 23:U0()}r=r.return}if(Os=e,vs=e=sc(e.current,null),Us=Ra=t,Ss=0,rp=null,j0=Yf=ul=0,ha=Bd=null,Jc!==null){for(t=0;t<Jc.length;t++)if(r=Jc[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var h=a.next;a.next=s,n.next=h}r.pending=n}Jc=null}return e}function _S(e,t){do{var r=vs;try{if(x0(),Dh.current=vf,gf){for(var n=ts.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}gf=!1}if(ll=0,Ps=ws=ts=null,Ld=!1,Zd=0,L0.current=null,r===null||r.return===null){Ss=1,rp=t,vs=null;break}e:{var a=e,h=r.return,p=r,u=t;if(t=Us,p.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var i=u,g=p,_=g.tag;if(!(g.mode&1)&&(_===0||_===11||_===15)){var f=g.alternate;f?(g.updateQueue=f.updateQueue,g.memoizedState=f.memoizedState,g.lanes=f.lanes):(g.updateQueue=null,g.memoizedState=null)}var o=D_(h);if(o!==null){o.flags&=-257,M_(o,h,p,a,t),o.mode&1&&I_(a,i,t),t=o,u=i;var w=t.updateQueue;if(w===null){var l=new Set;l.add(u),t.updateQueue=l}else w.add(u);break e}else{if(!(t&1)){I_(a,i,t),$0();break e}u=Error(wt(426))}}else if(Kn&&p.mode&1){var y=D_(h);if(y!==null){!(y.flags&65536)&&(y.flags|=256),M_(y,h,p,a,t),w0(ku(u,p));break e}}a=u=ku(u,p),Ss!==4&&(Ss=2),Bd===null?Bd=[a]:Bd.push(a),a=h;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var d=rS(a,u,t);C_(a,d);break e;case 1:p=u;var m=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(rc===null||!rc.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var x=nS(a,p,t);C_(a,x);break e}}a=a.return}while(a!==null)}SS(r)}catch(k){t=k,vs===r&&r!==null&&(vs=r=r.return);continue}break}while(!0)}function bS(){var e=yf.current;return yf.current=vf,e===null?vf:e}function $0(){(Ss===0||Ss===3||Ss===2)&&(Ss=4),Os===null||!(ul&268435455)&&!(Yf&268435455)||Ho(Os,Us)}function wf(e,t){var r=cn;cn|=2;var n=bS();(Os!==e||Us!==t)&&(zi=null,rl(e,t));do try{sT();break}catch(s){_S(e,s)}while(!0);if(x0(),cn=r,yf.current=n,vs!==null)throw Error(wt(261));return Os=null,Us=0,Ss}function sT(){for(;vs!==null;)wS(vs)}function aT(){for(;vs!==null&&!Ok();)wS(vs)}function wS(e){var t=RS(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,t===null?SS(e):vs=t,L0.current=null}function SS(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=XC(r,t),r!==null){r.flags&=32767,vs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ss=6,vs=null;return}}else if(r=JC(r,t,Ra),r!==null){vs=r;return}if(t=t.sibling,t!==null){vs=t;return}vs=t=e}while(t!==null);Ss===0&&(Ss=5)}function Gc(e,t,r){var n=_n,s=Ka.transition;try{Ka.transition=null,_n=1,iT(e,t,r,n)}finally{Ka.transition=s,_n=n}return null}function iT(e,t,r,n){do mu();while(Ko!==null);if(cn&6)throw Error(wt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(wt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Uk(e,a),e===Os&&(vs=Os=null,Us=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mh||(mh=!0,ES(tf,function(){return mu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ka.transition,Ka.transition=null;var h=_n;_n=1;var p=cn;cn|=4,L0.current=null,eT(e,r),gS(r,e),kC(Kg),nf=!!qg,Kg=qg=null,e.current=r,tT(r),Nk(),cn=p,_n=h,Ka.transition=a}else e.current=r;if(mh&&(mh=!1,Ko=e,bf=s),a=e.pendingLanes,a===0&&(rc=null),Dk(r.stateNode),va(e,ls()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(_f)throw _f=!1,e=hv,hv=null,e;return bf&1&&e.tag!==0&&mu(),a=e.pendingLanes,a&1?e===fv?Fd++:(Fd=0,fv=e):Fd=0,fc(),null}function mu(){if(Ko!==null){var e=r1(bf),t=Ka.transition,r=_n;try{if(Ka.transition=null,_n=16>e?16:e,Ko===null)var n=!1;else{if(e=Ko,Ko=null,bf=0,cn&6)throw Error(wt(331));var s=cn;for(cn|=4,Qt=e.current;Qt!==null;){var a=Qt,h=a.child;if(Qt.flags&16){var p=a.deletions;if(p!==null){for(var u=0;u<p.length;u++){var i=p[u];for(Qt=i;Qt!==null;){var g=Qt;switch(g.tag){case 0:case 11:case 15:jd(8,g,a)}var _=g.child;if(_!==null)_.return=g,Qt=_;else for(;Qt!==null;){g=Qt;var f=g.sibling,o=g.return;if(hS(g),g===i){Qt=null;break}if(f!==null){f.return=o,Qt=f;break}Qt=o}}}var w=a.alternate;if(w!==null){var l=w.child;if(l!==null){w.child=null;do{var y=l.sibling;l.sibling=null,l=y}while(l!==null)}}Qt=a}}if(a.subtreeFlags&2064&&h!==null)h.return=a,Qt=h;else e:for(;Qt!==null;){if(a=Qt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:jd(9,a,a.return)}var d=a.sibling;if(d!==null){d.return=a.return,Qt=d;break e}Qt=a.return}}var m=e.current;for(Qt=m;Qt!==null;){h=Qt;var S=h.child;if(h.subtreeFlags&2064&&S!==null)S.return=h,Qt=S;else e:for(h=m;Qt!==null;){if(p=Qt,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Gf(9,p)}}catch(k){ss(p,p.return,k)}if(p===h){Qt=null;break e}var x=p.sibling;if(x!==null){x.return=p.return,Qt=x;break e}Qt=p.return}}if(cn=s,fc(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(Uf,e)}catch{}n=!0}return n}finally{_n=r,Ka.transition=t}}return!1}function G_(e,t,r){t=ku(r,t),t=rS(e,t,1),e=tc(e,t,1),t=na(),e!==null&&(up(e,1,t),va(e,t))}function ss(e,t,r){if(e.tag===3)G_(e,e,r);else for(;t!==null;){if(t.tag===3){G_(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rc===null||!rc.has(n))){e=ku(r,e),e=nS(t,e,1),t=tc(t,e,1),e=na(),t!==null&&(up(t,1,e),va(t,e));break}}t=t.return}}function oT(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=na(),e.pingedLanes|=e.suspendedLanes&r,Os===e&&(Us&r)===r&&(Ss===4||Ss===3&&(Us&130023424)===Us&&500>ls()-B0?rl(e,0):j0|=r),va(e,t)}function xS(e,t){t===0&&(e.mode&1?(t=ah,ah<<=1,!(ah&130023424)&&(ah=4194304)):t=1);var r=na();e=Zi(e,t),e!==null&&(up(e,t,r),va(e,r))}function cT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xS(e,r)}function lT(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(wt(314))}n!==null&&n.delete(t),xS(e,r)}var RS;RS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ma.current)fa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return fa=!1,QC(e,t,r);fa=!!(e.flags&131072)}else fa=!1,Kn&&t.flags&1048576&&T1(t,df,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Lh(e,t),e=t.pendingProps;var s=Su(t,Js.current);fu(t,r),s=N0(null,t,n,e,s,r);var a=A0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(n)?(a=!0,lf(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,k0(t),s.updater=Kf,t.stateNode=s,s._reactInternals=t,rv(t,n,e,r),t=av(null,t,n,!0,a,r)):(t.tag=0,Kn&&a&&_0(t),ta(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Lh(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=dT(n),e=ri(n,e),s){case 0:t=sv(null,t,n,e,r);break e;case 1:t=B_(null,t,n,e,r);break e;case 11:t=L_(null,t,n,e,r);break e;case 14:t=j_(null,t,n,ri(n.type,e),r);break e}throw Error(wt(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ri(n,s),sv(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ri(n,s),B_(e,t,n,s,r);case 3:e:{if(oS(t),e===null)throw Error(wt(387));n=t.pendingProps,a=t.memoizedState,s=a.element,D1(e,t),ff(t,n,null,r);var h=t.memoizedState;if(n=h.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ku(Error(wt(423)),t),t=F_(e,t,n,r,s);break e}else if(n!==s){s=ku(Error(wt(424)),t),t=F_(e,t,n,r,s);break e}else for(ka=ec(t.stateNode.containerInfo.firstChild),Ca=t,Kn=!0,ai=null,r=A1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xu(),n===s){t=eo(e,t,r);break e}ta(e,t,n,r)}t=t.child}return t;case 5:return M1(t),e===null&&Zg(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,h=s.children,Gg(n,s)?h=null:a!==null&&Gg(n,a)&&(t.flags|=32),iS(e,t),ta(e,t,h,r),t.child;case 6:return e===null&&Zg(t),null;case 13:return cS(e,t,r);case 4:return C0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ru(t,null,n,r):ta(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ri(n,s),L_(e,t,n,s,r);case 7:return ta(e,t,t.pendingProps,r),t.child;case 8:return ta(e,t,t.pendingProps.children,r),t.child;case 12:return ta(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,h=s.value,Mn(pf,n._currentValue),n._currentValue=h,a!==null)if(ci(a.value,h)){if(a.children===s.children&&!ma.current){t=eo(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var p=a.dependencies;if(p!==null){h=a.child;for(var u=p.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=Yi(-1,r&-r),u.tag=2;var i=a.updateQueue;if(i!==null){i=i.shared;var g=i.pending;g===null?u.next=u:(u.next=g.next,g.next=u),i.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),ev(a.return,r,t),p.lanes|=r;break}u=u.next}}else if(a.tag===10)h=a.type===t.type?null:a.child;else if(a.tag===18){if(h=a.return,h===null)throw Error(wt(341));h.lanes|=r,p=h.alternate,p!==null&&(p.lanes|=r),ev(h,r,t),h=a.sibling}else h=a.child;if(h!==null)h.return=a;else for(h=a;h!==null;){if(h===t){h=null;break}if(a=h.sibling,a!==null){a.return=h.return,h=a;break}h=h.return}a=h}ta(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,fu(t,r),s=Ga(s),n=n(s),t.flags|=1,ta(e,t,n,r),t.child;case 14:return n=t.type,s=ri(n,t.pendingProps),s=ri(n.type,s),j_(e,t,n,s,r);case 15:return sS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ri(n,s),Lh(e,t),t.tag=1,ga(n)?(e=!0,lf(t)):e=!1,fu(t,r),tS(t,n,s),rv(t,n,s,r),av(null,t,n,!0,e,r);case 19:return lS(e,t,r);case 22:return aS(e,t,r)}throw Error(wt(156,t.tag))};function ES(e,t){return Xw(e,t)}function uT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(e,t,r,n){return new uT(e,t,r,n)}function W0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dT(e){if(typeof e=="function")return W0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===o0)return 11;if(e===c0)return 14}return 2}function sc(e,t){var r=e.alternate;return r===null?(r=qa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Fh(e,t,r,n,s,a){var h=2;if(n=e,typeof e=="function")W0(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Zl:return nl(r.children,s,a,t);case i0:h=8,s|=8;break;case kg:return e=qa(12,r,t,s|2),e.elementType=kg,e.lanes=a,e;case Cg:return e=qa(13,r,t,s),e.elementType=Cg,e.lanes=a,e;case Tg:return e=qa(19,r,t,s),e.elementType=Tg,e.lanes=a,e;case Mw:return Qf(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Iw:h=10;break e;case Dw:h=9;break e;case o0:h=11;break e;case c0:h=14;break e;case Wo:h=16,n=null;break e}throw Error(wt(130,e==null?e:typeof e,""))}return t=qa(h,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function nl(e,t,r,n){return e=qa(7,e,n,t),e.lanes=r,e}function Qf(e,t,r,n){return e=qa(22,e,n,t),e.elementType=Mw,e.lanes=r,e.stateNode={isHidden:!1},e}function Jm(e,t,r){return e=qa(6,e,null,t),e.lanes=r,e}function Xm(e,t,r){return t=qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pT(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Am(0),this.expirationTimes=Am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Am(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function V0(e,t,r,n,s,a,h,p,u){return e=new pT(e,t,r,p,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=qa(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},k0(a),e}function hT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function kS(e){if(!e)return lc;e=e._reactInternals;e:{if(bl(e)!==e||e.tag!==1)throw Error(wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ga(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(wt(171))}if(e.tag===1){var r=e.type;if(ga(r))return k1(e,r,t)}return t}function CS(e,t,r,n,s,a,h,p,u){return e=V0(r,n,!0,e,s,a,h,p,u),e.context=kS(null),r=e.current,n=na(),s=nc(r),a=Yi(n,s),a.callback=t??null,tc(r,a,s),e.current.lanes=s,up(e,s,n),va(e,n),e}function Jf(e,t,r,n){var s=t.current,a=na(),h=nc(s);return r=kS(r),t.context===null?t.context=r:t.pendingContext=r,t=Yi(a,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=tc(s,t,h),e!==null&&(oi(e,s,h,a),Ih(e,s,h)),h}function Sf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function z0(e,t){Y_(e,t),(e=e.alternate)&&Y_(e,t)}function fT(){return null}var TS=typeof reportError=="function"?reportError:function(e){console.error(e)};function H0(e){this._internalRoot=e}Xf.prototype.render=H0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(wt(409));Jf(e,t,null,null)};Xf.prototype.unmount=H0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dl(function(){Jf(null,e,null,null)}),t[Xi]=null}};function Xf(e){this._internalRoot=e}Xf.prototype.unstable_scheduleHydration=function(e){if(e){var t=a1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zo.length&&t!==0&&t<zo[r].priority;r++);zo.splice(r,0,e),r===0&&o1(e)}};function q0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function mT(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var i=Sf(h);a.call(i)}}var h=CS(t,n,e,0,null,!1,!1,"",Q_);return e._reactRootContainer=h,e[Xi]=h.current,Gd(e.nodeType===8?e.parentNode:e),dl(),h}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var p=n;n=function(){var i=Sf(u);p.call(i)}}var u=V0(e,0,!1,null,null,!1,!1,"",Q_);return e._reactRootContainer=u,e[Xi]=u.current,Gd(e.nodeType===8?e.parentNode:e),dl(function(){Jf(t,u,r,n)}),u}function em(e,t,r,n,s){var a=r._reactRootContainer;if(a){var h=a;if(typeof s=="function"){var p=s;s=function(){var u=Sf(h);p.call(u)}}Jf(t,h,e,s)}else h=mT(r,t,e,s,n);return Sf(h)}n1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Cd(t.pendingLanes);r!==0&&(d0(t,r|1),va(t,ls()),!(cn&6)&&(Cu=ls()+500,fc()))}break;case 13:dl(function(){var n=Zi(e,1);if(n!==null){var s=na();oi(n,e,1,s)}}),z0(e,1)}};p0=function(e){if(e.tag===13){var t=Zi(e,134217728);if(t!==null){var r=na();oi(t,e,134217728,r)}z0(e,134217728)}};s1=function(e){if(e.tag===13){var t=nc(e),r=Zi(e,t);if(r!==null){var n=na();oi(r,e,t,n)}z0(e,t)}};a1=function(){return _n};i1=function(e,t){var r=_n;try{return _n=e,t()}finally{_n=r}};Bg=function(e,t,r){switch(t){case"input":if(Ng(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=zf(n);if(!s)throw Error(wt(90));jw(n),Ng(n,s)}}}break;case"textarea":Fw(e,r);break;case"select":t=r.value,t!=null&&uu(e,!!r.multiple,t,!1)}};qw=F0;Kw=dl;var gT={usingClientEntryPoint:!1,Events:[pp,nu,zf,zw,Hw,F0]},bd={findFiberByHostInstance:Qc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vT={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:so.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qw(e),e===null?null:e.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||fT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{Uf=gh.inject(vT),xi=gh}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gT;Ia.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q0(t))throw Error(wt(200));return hT(e,t,null,r)};Ia.createRoot=function(e,t){if(!q0(e))throw Error(wt(299));var r=!1,n="",s=TS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=V0(e,1,!1,null,null,r,!1,n,s),e[Xi]=t.current,Gd(e.nodeType===8?e.parentNode:e),new H0(t)};Ia.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(wt(188)):(e=Object.keys(e).join(","),Error(wt(268,e)));return e=Qw(t),e=e===null?null:e.stateNode,e};Ia.flushSync=function(e){return dl(e)};Ia.hydrate=function(e,t,r){if(!Zf(t))throw Error(wt(200));return em(null,e,t,!0,r)};Ia.hydrateRoot=function(e,t,r){if(!q0(e))throw Error(wt(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",h=TS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=CS(t,null,e,1,r??null,s,!1,a,h),e[Xi]=t.current,Gd(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xf(t)};Ia.render=function(e,t,r){if(!Zf(t))throw Error(wt(200));return em(null,e,t,!1,r)};Ia.unmountComponentAtNode=function(e){if(!Zf(e))throw Error(wt(40));return e._reactRootContainer?(dl(function(){em(null,null,e,!1,function(){e._reactRootContainer=null,e[Xi]=null})}),!0):!1};Ia.unstable_batchedUpdates=F0;Ia.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zf(r))throw Error(wt(200));if(e==null||e._reactInternals===void 0)throw Error(wt(38));return em(e,t,r,!1,n)};Ia.version="18.3.1-next-f1338f8080-20240426";function PS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PS)}catch(e){console.error(e)}}PS(),Pw.exports=Ia;var wl=Pw.exports;const K0=Xv(wl);var J_=wl;Rg.createRoot=J_.createRoot,Rg.hydrateRoot=J_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function np(){return np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},np.apply(this,arguments)}var Go;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Go||(Go={}));const X_="popstate";function yT(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:h,hash:p}=n.location;return vv("",{pathname:a,search:h,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:xf(s)}return bT(t,r,null,e)}function _s(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function OS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _T(){return Math.random().toString(36).substr(2,8)}function Z_(e,t){return{usr:e.state,key:e.key,idx:t}}function vv(e,t,r,n){return r===void 0&&(r=null),np({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mu(t):t,{state:r,key:t&&t.key||n||_T()})}function xf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Mu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function bT(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,h=s.history,p=Go.Pop,u=null,i=g();i==null&&(i=0,h.replaceState(np({},h.state,{idx:i}),""));function g(){return(h.state||{idx:null}).idx}function _(){p=Go.Pop;let y=g(),d=y==null?null:y-i;i=y,u&&u({action:p,location:l.location,delta:d})}function f(y,d){p=Go.Push;let m=vv(l.location,y,d);i=g()+1;let S=Z_(m,i),x=l.createHref(m);try{h.pushState(S,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}a&&u&&u({action:p,location:l.location,delta:1})}function o(y,d){p=Go.Replace;let m=vv(l.location,y,d);i=g();let S=Z_(m,i),x=l.createHref(m);h.replaceState(S,"",x),a&&u&&u({action:p,location:l.location,delta:0})}function w(y){let d=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof y=="string"?y:xf(y);return m=m.replace(/ $/,"%20"),_s(d,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,d)}let l={get action(){return p},get location(){return e(s,h)},listen(y){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(X_,_),u=y,()=>{s.removeEventListener(X_,_),u=null}},createHref(y){return t(s,y)},createURL:w,encodeLocation(y){let d=w(y);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:f,replace:o,go(y){return h.go(y)}};return l}var eb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(eb||(eb={}));function wT(e,t,r){return r===void 0&&(r="/"),ST(e,t,r)}function ST(e,t,r,n){let s=typeof t=="string"?Mu(t):t,a=G0(s.pathname||"/",r);if(a==null)return null;let h=NS(e);xT(h);let p=null;for(let u=0;p==null&&u<h.length;++u){let i=MT(a);p=AT(h[u],i)}return p}function NS(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,h,p)=>{let u={relativePath:p===void 0?a.path||"":p,caseSensitive:a.caseSensitive===!0,childrenIndex:h,route:a};u.relativePath.startsWith("/")&&(_s(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let i=ac([n,u.relativePath]),g=r.concat(u);a.children&&a.children.length>0&&(_s(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+i+'".')),NS(a.children,t,g,i)),!(a.path==null&&!a.index)&&t.push({path:i,score:OT(i,a.index),routesMeta:g})};return e.forEach((a,h)=>{var p;if(a.path===""||!((p=a.path)!=null&&p.includes("?")))s(a,h);else for(let u of AS(a.path))s(a,h,u)}),t}function AS(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let h=AS(n.join("/")),p=[];return p.push(...h.map(u=>u===""?a:[a,u].join("/"))),s&&p.push(...h),p.map(u=>e.startsWith("/")&&u===""?"/":u)}function xT(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:NT(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const RT=/^:[\w-]+$/,ET=3,kT=2,CT=1,TT=10,PT=-2,tb=e=>e==="*";function OT(e,t){let r=e.split("/"),n=r.length;return r.some(tb)&&(n+=PT),t&&(n+=kT),r.filter(s=>!tb(s)).reduce((s,a)=>s+(RT.test(a)?ET:a===""?CT:TT),n)}function NT(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function AT(e,t,r){let{routesMeta:n}=e,s={},a="/",h=[];for(let p=0;p<n.length;++p){let u=n[p],i=p===n.length-1,g=a==="/"?t:t.slice(a.length)||"/",_=IT({path:u.relativePath,caseSensitive:u.caseSensitive,end:i},g),f=u.route;if(!_)return null;Object.assign(s,_.params),h.push({params:s,pathname:ac([a,_.pathname]),pathnameBase:FT(ac([a,_.pathnameBase])),route:f}),_.pathnameBase!=="/"&&(a=ac([a,_.pathnameBase]))}return h}function IT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DT(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],h=a.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:n.reduce((i,g,_)=>{let{paramName:f,isOptional:o}=g;if(f==="*"){let l=p[_]||"";h=a.slice(0,a.length-l.length).replace(/(.)\/+$/,"$1")}const w=p[_];return o&&!w?i[f]=void 0:i[f]=(w||"").replace(/%2F/g,"/"),i},{}),pathname:a,pathnameBase:h,pattern:e}}function DT(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),OS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,u)=>(n.push({paramName:p,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function MT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return OS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function G0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function LT(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Mu(e):e;return{pathname:r?r.startsWith("/")?r:jT(r,t):t,search:UT(n),hash:$T(s)}}function jT(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zm(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function IS(e,t){let r=BT(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function DS(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Mu(e):(s=np({},e),_s(!s.pathname||!s.pathname.includes("?"),Zm("?","pathname","search",s)),_s(!s.pathname||!s.pathname.includes("#"),Zm("#","pathname","hash",s)),_s(!s.search||!s.search.includes("#"),Zm("#","search","hash",s)));let a=e===""||s.pathname==="",h=a?"/":s.pathname,p;if(h==null)p=r;else{let _=t.length-1;if(!n&&h.startsWith("..")){let f=h.split("/");for(;f[0]==="..";)f.shift(),_-=1;s.pathname=f.join("/")}p=_>=0?t[_]:"/"}let u=LT(s,p),i=h&&h!=="/"&&h.endsWith("/"),g=(a||h===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(i||g)&&(u.pathname+="/"),u}const ac=e=>e.join("/").replace(/\/\/+/g,"/"),FT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$T=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const MS=["post","put","patch","delete"];new Set(MS);const VT=["get",...MS];new Set(VT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sp.apply(this,arguments)}const Y0=D.createContext(null),zT=D.createContext(null),Sl=D.createContext(null),tm=D.createContext(null),ao=D.createContext({outlet:null,matches:[],isDataRoute:!1}),LS=D.createContext(null);function HT(e,t){let{relative:r}=t===void 0?{}:t;fp()||_s(!1);let{basename:n,navigator:s}=D.useContext(Sl),{hash:a,pathname:h,search:p}=FS(e,{relative:r}),u=h;return n!=="/"&&(u=h==="/"?n:ac([n,h])),s.createHref({pathname:u,search:p,hash:a})}function fp(){return D.useContext(tm)!=null}function mp(){return fp()||_s(!1),D.useContext(tm).location}function jS(e){D.useContext(Sl).static||D.useLayoutEffect(e)}function io(){let{isDataRoute:e}=D.useContext(ao);return e?iP():qT()}function qT(){fp()||_s(!1);let e=D.useContext(Y0),{basename:t,future:r,navigator:n}=D.useContext(Sl),{matches:s}=D.useContext(ao),{pathname:a}=mp(),h=JSON.stringify(IS(s,r.v7_relativeSplatPath)),p=D.useRef(!1);return jS(()=>{p.current=!0}),D.useCallback(function(i,g){if(g===void 0&&(g={}),!p.current)return;if(typeof i=="number"){n.go(i);return}let _=DS(i,JSON.parse(h),a,g.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:ac([t,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[t,n,h,a,e])}const KT=D.createContext(null);function GT(e){let t=D.useContext(ao).outlet;return t&&D.createElement(KT.Provider,{value:e},t)}function BS(){let{matches:e}=D.useContext(ao),t=e[e.length-1];return t?t.params:{}}function FS(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=D.useContext(Sl),{matches:s}=D.useContext(ao),{pathname:a}=mp(),h=JSON.stringify(IS(s,n.v7_relativeSplatPath));return D.useMemo(()=>DS(e,JSON.parse(h),a,r==="path"),[e,h,a,r])}function YT(e,t){return QT(e,t)}function QT(e,t,r,n){fp()||_s(!1);let{navigator:s}=D.useContext(Sl),{matches:a}=D.useContext(ao),h=a[a.length-1],p=h?h.params:{};h&&h.pathname;let u=h?h.pathnameBase:"/";h&&h.route;let i=mp(),g;if(t){var _;let y=typeof t=="string"?Mu(t):t;u==="/"||(_=y.pathname)!=null&&_.startsWith(u)||_s(!1),g=y}else g=i;let f=g.pathname||"/",o=f;if(u!=="/"){let y=u.replace(/^\//,"").split("/");o="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=wT(e,{pathname:o}),l=tP(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},p,y.params),pathname:ac([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:ac([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,n);return t&&l?D.createElement(tm.Provider,{value:{location:sp({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Go.Pop}},l):l}function JT(){let e=aP(),t=WT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),r?D.createElement("pre",{style:s},r):null,null)}const XT=D.createElement(JT,null);class ZT extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?D.createElement(ao.Provider,{value:this.props.routeContext},D.createElement(LS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eP(e){let{routeContext:t,match:r,children:n}=e,s=D.useContext(Y0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),D.createElement(ao.Provider,{value:t},n)}function tP(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,p=(s=r)==null?void 0:s.errors;if(p!=null){let g=h.findIndex(_=>_.route.id&&(p==null?void 0:p[_.route.id])!==void 0);g>=0||_s(!1),h=h.slice(0,Math.min(h.length,g+1))}let u=!1,i=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<h.length;g++){let _=h[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(i=g),_.route.id){let{loaderData:f,errors:o}=r,w=_.route.loader&&f[_.route.id]===void 0&&(!o||o[_.route.id]===void 0);if(_.route.lazy||w){u=!0,i>=0?h=h.slice(0,i+1):h=[h[0]];break}}}return h.reduceRight((g,_,f)=>{let o,w=!1,l=null,y=null;r&&(o=p&&_.route.id?p[_.route.id]:void 0,l=_.route.errorElement||XT,u&&(i<0&&f===0?(oP("route-fallback"),w=!0,y=null):i===f&&(w=!0,y=_.route.hydrateFallbackElement||null)));let d=t.concat(h.slice(0,f+1)),m=()=>{let S;return o?S=l:w?S=y:_.route.Component?S=D.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=g,D.createElement(eP,{match:_,routeContext:{outlet:g,matches:d,isDataRoute:r!=null},children:S})};return r&&(_.route.ErrorBoundary||_.route.errorElement||f===0)?D.createElement(ZT,{location:r.location,revalidation:r.revalidation,component:l,error:o,children:m(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):m()},null)}var US=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(US||{}),$S=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($S||{});function rP(e){let t=D.useContext(Y0);return t||_s(!1),t}function nP(e){let t=D.useContext(zT);return t||_s(!1),t}function sP(e){let t=D.useContext(ao);return t||_s(!1),t}function WS(e){let t=sP(),r=t.matches[t.matches.length-1];return r.route.id||_s(!1),r.route.id}function aP(){var e;let t=D.useContext(LS),r=nP(),n=WS();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function iP(){let{router:e}=rP(US.UseNavigateStable),t=WS($S.UseNavigateStable),r=D.useRef(!1);return jS(()=>{r.current=!0}),D.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,sp({fromRouteId:t},a)))},[e,t])}const rb={};function oP(e,t,r){rb[e]||(rb[e]=!0)}function cP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lP(e){return GT(e.context)}function Ts(e){_s(!1)}function uP(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Go.Pop,navigator:a,static:h=!1,future:p}=e;fp()&&_s(!1);let u=t.replace(/^\/*/,"/"),i=D.useMemo(()=>({basename:u,navigator:a,static:h,future:sp({v7_relativeSplatPath:!1},p)}),[u,p,a,h]);typeof n=="string"&&(n=Mu(n));let{pathname:g="/",search:_="",hash:f="",state:o=null,key:w="default"}=n,l=D.useMemo(()=>{let y=G0(g,u);return y==null?null:{location:{pathname:y,search:_,hash:f,state:o,key:w},navigationType:s}},[u,g,_,f,o,w,s]);return l==null?null:D.createElement(Sl.Provider,{value:i},D.createElement(tm.Provider,{children:r,value:l}))}function VS(e){let{children:t,location:r}=e;return YT(yv(t),r)}new Promise(()=>{});function yv(e,t){t===void 0&&(t=[]);let r=[];return D.Children.forEach(e,(n,s)=>{if(!D.isValidElement(n))return;let a=[...t,s];if(n.type===D.Fragment){r.push.apply(r,yv(n.props.children,a));return}n.type!==Ts&&_s(!1),!n.props.index||!n.props.children||_s(!1);let h={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=yv(n.props.children,a)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}function dP(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function pP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hP(e,t){return e.button===0&&(!t||t==="_self")&&!pP(e)}const fP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mP="6";try{window.__reactRouterVersion=mP}catch{}const gP="startTransition",nb=yl[gP];function vP(e){let{basename:t,children:r,future:n,window:s}=e,a=D.useRef();a.current==null&&(a.current=yT({window:s,v5Compat:!0}));let h=a.current,[p,u]=D.useState({action:h.action,location:h.location}),{v7_startTransition:i}=n||{},g=D.useCallback(_=>{i&&nb?nb(()=>u(_)):u(_)},[u,i]);return D.useLayoutEffect(()=>h.listen(g),[h,g]),D.useEffect(()=>cP(n),[n]),D.createElement(uP,{basename:t,children:r,location:p.location,navigationType:p.action,navigator:h,future:n})}const yP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,as=D.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:h,state:p,target:u,to:i,preventScrollReset:g,viewTransition:_}=t,f=dP(t,fP),{basename:o}=D.useContext(Sl),w,l=!1;if(typeof i=="string"&&_P.test(i)&&(w=i,yP))try{let S=new URL(window.location.href),x=i.startsWith("//")?new URL(S.protocol+i):new URL(i),k=G0(x.pathname,o);x.origin===S.origin&&k!=null?i=k+x.search+x.hash:l=!0}catch{}let y=HT(i,{relative:s}),d=bP(i,{replace:h,state:p,target:u,preventScrollReset:g,relative:s,viewTransition:_});function m(S){n&&n(S),S.defaultPrevented||d(S)}return D.createElement("a",_v({},f,{href:w||y,onClick:l||a?n:m,ref:r,target:u}))});var sb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sb||(sb={}));var ab;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ab||(ab={}));function bP(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:h,viewTransition:p}=t===void 0?{}:t,u=io(),i=mp(),g=FS(e,{relative:h});return D.useCallback(_=>{if(hP(_,r)){_.preventDefault();let f=n!==void 0?n:xf(i)===xf(g);u(e,{replace:f,state:s,preventScrollReset:a,relative:h,viewTransition:p})}},[i,u,g,n,s,r,e,a,h,p])}const zS=D.createContext(void 0);function wP({children:e}){const[t,r]=D.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return D.useEffect(()=>{const n=window.document.documentElement;n.classList.remove("light","dark"),n.classList.add(t),localStorage.setItem("theme",t)},[t]),v.jsx(zS.Provider,{value:{theme:t,setTheme:r},children:e})}function SP(){const e=D.useContext(zS);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const HS=D.createContext(void 0);function xP({children:e}){const[t,r]=D.useState(null),[n,s]=D.useState(!0);D.useEffect(()=>{const p=localStorage.getItem("user");p&&r(JSON.parse(p)),s(!1)},[]);const a=async(p,u)=>{try{const i={id:"1",name:"John Doe",email:p,role:"patient"};r(i),localStorage.setItem("user",JSON.stringify(i))}catch(i){throw console.error("Login failed:",i),i}},h=()=>{r(null),localStorage.removeItem("user")};return v.jsx(HS.Provider,{value:{user:t,login:a,logout:h,isLoading:n},children:e})}function RP(){const e=D.useContext(HS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function EP({children:e}){return v.jsx("div",{className:"min-h-screen font-sans",children:e||v.jsx(lP,{})})}function ib(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function kP(...e){return t=>{let r=!1;const n=e.map(s=>{const a=ib(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():ib(e[s],null)}}}}var qS=D.forwardRef((e,t)=>{const{children:r,...n}=e,s=D.Children.toArray(r),a=s.find(TP);if(a){const h=a.props.children,p=s.map(u=>u===a?D.Children.count(h)>1?D.Children.only(null):D.isValidElement(h)?h.props.children:null:u);return v.jsx(bv,{...n,ref:t,children:D.isValidElement(h)?D.cloneElement(h,void 0,p):null})}return v.jsx(bv,{...n,ref:t,children:r})});qS.displayName="Slot";var bv=D.forwardRef((e,t)=>{const{children:r,...n}=e;if(D.isValidElement(r)){const s=OP(r);return D.cloneElement(r,{...PP(n,r.props),ref:t?kP(t,s):s})}return D.Children.count(r)>1?D.Children.only(null):null});bv.displayName="SlotClone";var CP=({children:e})=>v.jsx(v.Fragment,{children:e});function TP(e){return D.isValidElement(e)&&e.type===CP}function PP(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{a(...p),s(...p)}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function OP(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function KS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=KS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function GS(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=KS(e))&&(n&&(n+=" "),n+=t);return n}const ob=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,cb=GS,Q0=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return cb(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,h=Object.keys(s).map(i=>{const g=r==null?void 0:r[i],_=a==null?void 0:a[i];if(g===null)return null;const f=ob(g)||ob(_);return s[i][f]}),p=r&&Object.entries(r).reduce((i,g)=>{let[_,f]=g;return f===void 0||(i[_]=f),i},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((i,g)=>{let{class:_,className:f,...o}=g;return Object.entries(o).every(w=>{let[l,y]=w;return Array.isArray(y)?y.includes({...a,...p}[l]):{...a,...p}[l]===y})?[...i,_,f]:i},[]);return cb(e,h,u,r==null?void 0:r.class,r==null?void 0:r.className)},J0="-",NP=e=>{const t=IP(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:h=>{const p=h.split(J0);return p[0]===""&&p.length!==1&&p.shift(),YS(p,t)||AP(h)},getConflictingClassGroupIds:(h,p)=>{const u=r[h]||[];return p&&n[h]?[...u,...n[h]]:u}}},YS=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?YS(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(J0);return(h=t.validators.find(({validator:p})=>p(a)))==null?void 0:h.classGroupId},lb=/^\[(.+)\]$/,AP=e=>{if(lb.test(e)){const t=lb.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},IP=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return MP(Object.entries(e.classGroups),r).forEach(([a,h])=>{wv(h,n,a,t)}),n},wv=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:ub(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(DP(s)){wv(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,h])=>{wv(h,ub(t,a),r,n)})})},ub=(e,t)=>{let r=e;return t.split(J0).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},DP=e=>e.isThemeGetter,MP=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([h,p])=>[t+h,p])):a);return[r,s]}):e,LP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,h)=>{r.set(a,h),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let h=r.get(a);if(h!==void 0)return h;if((h=n.get(a))!==void 0)return s(a,h),h},set(a,h){r.has(a)?r.set(a,h):s(a,h)}}},QS="!",jP=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,h=p=>{const u=[];let i=0,g=0,_;for(let y=0;y<p.length;y++){let d=p[y];if(i===0){if(d===s&&(n||p.slice(y,y+a)===t)){u.push(p.slice(g,y)),g=y+a;continue}if(d==="/"){_=y;continue}}d==="["?i++:d==="]"&&i--}const f=u.length===0?p:p.substring(g),o=f.startsWith(QS),w=o?f.substring(1):f,l=_&&_>g?_-g:void 0;return{modifiers:u,hasImportantModifier:o,baseClassName:w,maybePostfixModifierPosition:l}};return r?p=>r({className:p,parseClassName:h}):h},BP=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},FP=e=>({cache:LP(e.cacheSize),parseClassName:jP(e),...NP(e)}),UP=/\s+/,$P=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],h=e.trim().split(UP);let p="";for(let u=h.length-1;u>=0;u-=1){const i=h[u],{modifiers:g,hasImportantModifier:_,baseClassName:f,maybePostfixModifierPosition:o}=r(i);let w=!!o,l=n(w?f.substring(0,o):f);if(!l){if(!w){p=i+(p.length>0?" "+p:p);continue}if(l=n(f),!l){p=i+(p.length>0?" "+p:p);continue}w=!1}const y=BP(g).join(":"),d=_?y+QS:y,m=d+l;if(a.includes(m))continue;a.push(m);const S=s(l,w);for(let x=0;x<S.length;++x){const k=S[x];a.push(d+k)}p=i+(p.length>0?" "+p:p)}return p};function WP(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=JS(t))&&(n&&(n+=" "),n+=r);return n}const JS=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=JS(e[n]))&&(r&&(r+=" "),r+=t);return r};function VP(e,...t){let r,n,s,a=h;function h(u){const i=t.reduce((g,_)=>_(g),e());return r=FP(i),n=r.cache.get,s=r.cache.set,a=p,p(u)}function p(u){const i=n(u);if(i)return i;const g=$P(u,r);return s(u,g),g}return function(){return a(WP.apply(null,arguments))}}const Fn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},XS=/^\[(?:([a-z-]+):)?(.+)\]$/i,zP=/^\d+\/\d+$/,HP=new Set(["px","full","screen"]),qP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,QP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vi=e=>gu(e)||HP.has(e)||zP.test(e),Bo=e=>Lu(e,"length",s6),gu=e=>!!e&&!Number.isNaN(Number(e)),eg=e=>Lu(e,"number",gu),wd=e=>!!e&&Number.isInteger(Number(e)),JP=e=>e.endsWith("%")&&gu(e.slice(0,-1)),Dr=e=>XS.test(e),Fo=e=>qP.test(e),XP=new Set(["length","size","percentage"]),ZP=e=>Lu(e,XP,ZS),e6=e=>Lu(e,"position",ZS),t6=new Set(["image","url"]),r6=e=>Lu(e,t6,i6),n6=e=>Lu(e,"",a6),Sd=()=>!0,Lu=(e,t,r)=>{const n=XS.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},s6=e=>KP.test(e)&&!GP.test(e),ZS=()=>!1,a6=e=>YP.test(e),i6=e=>QP.test(e),o6=()=>{const e=Fn("colors"),t=Fn("spacing"),r=Fn("blur"),n=Fn("brightness"),s=Fn("borderColor"),a=Fn("borderRadius"),h=Fn("borderSpacing"),p=Fn("borderWidth"),u=Fn("contrast"),i=Fn("grayscale"),g=Fn("hueRotate"),_=Fn("invert"),f=Fn("gap"),o=Fn("gradientColorStops"),w=Fn("gradientColorStopPositions"),l=Fn("inset"),y=Fn("margin"),d=Fn("opacity"),m=Fn("padding"),S=Fn("saturate"),x=Fn("scale"),k=Fn("sepia"),I=Fn("skew"),T=Fn("space"),C=Fn("translate"),E=()=>["auto","contain","none"],c=()=>["auto","hidden","clip","visible","scroll"],b=()=>["auto",Dr,t],R=()=>[Dr,t],P=()=>["",Vi,Bo],O=()=>["auto",gu,Dr],N=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Dr],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[gu,Dr];return{cacheSize:500,separator:":",theme:{colors:[Sd],spacing:[Vi,Bo],blur:["none","",Fo,Dr],brightness:de(),borderColor:[e],borderRadius:["none","","full",Fo,Dr],borderSpacing:R(),borderWidth:P(),contrast:de(),grayscale:j(),hueRotate:de(),invert:j(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[JP,Bo],inset:b(),margin:b(),opacity:de(),padding:R(),saturate:de(),scale:de(),sepia:j(),skew:de(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Dr]}],container:["container"],columns:[{columns:[Fo]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...N(),Dr]}],overflow:[{overflow:c()}],"overflow-x":[{"overflow-x":c()}],"overflow-y":[{"overflow-y":c()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[l]}],"inset-x":[{"inset-x":[l]}],"inset-y":[{"inset-y":[l]}],start:[{start:[l]}],end:[{end:[l]}],top:[{top:[l]}],right:[{right:[l]}],bottom:[{bottom:[l]}],left:[{left:[l]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wd,Dr]}],basis:[{basis:b()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dr]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",wd,Dr]}],"grid-cols":[{"grid-cols":[Sd]}],"col-start-end":[{col:["auto",{span:["full",wd,Dr]},Dr]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Sd]}],"row-start-end":[{row:["auto",{span:[wd,Dr]},Dr]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dr]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dr,t]}],"min-w":[{"min-w":[Dr,t,"min","max","fit"]}],"max-w":[{"max-w":[Dr,t,"none","full","min","max","fit","prose",{screen:[Fo]},Fo]}],h:[{h:[Dr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Fo,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",eg]}],"font-family":[{font:[Sd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dr]}],"line-clamp":[{"line-clamp":["none",gu,eg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vi,Dr]}],"list-image":[{"list-image":["none",Dr]}],"list-style-type":[{list:["none","disc","decimal",Dr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[d]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[d]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vi,Bo]}],"underline-offset":[{"underline-offset":["auto",Vi,Dr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[d]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...N(),e6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},r6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[o]}],"gradient-via":[{via:[o]}],"gradient-to":[{to:[o]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[p]}],"border-w-x":[{"border-x":[p]}],"border-w-y":[{"border-y":[p]}],"border-w-s":[{"border-s":[p]}],"border-w-e":[{"border-e":[p]}],"border-w-t":[{"border-t":[p]}],"border-w-r":[{"border-r":[p]}],"border-w-b":[{"border-b":[p]}],"border-w-l":[{"border-l":[p]}],"border-opacity":[{"border-opacity":[d]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[p]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[p]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[d]}],"divide-style":[{divide:M()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Vi,Dr]}],"outline-w":[{outline:[Vi,Bo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[d]}],"ring-offset-w":[{"ring-offset":[Vi,Bo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Fo,n6]}],"shadow-color":[{shadow:[Sd]}],opacity:[{opacity:[d]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Fo,Dr]}],grayscale:[{grayscale:[i]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[_]}],saturate:[{saturate:[S]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[i]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[d]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dr]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Dr]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[wd,Dr]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Vi,Bo,eg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},c6=VP(o6);function dn(...e){return c6(GS(e))}const l6=Q0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),mn=D.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const h=n?qS:"button";return v.jsx(h,{className:dn(l6({variant:t,size:r,className:e})),ref:a,...s})});mn.displayName="Button";const br=D.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:dn("rounded-xl border bg-card text-card-foreground shadow",e),...t}));br.displayName="Card";const Dn=D.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:dn("flex flex-col space-y-1.5 p-6",e),...t}));Dn.displayName="CardHeader";const kn=D.forwardRef(({className:e,...t},r)=>v.jsx("h3",{ref:r,className:dn("font-semibold leading-none tracking-tight",e),...t}));kn.displayName="CardTitle";const cs=D.forwardRef(({className:e,...t},r)=>v.jsx("p",{ref:r,className:dn("text-sm text-muted-foreground",e),...t}));cs.displayName="CardDescription";const wr=D.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:dn("p-6 pt-0",e),...t}));wr.displayName="CardContent";const u6=D.forwardRef(({className:e,...t},r)=>v.jsx("div",{ref:r,className:dn("flex items-center p-6 pt-0",e),...t}));u6.displayName="CardFooter";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ex=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:h,...p},u)=>D.createElement("svg",{ref:u,...p6,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ex("lucide",s),...p},[...h.map(([i,g])=>D.createElement(i,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=(e,t)=>{const r=D.forwardRef(({className:n,...s},a)=>D.createElement(h6,{ref:a,iconNode:t,className:ex(`lucide-${d6(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=jr("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=jr("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=jr("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=jr("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=jr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=jr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=jr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=jr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=jr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=jr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=jr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=jr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=jr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=jr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=jr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=jr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=jr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=jr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=jr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=jr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=jr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=jr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=jr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=jr("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=jr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=jr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=jr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=jr("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=jr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=jr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=jr("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=jr("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=jr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=jr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=jr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=jr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=jr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=jr("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=jr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function pb(){const{theme:e,setTheme:t}=SP();return v.jsxs(mn,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),children:[v.jsx(P6,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),v.jsx(k6,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),v.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}const hb=e=>{let t;const r=new Set,n=(i,g)=>{const _=typeof i=="function"?i(t):i;if(!Object.is(_,t)){const f=t;t=g??(typeof _!="object"||_===null)?_:Object.assign({},t,_),r.forEach(o=>o(t,f))}},s=()=>t,p={setState:n,getState:s,getInitialState:()=>u,subscribe:i=>(r.add(i),()=>r.delete(i))},u=t=e(n,s,p);return p},A6=e=>e?hb(e):hb,I6=e=>e;function D6(e,t=I6){const r=_t.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return _t.useDebugValue(r),r}const M6=e=>{const t=A6(e),r=n=>D6(t,n);return Object.assign(r,t),r},L6=e=>M6;function j6(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var a;const h=u=>u===null?null:JSON.parse(u,void 0),p=(a=r.getItem(s))!=null?a:null;return p instanceof Promise?p.then(h):h(p)},setItem:(s,a)=>r.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>r.removeItem(s)}}const xv=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return xv(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return xv(n)(r)}}}},B6=(e,t)=>(r,n,s)=>{let a={storage:j6(()=>localStorage),partialize:l=>l,version:0,merge:(l,y)=>({...y,...l}),...t},h=!1;const p=new Set,u=new Set;let i=a.storage;if(!i)return e((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...l)},n,s);const g=()=>{const l=a.partialize({...n()});return i.setItem(a.name,{state:l,version:a.version})},_=s.setState;s.setState=(l,y)=>{_(l,y),g()};const f=e((...l)=>{r(...l),g()},n,s);s.getInitialState=()=>f;let o;const w=()=>{var l,y;if(!i)return;h=!1,p.forEach(m=>{var S;return m((S=n())!=null?S:f)});const d=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(l=n())!=null?l:f))||void 0;return xv(i.getItem.bind(i))(a.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate){const S=a.migrate(m.state,m.version);return S instanceof Promise?S.then(x=>[!0,x]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var S;const[x,k]=m;if(o=a.merge(k,(S=n())!=null?S:f),r(o,!0),x)return g()}).then(()=>{d==null||d(o,void 0),o=n(),h=!0,u.forEach(m=>m(o))}).catch(m=>{d==null||d(void 0,m)})};return s.persist={setOptions:l=>{a={...a,...l},l.storage&&(i=l.storage)},clearStorage:()=>{i==null||i.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>h,onHydrate:l=>(p.add(l),()=>{p.delete(l)}),onFinishHydration:l=>(u.add(l),()=>{u.delete(l)})},a.skipHydration||w(),o||f},F6=B6,to=L6()(F6(e=>({user:null,setUser:t=>e({user:t}),logout:()=>e({user:null})}),{name:"auth-storage"}));function ya(){const[e,t]=D.useState(!1),r=to(_=>_.user),n=to(_=>_.logout),s=io(),a=async()=>{n(),localStorage.removeItem("auth-storage"),s("/")},h=()=>{if(!r)return"/";switch(r.role){case"PATIENT":return"/dashboard/patient";case"DOCTOR":return"/dashboard/doctor";case"ADMIN":return"/admin";default:return"/"}},u=(()=>{if(!r)return[{href:"/",label:"Home"},{href:"/doctors",label:"Find Doctors"},{href:"/chat",label:"Chat"},{href:"/about",label:"About"}];switch(r.role){case"PATIENT":return[{href:"/dashboard/patient",label:"Dashboard"},{href:"/doctors",label:"Find Doctors"},{href:"/chat",label:"Chat"},{href:"/profile/patient",label:"Profile"}];case"DOCTOR":return[{href:"/dashboard/doctor",label:"Dashboard"},{href:"/dashboard/doctor?tab=appointments",label:"Appointments"},{href:"/chat",label:"Chat"},{href:"/dashboard/doctor?tab=patients",label:"Patients"},{href:"/profile/doctor",label:"Profile"}];case"ADMIN":return[{href:"/admin",label:"Dashboard"},{href:"/admin?tab=doctor-requests",label:"Doctor Requests"},{href:"/admin?tab=users",label:"Users"},{href:"/admin?tab=settings",label:"Settings"}];default:return[]}})(),i=h(),g=mp();return v.jsx("nav",{className:"fixed top-0 w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 z-50",children:v.jsxs("div",{className:"container mx-auto px-4",children:[v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs(as,{to:i,className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:v.jsx(Ti,{className:"h-5 w-5 text-white"})}),v.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"careXpert"})]}),v.jsx("div",{className:"hidden md:flex items-center space-x-8",children:u.map(_=>{const f=g.pathname===_.href;return v.jsx(as,{to:_.href,className:`transition-colors ${f?"text-blue-600 dark:text-blue-400 font-semibold":"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"}`,children:_.label},_.href)})}),v.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[v.jsx(pb,{}),r?v.jsxs(v.Fragment,{children:[v.jsxs("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:[r.name," (",r.role,")"]}),v.jsx(mn,{variant:"ghost",onClick:a,className:"text-gray-600 dark:text-gray-300",children:"Logout"})]}):v.jsxs(v.Fragment,{children:[v.jsx(as,{to:"/auth/login",children:v.jsx(mn,{variant:"ghost",className:"text-gray-600 dark:text-gray-300",children:"Login"})}),v.jsx(as,{to:"/auth/patient/signup",children:v.jsx(mn,{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Sign Up"})})]})]}),v.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[v.jsx(pb,{}),v.jsx(mn,{variant:"ghost",size:"sm",onClick:()=>t(!e),children:e?v.jsx(ry,{className:"h-5 w-5"}):v.jsx(E6,{className:"h-5 w-5"})})]})]}),e&&v.jsx("div",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:v.jsxs("div",{className:"flex flex-col space-y-4",children:[u.map(_=>v.jsx(as,{to:_.href,className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>t(!1),children:_.label},_.href)),v.jsx("div",{className:"flex flex-col space-y-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:r?v.jsxs(v.Fragment,{children:[v.jsxs("span",{className:"text-gray-600 dark:text-gray-300 text-sm px-3",children:[r.name," (",r.role,")"]}),v.jsx(mn,{variant:"ghost",onClick:n,className:"w-full justify-start",children:"Logout"})]}):v.jsxs(v.Fragment,{children:[v.jsx(as,{to:"/auth/login",children:v.jsx(mn,{variant:"ghost",className:"w-full justify-start",onClick:()=>t(!1),children:"Login"})}),v.jsx(as,{to:"/auth/patient/signup",children:v.jsx(mn,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>t(!1),children:"Sign Up"})})]})})]})})]})})}function Ei(){return v.jsx("footer",{className:"bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:v.jsxs("div",{className:"container mx-auto px-4 py-8",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs(as,{to:"/",className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:v.jsx(Ti,{className:"h-5 w-5 text-white"})}),v.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"careXpert"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Modern healthcare platform connecting patients with doctors."})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),v.jsxs("ul",{className:"space-y-2",children:[v.jsx("li",{children:v.jsx(as,{to:"/doctors",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Find Doctors"})}),v.jsx("li",{children:v.jsx(as,{to:"/about",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"About Us"})}),v.jsx("li",{children:v.jsx(as,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Chat"})})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Services"}),v.jsxs("ul",{className:"space-y-2",children:[v.jsx("li",{children:v.jsx(as,{to:"/auth/patient/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Patient Portal"})}),v.jsx("li",{children:v.jsx(as,{to:"/auth/doctor/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Doctor Portal"})}),v.jsx("li",{children:v.jsx(as,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"AI Consultation"})})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact"}),v.jsxs("ul",{className:"space-y-2",children:[v.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Email: support@carexpert.com"}),v.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Phone: +1 (555) 123-4567"}),v.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Address: 123 Healthcare St, Medical City"})]})]})]}),v.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:v.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" ",new Date().getFullYear()," careXpert. All rights reserved."]})})]})})}function U6(){const[e,t]=D.useState(""),[r,n]=D.useState([{type:"ai",content:"Hello! I'm your AI health assistant. How can I help you today?"}]),s=a=>{a.preventDefault(),e.trim()&&(n(h=>[...h,{type:"user",content:e}]),setTimeout(()=>{n(h=>[...h,{type:"ai",content:"I'm a demo AI assistant. In the full version, I'll be able to help you with health-related questions!"}])},1e3),t(""))};return v.jsxs("div",{className:"flex flex-col h-[400px]",children:[v.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.map((a,h)=>v.jsx("div",{className:`flex ${a.type==="user"?"justify-end":"justify-start"}`,children:v.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${a.type==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"}`,children:a.content})},h))}),v.jsx("form",{onSubmit:s,className:"p-4 border-t border-gray-200 dark:border-gray-700",children:v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx(mn,{type:"submit",size:"icon",children:v.jsx(rx,{className:"h-4 w-4"})})]})})]})}function $6(){const[e,t]=D.useState(!0);return e?v.jsx("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-start space-x-3",children:[v.jsx(R6,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Demo Credentials"}),v.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Use these credentials to explore the platform:"}),v.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[v.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:[v.jsx("span",{className:"font-medium",children:"Patient:"})," patient@demo.com / demo123"]}),v.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:[v.jsx("span",{className:"font-medium",children:"Doctor:"})," doctor@demo.com / demo123"]}),v.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:[v.jsx("span",{className:"font-medium",children:"Admin:"})," admin@demo.com / demo123"]})]})]})]}),v.jsx(mn,{variant:"ghost",size:"icon",className:"h-6 w-6 text-blue-600 dark:text-blue-400",onClick:()=>t(!1),children:v.jsx(ry,{className:"h-4 w-4"})})]})}):null}function W6(){return v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[v.jsx(ya,{}),v.jsxs("section",{className:"container mx-auto px-4 pt-20 pb-16",children:[v.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Your Health, Our",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ","Priority"]})]}),v.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Connect with certified doctors, get AI-powered consultations, and manage your health journey with careXpert - the modern healthcare platform."}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[v.jsx(as,{to:"/auth/patient/signup",children:v.jsxs(mn,{size:"lg",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl",children:[v.jsx(Ti,{className:"mr-2 h-5 w-5"}),"Book Appointment"]})}),v.jsx(as,{to:"/auth/doctor/signup",children:v.jsx(mn,{size:"lg",variant:"secondary",className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-xl",children:"Join as Doctor"})})]})]}),v.jsx("div",{children:v.jsxs(br,{className:"border-0 shadow-2xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[v.jsxs(Dn,{className:"text-center pb-4",children:[v.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:v.jsx(Ti,{className:"h-6 w-6 text-white"})}),v.jsx(kn,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Try CareXpert AI"}),v.jsx(cs,{className:"text-gray-600 dark:text-gray-300",children:"Get instant health guidance from our AI assistant"})]}),v.jsx(wr,{children:v.jsx(U6,{})})]})})]}),v.jsx($6,{})]}),v.jsxs("section",{className:"container mx-auto px-4 py-16",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Why Choose careXpert?"}),v.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Experience healthcare like never before with our cutting-edge platform designed for modern patients and doctors."})]}),v.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[v.jsx(br,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:v.jsx(wi,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Expert Doctors"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Connect with certified healthcare professionals"})]})}),v.jsx(br,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:v.jsx(Ci,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"24/7 Available"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Round-the-clock healthcare support"})]})}),v.jsx(br,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-purple-100 dark:bg-purple-900/30 backdrop-blur-sm",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:v.jsx(ey,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Secure & Private"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your health data is protected and encrypted"})]})}),v.jsx(br,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-orange-100 dark:bg-orange-900/30 backdrop-blur-sm",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:v.jsx(ty,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"AI Powered"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Smart consultations with AI assistance"})]})})]})]}),v.jsx(Ei,{})]})}const V6=Q0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function es({className:e,variant:t,...r}){return v.jsx("div",{className:dn(V6({variant:t}),e),...r})}function z6(){const e=[{icon:wi,label:"Active Users",value:"10,000+"},{icon:Ti,label:"Doctors",value:"500+"},{icon:Ci,label:"Consultations",value:"50,000+"},{icon:x6,label:"Cities",value:"25+"}],t=[{icon:Ti,title:"Expert Healthcare",description:"Connect with certified doctors and healthcare professionals"},{icon:ey,title:"Secure & Private",description:"Your health data is protected with enterprise-grade security"},{icon:Ci,title:"24/7 Available",description:"Access healthcare support anytime, anywhere"},{icon:m6,title:"Quality Assured",description:"All doctors are verified and maintain high standards"}],r=[{name:"Dr. Sarah Mitchell",role:"Chief Medical Officer",image:"/placeholder.svg",bio:"15+ years in digital healthcare innovation"},{name:"John Anderson",role:"CEO & Founder",image:"/placeholder.svg",bio:"Healthcare technology entrepreneur"},{name:"Dr. Michael Rodriguez",role:"Head of AI Development",image:"/placeholder.svg",bio:"AI researcher specializing in medical applications"}];return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("h1",{className:"text-5xl font-bold text-gray-900 dark:text-white mb-6",children:"About careXpert"}),v.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"We're revolutionizing healthcare by making quality medical care accessible to everyone, anywhere, anytime through cutting-edge technology and compassionate care."})]}),v.jsx("div",{className:"grid md:grid-cols-4 gap-6 mb-16",children:e.map((n,s)=>v.jsx(br,{className:"text-center p-6",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:v.jsx(n.icon,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),v.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n.value}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.label})]})},s))}),v.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Our Mission"}),v.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:"At careXpert, we believe that quality healthcare should be accessible to everyone. Our platform bridges the gap between patients and healthcare providers through innovative technology, making medical consultations more convenient, affordable, and effective."}),v.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"We combine the expertise of certified medical professionals with the power of AI to provide comprehensive healthcare solutions that adapt to your needs."})]}),v.jsx("div",{className:"relative",children:v.jsx("img",{src:"/image.png",alt:"Healthcare team",className:"rounded-2xl shadow-xl"})})]}),v.jsxs("div",{className:"mb-16",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Why Choose careXpert?"}),v.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,s)=>v.jsx(br,{className:"text-center p-6 hover:shadow-lg transition-shadow",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:v.jsx(n.icon,{className:"h-8 w-8 text-white"})}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:n.title}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.description})]})},s))})]}),v.jsxs("div",{className:"mb-16",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Meet Our Team"}),v.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map((n,s)=>v.jsx(br,{className:"text-center p-6",children:v.jsxs(wr,{className:"p-0",children:[v.jsx("img",{src:n.image||"/placeholder.svg",alt:n.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:n.name}),v.jsx(es,{className:"mb-3",children:n.role}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]})},s))})]}),v.jsx(br,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:v.jsxs(wr,{className:"p-12 text-center",children:[v.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Values"}),v.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Compassion"}),v.jsx("p",{className:"opacity-90",children:"We put patients first and treat everyone with empathy and respect"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Innovation"}),v.jsx("p",{className:"opacity-90",children:"We continuously improve our platform with cutting-edge technology"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Trust"}),v.jsx("p",{className:"opacity-90",children:"We maintain the highest standards of security and privacy"})]})]})]})})]}),v.jsx(Ei,{})]})}const pl=D.forwardRef(({className:e,type:t,...r},n)=>v.jsx("input",{type:t,className:dn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));pl.displayName="Input";function H6(e,t=[]){let r=[];function n(a,h){const p=D.createContext(h),u=r.length;r=[...r,h];const i=_=>{var d;const{scope:f,children:o,...w}=_,l=((d=f==null?void 0:f[e])==null?void 0:d[u])||p,y=D.useMemo(()=>w,Object.values(w));return v.jsx(l.Provider,{value:y,children:o})};i.displayName=a+"Provider";function g(_,f){var l;const o=((l=f==null?void 0:f[e])==null?void 0:l[u])||p,w=D.useContext(o);if(w)return w;if(h!==void 0)return h;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[i,g]}const s=()=>{const a=r.map(h=>D.createContext(h));return function(p){const u=(p==null?void 0:p[e])||a;return D.useMemo(()=>({[`__scope${e}`]:{...p,[e]:u}}),[p,u])}};return s.scopeName=e,[n,q6(s,...t)]}function q6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const h=n.reduce((p,{useScope:u,scopeName:i})=>{const _=u(a)[`__scope${i}`];return{...p,..._}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function us(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var bn=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{};function fb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function K6(...e){return t=>{let r=!1;const n=e.map(s=>{const a=fb(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():fb(e[s],null)}}}}function G6(e){const t=Y6(e),r=D.forwardRef((n,s)=>{const{children:a,...h}=n,p=D.Children.toArray(a),u=p.find(J6);if(u){const i=u.props.children,g=p.map(_=>_===u?D.Children.count(i)>1?D.Children.only(null):D.isValidElement(i)?i.props.children:null:_);return v.jsx(t,{...h,ref:s,children:D.isValidElement(i)?D.cloneElement(i,void 0,g):null})}return v.jsx(t,{...h,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function Y6(e){const t=D.forwardRef((r,n)=>{const{children:s,...a}=r;if(D.isValidElement(s)){const h=Z6(s),p=X6(a,s.props);return s.type!==D.Fragment&&(p.ref=n?K6(n,h):h),D.cloneElement(s,p)}return D.Children.count(s)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q6=Symbol("radix.slottable");function J6(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q6}function X6(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{const u=a(...p);return s(...p),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function Z6(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var e4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ny=e4.reduce((e,t)=>{const r=G6(`Primitive.${t}`),n=D.forwardRef((s,a)=>{const{asChild:h,...p}=s,u=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...p,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),ax={exports:{}},ix={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=D;function t4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var r4=typeof Object.is=="function"?Object.is:t4,n4=Pu.useState,s4=Pu.useEffect,a4=Pu.useLayoutEffect,i4=Pu.useDebugValue;function o4(e,t){var r=t(),n=n4({inst:{value:r,getSnapshot:t}}),s=n[0].inst,a=n[1];return a4(function(){s.value=r,s.getSnapshot=t,rg(s)&&a({inst:s})},[e,r,t]),s4(function(){return rg(s)&&a({inst:s}),e(function(){rg(s)&&a({inst:s})})},[e]),i4(r),r}function rg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!r4(e,r)}catch{return!0}}function c4(e,t){return t()}var l4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c4:o4;ix.useSyncExternalStore=Pu.useSyncExternalStore!==void 0?Pu.useSyncExternalStore:l4;ax.exports=ix;var u4=ax.exports;function d4(){return u4.useSyncExternalStore(p4,()=>!0,()=>!1)}function p4(){return()=>{}}var sy="Avatar",[h4,u7]=H6(sy),[f4,ox]=h4(sy),cx=D.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,a]=D.useState("idle");return v.jsx(f4,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:v.jsx(ny.span,{...n,ref:t})})});cx.displayName=sy;var lx="AvatarImage",ux=D.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=e,h=ox(lx,r),p=m4(n,a),u=us(i=>{s(i),h.onImageLoadingStatusChange(i)});return bn(()=>{p!=="idle"&&u(p)},[p,u]),p==="loaded"?v.jsx(ny.img,{...a,ref:t,src:n}):null});ux.displayName=lx;var dx="AvatarFallback",px=D.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,a=ox(dx,r),[h,p]=D.useState(n===void 0);return D.useEffect(()=>{if(n!==void 0){const u=window.setTimeout(()=>p(!0),n);return()=>window.clearTimeout(u)}},[n]),h&&a.imageLoadingStatus!=="loaded"?v.jsx(ny.span,{...s,ref:t}):null});px.displayName=dx;function mb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function m4(e,{referrerPolicy:t,crossOrigin:r}){const n=d4(),s=D.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[h,p]=D.useState(()=>mb(a,e));return bn(()=>{p(mb(a,e))},[a,e]),bn(()=>{const u=_=>()=>{p(_)};if(!a)return;const i=u("loaded"),g=u("error");return a.addEventListener("load",i),a.addEventListener("error",g),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",i),a.removeEventListener("error",g)}},[a,r,t]),h}var hx=cx,fx=ux,mx=px;const Ta=D.forwardRef(({className:e,...t},r)=>v.jsx(hx,{ref:r,className:dn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ta.displayName=hx.displayName;const Pa=D.forwardRef(({className:e,...t},r)=>v.jsx(fx,{ref:r,className:dn("aspect-square h-full w-full",e),...t}));Pa.displayName=fx.displayName;const Oa=D.forwardRef(({className:e,...t},r)=>v.jsx(mx,{ref:r,className:dn("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Oa.displayName=mx.displayName;function Rv(e,[t,r]){return Math.min(r,Math.max(t,e))}function gs(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ay(e,t=[]){let r=[];function n(a,h){const p=D.createContext(h),u=r.length;r=[...r,h];const i=_=>{var d;const{scope:f,children:o,...w}=_,l=((d=f==null?void 0:f[e])==null?void 0:d[u])||p,y=D.useMemo(()=>w,Object.values(w));return v.jsx(l.Provider,{value:y,children:o})};i.displayName=a+"Provider";function g(_,f){var l;const o=((l=f==null?void 0:f[e])==null?void 0:l[u])||p,w=D.useContext(o);if(w)return w;if(h!==void 0)return h;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[i,g]}const s=()=>{const a=r.map(h=>D.createContext(h));return function(p){const u=(p==null?void 0:p[e])||a;return D.useMemo(()=>({[`__scope${e}`]:{...p,[e]:u}}),[p,u])}};return s.scopeName=e,[n,g4(s,...t)]}function g4(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const h=n.reduce((p,{useScope:u,scopeName:i})=>{const _=u(a)[`__scope${i}`];return{...p,..._}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function gb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gx(...e){return t=>{let r=!1;const n=e.map(s=>{const a=gb(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():gb(e[s],null)}}}}function Ws(...e){return D.useCallback(gx(...e),e)}function kf(e){const t=v4(e),r=D.forwardRef((n,s)=>{const{children:a,...h}=n,p=D.Children.toArray(a),u=p.find(_4);if(u){const i=u.props.children,g=p.map(_=>_===u?D.Children.count(i)>1?D.Children.only(null):D.isValidElement(i)?i.props.children:null:_);return v.jsx(t,{...h,ref:s,children:D.isValidElement(i)?D.cloneElement(i,void 0,g):null})}return v.jsx(t,{...h,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function v4(e){const t=D.forwardRef((r,n)=>{const{children:s,...a}=r;if(D.isValidElement(s)){const h=w4(s),p=b4(a,s.props);return s.type!==D.Fragment&&(p.ref=n?gx(n,h):h),D.cloneElement(s,p)}return D.Children.count(s)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var y4=Symbol("radix.slottable");function _4(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===y4}function b4(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{const u=a(...p);return s(...p),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function w4(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function S4(e){const t=e+"CollectionProvider",[r,n]=ay(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=l=>{const{scope:y,children:d}=l,m=_t.useRef(null),S=_t.useRef(new Map).current;return v.jsx(s,{scope:y,itemMap:S,collectionRef:m,children:d})};h.displayName=t;const p=e+"CollectionSlot",u=kf(p),i=_t.forwardRef((l,y)=>{const{scope:d,children:m}=l,S=a(p,d),x=Ws(y,S.collectionRef);return v.jsx(u,{ref:x,children:m})});i.displayName=p;const g=e+"CollectionItemSlot",_="data-radix-collection-item",f=kf(g),o=_t.forwardRef((l,y)=>{const{scope:d,children:m,...S}=l,x=_t.useRef(null),k=Ws(y,x),I=a(g,d);return _t.useEffect(()=>(I.itemMap.set(x,{ref:x,...S}),()=>void I.itemMap.delete(x))),v.jsx(f,{[_]:"",ref:k,children:m})});o.displayName=g;function w(l){const y=a(e+"CollectionConsumer",l);return _t.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const S=Array.from(m.querySelectorAll(`[${_}]`));return Array.from(y.itemMap.values()).sort((I,T)=>S.indexOf(I.ref.current)-S.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:h,Slot:i,ItemSlot:o},w,n]}var x4=D.createContext(void 0);function R4(e){const t=D.useContext(x4);return e||t||"ltr"}var E4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ds=E4.reduce((e,t)=>{const r=kf(`Primitive.${t}`),n=D.forwardRef((s,a)=>{const{asChild:h,...p}=s,u=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...p,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function k4(e,t){e&&wl.flushSync(()=>e.dispatchEvent(t))}function C4(e,t=globalThis==null?void 0:globalThis.document){const r=us(e);D.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var T4="DismissableLayer",Ev="dismissableLayer.update",P4="dismissableLayer.pointerDownOutside",O4="dismissableLayer.focusOutside",vb,vx=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yx=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:h,onDismiss:p,...u}=e,i=D.useContext(vx),[g,_]=D.useState(null),f=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,o]=D.useState({}),w=Ws(t,T=>_(T)),l=Array.from(i.layers),[y]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),d=l.indexOf(y),m=g?l.indexOf(g):-1,S=i.layersWithOutsidePointerEventsDisabled.size>0,x=m>=d,k=I4(T=>{const C=T.target,E=[...i.branches].some(c=>c.contains(C));!x||E||(s==null||s(T),h==null||h(T),T.defaultPrevented||p==null||p())},f),I=D4(T=>{const C=T.target;[...i.branches].some(c=>c.contains(C))||(a==null||a(T),h==null||h(T),T.defaultPrevented||p==null||p())},f);return C4(T=>{m===i.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&p&&(T.preventDefault(),p()))},f),D.useEffect(()=>{if(g)return r&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(vb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(g)),i.layers.add(g),yb(),()=>{r&&i.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=vb)}},[g,f,r,i]),D.useEffect(()=>()=>{g&&(i.layers.delete(g),i.layersWithOutsidePointerEventsDisabled.delete(g),yb())},[g,i]),D.useEffect(()=>{const T=()=>o({});return document.addEventListener(Ev,T),()=>document.removeEventListener(Ev,T)},[]),v.jsx(ds.div,{...u,ref:w,style:{pointerEvents:S?x?"auto":"none":void 0,...e.style},onFocusCapture:gs(e.onFocusCapture,I.onFocusCapture),onBlurCapture:gs(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:gs(e.onPointerDownCapture,k.onPointerDownCapture)})});yx.displayName=T4;var N4="DismissableLayerBranch",A4=D.forwardRef((e,t)=>{const r=D.useContext(vx),n=D.useRef(null),s=Ws(t,n);return D.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),v.jsx(ds.div,{...e,ref:s})});A4.displayName=N4;function I4(e,t=globalThis==null?void 0:globalThis.document){const r=us(e),n=D.useRef(!1),s=D.useRef(()=>{});return D.useEffect(()=>{const a=p=>{if(p.target&&!n.current){let u=function(){_x(P4,r,i,{discrete:!0})};const i={originalEvent:p};p.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);n.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function D4(e,t=globalThis==null?void 0:globalThis.document){const r=us(e),n=D.useRef(!1);return D.useEffect(()=>{const s=a=>{a.target&&!n.current&&_x(O4,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function yb(){const e=new CustomEvent(Ev);document.dispatchEvent(e)}function _x(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?k4(s,a):s.dispatchEvent(a)}var ng=0;function M4(){D.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_b()),document.body.insertAdjacentElement("beforeend",e[1]??_b()),ng++,()=>{ng===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ng--}},[])}function _b(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sg="focusScope.autoFocusOnMount",ag="focusScope.autoFocusOnUnmount",bb={bubbles:!1,cancelable:!0},L4="FocusScope",bx=D.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...h}=e,[p,u]=D.useState(null),i=us(s),g=us(a),_=D.useRef(null),f=Ws(t,l=>u(l)),o=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(n){let l=function(S){if(o.paused||!p)return;const x=S.target;p.contains(x)?_.current=x:Uo(_.current,{select:!0})},y=function(S){if(o.paused||!p)return;const x=S.relatedTarget;x!==null&&(p.contains(x)||Uo(_.current,{select:!0}))},d=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&Uo(p)};document.addEventListener("focusin",l),document.addEventListener("focusout",y);const m=new MutationObserver(d);return p&&m.observe(p,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",y),m.disconnect()}}},[n,p,o.paused]),D.useEffect(()=>{if(p){Sb.add(o);const l=document.activeElement;if(!p.contains(l)){const d=new CustomEvent(sg,bb);p.addEventListener(sg,i),p.dispatchEvent(d),d.defaultPrevented||(j4(W4(wx(p)),{select:!0}),document.activeElement===l&&Uo(p))}return()=>{p.removeEventListener(sg,i),setTimeout(()=>{const d=new CustomEvent(ag,bb);p.addEventListener(ag,g),p.dispatchEvent(d),d.defaultPrevented||Uo(l??document.body,{select:!0}),p.removeEventListener(ag,g),Sb.remove(o)},0)}}},[p,i,g,o]);const w=D.useCallback(l=>{if(!r&&!n||o.paused)return;const y=l.key==="Tab"&&!l.altKey&&!l.ctrlKey&&!l.metaKey,d=document.activeElement;if(y&&d){const m=l.currentTarget,[S,x]=B4(m);S&&x?!l.shiftKey&&d===x?(l.preventDefault(),r&&Uo(S,{select:!0})):l.shiftKey&&d===S&&(l.preventDefault(),r&&Uo(x,{select:!0})):d===m&&l.preventDefault()}},[r,n,o.paused]);return v.jsx(ds.div,{tabIndex:-1,...h,ref:f,onKeyDown:w})});bx.displayName=L4;function j4(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Uo(n,{select:t}),document.activeElement!==r)return}function B4(e){const t=wx(e),r=wb(t,e),n=wb(t.reverse(),e);return[r,n]}function wx(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function wb(e,t){for(const r of e)if(!F4(r,{upTo:t}))return r}function F4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function U4(e){return e instanceof HTMLInputElement&&"select"in e}function Uo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&U4(e)&&t&&e.select()}}var Sb=$4();function $4(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=xb(e,t),e.unshift(t)},remove(t){var r;e=xb(e,t),(r=e[0])==null||r.resume()}}}function xb(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function W4(e){return e.filter(t=>t.tagName!=="A")}var V4=yl[" useId ".trim().toString()]||(()=>{}),z4=0;function iy(e){const[t,r]=D.useState(V4());return bn(()=>{r(n=>n??String(z4++))},[e]),t?`radix-${t}`:""}const H4=["top","right","bottom","left"],uc=Math.min,Ea=Math.max,Cf=Math.round,vh=Math.floor,ki=e=>({x:e,y:e}),q4={left:"right",right:"left",bottom:"top",top:"bottom"},K4={start:"end",end:"start"};function kv(e,t,r){return Ea(e,uc(t,r))}function ro(e,t){return typeof e=="function"?e(t):e}function no(e){return e.split("-")[0]}function ju(e){return e.split("-")[1]}function oy(e){return e==="x"?"y":"x"}function cy(e){return e==="y"?"height":"width"}function Si(e){return["top","bottom"].includes(no(e))?"y":"x"}function ly(e){return oy(Si(e))}function G4(e,t,r){r===void 0&&(r=!1);const n=ju(e),s=ly(e),a=cy(s);let h=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(h=Tf(h)),[h,Tf(h)]}function Y4(e){const t=Tf(e);return[Cv(e),t,Cv(t)]}function Cv(e){return e.replace(/start|end/g,t=>K4[t])}function Q4(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],h=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:h;default:return[]}}function J4(e,t,r,n){const s=ju(e);let a=Q4(no(e),r==="start",n);return s&&(a=a.map(h=>h+"-"+s),t&&(a=a.concat(a.map(Cv)))),a}function Tf(e){return e.replace(/left|right|bottom|top/g,t=>q4[t])}function X4(e){return{top:0,right:0,bottom:0,left:0,...e}}function Sx(e){return typeof e!="number"?X4(e):{top:e,right:e,bottom:e,left:e}}function Pf(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Rb(e,t,r){let{reference:n,floating:s}=e;const a=Si(t),h=ly(t),p=cy(h),u=no(t),i=a==="y",g=n.x+n.width/2-s.width/2,_=n.y+n.height/2-s.height/2,f=n[p]/2-s[p]/2;let o;switch(u){case"top":o={x:g,y:n.y-s.height};break;case"bottom":o={x:g,y:n.y+n.height};break;case"right":o={x:n.x+n.width,y:_};break;case"left":o={x:n.x-s.width,y:_};break;default:o={x:n.x,y:n.y}}switch(ju(t)){case"start":o[h]-=f*(r&&i?-1:1);break;case"end":o[h]+=f*(r&&i?-1:1);break}return o}const Z4=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:h}=r,p=a.filter(Boolean),u=await(h.isRTL==null?void 0:h.isRTL(t));let i=await h.getElementRects({reference:e,floating:t,strategy:s}),{x:g,y:_}=Rb(i,n,u),f=n,o={},w=0;for(let l=0;l<p.length;l++){const{name:y,fn:d}=p[l],{x:m,y:S,data:x,reset:k}=await d({x:g,y:_,initialPlacement:n,placement:f,strategy:s,middlewareData:o,rects:i,platform:h,elements:{reference:e,floating:t}});g=m??g,_=S??_,o={...o,[y]:{...o[y],...x}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(i=k.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:g,y:_}=Rb(i,f,u)),l=-1)}return{x:g,y:_,placement:f,strategy:s,middlewareData:o}};async function ip(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:h,elements:p,strategy:u}=e,{boundary:i="clippingAncestors",rootBoundary:g="viewport",elementContext:_="floating",altBoundary:f=!1,padding:o=0}=ro(t,e),w=Sx(o),y=p[f?_==="floating"?"reference":"floating":_],d=Pf(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(p.floating)),boundary:i,rootBoundary:g,strategy:u})),m=_==="floating"?{x:n,y:s,width:h.floating.width,height:h.floating.height}:h.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(p.floating)),x=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},k=Pf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:p,rect:m,offsetParent:S,strategy:u}):m);return{top:(d.top-k.top+w.top)/x.y,bottom:(k.bottom-d.bottom+w.bottom)/x.y,left:(d.left-k.left+w.left)/x.x,right:(k.right-d.right+w.right)/x.x}}const eO=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:h,elements:p,middlewareData:u}=t,{element:i,padding:g=0}=ro(e,t)||{};if(i==null)return{};const _=Sx(g),f={x:r,y:n},o=ly(s),w=cy(o),l=await h.getDimensions(i),y=o==="y",d=y?"top":"left",m=y?"bottom":"right",S=y?"clientHeight":"clientWidth",x=a.reference[w]+a.reference[o]-f[o]-a.floating[w],k=f[o]-a.reference[o],I=await(h.getOffsetParent==null?void 0:h.getOffsetParent(i));let T=I?I[S]:0;(!T||!await(h.isElement==null?void 0:h.isElement(I)))&&(T=p.floating[S]||a.floating[w]);const C=x/2-k/2,E=T/2-l[w]/2-1,c=uc(_[d],E),b=uc(_[m],E),R=c,P=T-l[w]-b,O=T/2-l[w]/2+C,N=kv(R,O,P),M=!u.arrow&&ju(s)!=null&&O!==N&&a.reference[w]/2-(O<R?c:b)-l[w]/2<0,L=M?O<R?O-R:O-P:0;return{[o]:f[o]+L,data:{[o]:N,centerOffset:O-N-L,...M&&{alignmentOffset:L}},reset:M}}}),tO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:h,initialPlacement:p,platform:u,elements:i}=t,{mainAxis:g=!0,crossAxis:_=!0,fallbackPlacements:f,fallbackStrategy:o="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:l=!0,...y}=ro(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const d=no(s),m=Si(p),S=no(p)===p,x=await(u.isRTL==null?void 0:u.isRTL(i.floating)),k=f||(S||!l?[Tf(p)]:Y4(p)),I=w!=="none";!f&&I&&k.push(...J4(p,l,w,x));const T=[p,...k],C=await ip(t,y),E=[];let c=((n=a.flip)==null?void 0:n.overflows)||[];if(g&&E.push(C[d]),_){const O=G4(s,h,x);E.push(C[O[0]],C[O[1]])}if(c=[...c,{placement:s,overflows:E}],!E.every(O=>O<=0)){var b,R;const O=(((b=a.flip)==null?void 0:b.index)||0)+1,N=T[O];if(N&&(!(_==="alignment"?m!==Si(N):!1)||c.every(A=>A.overflows[0]>0&&Si(A.placement)===m)))return{data:{index:O,overflows:c},reset:{placement:N}};let M=(R=c.filter(L=>L.overflows[0]<=0).sort((L,A)=>L.overflows[1]-A.overflows[1])[0])==null?void 0:R.placement;if(!M)switch(o){case"bestFit":{var P;const L=(P=c.filter(A=>{if(I){const j=Si(A.placement);return j===m||j==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(j=>j>0).reduce((j,G)=>j+G,0)]).sort((A,j)=>A[1]-j[1])[0])==null?void 0:P[0];L&&(M=L);break}case"initialPlacement":M=p;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function Eb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function kb(e){return H4.some(t=>e[t]>=0)}const rO=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=ro(e,t);switch(n){case"referenceHidden":{const a=await ip(t,{...s,elementContext:"reference"}),h=Eb(a,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:kb(h)}}}case"escaped":{const a=await ip(t,{...s,altBoundary:!0}),h=Eb(a,r.floating);return{data:{escapedOffsets:h,escaped:kb(h)}}}default:return{}}}}};async function nO(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),h=no(r),p=ju(r),u=Si(r)==="y",i=["left","top"].includes(h)?-1:1,g=a&&u?-1:1,_=ro(t,e);let{mainAxis:f,crossAxis:o,alignmentAxis:w}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return p&&typeof w=="number"&&(o=p==="end"?w*-1:w),u?{x:o*g,y:f*i}:{x:f*i,y:o*g}}const sO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:h,middlewareData:p}=t,u=await nO(t,e);return h===((r=p.offset)==null?void 0:r.placement)&&(n=p.arrow)!=null&&n.alignmentOffset?{}:{x:s+u.x,y:a+u.y,data:{...u,placement:h}}}}},aO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:h=!1,limiter:p={fn:y=>{let{x:d,y:m}=y;return{x:d,y:m}}},...u}=ro(e,t),i={x:r,y:n},g=await ip(t,u),_=Si(no(s)),f=oy(_);let o=i[f],w=i[_];if(a){const y=f==="y"?"top":"left",d=f==="y"?"bottom":"right",m=o+g[y],S=o-g[d];o=kv(m,o,S)}if(h){const y=_==="y"?"top":"left",d=_==="y"?"bottom":"right",m=w+g[y],S=w-g[d];w=kv(m,w,S)}const l=p.fn({...t,[f]:o,[_]:w});return{...l,data:{x:l.x-r,y:l.y-n,enabled:{[f]:a,[_]:h}}}}}},iO=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:h}=t,{offset:p=0,mainAxis:u=!0,crossAxis:i=!0}=ro(e,t),g={x:r,y:n},_=Si(s),f=oy(_);let o=g[f],w=g[_];const l=ro(p,t),y=typeof l=="number"?{mainAxis:l,crossAxis:0}:{mainAxis:0,crossAxis:0,...l};if(u){const S=f==="y"?"height":"width",x=a.reference[f]-a.floating[S]+y.mainAxis,k=a.reference[f]+a.reference[S]-y.mainAxis;o<x?o=x:o>k&&(o=k)}if(i){var d,m;const S=f==="y"?"width":"height",x=["top","left"].includes(no(s)),k=a.reference[_]-a.floating[S]+(x&&((d=h.offset)==null?void 0:d[_])||0)+(x?0:y.crossAxis),I=a.reference[_]+a.reference[S]+(x?0:((m=h.offset)==null?void 0:m[_])||0)-(x?y.crossAxis:0);w<k?w=k:w>I&&(w=I)}return{[f]:o,[_]:w}}}},oO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:h,elements:p}=t,{apply:u=()=>{},...i}=ro(e,t),g=await ip(t,i),_=no(s),f=ju(s),o=Si(s)==="y",{width:w,height:l}=a.floating;let y,d;_==="top"||_==="bottom"?(y=_,d=f===(await(h.isRTL==null?void 0:h.isRTL(p.floating))?"start":"end")?"left":"right"):(d=_,y=f==="end"?"top":"bottom");const m=l-g.top-g.bottom,S=w-g.left-g.right,x=uc(l-g[y],m),k=uc(w-g[d],S),I=!t.middlewareData.shift;let T=x,C=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=S),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=m),I&&!f){const c=Ea(g.left,0),b=Ea(g.right,0),R=Ea(g.top,0),P=Ea(g.bottom,0);o?C=w-2*(c!==0||b!==0?c+b:Ea(g.left,g.right)):T=l-2*(R!==0||P!==0?R+P:Ea(g.top,g.bottom))}await u({...t,availableWidth:C,availableHeight:T});const E=await h.getDimensions(p.floating);return w!==E.width||l!==E.height?{reset:{rects:!0}}:{}}}};function rm(){return typeof window<"u"}function Bu(e){return xx(e)?(e.nodeName||"").toLowerCase():"#document"}function Na(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ni(e){var t;return(t=(xx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xx(e){return rm()?e instanceof Node||e instanceof Na(e).Node:!1}function li(e){return rm()?e instanceof Element||e instanceof Na(e).Element:!1}function Pi(e){return rm()?e instanceof HTMLElement||e instanceof Na(e).HTMLElement:!1}function Cb(e){return!rm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Na(e).ShadowRoot}function vp(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=ui(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function cO(e){return["table","td","th"].includes(Bu(e))}function nm(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function uy(e){const t=dy(),r=li(e)?ui(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function lO(e){let t=dc(e);for(;Pi(t)&&!Ou(t);){if(uy(t))return t;if(nm(t))return null;t=dc(t)}return null}function dy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ou(e){return["html","body","#document"].includes(Bu(e))}function ui(e){return Na(e).getComputedStyle(e)}function sm(e){return li(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dc(e){if(Bu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Cb(e)&&e.host||Ni(e);return Cb(t)?t.host:t}function Rx(e){const t=dc(e);return Ou(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pi(t)&&vp(t)?t:Rx(t)}function op(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Rx(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),h=Na(s);if(a){const p=Tv(h);return t.concat(h,h.visualViewport||[],vp(s)?s:[],p&&r?op(p):[])}return t.concat(s,op(s,[],r))}function Tv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ex(e){const t=ui(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Pi(e),a=s?e.offsetWidth:r,h=s?e.offsetHeight:n,p=Cf(r)!==a||Cf(n)!==h;return p&&(r=a,n=h),{width:r,height:n,$:p}}function py(e){return li(e)?e:e.contextElement}function vu(e){const t=py(e);if(!Pi(t))return ki(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=Ex(t);let h=(a?Cf(r.width):r.width)/n,p=(a?Cf(r.height):r.height)/s;return(!h||!Number.isFinite(h))&&(h=1),(!p||!Number.isFinite(p))&&(p=1),{x:h,y:p}}const uO=ki(0);function kx(e){const t=Na(e);return!dy()||!t.visualViewport?uO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dO(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Na(e)?!1:t}function hl(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=py(e);let h=ki(1);t&&(n?li(n)&&(h=vu(n)):h=vu(e));const p=dO(a,r,n)?kx(a):ki(0);let u=(s.left+p.x)/h.x,i=(s.top+p.y)/h.y,g=s.width/h.x,_=s.height/h.y;if(a){const f=Na(a),o=n&&li(n)?Na(n):n;let w=f,l=Tv(w);for(;l&&n&&o!==w;){const y=vu(l),d=l.getBoundingClientRect(),m=ui(l),S=d.left+(l.clientLeft+parseFloat(m.paddingLeft))*y.x,x=d.top+(l.clientTop+parseFloat(m.paddingTop))*y.y;u*=y.x,i*=y.y,g*=y.x,_*=y.y,u+=S,i+=x,w=Na(l),l=Tv(w)}}return Pf({width:g,height:_,x:u,y:i})}function hy(e,t){const r=sm(e).scrollLeft;return t?t.left+r:hl(Ni(e)).left+r}function Cx(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:hy(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function pO(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",h=Ni(n),p=t?nm(t.floating):!1;if(n===h||p&&a)return r;let u={scrollLeft:0,scrollTop:0},i=ki(1);const g=ki(0),_=Pi(n);if((_||!_&&!a)&&((Bu(n)!=="body"||vp(h))&&(u=sm(n)),Pi(n))){const o=hl(n);i=vu(n),g.x=o.x+n.clientLeft,g.y=o.y+n.clientTop}const f=h&&!_&&!a?Cx(h,u,!0):ki(0);return{width:r.width*i.x,height:r.height*i.y,x:r.x*i.x-u.scrollLeft*i.x+g.x+f.x,y:r.y*i.y-u.scrollTop*i.y+g.y+f.y}}function hO(e){return Array.from(e.getClientRects())}function fO(e){const t=Ni(e),r=sm(e),n=e.ownerDocument.body,s=Ea(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Ea(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let h=-r.scrollLeft+hy(e);const p=-r.scrollTop;return ui(n).direction==="rtl"&&(h+=Ea(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:h,y:p}}function mO(e,t){const r=Na(e),n=Ni(e),s=r.visualViewport;let a=n.clientWidth,h=n.clientHeight,p=0,u=0;if(s){a=s.width,h=s.height;const i=dy();(!i||i&&t==="fixed")&&(p=s.offsetLeft,u=s.offsetTop)}return{width:a,height:h,x:p,y:u}}function gO(e,t){const r=hl(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Pi(e)?vu(e):ki(1),h=e.clientWidth*a.x,p=e.clientHeight*a.y,u=s*a.x,i=n*a.y;return{width:h,height:p,x:u,y:i}}function Tb(e,t,r){let n;if(t==="viewport")n=mO(e,r);else if(t==="document")n=fO(Ni(e));else if(li(t))n=gO(t,r);else{const s=kx(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Pf(n)}function Tx(e,t){const r=dc(e);return r===t||!li(r)||Ou(r)?!1:ui(r).position==="fixed"||Tx(r,t)}function vO(e,t){const r=t.get(e);if(r)return r;let n=op(e,[],!1).filter(p=>li(p)&&Bu(p)!=="body"),s=null;const a=ui(e).position==="fixed";let h=a?dc(e):e;for(;li(h)&&!Ou(h);){const p=ui(h),u=uy(h);!u&&p.position==="fixed"&&(s=null),(a?!u&&!s:!u&&p.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||vp(h)&&!u&&Tx(e,h))?n=n.filter(g=>g!==h):s=p,h=dc(h)}return t.set(e,n),n}function yO(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const h=[...r==="clippingAncestors"?nm(t)?[]:vO(t,this._c):[].concat(r),n],p=h[0],u=h.reduce((i,g)=>{const _=Tb(t,g,s);return i.top=Ea(_.top,i.top),i.right=uc(_.right,i.right),i.bottom=uc(_.bottom,i.bottom),i.left=Ea(_.left,i.left),i},Tb(t,p,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function _O(e){const{width:t,height:r}=Ex(e);return{width:t,height:r}}function bO(e,t,r){const n=Pi(t),s=Ni(t),a=r==="fixed",h=hl(e,!0,a,t);let p={scrollLeft:0,scrollTop:0};const u=ki(0);function i(){u.x=hy(s)}if(n||!n&&!a)if((Bu(t)!=="body"||vp(s))&&(p=sm(t)),n){const o=hl(t,!0,a,t);u.x=o.x+t.clientLeft,u.y=o.y+t.clientTop}else s&&i();a&&!n&&s&&i();const g=s&&!n&&!a?Cx(s,p):ki(0),_=h.left+p.scrollLeft-u.x-g.x,f=h.top+p.scrollTop-u.y-g.y;return{x:_,y:f,width:h.width,height:h.height}}function ig(e){return ui(e).position==="static"}function Pb(e,t){if(!Pi(e)||ui(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ni(e)===r&&(r=r.ownerDocument.body),r}function Px(e,t){const r=Na(e);if(nm(e))return r;if(!Pi(e)){let s=dc(e);for(;s&&!Ou(s);){if(li(s)&&!ig(s))return s;s=dc(s)}return r}let n=Pb(e,t);for(;n&&cO(n)&&ig(n);)n=Pb(n,t);return n&&Ou(n)&&ig(n)&&!uy(n)?r:n||lO(e)||r}const wO=async function(e){const t=this.getOffsetParent||Px,r=this.getDimensions,n=await r(e.floating);return{reference:bO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function SO(e){return ui(e).direction==="rtl"}const xO={convertOffsetParentRelativeRectToViewportRelativeRect:pO,getDocumentElement:Ni,getClippingRect:yO,getOffsetParent:Px,getElementRects:wO,getClientRects:hO,getDimensions:_O,getScale:vu,isElement:li,isRTL:SO};function Ox(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function RO(e,t){let r=null,n;const s=Ni(e);function a(){var p;clearTimeout(n),(p=r)==null||p.disconnect(),r=null}function h(p,u){p===void 0&&(p=!1),u===void 0&&(u=1),a();const i=e.getBoundingClientRect(),{left:g,top:_,width:f,height:o}=i;if(p||t(),!f||!o)return;const w=vh(_),l=vh(s.clientWidth-(g+f)),y=vh(s.clientHeight-(_+o)),d=vh(g),S={rootMargin:-w+"px "+-l+"px "+-y+"px "+-d+"px",threshold:Ea(0,uc(1,u))||1};let x=!0;function k(I){const T=I[0].intersectionRatio;if(T!==u){if(!x)return h();T?h(!1,T):n=setTimeout(()=>{h(!1,1e-7)},1e3)}T===1&&!Ox(i,e.getBoundingClientRect())&&h(),x=!1}try{r=new IntersectionObserver(k,{...S,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,S)}r.observe(e)}return h(!0),a}function EO(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,i=py(e),g=s||a?[...i?op(i):[],...op(t)]:[];g.forEach(d=>{s&&d.addEventListener("scroll",r,{passive:!0}),a&&d.addEventListener("resize",r)});const _=i&&p?RO(i,r):null;let f=-1,o=null;h&&(o=new ResizeObserver(d=>{let[m]=d;m&&m.target===i&&o&&(o.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=o)==null||S.observe(t)})),r()}),i&&!u&&o.observe(i),o.observe(t));let w,l=u?hl(e):null;u&&y();function y(){const d=hl(e);l&&!Ox(l,d)&&r(),l=d,w=requestAnimationFrame(y)}return r(),()=>{var d;g.forEach(m=>{s&&m.removeEventListener("scroll",r),a&&m.removeEventListener("resize",r)}),_==null||_(),(d=o)==null||d.disconnect(),o=null,u&&cancelAnimationFrame(w)}}const kO=sO,CO=aO,TO=tO,PO=oO,OO=rO,Ob=eO,NO=iO,AO=(e,t,r)=>{const n=new Map,s={platform:xO,...r},a={...s.platform,_c:n};return Z4(e,t,{...s,platform:a})};var IO=typeof document<"u",DO=function(){},Uh=IO?D.useLayoutEffect:DO;function Of(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Of(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Of(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Nx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(e,t){const r=Nx(e);return Math.round(t*r)/r}function og(e){const t=D.useRef(e);return Uh(()=>{t.current=e}),t}function MO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:h}={},transform:p=!0,whileElementsMounted:u,open:i}=e,[g,_]=D.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,o]=D.useState(n);Of(f,n)||o(n);const[w,l]=D.useState(null),[y,d]=D.useState(null),m=D.useCallback(A=>{A!==I.current&&(I.current=A,l(A))},[]),S=D.useCallback(A=>{A!==T.current&&(T.current=A,d(A))},[]),x=a||w,k=h||y,I=D.useRef(null),T=D.useRef(null),C=D.useRef(g),E=u!=null,c=og(u),b=og(s),R=og(i),P=D.useCallback(()=>{if(!I.current||!T.current)return;const A={placement:t,strategy:r,middleware:f};b.current&&(A.platform=b.current),AO(I.current,T.current,A).then(j=>{const G={...j,isPositioned:R.current!==!1};O.current&&!Of(C.current,G)&&(C.current=G,wl.flushSync(()=>{_(G)}))})},[f,t,r,b,R]);Uh(()=>{i===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,_(A=>({...A,isPositioned:!1})))},[i]);const O=D.useRef(!1);Uh(()=>(O.current=!0,()=>{O.current=!1}),[]),Uh(()=>{if(x&&(I.current=x),k&&(T.current=k),x&&k){if(c.current)return c.current(x,k,P);P()}},[x,k,P,c,E]);const N=D.useMemo(()=>({reference:I,floating:T,setReference:m,setFloating:S}),[m,S]),M=D.useMemo(()=>({reference:x,floating:k}),[x,k]),L=D.useMemo(()=>{const A={position:r,left:0,top:0};if(!M.floating)return A;const j=Nb(M.floating,g.x),G=Nb(M.floating,g.y);return p?{...A,transform:"translate("+j+"px, "+G+"px)",...Nx(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:j,top:G}},[r,p,M.floating,g.x,g.y]);return D.useMemo(()=>({...g,update:P,refs:N,elements:M,floatingStyles:L}),[g,P,N,M,L])}const LO=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Ob({element:n.current,padding:s}).fn(r):{}:n?Ob({element:n,padding:s}).fn(r):{}}}},jO=(e,t)=>({...kO(e),options:[e,t]}),BO=(e,t)=>({...CO(e),options:[e,t]}),FO=(e,t)=>({...NO(e),options:[e,t]}),UO=(e,t)=>({...TO(e),options:[e,t]}),$O=(e,t)=>({...PO(e),options:[e,t]}),WO=(e,t)=>({...OO(e),options:[e,t]}),VO=(e,t)=>({...LO(e),options:[e,t]});var zO="Arrow",Ax=D.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return v.jsx(ds.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ax.displayName=zO;var HO=Ax;function qO(e){const[t,r]=D.useState(void 0);return bn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let h,p;if("borderBoxSize"in a){const u=a.borderBoxSize,i=Array.isArray(u)?u[0]:u;h=i.inlineSize,p=i.blockSize}else h=e.offsetWidth,p=e.offsetHeight;r({width:h,height:p})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var fy="Popper",[Ix,Dx]=ay(fy),[KO,Mx]=Ix(fy),Lx=e=>{const{__scopePopper:t,children:r}=e,[n,s]=D.useState(null);return v.jsx(KO,{scope:t,anchor:n,onAnchorChange:s,children:r})};Lx.displayName=fy;var jx="PopperAnchor",Bx=D.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=Mx(jx,r),h=D.useRef(null),p=Ws(t,h);return D.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||h.current)}),n?null:v.jsx(ds.div,{...s,ref:p})});Bx.displayName=jx;var my="PopperContent",[GO,YO]=Ix(my),Fx=D.forwardRef((e,t)=>{var se,ze,Ie,Ne,Ee,Le;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:u=!0,collisionBoundary:i=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:f=!1,updatePositionStrategy:o="optimized",onPlaced:w,...l}=e,y=Mx(my,r),[d,m]=D.useState(null),S=Ws(t,dt=>m(dt)),[x,k]=D.useState(null),I=qO(x),T=(I==null?void 0:I.width)??0,C=(I==null?void 0:I.height)??0,E=n+(a!=="center"?"-"+a:""),c=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},b=Array.isArray(i)?i:[i],R=b.length>0,P={padding:c,boundary:b.filter(JO),altBoundary:R},{refs:O,floatingStyles:N,placement:M,isPositioned:L,middlewareData:A}=MO({strategy:"fixed",placement:E,whileElementsMounted:(...dt)=>EO(...dt,{animationFrame:o==="always"}),elements:{reference:y.anchor},middleware:[jO({mainAxis:s+C,alignmentAxis:h}),u&&BO({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?FO():void 0,...P}),u&&UO({...P}),$O({...P,apply:({elements:dt,rects:cr,availableWidth:gr,availableHeight:Ot})=>{const{width:xr,height:vr}=cr.reference,Bt=dt.floating.style;Bt.setProperty("--radix-popper-available-width",`${gr}px`),Bt.setProperty("--radix-popper-available-height",`${Ot}px`),Bt.setProperty("--radix-popper-anchor-width",`${xr}px`),Bt.setProperty("--radix-popper-anchor-height",`${vr}px`)}}),x&&VO({element:x,padding:p}),XO({arrowWidth:T,arrowHeight:C}),f&&WO({strategy:"referenceHidden",...P})]}),[j,G]=Wx(M),de=us(w);bn(()=>{L&&(de==null||de())},[L,de]);const te=(se=A.arrow)==null?void 0:se.x,J=(ze=A.arrow)==null?void 0:ze.y,ae=((Ie=A.arrow)==null?void 0:Ie.centerOffset)!==0,[be,xe]=D.useState();return bn(()=>{d&&xe(window.getComputedStyle(d).zIndex)},[d]),v.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...N,transform:L?N.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(Ne=A.transformOrigin)==null?void 0:Ne.x,(Ee=A.transformOrigin)==null?void 0:Ee.y].join(" "),...((Le=A.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:v.jsx(GO,{scope:r,placedSide:j,onArrowChange:k,arrowX:te,arrowY:J,shouldHideArrow:ae,children:v.jsx(ds.div,{"data-side":j,"data-align":G,...l,ref:S,style:{...l.style,animation:L?void 0:"none"}})})})});Fx.displayName=my;var Ux="PopperArrow",QO={top:"bottom",right:"left",bottom:"top",left:"right"},$x=D.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=YO(Ux,n),h=QO[a.placedSide];return v.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:v.jsx(HO,{...s,ref:r,style:{...s.style,display:"block"}})})});$x.displayName=Ux;function JO(e){return e!==null}var XO=e=>({name:"transformOrigin",options:e,fn(t){var y,d,m;const{placement:r,rects:n,middlewareData:s}=t,h=((y=s.arrow)==null?void 0:y.centerOffset)!==0,p=h?0:e.arrowWidth,u=h?0:e.arrowHeight,[i,g]=Wx(r),_={start:"0%",center:"50%",end:"100%"}[g],f=(((d=s.arrow)==null?void 0:d.x)??0)+p/2,o=(((m=s.arrow)==null?void 0:m.y)??0)+u/2;let w="",l="";return i==="bottom"?(w=h?_:`${f}px`,l=`${-u}px`):i==="top"?(w=h?_:`${f}px`,l=`${n.floating.height+u}px`):i==="right"?(w=`${-u}px`,l=h?_:`${o}px`):i==="left"&&(w=`${n.floating.width+u}px`,l=h?_:`${o}px`),{data:{x:w,y:l}}}});function Wx(e){const[t,r="center"]=e.split("-");return[t,r]}var ZO=Lx,eN=Bx,tN=Fx,rN=$x,nN="Portal",Vx=D.forwardRef((e,t)=>{var p;const{container:r,...n}=e,[s,a]=D.useState(!1);bn(()=>a(!0),[]);const h=r||s&&((p=globalThis==null?void 0:globalThis.document)==null?void 0:p.body);return h?K0.createPortal(v.jsx(ds.div,{...n,ref:t}),h):null});Vx.displayName=nN;var sN=yl[" useInsertionEffect ".trim().toString()]||bn;function Ab({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,h]=aN({defaultProp:t,onChange:r}),p=e!==void 0,u=p?e:s;{const g=D.useRef(e!==void 0);D.useEffect(()=>{const _=g.current;_!==p&&console.warn(`${n} is changing from ${_?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=p},[p,n])}const i=D.useCallback(g=>{var _;if(p){const f=iN(g)?g(e):g;f!==e&&((_=h.current)==null||_.call(h,f))}else a(g)},[p,e,a,h]);return[u,i]}function aN({defaultProp:e,onChange:t}){const[r,n]=D.useState(e),s=D.useRef(r),a=D.useRef(t);return sN(()=>{a.current=t},[t]),D.useEffect(()=>{var h;s.current!==r&&((h=a.current)==null||h.call(a,r),s.current=r)},[r,s]),[r,n,a]}function iN(e){return typeof e=="function"}function oN(e){const t=D.useRef({value:e,previous:e});return D.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var zx=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cN="VisuallyHidden",lN=D.forwardRef((e,t)=>v.jsx(ds.span,{...e,ref:t,style:{...zx,...e.style}}));lN.displayName=cN;var uN=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yl=new WeakMap,yh=new WeakMap,_h={},cg=0,Hx=function(e){return e&&(e.host||Hx(e.parentNode))},dN=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Hx(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},pN=function(e,t,r,n){var s=dN(t,Array.isArray(e)?e:[e]);_h[r]||(_h[r]=new WeakMap);var a=_h[r],h=[],p=new Set,u=new Set(s),i=function(_){!_||p.has(_)||(p.add(_),i(_.parentNode))};s.forEach(i);var g=function(_){!_||u.has(_)||Array.prototype.forEach.call(_.children,function(f){if(p.has(f))g(f);else try{var o=f.getAttribute(n),w=o!==null&&o!=="false",l=(Yl.get(f)||0)+1,y=(a.get(f)||0)+1;Yl.set(f,l),a.set(f,y),h.push(f),l===1&&w&&yh.set(f,!0),y===1&&f.setAttribute(r,"true"),w||f.setAttribute(n,"true")}catch(d){console.error("aria-hidden: cannot operate on ",f,d)}})};return g(t),p.clear(),cg++,function(){h.forEach(function(_){var f=Yl.get(_)-1,o=a.get(_)-1;Yl.set(_,f),a.set(_,o),f||(yh.has(_)||_.removeAttribute(n),yh.delete(_)),o||_.removeAttribute(r)}),cg--,cg||(Yl=new WeakMap,Yl=new WeakMap,yh=new WeakMap,_h={})}},qx=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=uN(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),pN(n,s,r,"aria-hidden")):function(){return null}},bi=function(){return bi=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},bi.apply(this,arguments)};function Kx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function hN(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var $h="right-scroll-bar-position",Wh="width-before-scroll-bar",fN="with-scroll-bars-hidden",mN="--removed-body-scroll-bar-size";function lg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gN(e,t){var r=D.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var vN=typeof window<"u"?D.useLayoutEffect:D.useEffect,Ib=new WeakMap;function yN(e,t){var r=gN(null,function(n){return e.forEach(function(s){return lg(s,n)})});return vN(function(){var n=Ib.get(r);if(n){var s=new Set(n),a=new Set(e),h=r.current;s.forEach(function(p){a.has(p)||lg(p,null)}),a.forEach(function(p){s.has(p)||lg(p,h)})}Ib.set(r,e)},[e]),r}function _N(e){return e}function bN(e,t){t===void 0&&(t=_N);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var h=t(a,n);return r.push(h),function(){r=r.filter(function(p){return p!==h})}},assignSyncMedium:function(a){for(n=!0;r.length;){var h=r;r=[],h.forEach(a)}r={push:function(p){return a(p)},filter:function(){return r}}},assignMedium:function(a){n=!0;var h=[];if(r.length){var p=r;r=[],p.forEach(a),h=r}var u=function(){var g=h;h=[],g.forEach(a)},i=function(){return Promise.resolve().then(u)};i(),r={push:function(g){h.push(g),i()},filter:function(g){return h=h.filter(g),r}}}};return s}function wN(e){e===void 0&&(e={});var t=bN(null);return t.options=bi({async:!0,ssr:!1},e),t}var Gx=function(e){var t=e.sideCar,r=Kx(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return D.createElement(n,bi({},r))};Gx.isSideCarExport=!0;function SN(e,t){return e.useMedium(t),Gx}var Yx=wN(),ug=function(){},am=D.forwardRef(function(e,t){var r=D.useRef(null),n=D.useState({onScrollCapture:ug,onWheelCapture:ug,onTouchMoveCapture:ug}),s=n[0],a=n[1],h=e.forwardProps,p=e.children,u=e.className,i=e.removeScrollBar,g=e.enabled,_=e.shards,f=e.sideCar,o=e.noRelative,w=e.noIsolation,l=e.inert,y=e.allowPinchZoom,d=e.as,m=d===void 0?"div":d,S=e.gapMode,x=Kx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,I=yN([r,t]),T=bi(bi({},x),s);return D.createElement(D.Fragment,null,g&&D.createElement(k,{sideCar:Yx,removeScrollBar:i,shards:_,noRelative:o,noIsolation:w,inert:l,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:S}),h?D.cloneElement(D.Children.only(p),bi(bi({},T),{ref:I})):D.createElement(m,bi({},T,{className:u,ref:I}),p))});am.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};am.classNames={fullWidth:Wh,zeroRight:$h};var xN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RN(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=xN();return t&&e.setAttribute("nonce",t),e}function EN(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kN(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var CN=function(){var e=0,t=null;return{add:function(r){e==0&&(t=RN())&&(EN(t,r),kN(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},TN=function(){var e=CN();return function(t,r){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Qx=function(){var e=TN(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},PN={left:0,top:0,right:0,gap:0},dg=function(e){return parseInt(e||"",10)||0},ON=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[dg(r),dg(n),dg(s)]},NN=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return PN;var t=ON(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},AN=Qx(),yu="data-scroll-locked",IN=function(e,t,r,n){var s=e.left,a=e.top,h=e.right,p=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(fN,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(p,"px ").concat(n,`;
  }
  body[`).concat(yu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(p,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($h,` {
    right: `).concat(p,"px ").concat(n,`;
  }
  
  .`).concat(Wh,` {
    margin-right: `).concat(p,"px ").concat(n,`;
  }
  
  .`).concat($h," .").concat($h,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Wh," .").concat(Wh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(yu,`] {
    `).concat(mN,": ").concat(p,`px;
  }
`)},Db=function(){var e=parseInt(document.body.getAttribute(yu)||"0",10);return isFinite(e)?e:0},DN=function(){D.useEffect(function(){return document.body.setAttribute(yu,(Db()+1).toString()),function(){var e=Db()-1;e<=0?document.body.removeAttribute(yu):document.body.setAttribute(yu,e.toString())}},[])},MN=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;DN();var a=D.useMemo(function(){return NN(s)},[s]);return D.createElement(AN,{styles:IN(a,!t,s,r?"":"!important")})},Pv=!1;if(typeof window<"u")try{var bh=Object.defineProperty({},"passive",{get:function(){return Pv=!0,!0}});window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{Pv=!1}var Ql=Pv?{passive:!1}:!1,LN=function(e){return e.tagName==="TEXTAREA"},Jx=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!LN(e)&&r[t]==="visible")},jN=function(e){return Jx(e,"overflowY")},BN=function(e){return Jx(e,"overflowX")},Mb=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Xx(e,n);if(s){var a=Zx(e,n),h=a[1],p=a[2];if(h>p)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},FN=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},UN=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Xx=function(e,t){return e==="v"?jN(t):BN(t)},Zx=function(e,t){return e==="v"?FN(t):UN(t)},$N=function(e,t){return e==="h"&&t==="rtl"?-1:1},WN=function(e,t,r,n,s){var a=$N(e,window.getComputedStyle(t).direction),h=a*n,p=r.target,u=t.contains(p),i=!1,g=h>0,_=0,f=0;do{if(!p)break;var o=Zx(e,p),w=o[0],l=o[1],y=o[2],d=l-y-a*w;(w||d)&&Xx(e,p)&&(_+=d,f+=w);var m=p.parentNode;p=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!u&&p!==document.body||u&&(t.contains(p)||t===p));return(g&&Math.abs(_)<1||!g&&Math.abs(f)<1)&&(i=!0),i},wh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Lb=function(e){return[e.deltaX,e.deltaY]},jb=function(e){return e&&"current"in e?e.current:e},VN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zN=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HN=0,Jl=[];function qN(e){var t=D.useRef([]),r=D.useRef([0,0]),n=D.useRef(),s=D.useState(HN++)[0],a=D.useState(Qx)[0],h=D.useRef(e);D.useEffect(function(){h.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var l=hN([e.lockRef.current],(e.shards||[]).map(jb),!0).filter(Boolean);return l.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),l.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var p=D.useCallback(function(l,y){if("touches"in l&&l.touches.length===2||l.type==="wheel"&&l.ctrlKey)return!h.current.allowPinchZoom;var d=wh(l),m=r.current,S="deltaX"in l?l.deltaX:m[0]-d[0],x="deltaY"in l?l.deltaY:m[1]-d[1],k,I=l.target,T=Math.abs(S)>Math.abs(x)?"h":"v";if("touches"in l&&T==="h"&&I.type==="range")return!1;var C=Mb(T,I);if(!C)return!0;if(C?k=T:(k=T==="v"?"h":"v",C=Mb(T,I)),!C)return!1;if(!n.current&&"changedTouches"in l&&(S||x)&&(n.current=k),!k)return!0;var E=n.current||k;return WN(E,y,l,E==="h"?S:x)},[]),u=D.useCallback(function(l){var y=l;if(!(!Jl.length||Jl[Jl.length-1]!==a)){var d="deltaY"in y?Lb(y):wh(y),m=t.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&VN(k.delta,d)})[0];if(m&&m.should){y.cancelable&&y.preventDefault();return}if(!m){var S=(h.current.shards||[]).map(jb).filter(Boolean).filter(function(k){return k.contains(y.target)}),x=S.length>0?p(y,S[0]):!h.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),i=D.useCallback(function(l,y,d,m){var S={name:l,delta:y,target:d,should:m,shadowParent:KN(d)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(x){return x!==S})},1)},[]),g=D.useCallback(function(l){r.current=wh(l),n.current=void 0},[]),_=D.useCallback(function(l){i(l.type,Lb(l),l.target,p(l,e.lockRef.current))},[]),f=D.useCallback(function(l){i(l.type,wh(l),l.target,p(l,e.lockRef.current))},[]);D.useEffect(function(){return Jl.push(a),e.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:f}),document.addEventListener("wheel",u,Ql),document.addEventListener("touchmove",u,Ql),document.addEventListener("touchstart",g,Ql),function(){Jl=Jl.filter(function(l){return l!==a}),document.removeEventListener("wheel",u,Ql),document.removeEventListener("touchmove",u,Ql),document.removeEventListener("touchstart",g,Ql)}},[]);var o=e.removeScrollBar,w=e.inert;return D.createElement(D.Fragment,null,w?D.createElement(a,{styles:zN(s)}):null,o?D.createElement(MN,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function KN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const GN=SN(Yx,qN);var gy=D.forwardRef(function(e,t){return D.createElement(am,bi({},e,{ref:t,sideCar:GN}))});gy.classNames=am.classNames;var YN=[" ","Enter","ArrowUp","ArrowDown"],QN=[" ","Enter"],fl="Select",[im,om,JN]=S4(fl),[Fu,d7]=ay(fl,[JN,Dx]),cm=Dx(),[XN,mc]=Fu(fl),[ZN,e3]=Fu(fl),e2=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:h,defaultValue:p,onValueChange:u,dir:i,name:g,autoComplete:_,disabled:f,required:o,form:w}=e,l=cm(t),[y,d]=D.useState(null),[m,S]=D.useState(null),[x,k]=D.useState(!1),I=R4(i),[T,C]=Ab({prop:n,defaultProp:s??!1,onChange:a,caller:fl}),[E,c]=Ab({prop:h,defaultProp:p,onChange:u,caller:fl}),b=D.useRef(null),R=y?w||!!y.closest("form"):!0,[P,O]=D.useState(new Set),N=Array.from(P).map(M=>M.props.value).join(";");return v.jsx(ZO,{...l,children:v.jsxs(XN,{required:o,scope:t,trigger:y,onTriggerChange:d,valueNode:m,onValueNodeChange:S,valueNodeHasChildren:x,onValueNodeHasChildrenChange:k,contentId:iy(),value:E,onValueChange:c,open:T,onOpenChange:C,dir:I,triggerPointerDownPosRef:b,disabled:f,children:[v.jsx(im.Provider,{scope:t,children:v.jsx(ZN,{scope:e.__scopeSelect,onNativeOptionAdd:D.useCallback(M=>{O(L=>new Set(L).add(M))},[]),onNativeOptionRemove:D.useCallback(M=>{O(L=>{const A=new Set(L);return A.delete(M),A})},[]),children:r})}),R?v.jsxs(S2,{"aria-hidden":!0,required:o,tabIndex:-1,name:g,autoComplete:_,value:E,onChange:M=>c(M.target.value),disabled:f,form:w,children:[E===void 0?v.jsx("option",{value:""}):null,Array.from(P)]},N):null]})})};e2.displayName=fl;var t2="SelectTrigger",r2=D.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=cm(r),h=mc(t2,r),p=h.disabled||n,u=Ws(t,h.onTriggerChange),i=om(r),g=D.useRef("touch"),[_,f,o]=R2(l=>{const y=i().filter(S=>!S.disabled),d=y.find(S=>S.value===h.value),m=E2(y,l,d);m!==void 0&&h.onValueChange(m.value)}),w=l=>{p||(h.onOpenChange(!0),o()),l&&(h.triggerPointerDownPosRef.current={x:Math.round(l.pageX),y:Math.round(l.pageY)})};return v.jsx(eN,{asChild:!0,...a,children:v.jsx(ds.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:p,"data-disabled":p?"":void 0,"data-placeholder":x2(h.value)?"":void 0,...s,ref:u,onClick:gs(s.onClick,l=>{l.currentTarget.focus(),g.current!=="mouse"&&w(l)}),onPointerDown:gs(s.onPointerDown,l=>{g.current=l.pointerType;const y=l.target;y.hasPointerCapture(l.pointerId)&&y.releasePointerCapture(l.pointerId),l.button===0&&l.ctrlKey===!1&&l.pointerType==="mouse"&&(w(l),l.preventDefault())}),onKeyDown:gs(s.onKeyDown,l=>{const y=_.current!=="";!(l.ctrlKey||l.altKey||l.metaKey)&&l.key.length===1&&f(l.key),!(y&&l.key===" ")&&YN.includes(l.key)&&(w(),l.preventDefault())})})})});r2.displayName=t2;var n2="SelectValue",s2=D.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:h="",...p}=e,u=mc(n2,r),{onValueNodeHasChildrenChange:i}=u,g=a!==void 0,_=Ws(t,u.onValueNodeChange);return bn(()=>{i(g)},[i,g]),v.jsx(ds.span,{...p,ref:_,style:{pointerEvents:"none"},children:x2(u.value)?v.jsx(v.Fragment,{children:h}):a})});s2.displayName=n2;var t3="SelectIcon",a2=D.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return v.jsx(ds.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});a2.displayName=t3;var r3="SelectPortal",i2=e=>v.jsx(Vx,{asChild:!0,...e});i2.displayName=r3;var ml="SelectContent",o2=D.forwardRef((e,t)=>{const r=mc(ml,e.__scopeSelect),[n,s]=D.useState();if(bn(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?wl.createPortal(v.jsx(c2,{scope:e.__scopeSelect,children:v.jsx(im.Slot,{scope:e.__scopeSelect,children:v.jsx("div",{children:e.children})})}),a):null}return v.jsx(l2,{...e,ref:t})});o2.displayName=ml;var ti=10,[c2,gc]=Fu(ml),n3="SelectContentImpl",s3=kf("SelectContent.RemoveScroll"),l2=D.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:h,side:p,sideOffset:u,align:i,alignOffset:g,arrowPadding:_,collisionBoundary:f,collisionPadding:o,sticky:w,hideWhenDetached:l,avoidCollisions:y,...d}=e,m=mc(ml,r),[S,x]=D.useState(null),[k,I]=D.useState(null),T=Ws(t,se=>x(se)),[C,E]=D.useState(null),[c,b]=D.useState(null),R=om(r),[P,O]=D.useState(!1),N=D.useRef(!1);D.useEffect(()=>{if(S)return qx(S)},[S]),M4();const M=D.useCallback(se=>{const[ze,...Ie]=R().map(Le=>Le.ref.current),[Ne]=Ie.slice(-1),Ee=document.activeElement;for(const Le of se)if(Le===Ee||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===ze&&k&&(k.scrollTop=0),Le===Ne&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Ee))return},[R,k]),L=D.useCallback(()=>M([C,S]),[M,C,S]);D.useEffect(()=>{P&&L()},[P,L]);const{onOpenChange:A,triggerPointerDownPosRef:j}=m;D.useEffect(()=>{if(S){let se={x:0,y:0};const ze=Ne=>{var Ee,Le;se={x:Math.abs(Math.round(Ne.pageX)-(((Ee=j.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((Le=j.current)==null?void 0:Le.y)??0))}},Ie=Ne=>{se.x<=10&&se.y<=10?Ne.preventDefault():S.contains(Ne.target)||A(!1),document.removeEventListener("pointermove",ze),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",ze),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ze),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[S,A,j]),D.useEffect(()=>{const se=()=>A(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[A]);const[G,de]=R2(se=>{const ze=R().filter(Ee=>!Ee.disabled),Ie=ze.find(Ee=>Ee.ref.current===document.activeElement),Ne=E2(ze,se,Ie);Ne&&setTimeout(()=>Ne.ref.current.focus())}),te=D.useCallback((se,ze,Ie)=>{const Ne=!N.current&&!Ie;(m.value!==void 0&&m.value===ze||Ne)&&(E(se),Ne&&(N.current=!0))},[m.value]),J=D.useCallback(()=>S==null?void 0:S.focus(),[S]),ae=D.useCallback((se,ze,Ie)=>{const Ne=!N.current&&!Ie;(m.value!==void 0&&m.value===ze||Ne)&&b(se)},[m.value]),be=n==="popper"?Ov:u2,xe=be===Ov?{side:p,sideOffset:u,align:i,alignOffset:g,arrowPadding:_,collisionBoundary:f,collisionPadding:o,sticky:w,hideWhenDetached:l,avoidCollisions:y}:{};return v.jsx(c2,{scope:r,content:S,viewport:k,onViewportChange:I,itemRefCallback:te,selectedItem:C,onItemLeave:J,itemTextRefCallback:ae,focusSelectedItem:L,selectedItemText:c,position:n,isPositioned:P,searchRef:G,children:v.jsx(gy,{as:s3,allowPinchZoom:!0,children:v.jsx(bx,{asChild:!0,trapped:m.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:gs(s,se=>{var ze;(ze=m.trigger)==null||ze.focus({preventScroll:!0}),se.preventDefault()}),children:v.jsx(yx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:h,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:v.jsx(be,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:se=>se.preventDefault(),...d,...xe,onPlaced:()=>O(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...d.style},onKeyDown:gs(d.onKeyDown,se=>{const ze=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!ze&&se.key.length===1&&de(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let Ne=R().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(se.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Ee=se.target,Le=Ne.indexOf(Ee);Ne=Ne.slice(Le+1)}setTimeout(()=>M(Ne)),se.preventDefault()}})})})})})})});l2.displayName=n3;var a3="SelectItemAlignedPosition",u2=D.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=mc(ml,r),h=gc(ml,r),[p,u]=D.useState(null),[i,g]=D.useState(null),_=Ws(t,T=>g(T)),f=om(r),o=D.useRef(!1),w=D.useRef(!0),{viewport:l,selectedItem:y,selectedItemText:d,focusSelectedItem:m}=h,S=D.useCallback(()=>{if(a.trigger&&a.valueNode&&p&&i&&l&&y&&d){const T=a.trigger.getBoundingClientRect(),C=i.getBoundingClientRect(),E=a.valueNode.getBoundingClientRect(),c=d.getBoundingClientRect();if(a.dir!=="rtl"){const Ee=c.left-C.left,Le=E.left-Ee,dt=T.left-Le,cr=T.width+dt,gr=Math.max(cr,C.width),Ot=window.innerWidth-ti,xr=Rv(Le,[ti,Math.max(ti,Ot-gr)]);p.style.minWidth=cr+"px",p.style.left=xr+"px"}else{const Ee=C.right-c.right,Le=window.innerWidth-E.right-Ee,dt=window.innerWidth-T.right-Le,cr=T.width+dt,gr=Math.max(cr,C.width),Ot=window.innerWidth-ti,xr=Rv(Le,[ti,Math.max(ti,Ot-gr)]);p.style.minWidth=cr+"px",p.style.right=xr+"px"}const b=f(),R=window.innerHeight-ti*2,P=l.scrollHeight,O=window.getComputedStyle(i),N=parseInt(O.borderTopWidth,10),M=parseInt(O.paddingTop,10),L=parseInt(O.borderBottomWidth,10),A=parseInt(O.paddingBottom,10),j=N+M+P+A+L,G=Math.min(y.offsetHeight*5,j),de=window.getComputedStyle(l),te=parseInt(de.paddingTop,10),J=parseInt(de.paddingBottom,10),ae=T.top+T.height/2-ti,be=R-ae,xe=y.offsetHeight/2,se=y.offsetTop+xe,ze=N+M+se,Ie=j-ze;if(ze<=ae){const Ee=b.length>0&&y===b[b.length-1].ref.current;p.style.bottom="0px";const Le=i.clientHeight-l.offsetTop-l.offsetHeight,dt=Math.max(be,xe+(Ee?J:0)+Le+L),cr=ze+dt;p.style.height=cr+"px"}else{const Ee=b.length>0&&y===b[0].ref.current;p.style.top="0px";const dt=Math.max(ae,N+l.offsetTop+(Ee?te:0)+xe)+Ie;p.style.height=dt+"px",l.scrollTop=ze-ae+l.offsetTop}p.style.margin=`${ti}px 0`,p.style.minHeight=G+"px",p.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>o.current=!0)}},[f,a.trigger,a.valueNode,p,i,l,y,d,a.dir,n]);bn(()=>S(),[S]);const[x,k]=D.useState();bn(()=>{i&&k(window.getComputedStyle(i).zIndex)},[i]);const I=D.useCallback(T=>{T&&w.current===!0&&(S(),m==null||m(),w.current=!1)},[S,m]);return v.jsx(o3,{scope:r,contentWrapper:p,shouldExpandOnScrollRef:o,onScrollButtonChange:I,children:v.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:v.jsx(ds.div,{...s,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});u2.displayName=a3;var i3="SelectPopperPosition",Ov=D.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=ti,...a}=e,h=cm(r);return v.jsx(tN,{...h,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ov.displayName=i3;var[o3,vy]=Fu(ml,{}),Nv="SelectViewport",d2=D.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=gc(Nv,r),h=vy(Nv,r),p=Ws(t,a.onViewportChange),u=D.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),v.jsx(im.Slot,{scope:r,children:v.jsx(ds.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:p,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:gs(s.onScroll,i=>{const g=i.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:f}=h;if(f!=null&&f.current&&_){const o=Math.abs(u.current-g.scrollTop);if(o>0){const w=window.innerHeight-ti*2,l=parseFloat(_.style.minHeight),y=parseFloat(_.style.height),d=Math.max(l,y);if(d<w){const m=d+o,S=Math.min(w,m),x=m-S;_.style.height=S+"px",_.style.bottom==="0px"&&(g.scrollTop=x>0?x:0,_.style.justifyContent="flex-end")}}}u.current=g.scrollTop})})})]})});d2.displayName=Nv;var p2="SelectGroup",[c3,l3]=Fu(p2),u3=D.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=iy();return v.jsx(c3,{scope:r,id:s,children:v.jsx(ds.div,{role:"group","aria-labelledby":s,...n,ref:t})})});u3.displayName=p2;var h2="SelectLabel",f2=D.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=l3(h2,r);return v.jsx(ds.div,{id:s.id,...n,ref:t})});f2.displayName=h2;var Nf="SelectItem",[d3,m2]=Fu(Nf),g2=D.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...h}=e,p=mc(Nf,r),u=gc(Nf,r),i=p.value===n,[g,_]=D.useState(a??""),[f,o]=D.useState(!1),w=Ws(t,m=>{var S;return(S=u.itemRefCallback)==null?void 0:S.call(u,m,n,s)}),l=iy(),y=D.useRef("touch"),d=()=>{s||(p.onValueChange(n),p.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(d3,{scope:r,value:n,disabled:s,textId:l,isSelected:i,onItemTextChange:D.useCallback(m=>{_(S=>S||((m==null?void 0:m.textContent)??"").trim())},[]),children:v.jsx(im.ItemSlot,{scope:r,value:n,disabled:s,textValue:g,children:v.jsx(ds.div,{role:"option","aria-labelledby":l,"data-highlighted":f?"":void 0,"aria-selected":i&&f,"data-state":i?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...h,ref:w,onFocus:gs(h.onFocus,()=>o(!0)),onBlur:gs(h.onBlur,()=>o(!1)),onClick:gs(h.onClick,()=>{y.current!=="mouse"&&d()}),onPointerUp:gs(h.onPointerUp,()=>{y.current==="mouse"&&d()}),onPointerDown:gs(h.onPointerDown,m=>{y.current=m.pointerType}),onPointerMove:gs(h.onPointerMove,m=>{var S;y.current=m.pointerType,s?(S=u.onItemLeave)==null||S.call(u):y.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gs(h.onPointerLeave,m=>{var S;m.currentTarget===document.activeElement&&((S=u.onItemLeave)==null||S.call(u))}),onKeyDown:gs(h.onKeyDown,m=>{var x;((x=u.searchRef)==null?void 0:x.current)!==""&&m.key===" "||(QN.includes(m.key)&&d(),m.key===" "&&m.preventDefault())})})})})});g2.displayName=Nf;var Pd="SelectItemText",v2=D.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,h=mc(Pd,r),p=gc(Pd,r),u=m2(Pd,r),i=e3(Pd,r),[g,_]=D.useState(null),f=Ws(t,d=>_(d),u.onItemTextChange,d=>{var m;return(m=p.itemTextRefCallback)==null?void 0:m.call(p,d,u.value,u.disabled)}),o=g==null?void 0:g.textContent,w=D.useMemo(()=>v.jsx("option",{value:u.value,disabled:u.disabled,children:o},u.value),[u.disabled,u.value,o]),{onNativeOptionAdd:l,onNativeOptionRemove:y}=i;return bn(()=>(l(w),()=>y(w)),[l,y,w]),v.jsxs(v.Fragment,{children:[v.jsx(ds.span,{id:u.textId,...a,ref:f}),u.isSelected&&h.valueNode&&!h.valueNodeHasChildren?wl.createPortal(a.children,h.valueNode):null]})});v2.displayName=Pd;var y2="SelectItemIndicator",_2=D.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return m2(y2,r).isSelected?v.jsx(ds.span,{"aria-hidden":!0,...n,ref:t}):null});_2.displayName=y2;var Av="SelectScrollUpButton",p3=D.forwardRef((e,t)=>{const r=gc(Av,e.__scopeSelect),n=vy(Av,e.__scopeSelect),[s,a]=D.useState(!1),h=Ws(t,n.onScrollButtonChange);return bn(()=>{if(r.viewport&&r.isPositioned){let p=function(){const i=u.scrollTop>0;a(i)};const u=r.viewport;return p(),u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[r.viewport,r.isPositioned]),s?v.jsx(b2,{...e,ref:h,onAutoScroll:()=>{const{viewport:p,selectedItem:u}=r;p&&u&&(p.scrollTop=p.scrollTop-u.offsetHeight)}}):null});p3.displayName=Av;var Iv="SelectScrollDownButton",h3=D.forwardRef((e,t)=>{const r=gc(Iv,e.__scopeSelect),n=vy(Iv,e.__scopeSelect),[s,a]=D.useState(!1),h=Ws(t,n.onScrollButtonChange);return bn(()=>{if(r.viewport&&r.isPositioned){let p=function(){const i=u.scrollHeight-u.clientHeight,g=Math.ceil(u.scrollTop)<i;a(g)};const u=r.viewport;return p(),u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[r.viewport,r.isPositioned]),s?v.jsx(b2,{...e,ref:h,onAutoScroll:()=>{const{viewport:p,selectedItem:u}=r;p&&u&&(p.scrollTop=p.scrollTop+u.offsetHeight)}}):null});h3.displayName=Iv;var b2=D.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=gc("SelectScrollButton",r),h=D.useRef(null),p=om(r),u=D.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return D.useEffect(()=>()=>u(),[u]),bn(()=>{var g;const i=p().find(_=>_.ref.current===document.activeElement);(g=i==null?void 0:i.ref.current)==null||g.scrollIntoView({block:"nearest"})},[p]),v.jsx(ds.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:gs(s.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(n,50))}),onPointerMove:gs(s.onPointerMove,()=>{var i;(i=a.onItemLeave)==null||i.call(a),h.current===null&&(h.current=window.setInterval(n,50))}),onPointerLeave:gs(s.onPointerLeave,()=>{u()})})}),f3="SelectSeparator",w2=D.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return v.jsx(ds.div,{"aria-hidden":!0,...n,ref:t})});w2.displayName=f3;var Dv="SelectArrow",m3=D.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=cm(r),a=mc(Dv,r),h=gc(Dv,r);return a.open&&h.position==="popper"?v.jsx(rN,{...s,...n,ref:t}):null});m3.displayName=Dv;var g3="SelectBubbleInput",S2=D.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=D.useRef(null),a=Ws(n,s),h=oN(t);return D.useEffect(()=>{const p=s.current;if(!p)return;const u=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(u,"value").set;if(h!==t&&g){const _=new Event("change",{bubbles:!0});g.call(p,t),p.dispatchEvent(_)}},[h,t]),v.jsx(ds.select,{...r,style:{...zx,...r.style},ref:a,defaultValue:t})});S2.displayName=g3;function x2(e){return e===""||e===void 0}function R2(e){const t=us(e),r=D.useRef(""),n=D.useRef(0),s=D.useCallback(h=>{const p=r.current+h;t(p),function u(i){r.current=i,window.clearTimeout(n.current),i!==""&&(n.current=window.setTimeout(()=>u(""),1e3))}(p)},[t]),a=D.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return D.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function E2(e,t,r){const s=t.length>1&&Array.from(t).every(i=>i===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let h=v3(e,Math.max(a,0));s.length===1&&(h=h.filter(i=>i!==r));const u=h.find(i=>i.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==r?u:void 0}function v3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var y3=e2,k2=r2,_3=s2,b3=a2,w3=i2,C2=o2,S3=d2,T2=f2,P2=g2,x3=v2,R3=_2,O2=w2;const Zc=y3,el=_3,Yo=D.forwardRef(({className:e,children:t,...r},n)=>v.jsxs(k2,{ref:n,className:dn("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,v.jsx(b3,{asChild:!0,children:v.jsx(y6,{className:"h-4 w-4 opacity-50"})})]}));Yo.displayName=k2.displayName;const Qo=D.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>v.jsx(w3,{children:v.jsx(C2,{ref:s,className:dn("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:v.jsx(S3,{className:dn("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Qo.displayName=C2.displayName;const E3=D.forwardRef(({className:e,...t},r)=>v.jsx(T2,{ref:r,className:dn("px-2 py-1.5 text-sm font-semibold",e),...t}));E3.displayName=T2.displayName;const Wa=D.forwardRef(({className:e,children:t,...r},n)=>v.jsxs(P2,{ref:n,className:dn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[v.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(R3,{children:v.jsx(v6,{className:"h-4 w-4"})})}),v.jsx(x3,{children:t})]}));Wa.displayName=P2.displayName;const k3=D.forwardRef(({className:e,...t},r)=>v.jsx(O2,{ref:r,className:dn("-mx-1 my-1 h-px bg-muted",e),...t}));k3.displayName=O2.displayName;const yy=D.forwardRef(({className:e,...t},r)=>v.jsx("textarea",{className:dn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));yy.displayName="Textarea";const C3=Q0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Gi=D.forwardRef(({className:e,...t},r)=>v.jsx("label",{ref:r,className:dn(C3(),e),...t}));Gi.displayName="Label";function ic(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Bb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function N2(...e){return t=>{let r=!1;const n=e.map(s=>{const a=Bb(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():Bb(e[s],null)}}}}function xl(...e){return D.useCallback(N2(...e),e)}function T3(e,t){const r=D.createContext(t),n=a=>{const{children:h,...p}=a,u=D.useMemo(()=>p,Object.values(p));return v.jsx(r.Provider,{value:u,children:h})};n.displayName=e+"Provider";function s(a){const h=D.useContext(r);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function P3(e,t=[]){let r=[];function n(a,h){const p=D.createContext(h),u=r.length;r=[...r,h];const i=_=>{var d;const{scope:f,children:o,...w}=_,l=((d=f==null?void 0:f[e])==null?void 0:d[u])||p,y=D.useMemo(()=>w,Object.values(w));return v.jsx(l.Provider,{value:y,children:o})};i.displayName=a+"Provider";function g(_,f){var l;const o=((l=f==null?void 0:f[e])==null?void 0:l[u])||p,w=D.useContext(o);if(w)return w;if(h!==void 0)return h;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[i,g]}const s=()=>{const a=r.map(h=>D.createContext(h));return function(p){const u=(p==null?void 0:p[e])||a;return D.useMemo(()=>({[`__scope${e}`]:{...p,[e]:u}}),[p,u])}};return s.scopeName=e,[n,O3(s,...t)]}function O3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const h=n.reduce((p,{useScope:u,scopeName:i})=>{const _=u(a)[`__scope${i}`];return{...p,..._}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}var N3=yl[" useId ".trim().toString()]||(()=>{}),A3=0;function pg(e){const[t,r]=D.useState(N3());return bn(()=>{r(n=>n??String(A3++))},[e]),e||(t?`radix-${t}`:"")}var I3=yl[" useInsertionEffect ".trim().toString()]||bn;function D3({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,h]=M3({defaultProp:t,onChange:r}),p=e!==void 0,u=p?e:s;{const g=D.useRef(e!==void 0);D.useEffect(()=>{const _=g.current;_!==p&&console.warn(`${n} is changing from ${_?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=p},[p,n])}const i=D.useCallback(g=>{var _;if(p){const f=L3(g)?g(e):g;f!==e&&((_=h.current)==null||_.call(h,f))}else a(g)},[p,e,a,h]);return[u,i]}function M3({defaultProp:e,onChange:t}){const[r,n]=D.useState(e),s=D.useRef(r),a=D.useRef(t);return I3(()=>{a.current=t},[t]),D.useEffect(()=>{var h;s.current!==r&&((h=a.current)==null||h.call(a,r),s.current=r)},[r,s]),[r,n,a]}function L3(e){return typeof e=="function"}function A2(e){const t=j3(e),r=D.forwardRef((n,s)=>{const{children:a,...h}=n,p=D.Children.toArray(a),u=p.find(F3);if(u){const i=u.props.children,g=p.map(_=>_===u?D.Children.count(i)>1?D.Children.only(null):D.isValidElement(i)?i.props.children:null:_);return v.jsx(t,{...h,ref:s,children:D.isValidElement(i)?D.cloneElement(i,void 0,g):null})}return v.jsx(t,{...h,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function j3(e){const t=D.forwardRef((r,n)=>{const{children:s,...a}=r;if(D.isValidElement(s)){const h=$3(s),p=U3(a,s.props);return s.type!==D.Fragment&&(p.ref=n?N2(n,h):h),D.cloneElement(s,p)}return D.Children.count(s)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B3=Symbol("radix.slottable");function F3(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B3}function U3(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{const u=a(...p);return s(...p),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function $3(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var W3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oo=W3.reduce((e,t)=>{const r=A2(`Primitive.${t}`),n=D.forwardRef((s,a)=>{const{asChild:h,...p}=s,u=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...p,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function V3(e,t){e&&wl.flushSync(()=>e.dispatchEvent(t))}function z3(e,t=globalThis==null?void 0:globalThis.document){const r=us(e);D.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var H3="DismissableLayer",Mv="dismissableLayer.update",q3="dismissableLayer.pointerDownOutside",K3="dismissableLayer.focusOutside",Fb,I2=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),D2=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:h,onDismiss:p,...u}=e,i=D.useContext(I2),[g,_]=D.useState(null),f=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,o]=D.useState({}),w=xl(t,T=>_(T)),l=Array.from(i.layers),[y]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),d=l.indexOf(y),m=g?l.indexOf(g):-1,S=i.layersWithOutsidePointerEventsDisabled.size>0,x=m>=d,k=Q3(T=>{const C=T.target,E=[...i.branches].some(c=>c.contains(C));!x||E||(s==null||s(T),h==null||h(T),T.defaultPrevented||p==null||p())},f),I=J3(T=>{const C=T.target;[...i.branches].some(c=>c.contains(C))||(a==null||a(T),h==null||h(T),T.defaultPrevented||p==null||p())},f);return z3(T=>{m===i.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&p&&(T.preventDefault(),p()))},f),D.useEffect(()=>{if(g)return r&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(Fb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(g)),i.layers.add(g),Ub(),()=>{r&&i.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Fb)}},[g,f,r,i]),D.useEffect(()=>()=>{g&&(i.layers.delete(g),i.layersWithOutsidePointerEventsDisabled.delete(g),Ub())},[g,i]),D.useEffect(()=>{const T=()=>o({});return document.addEventListener(Mv,T),()=>document.removeEventListener(Mv,T)},[]),v.jsx(oo.div,{...u,ref:w,style:{pointerEvents:S?x?"auto":"none":void 0,...e.style},onFocusCapture:ic(e.onFocusCapture,I.onFocusCapture),onBlurCapture:ic(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:ic(e.onPointerDownCapture,k.onPointerDownCapture)})});D2.displayName=H3;var G3="DismissableLayerBranch",Y3=D.forwardRef((e,t)=>{const r=D.useContext(I2),n=D.useRef(null),s=xl(t,n);return D.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),v.jsx(oo.div,{...e,ref:s})});Y3.displayName=G3;function Q3(e,t=globalThis==null?void 0:globalThis.document){const r=us(e),n=D.useRef(!1),s=D.useRef(()=>{});return D.useEffect(()=>{const a=p=>{if(p.target&&!n.current){let u=function(){M2(q3,r,i,{discrete:!0})};const i={originalEvent:p};p.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);n.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function J3(e,t=globalThis==null?void 0:globalThis.document){const r=us(e),n=D.useRef(!1);return D.useEffect(()=>{const s=a=>{a.target&&!n.current&&M2(K3,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ub(){const e=new CustomEvent(Mv);document.dispatchEvent(e)}function M2(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?V3(s,a):s.dispatchEvent(a)}var hg="focusScope.autoFocusOnMount",fg="focusScope.autoFocusOnUnmount",$b={bubbles:!1,cancelable:!0},X3="FocusScope",L2=D.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...h}=e,[p,u]=D.useState(null),i=us(s),g=us(a),_=D.useRef(null),f=xl(t,l=>u(l)),o=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(n){let l=function(S){if(o.paused||!p)return;const x=S.target;p.contains(x)?_.current=x:$o(_.current,{select:!0})},y=function(S){if(o.paused||!p)return;const x=S.relatedTarget;x!==null&&(p.contains(x)||$o(_.current,{select:!0}))},d=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&$o(p)};document.addEventListener("focusin",l),document.addEventListener("focusout",y);const m=new MutationObserver(d);return p&&m.observe(p,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",y),m.disconnect()}}},[n,p,o.paused]),D.useEffect(()=>{if(p){Vb.add(o);const l=document.activeElement;if(!p.contains(l)){const d=new CustomEvent(hg,$b);p.addEventListener(hg,i),p.dispatchEvent(d),d.defaultPrevented||(Z3(sA(j2(p)),{select:!0}),document.activeElement===l&&$o(p))}return()=>{p.removeEventListener(hg,i),setTimeout(()=>{const d=new CustomEvent(fg,$b);p.addEventListener(fg,g),p.dispatchEvent(d),d.defaultPrevented||$o(l??document.body,{select:!0}),p.removeEventListener(fg,g),Vb.remove(o)},0)}}},[p,i,g,o]);const w=D.useCallback(l=>{if(!r&&!n||o.paused)return;const y=l.key==="Tab"&&!l.altKey&&!l.ctrlKey&&!l.metaKey,d=document.activeElement;if(y&&d){const m=l.currentTarget,[S,x]=eA(m);S&&x?!l.shiftKey&&d===x?(l.preventDefault(),r&&$o(S,{select:!0})):l.shiftKey&&d===S&&(l.preventDefault(),r&&$o(x,{select:!0})):d===m&&l.preventDefault()}},[r,n,o.paused]);return v.jsx(oo.div,{tabIndex:-1,...h,ref:f,onKeyDown:w})});L2.displayName=X3;function Z3(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if($o(n,{select:t}),document.activeElement!==r)return}function eA(e){const t=j2(e),r=Wb(t,e),n=Wb(t.reverse(),e);return[r,n]}function j2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Wb(e,t){for(const r of e)if(!tA(r,{upTo:t}))return r}function tA(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rA(e){return e instanceof HTMLInputElement&&"select"in e}function $o(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&rA(e)&&t&&e.select()}}var Vb=nA();function nA(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=zb(e,t),e.unshift(t)},remove(t){var r;e=zb(e,t),(r=e[0])==null||r.resume()}}}function zb(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function sA(e){return e.filter(t=>t.tagName!=="A")}var aA="Portal",B2=D.forwardRef((e,t)=>{var p;const{container:r,...n}=e,[s,a]=D.useState(!1);bn(()=>a(!0),[]);const h=r||s&&((p=globalThis==null?void 0:globalThis.document)==null?void 0:p.body);return h?K0.createPortal(v.jsx(oo.div,{...n,ref:t}),h):null});B2.displayName=aA;function iA(e,t){return D.useReducer((r,n)=>t[r][n]??r,e)}var lm=e=>{const{present:t,children:r}=e,n=oA(t),s=typeof r=="function"?r({present:n.isPresent}):D.Children.only(r),a=xl(n.ref,cA(s));return typeof r=="function"||n.isPresent?D.cloneElement(s,{ref:a}):null};lm.displayName="Presence";function oA(e){const[t,r]=D.useState(),n=D.useRef(null),s=D.useRef(e),a=D.useRef("none"),h=e?"mounted":"unmounted",[p,u]=iA(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const i=Sh(n.current);a.current=p==="mounted"?i:"none"},[p]),bn(()=>{const i=n.current,g=s.current;if(g!==e){const f=a.current,o=Sh(i);e?u("MOUNT"):o==="none"||(i==null?void 0:i.display)==="none"?u("UNMOUNT"):u(g&&f!==o?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),bn(()=>{if(t){let i;const g=t.ownerDocument.defaultView??window,_=o=>{const l=Sh(n.current).includes(CSS.escape(o.animationName));if(o.target===t&&l&&(u("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",i=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=o=>{o.target===t&&(a.current=Sh(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",_),t.addEventListener("animationend",_),()=>{g.clearTimeout(i),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",_),t.removeEventListener("animationend",_)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:D.useCallback(i=>{n.current=i?getComputedStyle(i):null,r(i)},[])}}function Sh(e){return(e==null?void 0:e.animationName)||"none"}function cA(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var mg=0;function lA(){D.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Hb()),document.body.insertAdjacentElement("beforeend",e[1]??Hb()),mg++,()=>{mg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),mg--}},[])}function Hb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var um="Dialog",[F2,p7]=P3(um),[uA,di]=F2(um),U2=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:h=!0}=e,p=D.useRef(null),u=D.useRef(null),[i,g]=D3({prop:n,defaultProp:s??!1,onChange:a,caller:um});return v.jsx(uA,{scope:t,triggerRef:p,contentRef:u,contentId:pg(),titleId:pg(),descriptionId:pg(),open:i,onOpenChange:g,onOpenToggle:D.useCallback(()=>g(_=>!_),[g]),modal:h,children:r})};U2.displayName=um;var $2="DialogTrigger",dA=D.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=di($2,r),a=xl(t,s.triggerRef);return v.jsx(oo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wy(s.open),...n,ref:a,onClick:ic(e.onClick,s.onOpenToggle)})});dA.displayName=$2;var _y="DialogPortal",[pA,W2]=F2(_y,{forceMount:void 0}),V2=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=di(_y,t);return v.jsx(pA,{scope:t,forceMount:r,children:D.Children.map(n,h=>v.jsx(lm,{present:r||a.open,children:v.jsx(B2,{asChild:!0,container:s,children:h})}))})};V2.displayName=_y;var Af="DialogOverlay",z2=D.forwardRef((e,t)=>{const r=W2(Af,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=di(Af,e.__scopeDialog);return a.modal?v.jsx(lm,{present:n||a.open,children:v.jsx(fA,{...s,ref:t})}):null});z2.displayName=Af;var hA=A2("DialogOverlay.RemoveScroll"),fA=D.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=di(Af,r);return v.jsx(gy,{as:hA,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(oo.div,{"data-state":wy(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),gl="DialogContent",H2=D.forwardRef((e,t)=>{const r=W2(gl,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=di(gl,e.__scopeDialog);return v.jsx(lm,{present:n||a.open,children:a.modal?v.jsx(mA,{...s,ref:t}):v.jsx(gA,{...s,ref:t})})});H2.displayName=gl;var mA=D.forwardRef((e,t)=>{const r=di(gl,e.__scopeDialog),n=D.useRef(null),s=xl(t,r.contentRef,n);return D.useEffect(()=>{const a=n.current;if(a)return qx(a)},[]),v.jsx(q2,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ic(e.onCloseAutoFocus,a=>{var h;a.preventDefault(),(h=r.triggerRef.current)==null||h.focus()}),onPointerDownOutside:ic(e.onPointerDownOutside,a=>{const h=a.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0;(h.button===2||p)&&a.preventDefault()}),onFocusOutside:ic(e.onFocusOutside,a=>a.preventDefault())})}),gA=D.forwardRef((e,t)=>{const r=di(gl,e.__scopeDialog),n=D.useRef(!1),s=D.useRef(!1);return v.jsx(q2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var h,p;(h=e.onCloseAutoFocus)==null||h.call(e,a),a.defaultPrevented||(n.current||(p=r.triggerRef.current)==null||p.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var u,i;(u=e.onInteractOutside)==null||u.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const h=a.target;((i=r.triggerRef.current)==null?void 0:i.contains(h))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),q2=D.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...h}=e,p=di(gl,r),u=D.useRef(null),i=xl(t,u);return lA(),v.jsxs(v.Fragment,{children:[v.jsx(L2,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:v.jsx(D2,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":wy(p.open),...h,ref:i,onDismiss:()=>p.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(vA,{titleId:p.titleId}),v.jsx(_A,{contentRef:u,descriptionId:p.descriptionId})]})]})}),by="DialogTitle",K2=D.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=di(by,r);return v.jsx(oo.h2,{id:s.titleId,...n,ref:t})});K2.displayName=by;var G2="DialogDescription",Y2=D.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=di(G2,r);return v.jsx(oo.p,{id:s.descriptionId,...n,ref:t})});Y2.displayName=G2;var Q2="DialogClose",J2=D.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=di(Q2,r);return v.jsx(oo.button,{type:"button",...n,ref:t,onClick:ic(e.onClick,()=>s.onOpenChange(!1))})});J2.displayName=Q2;function wy(e){return e?"open":"closed"}var X2="DialogTitleWarning",[h7,Z2]=T3(X2,{contentName:gl,titleName:by,docsSlug:"dialog"}),vA=({titleId:e})=>{const t=Z2(X2),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return D.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},yA="DialogDescriptionWarning",_A=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Z2(yA).contentName}}.`;return D.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},bA=U2,wA=V2,eR=z2,tR=H2,rR=K2,nR=Y2,SA=J2;const xA=bA,RA=wA,sR=D.forwardRef(({className:e,...t},r)=>v.jsx(eR,{ref:r,className:dn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sR.displayName=eR.displayName;const aR=D.forwardRef(({className:e,children:t,...r},n)=>v.jsxs(RA,{children:[v.jsx(sR,{}),v.jsxs(tR,{ref:n,className:dn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,v.jsxs(SA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[v.jsx(ry,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));aR.displayName=tR.displayName;const iR=({className:e,...t})=>v.jsx("div",{className:dn("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});iR.displayName="DialogHeader";const oR=({className:e,...t})=>v.jsx("div",{className:dn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});oR.displayName="DialogFooter";const cR=D.forwardRef(({className:e,...t},r)=>v.jsx(rR,{ref:r,className:dn("text-lg font-semibold leading-none tracking-tight",e),...t}));cR.displayName=rR.displayName;const EA=D.forwardRef(({className:e,...t},r)=>v.jsx(nR,{ref:r,className:dn("text-sm text-muted-foreground",e),...t}));EA.displayName=nR.displayName;var kA=e=>{switch(e){case"success":return PA;case"info":return NA;case"warning":return OA;case"error":return AA;default:return null}},CA=Array(12).fill(0),TA=({visible:e,className:t})=>_t.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},_t.createElement("div",{className:"sonner-spinner"},CA.map((r,n)=>_t.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),PA=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OA=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),NA=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),AA=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IA=_t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DA=()=>{let[e,t]=_t.useState(document.hidden);return _t.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Lv=1,MA=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Lv++,a=this.toasts.find(p=>p.id===s),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(p=>p.id===s?(this.publish({...p,...e,id:s,title:r}),{...p,...e,id:s,dismissible:h,title:r}):p):this.addToast({title:r,...n,dismissible:h,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,a,h=n.then(async u=>{if(a=["resolve",u],_t.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(jA(u)&&!u.ok){s=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:r,type:"error",message:i,description:g})}else if(t.success!==void 0){s=!1;let i=typeof t.success=="function"?await t.success(u):t.success,g=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"success",message:i,description:g})}}).catch(async u=>{if(a=["reject",u],t.error!==void 0){s=!1;let i=typeof t.error=="function"?await t.error(u):t.error,g=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"error",message:i,description:g})}}).finally(()=>{var u;s&&(this.dismiss(r),r=void 0),(u=t.finally)==null||u.call(t)}),p=()=>new Promise((u,i)=>h.then(()=>a[0]==="reject"?i(a[1]):u(a[1])).catch(i));return typeof r!="string"&&typeof r!="number"?{unwrap:p}:Object.assign(r,{unwrap:p})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Lv++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},pa=new MA,LA=(e,t)=>{let r=(t==null?void 0:t.id)||Lv++;return pa.addToast({title:e,...t,id:r}),r},jA=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",BA=LA,FA=()=>pa.toasts,UA=()=>pa.getActiveToasts(),Lr=Object.assign(BA,{success:pa.success,info:pa.info,warning:pa.warning,error:pa.error,custom:pa.custom,message:pa.message,promise:pa.promise,dismiss:pa.dismiss,loading:pa.loading},{getHistory:FA,getToasts:UA});function $A(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}$A(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xh(e){return e.label!==void 0}var WA=3,VA="32px",zA="16px",qb=4e3,HA=356,qA=14,KA=20,GA=200;function ei(...e){return e.filter(Boolean).join(" ")}function YA(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var QA=e=>{var t,r,n,s,a,h,p,u,i,g,_;let{invert:f,toast:o,unstyled:w,interacting:l,setHeights:y,visibleToasts:d,heights:m,index:S,toasts:x,expanded:k,removeToast:I,defaultRichColors:T,closeButton:C,style:E,cancelButtonStyle:c,actionButtonStyle:b,className:R="",descriptionClassName:P="",duration:O,position:N,gap:M,loadingIcon:L,expandByDefault:A,classNames:j,icons:G,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:te}=e,[J,ae]=_t.useState(null),[be,xe]=_t.useState(null),[se,ze]=_t.useState(!1),[Ie,Ne]=_t.useState(!1),[Ee,Le]=_t.useState(!1),[dt,cr]=_t.useState(!1),[gr,Ot]=_t.useState(!1),[xr,vr]=_t.useState(0),[Bt,Qr]=_t.useState(0),Nt=_t.useRef(o.duration||O||qb),Kt=_t.useRef(null),Wr=_t.useRef(null),tn=S===0,Nr=S+1<=d,Vr=o.type,rn=o.dismissible!==!1,It=o.className||"",nn=o.descriptionClassName||"",Jr=_t.useMemo(()=>m.findIndex(Me=>Me.toastId===o.id)||0,[m,o.id]),Fr=_t.useMemo(()=>{var Me;return(Me=o.closeButton)!=null?Me:C},[o.closeButton,C]),Ar=_t.useMemo(()=>o.duration||O||qb,[o.duration,O]),hn=_t.useRef(0),Hr=_t.useRef(0),wn=_t.useRef(0),fn=_t.useRef(null),[Tn,Sn]=N.split("-"),Ft=_t.useMemo(()=>m.reduce((Me,it,je)=>je>=Jr?Me:Me+it.height,0),[m,Jr]),Pn=DA(),Gn=o.invert||f,sn=Vr==="loading";Hr.current=_t.useMemo(()=>Jr*M+Ft,[Jr,Ft]),_t.useEffect(()=>{Nt.current=Ar},[Ar]),_t.useEffect(()=>{ze(!0)},[]),_t.useEffect(()=>{let Me=Wr.current;if(Me){let it=Me.getBoundingClientRect().height;return Qr(it),y(je=>[{toastId:o.id,height:it,position:o.position},...je]),()=>y(je=>je.filter(ct=>ct.toastId!==o.id))}},[y,o.id]),_t.useLayoutEffect(()=>{if(!se)return;let Me=Wr.current,it=Me.style.height;Me.style.height="auto";let je=Me.getBoundingClientRect().height;Me.style.height=it,Qr(je),y(ct=>ct.find(tr=>tr.toastId===o.id)?ct.map(tr=>tr.toastId===o.id?{...tr,height:je}:tr):[{toastId:o.id,height:je,position:o.position},...ct])},[se,o.title,o.description,y,o.id]);let er=_t.useCallback(()=>{Ne(!0),vr(Hr.current),y(Me=>Me.filter(it=>it.toastId!==o.id)),setTimeout(()=>{I(o)},GA)},[o,I,y,Hr]);_t.useEffect(()=>{if(o.promise&&Vr==="loading"||o.duration===1/0||o.type==="loading")return;let Me;return k||l||te&&Pn?(()=>{if(wn.current<hn.current){let it=new Date().getTime()-hn.current;Nt.current=Nt.current-it}wn.current=new Date().getTime()})():Nt.current!==1/0&&(hn.current=new Date().getTime(),Me=setTimeout(()=>{var it;(it=o.onAutoClose)==null||it.call(o,o),er()},Nt.current)),()=>clearTimeout(Me)},[k,l,o,Vr,te,Pn,er]),_t.useEffect(()=>{o.delete&&er()},[er,o.delete]);function Ge(){var Me,it,je;return G!=null&&G.loading?_t.createElement("div",{className:ei(j==null?void 0:j.loader,(Me=o==null?void 0:o.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Vr==="loading"},G.loading):L?_t.createElement("div",{className:ei(j==null?void 0:j.loader,(it=o==null?void 0:o.classNames)==null?void 0:it.loader,"sonner-loader"),"data-visible":Vr==="loading"},L):_t.createElement(TA,{className:ei(j==null?void 0:j.loader,(je=o==null?void 0:o.classNames)==null?void 0:je.loader),visible:Vr==="loading"})}return _t.createElement("li",{tabIndex:0,ref:Wr,className:ei(R,It,j==null?void 0:j.toast,(t=o==null?void 0:o.classNames)==null?void 0:t.toast,j==null?void 0:j.default,j==null?void 0:j[Vr],(r=o==null?void 0:o.classNames)==null?void 0:r[Vr]),"data-sonner-toast":"","data-rich-colors":(n=o.richColors)!=null?n:T,"data-styled":!(o.jsx||o.unstyled||w),"data-mounted":se,"data-promise":!!o.promise,"data-swiped":gr,"data-removed":Ie,"data-visible":Nr,"data-y-position":Tn,"data-x-position":Sn,"data-index":S,"data-front":tn,"data-swiping":Ee,"data-dismissible":rn,"data-type":Vr,"data-invert":Gn,"data-swipe-out":dt,"data-swipe-direction":be,"data-expanded":!!(k||A&&se),style:{"--index":S,"--toasts-before":S,"--z-index":x.length-S,"--offset":`${Ie?xr:Hr.current}px`,"--initial-height":A?"auto":`${Bt}px`,...E,...o.style},onDragEnd:()=>{Le(!1),ae(null),fn.current=null},onPointerDown:Me=>{sn||!rn||(Kt.current=new Date,vr(Hr.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Le(!0),fn.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,it,je,ct;if(dt||!rn)return;fn.current=null;let tr=Number(((Me=Wr.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ae=Number(((it=Wr.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gt=new Date().getTime()-((je=Kt.current)==null?void 0:je.getTime()),jt=J==="x"?tr:Ae,hr=Math.abs(jt)/Gt;if(Math.abs(jt)>=KA||hr>.11){vr(Hr.current),(ct=o.onDismiss)==null||ct.call(o,o),xe(J==="x"?tr>0?"right":"left":Ae>0?"down":"up"),er(),cr(!0),Ot(!1);return}Le(!1),ae(null)},onPointerMove:Me=>{var it,je,ct,tr;if(!fn.current||!rn||((it=window.getSelection())==null?void 0:it.toString().length)>0)return;let Ae=Me.clientY-fn.current.y,Gt=Me.clientX-fn.current.x,jt=(je=e.swipeDirections)!=null?je:YA(N);!J&&(Math.abs(Gt)>1||Math.abs(Ae)>1)&&ae(Math.abs(Gt)>Math.abs(Ae)?"x":"y");let hr={x:0,y:0};J==="y"?(jt.includes("top")||jt.includes("bottom"))&&(jt.includes("top")&&Ae<0||jt.includes("bottom")&&Ae>0)&&(hr.y=Ae):J==="x"&&(jt.includes("left")||jt.includes("right"))&&(jt.includes("left")&&Gt<0||jt.includes("right")&&Gt>0)&&(hr.x=Gt),(Math.abs(hr.x)>0||Math.abs(hr.y)>0)&&Ot(!0),(ct=Wr.current)==null||ct.style.setProperty("--swipe-amount-x",`${hr.x}px`),(tr=Wr.current)==null||tr.style.setProperty("--swipe-amount-y",`${hr.y}px`)}},Fr&&!o.jsx?_t.createElement("button",{"aria-label":de,"data-disabled":sn,"data-close-button":!0,onClick:sn||!rn?()=>{}:()=>{var Me;er(),(Me=o.onDismiss)==null||Me.call(o,o)},className:ei(j==null?void 0:j.closeButton,(s=o==null?void 0:o.classNames)==null?void 0:s.closeButton)},(a=G==null?void 0:G.close)!=null?a:IA):null,o.jsx||D.isValidElement(o.title)?o.jsx?o.jsx:typeof o.title=="function"?o.title():o.title:_t.createElement(_t.Fragment,null,Vr||o.icon||o.promise?_t.createElement("div",{"data-icon":"",className:ei(j==null?void 0:j.icon,(h=o==null?void 0:o.classNames)==null?void 0:h.icon)},o.promise||o.type==="loading"&&!o.icon?o.icon||Ge():null,o.type!=="loading"?o.icon||(G==null?void 0:G[Vr])||kA(Vr):null):null,_t.createElement("div",{"data-content":"",className:ei(j==null?void 0:j.content,(p=o==null?void 0:o.classNames)==null?void 0:p.content)},_t.createElement("div",{"data-title":"",className:ei(j==null?void 0:j.title,(u=o==null?void 0:o.classNames)==null?void 0:u.title)},typeof o.title=="function"?o.title():o.title),o.description?_t.createElement("div",{"data-description":"",className:ei(P,nn,j==null?void 0:j.description,(i=o==null?void 0:o.classNames)==null?void 0:i.description)},typeof o.description=="function"?o.description():o.description):null),D.isValidElement(o.cancel)?o.cancel:o.cancel&&xh(o.cancel)?_t.createElement("button",{"data-button":!0,"data-cancel":!0,style:o.cancelButtonStyle||c,onClick:Me=>{var it,je;xh(o.cancel)&&rn&&((je=(it=o.cancel).onClick)==null||je.call(it,Me),er())},className:ei(j==null?void 0:j.cancelButton,(g=o==null?void 0:o.classNames)==null?void 0:g.cancelButton)},o.cancel.label):null,D.isValidElement(o.action)?o.action:o.action&&xh(o.action)?_t.createElement("button",{"data-button":!0,"data-action":!0,style:o.actionButtonStyle||b,onClick:Me=>{var it,je;xh(o.action)&&((je=(it=o.action).onClick)==null||je.call(it,Me),!Me.defaultPrevented&&er())},className:ei(j==null?void 0:j.actionButton,(_=o==null?void 0:o.classNames)==null?void 0:_.actionButton)},o.action.label):null))};function Kb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function JA(e,t){let r={};return[e,t].forEach((n,s)=>{let a=s===1,h=a?"--mobile-offset":"--offset",p=a?zA:VA;function u(i){["top","right","bottom","left"].forEach(g=>{r[`${h}-${g}`]=typeof i=="number"?`${i}px`:i})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(i=>{n[i]===void 0?r[`${h}-${i}`]=p:r[`${h}-${i}`]=typeof n[i]=="number"?`${n[i]}px`:n[i]}):u(p)}),r}var XA=D.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:h,className:p,offset:u,mobileOffset:i,theme:g="light",richColors:_,duration:f,style:o,visibleToasts:w=WA,toastOptions:l,dir:y=Kb(),gap:d=qA,loadingIcon:m,icons:S,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:k}=e,[I,T]=_t.useState([]),C=_t.useMemo(()=>Array.from(new Set([n].concat(I.filter(te=>te.position).map(te=>te.position)))),[I,n]),[E,c]=_t.useState([]),[b,R]=_t.useState(!1),[P,O]=_t.useState(!1),[N,M]=_t.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=_t.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=_t.useRef(null),G=_t.useRef(!1),de=_t.useCallback(te=>{T(J=>{var ae;return(ae=J.find(be=>be.id===te.id))!=null&&ae.delete||pa.dismiss(te.id),J.filter(({id:be})=>be!==te.id)})},[]);return _t.useEffect(()=>pa.subscribe(te=>{if(te.dismiss){T(J=>J.map(ae=>ae.id===te.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{K0.flushSync(()=>{T(J=>{let ae=J.findIndex(be=>be.id===te.id);return ae!==-1?[...J.slice(0,ae),{...J[ae],...te},...J.slice(ae+1)]:[te,...J]})})})}),[]),_t.useEffect(()=>{if(g!=="system"){M(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:J})=>{M(J?"dark":"light")})}catch{te.addListener(({matches:ae})=>{try{M(ae?"dark":"light")}catch(be){console.error(be)}})}},[g]),_t.useEffect(()=>{I.length<=1&&R(!1)},[I]),_t.useEffect(()=>{let te=J=>{var ae,be;s.every(xe=>J[xe]||J.code===xe)&&(R(!0),(ae=L.current)==null||ae.focus()),J.code==="Escape"&&(document.activeElement===L.current||(be=L.current)!=null&&be.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),_t.useEffect(()=>{if(L.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,G.current=!1)}},[L.current]),_t.createElement("section",{ref:t,"aria-label":`${x} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((te,J)=>{var ae;let[be,xe]=te.split("-");return I.length?_t.createElement("ol",{key:te,dir:y==="auto"?Kb():y,tabIndex:-1,ref:L,className:p,"data-sonner-toaster":!0,"data-theme":N,"data-y-position":be,"data-lifted":b&&I.length>1&&!a,"data-x-position":xe,style:{"--front-toast-height":`${((ae=E[0])==null?void 0:ae.height)||0}px`,"--width":`${HA}px`,"--gap":`${d}px`,...o,...JA(u,i)},onBlur:se=>{G.current&&!se.currentTarget.contains(se.relatedTarget)&&(G.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||G.current||(G.current=!0,j.current=se.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{P||R(!1)},onDragEnd:()=>R(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},I.filter(se=>!se.position&&J===0||se.position===te).map((se,ze)=>{var Ie,Ne;return _t.createElement(QA,{key:se.id,icons:S,index:ze,toast:se,defaultRichColors:_,duration:(Ie=l==null?void 0:l.duration)!=null?Ie:f,className:l==null?void 0:l.className,descriptionClassName:l==null?void 0:l.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Ne=l==null?void 0:l.closeButton)!=null?Ne:h,interacting:P,position:te,style:l==null?void 0:l.style,unstyled:l==null?void 0:l.unstyled,classNames:l==null?void 0:l.classNames,cancelButtonStyle:l==null?void 0:l.cancelButtonStyle,actionButtonStyle:l==null?void 0:l.actionButtonStyle,removeToast:de,toasts:I.filter(Ee=>Ee.position==se.position),heights:E.filter(Ee=>Ee.position==se.position),setHeights:c,expandByDefault:a,gap:d,loadingIcon:m,expanded:b,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});function lR(e,t){return function(){return e.apply(t,arguments)}}const{toString:ZA}=Object.prototype,{getPrototypeOf:Sy}=Object,{iterator:dm,toStringTag:uR}=Symbol,pm=(e=>t=>{const r=ZA.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),pi=e=>(e=e.toLowerCase(),t=>pm(t)===e),hm=e=>t=>typeof t===e,{isArray:Uu}=Array,cp=hm("undefined");function eI(e){return e!==null&&!cp(e)&&e.constructor!==null&&!cp(e.constructor)&&_a(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dR=pi("ArrayBuffer");function tI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dR(e.buffer),t}const rI=hm("string"),_a=hm("function"),pR=hm("number"),fm=e=>e!==null&&typeof e=="object",nI=e=>e===!0||e===!1,Vh=e=>{if(pm(e)!=="object")return!1;const t=Sy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(uR in e)&&!(dm in e)},sI=pi("Date"),aI=pi("File"),iI=pi("Blob"),oI=pi("FileList"),cI=e=>fm(e)&&_a(e.pipe),lI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_a(e.append)&&((t=pm(e))==="formdata"||t==="object"&&_a(e.toString)&&e.toString()==="[object FormData]"))},uI=pi("URLSearchParams"),[dI,pI,hI,fI]=["ReadableStream","Request","Response","Headers"].map(pi),mI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Uu(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),h=a.length;let p;for(n=0;n<h;n++)p=a[n],t.call(null,e[p],p,e)}}function hR(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const tl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fR=e=>!cp(e)&&e!==tl;function jv(){const{caseless:e}=fR(this)&&this||{},t={},r=(n,s)=>{const a=e&&hR(t,s)||s;Vh(t[a])&&Vh(n)?t[a]=jv(t[a],n):Vh(n)?t[a]=jv({},n):Uu(n)?t[a]=n.slice():t[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&yp(arguments[n],r);return t}const gI=(e,t,r,{allOwnKeys:n}={})=>(yp(t,(s,a)=>{r&&_a(s)?e[a]=lR(s,r):e[a]=s},{allOwnKeys:n}),e),vI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yI=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},_I=(e,t,r,n)=>{let s,a,h;const p={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)h=s[a],(!n||n(h,e,t))&&!p[h]&&(t[h]=e[h],p[h]=!0);e=r!==!1&&Sy(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},bI=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},wI=e=>{if(!e)return null;if(Uu(e))return e;let t=e.length;if(!pR(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},SI=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Sy(Uint8Array)),xI=(e,t)=>{const n=(e&&e[dm]).call(e);let s;for(;(s=n.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},RI=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},EI=pi("HTMLFormElement"),kI=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Gb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),CI=pi("RegExp"),mR=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};yp(r,(s,a)=>{let h;(h=t(s,a,e))!==!1&&(n[a]=h||s)}),Object.defineProperties(e,n)},TI=e=>{mR(e,(t,r)=>{if(_a(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(_a(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},PI=(e,t)=>{const r={},n=s=>{s.forEach(a=>{r[a]=!0})};return Uu(e)?n(e):n(String(e).split(t)),r},OI=()=>{},NI=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function AI(e){return!!(e&&_a(e.append)&&e[uR]==="FormData"&&e[dm])}const II=e=>{const t=new Array(10),r=(n,s)=>{if(fm(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const a=Uu(n)?[]:{};return yp(n,(h,p)=>{const u=r(h,s+1);!cp(u)&&(a[p]=u)}),t[s]=void 0,a}}return n};return r(e,0)},DI=pi("AsyncFunction"),MI=e=>e&&(fm(e)||_a(e))&&_a(e.then)&&_a(e.catch),gR=((e,t)=>e?setImmediate:t?((r,n)=>(tl.addEventListener("message",({source:s,data:a})=>{s===tl&&a===r&&n.length&&n.shift()()},!1),s=>{n.push(s),tl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",_a(tl.postMessage)),LI=typeof queueMicrotask<"u"?queueMicrotask.bind(tl):typeof process<"u"&&process.nextTick||gR,jI=e=>e!=null&&_a(e[dm]),Ke={isArray:Uu,isArrayBuffer:dR,isBuffer:eI,isFormData:lI,isArrayBufferView:tI,isString:rI,isNumber:pR,isBoolean:nI,isObject:fm,isPlainObject:Vh,isReadableStream:dI,isRequest:pI,isResponse:hI,isHeaders:fI,isUndefined:cp,isDate:sI,isFile:aI,isBlob:iI,isRegExp:CI,isFunction:_a,isStream:cI,isURLSearchParams:uI,isTypedArray:SI,isFileList:oI,forEach:yp,merge:jv,extend:gI,trim:mI,stripBOM:vI,inherits:yI,toFlatObject:_I,kindOf:pm,kindOfTest:pi,endsWith:bI,toArray:wI,forEachEntry:xI,matchAll:RI,isHTMLForm:EI,hasOwnProperty:Gb,hasOwnProp:Gb,reduceDescriptors:mR,freezeMethods:TI,toObjectSet:PI,toCamelCase:kI,noop:OI,toFiniteNumber:NI,findKey:hR,global:tl,isContextDefined:fR,isSpecCompliantForm:AI,toJSONObject:II,isAsyncFn:DI,isThenable:MI,setImmediate:gR,asap:LI,isIterable:jI};function Or(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Ke.inherits(Or,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ke.toJSONObject(this.config),code:this.code,status:this.status}}});const vR=Or.prototype,yR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yR[e]={value:e}});Object.defineProperties(Or,yR);Object.defineProperty(vR,"isAxiosError",{value:!0});Or.from=(e,t,r,n,s,a)=>{const h=Object.create(vR);return Ke.toFlatObject(e,h,function(u){return u!==Error.prototype},p=>p!=="isAxiosError"),Or.call(h,e.message,t,r,n,s),h.cause=e,h.name=e.name,a&&Object.assign(h,a),h};const BI=null;function Bv(e){return Ke.isPlainObject(e)||Ke.isArray(e)}function _R(e){return Ke.endsWith(e,"[]")?e.slice(0,-2):e}function Yb(e,t,r){return e?e.concat(t).map(function(s,a){return s=_R(s),!r&&a?"["+s+"]":s}).join(r?".":""):t}function FI(e){return Ke.isArray(e)&&!e.some(Bv)}const UI=Ke.toFlatObject(Ke,{},null,function(t){return/^is[A-Z]/.test(t)});function mm(e,t,r){if(!Ke.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(l,y){return!Ke.isUndefined(y[l])});const n=r.metaTokens,s=r.visitor||g,a=r.dots,h=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Ke.isSpecCompliantForm(t);if(!Ke.isFunction(s))throw new TypeError("visitor must be a function");function i(w){if(w===null)return"";if(Ke.isDate(w))return w.toISOString();if(!u&&Ke.isBlob(w))throw new Or("Blob is not supported. Use a Buffer instead.");return Ke.isArrayBuffer(w)||Ke.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function g(w,l,y){let d=w;if(w&&!y&&typeof w=="object"){if(Ke.endsWith(l,"{}"))l=n?l:l.slice(0,-2),w=JSON.stringify(w);else if(Ke.isArray(w)&&FI(w)||(Ke.isFileList(w)||Ke.endsWith(l,"[]"))&&(d=Ke.toArray(w)))return l=_R(l),d.forEach(function(S,x){!(Ke.isUndefined(S)||S===null)&&t.append(h===!0?Yb([l],x,a):h===null?l:l+"[]",i(S))}),!1}return Bv(w)?!0:(t.append(Yb(y,l,a),i(w)),!1)}const _=[],f=Object.assign(UI,{defaultVisitor:g,convertValue:i,isVisitable:Bv});function o(w,l){if(!Ke.isUndefined(w)){if(_.indexOf(w)!==-1)throw Error("Circular reference detected in "+l.join("."));_.push(w),Ke.forEach(w,function(d,m){(!(Ke.isUndefined(d)||d===null)&&s.call(t,d,Ke.isString(m)?m.trim():m,l,f))===!0&&o(d,l?l.concat(m):[m])}),_.pop()}}if(!Ke.isObject(e))throw new TypeError("data must be an object");return o(e),t}function Qb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function xy(e,t){this._pairs=[],e&&mm(e,this,t)}const bR=xy.prototype;bR.append=function(t,r){this._pairs.push([t,r])};bR.toString=function(t){const r=t?function(n){return t.call(this,n,Qb)}:Qb;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function $I(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wR(e,t,r){if(!t)return e;const n=r&&r.encode||$I;Ke.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(s?a=s(t,r):a=Ke.isURLSearchParams(t)?t.toString():new xy(t,r).toString(n),a){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Jb{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ke.forEach(this.handlers,function(n){n!==null&&t(n)})}}const SR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WI=typeof URLSearchParams<"u"?URLSearchParams:xy,VI=typeof FormData<"u"?FormData:null,zI=typeof Blob<"u"?Blob:null,HI={isBrowser:!0,classes:{URLSearchParams:WI,FormData:VI,Blob:zI},protocols:["http","https","file","blob","url","data"]},Ry=typeof window<"u"&&typeof document<"u",Fv=typeof navigator=="object"&&navigator||void 0,qI=Ry&&(!Fv||["ReactNative","NativeScript","NS"].indexOf(Fv.product)<0),KI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GI=Ry&&window.location.href||"http://localhost",YI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ry,hasStandardBrowserEnv:qI,hasStandardBrowserWebWorkerEnv:KI,navigator:Fv,origin:GI},Symbol.toStringTag,{value:"Module"})),Qs={...YI,...HI};function QI(e,t){return mm(e,new Qs.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,a){return Qs.isNode&&Ke.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function JI(e){return Ke.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function XI(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}function xR(e){function t(r,n,s,a){let h=r[a++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),u=a>=r.length;return h=!h&&Ke.isArray(s)?s.length:h,u?(Ke.hasOwnProp(s,h)?s[h]=[s[h],n]:s[h]=n,!p):((!s[h]||!Ke.isObject(s[h]))&&(s[h]=[]),t(r,n,s[h],a)&&Ke.isArray(s[h])&&(s[h]=XI(s[h])),!p)}if(Ke.isFormData(e)&&Ke.isFunction(e.entries)){const r={};return Ke.forEachEntry(e,(n,s)=>{t(JI(n),s,r,0)}),r}return null}function ZI(e,t,r){if(Ke.isString(e))try{return(t||JSON.parse)(e),Ke.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const _p={transitional:SR,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,a=Ke.isObject(t);if(a&&Ke.isHTMLForm(t)&&(t=new FormData(t)),Ke.isFormData(t))return s?JSON.stringify(xR(t)):t;if(Ke.isArrayBuffer(t)||Ke.isBuffer(t)||Ke.isStream(t)||Ke.isFile(t)||Ke.isBlob(t)||Ke.isReadableStream(t))return t;if(Ke.isArrayBufferView(t))return t.buffer;if(Ke.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let p;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return QI(t,this.formSerializer).toString();if((p=Ke.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return mm(p?{"files[]":t}:t,u&&new u,this.formSerializer)}}return a||s?(r.setContentType("application/json",!1),ZI(t)):t}],transformResponse:[function(t){const r=this.transitional||_p.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Ke.isResponse(t)||Ke.isReadableStream(t))return t;if(t&&Ke.isString(t)&&(n&&!this.responseType||s)){const h=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(p){if(h)throw p.name==="SyntaxError"?Or.from(p,Or.ERR_BAD_RESPONSE,this,null,this.response):p}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qs.classes.FormData,Blob:Qs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ke.forEach(["delete","get","head","post","put","patch"],e=>{_p.headers[e]={}});const eD=Ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tD=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(h){s=h.indexOf(":"),r=h.substring(0,s).trim().toLowerCase(),n=h.substring(s+1).trim(),!(!r||t[r]&&eD[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Xb=Symbol("internals");function xd(e){return e&&String(e).trim().toLowerCase()}function zh(e){return e===!1||e==null?e:Ke.isArray(e)?e.map(zh):String(e)}function rD(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const nD=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function gg(e,t,r,n,s){if(Ke.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Ke.isString(t)){if(Ke.isString(n))return t.indexOf(n)!==-1;if(Ke.isRegExp(n))return n.test(t)}}function sD(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function aD(e,t){const r=Ke.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,a,h){return this[n].call(this,t,s,a,h)},configurable:!0})})}let ba=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function a(p,u,i){const g=xd(u);if(!g)throw new Error("header name must be a non-empty string");const _=Ke.findKey(s,g);(!_||s[_]===void 0||i===!0||i===void 0&&s[_]!==!1)&&(s[_||u]=zh(p))}const h=(p,u)=>Ke.forEach(p,(i,g)=>a(i,g,u));if(Ke.isPlainObject(t)||t instanceof this.constructor)h(t,r);else if(Ke.isString(t)&&(t=t.trim())&&!nD(t))h(tD(t),r);else if(Ke.isObject(t)&&Ke.isIterable(t)){let p={},u,i;for(const g of t){if(!Ke.isArray(g))throw TypeError("Object iterator must return a key-value pair");p[i=g[0]]=(u=p[i])?Ke.isArray(u)?[...u,g[1]]:[u,g[1]]:g[1]}h(p,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=xd(t),t){const n=Ke.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return rD(s);if(Ke.isFunction(r))return r.call(this,s,n);if(Ke.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=xd(t),t){const n=Ke.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||gg(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function a(h){if(h=xd(h),h){const p=Ke.findKey(n,h);p&&(!r||gg(n,n[p],p,r))&&(delete n[p],s=!0)}}return Ke.isArray(t)?t.forEach(a):a(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const a=r[n];(!t||gg(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const r=this,n={};return Ke.forEach(this,(s,a)=>{const h=Ke.findKey(n,a);if(h){r[h]=zh(s),delete r[a];return}const p=t?sD(a):String(a).trim();p!==a&&delete r[a],r[p]=zh(s),n[p]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ke.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Ke.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Xb]=this[Xb]={accessors:{}}).accessors,s=this.prototype;function a(h){const p=xd(h);n[p]||(aD(s,h),n[p]=!0)}return Ke.isArray(t)?t.forEach(a):a(t),this}};ba.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ke.reduceDescriptors(ba.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ke.freezeMethods(ba);function vg(e,t){const r=this||_p,n=t||r,s=ba.from(n.headers);let a=n.data;return Ke.forEach(e,function(p){a=p.call(r,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function RR(e){return!!(e&&e.__CANCEL__)}function $u(e,t,r){Or.call(this,e??"canceled",Or.ERR_CANCELED,t,r),this.name="CanceledError"}Ke.inherits($u,Or,{__CANCEL__:!0});function ER(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Or("Request failed with status code "+r.status,[Or.ERR_BAD_REQUEST,Or.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function iD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function oD(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,a=0,h;return t=t!==void 0?t:1e3,function(u){const i=Date.now(),g=n[a];h||(h=i),r[s]=u,n[s]=i;let _=a,f=0;for(;_!==s;)f+=r[_++],_=_%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),i-h<t)return;const o=g&&i-g;return o?Math.round(f*1e3/o):void 0}}function cD(e,t){let r=0,n=1e3/t,s,a;const h=(i,g=Date.now())=>{r=g,s=null,a&&(clearTimeout(a),a=null),e.apply(null,i)};return[(...i)=>{const g=Date.now(),_=g-r;_>=n?h(i,g):(s=i,a||(a=setTimeout(()=>{a=null,h(s)},n-_)))},()=>s&&h(s)]}const If=(e,t,r=3)=>{let n=0;const s=oD(50,250);return cD(a=>{const h=a.loaded,p=a.lengthComputable?a.total:void 0,u=h-n,i=s(u),g=h<=p;n=h;const _={loaded:h,total:p,progress:p?h/p:void 0,bytes:u,rate:i||void 0,estimated:i&&p&&g?(p-h)/i:void 0,event:a,lengthComputable:p!=null,[t?"download":"upload"]:!0};e(_)},r)},Zb=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ew=e=>(...t)=>Ke.asap(()=>e(...t)),lD=Qs.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Qs.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Qs.origin),Qs.navigator&&/(msie|trident)/i.test(Qs.navigator.userAgent)):()=>!0,uD=Qs.hasStandardBrowserEnv?{write(e,t,r,n,s,a){const h=[e+"="+encodeURIComponent(t)];Ke.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),Ke.isString(n)&&h.push("path="+n),Ke.isString(s)&&h.push("domain="+s),a===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function kR(e,t,r){let n=!dD(t);return e&&(n||r==!1)?pD(e,t):t}const tw=e=>e instanceof ba?{...e}:e;function vl(e,t){t=t||{};const r={};function n(i,g,_,f){return Ke.isPlainObject(i)&&Ke.isPlainObject(g)?Ke.merge.call({caseless:f},i,g):Ke.isPlainObject(g)?Ke.merge({},g):Ke.isArray(g)?g.slice():g}function s(i,g,_,f){if(Ke.isUndefined(g)){if(!Ke.isUndefined(i))return n(void 0,i,_,f)}else return n(i,g,_,f)}function a(i,g){if(!Ke.isUndefined(g))return n(void 0,g)}function h(i,g){if(Ke.isUndefined(g)){if(!Ke.isUndefined(i))return n(void 0,i)}else return n(void 0,g)}function p(i,g,_){if(_ in t)return n(i,g);if(_ in e)return n(void 0,i)}const u={url:a,method:a,data:a,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(i,g,_)=>s(tw(i),tw(g),_,!0)};return Ke.forEach(Object.keys(Object.assign({},e,t)),function(g){const _=u[g]||s,f=_(e[g],t[g],g);Ke.isUndefined(f)&&_!==p||(r[g]=f)}),r}const CR=e=>{const t=vl({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:h,auth:p}=t;t.headers=h=ba.from(h),t.url=wR(kR(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),p&&h.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let u;if(Ke.isFormData(r)){if(Qs.hasStandardBrowserEnv||Qs.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((u=h.getContentType())!==!1){const[i,...g]=u?u.split(";").map(_=>_.trim()).filter(Boolean):[];h.setContentType([i||"multipart/form-data",...g].join("; "))}}if(Qs.hasStandardBrowserEnv&&(n&&Ke.isFunction(n)&&(n=n(t)),n||n!==!1&&lD(t.url))){const i=s&&a&&uD.read(a);i&&h.set(s,i)}return t},hD=typeof XMLHttpRequest<"u",fD=hD&&function(e){return new Promise(function(r,n){const s=CR(e);let a=s.data;const h=ba.from(s.headers).normalize();let{responseType:p,onUploadProgress:u,onDownloadProgress:i}=s,g,_,f,o,w;function l(){o&&o(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function d(){if(!y)return;const S=ba.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),k={data:!p||p==="text"||p==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:S,config:e,request:y};ER(function(T){r(T),l()},function(T){n(T),l()},k),y=null}"onloadend"in y?y.onloadend=d:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(d)},y.onabort=function(){y&&(n(new Or("Request aborted",Or.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new Or("Network Error",Or.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const k=s.transitional||SR;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),n(new Or(x,k.clarifyTimeoutError?Or.ETIMEDOUT:Or.ECONNABORTED,e,y)),y=null},a===void 0&&h.setContentType(null),"setRequestHeader"in y&&Ke.forEach(h.toJSON(),function(x,k){y.setRequestHeader(k,x)}),Ke.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),p&&p!=="json"&&(y.responseType=s.responseType),i&&([f,w]=If(i,!0),y.addEventListener("progress",f)),u&&y.upload&&([_,o]=If(u),y.upload.addEventListener("progress",_),y.upload.addEventListener("loadend",o)),(s.cancelToken||s.signal)&&(g=S=>{y&&(n(!S||S.type?new $u(null,e,y):S),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const m=iD(s.url);if(m&&Qs.protocols.indexOf(m)===-1){n(new Or("Unsupported protocol "+m+":",Or.ERR_BAD_REQUEST,e));return}y.send(a||null)})},mD=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const a=function(i){if(!s){s=!0,p();const g=i instanceof Error?i:this.reason;n.abort(g instanceof Or?g:new $u(g instanceof Error?g.message:g))}};let h=t&&setTimeout(()=>{h=null,a(new Or(`timeout ${t} of ms exceeded`,Or.ETIMEDOUT))},t);const p=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(i=>{i.unsubscribe?i.unsubscribe(a):i.removeEventListener("abort",a)}),e=null)};e.forEach(i=>i.addEventListener("abort",a));const{signal:u}=n;return u.unsubscribe=()=>Ke.asap(p),u}},gD=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},vD=async function*(e,t){for await(const r of yD(e))yield*gD(r,t)},yD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},rw=(e,t,r,n)=>{const s=vD(e,t);let a=0,h,p=u=>{h||(h=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:i,value:g}=await s.next();if(i){p(),u.close();return}let _=g.byteLength;if(r){let f=a+=_;r(f)}u.enqueue(new Uint8Array(g))}catch(i){throw p(i),i}},cancel(u){return p(u),s.return()}},{highWaterMark:2})},gm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TR=gm&&typeof ReadableStream=="function",_D=gm&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),PR=(e,...t)=>{try{return!!e(...t)}catch{return!1}},bD=TR&&PR(()=>{let e=!1;const t=new Request(Qs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),nw=64*1024,Uv=TR&&PR(()=>Ke.isReadableStream(new Response("").body)),Df={stream:Uv&&(e=>e.body)};gm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Df[t]&&(Df[t]=Ke.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Or(`Response type '${t}' is not supported`,Or.ERR_NOT_SUPPORT,n)})})})(new Response);const wD=async e=>{if(e==null)return 0;if(Ke.isBlob(e))return e.size;if(Ke.isSpecCompliantForm(e))return(await new Request(Qs.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ke.isArrayBufferView(e)||Ke.isArrayBuffer(e))return e.byteLength;if(Ke.isURLSearchParams(e)&&(e=e+""),Ke.isString(e))return(await _D(e)).byteLength},SD=async(e,t)=>{const r=Ke.toFiniteNumber(e.getContentLength());return r??wD(t)},xD=gm&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:a,timeout:h,onDownloadProgress:p,onUploadProgress:u,responseType:i,headers:g,withCredentials:_="same-origin",fetchOptions:f}=CR(e);i=i?(i+"").toLowerCase():"text";let o=mD([s,a&&a.toAbortSignal()],h),w;const l=o&&o.unsubscribe&&(()=>{o.unsubscribe()});let y;try{if(u&&bD&&r!=="get"&&r!=="head"&&(y=await SD(g,n))!==0){let k=new Request(t,{method:"POST",body:n,duplex:"half"}),I;if(Ke.isFormData(n)&&(I=k.headers.get("content-type"))&&g.setContentType(I),k.body){const[T,C]=Zb(y,If(ew(u)));n=rw(k.body,nw,T,C)}}Ke.isString(_)||(_=_?"include":"omit");const d="credentials"in Request.prototype;w=new Request(t,{...f,signal:o,method:r.toUpperCase(),headers:g.normalize().toJSON(),body:n,duplex:"half",credentials:d?_:void 0});let m=await fetch(w);const S=Uv&&(i==="stream"||i==="response");if(Uv&&(p||S&&l)){const k={};["status","statusText","headers"].forEach(E=>{k[E]=m[E]});const I=Ke.toFiniteNumber(m.headers.get("content-length")),[T,C]=p&&Zb(I,If(ew(p),!0))||[];m=new Response(rw(m.body,nw,T,()=>{C&&C(),l&&l()}),k)}i=i||"text";let x=await Df[Ke.findKey(Df,i)||"text"](m,e);return!S&&l&&l(),await new Promise((k,I)=>{ER(k,I,{data:x,headers:ba.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:w})})}catch(d){throw l&&l(),d&&d.name==="TypeError"&&/Load failed|fetch/i.test(d.message)?Object.assign(new Or("Network Error",Or.ERR_NETWORK,e,w),{cause:d.cause||d}):Or.from(d,d&&d.code,e,w)}}),$v={http:BI,xhr:fD,fetch:xD};Ke.forEach($v,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sw=e=>`- ${e}`,RD=e=>Ke.isFunction(e)||e===null||e===!1,OR={getAdapter:e=>{e=Ke.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let a=0;a<t;a++){r=e[a];let h;if(n=r,!RD(r)&&(n=$v[(h=String(r)).toLowerCase()],n===void 0))throw new Or(`Unknown adapter '${h}'`);if(n)break;s[h||"#"+a]=n}if(!n){const a=Object.entries(s).map(([p,u])=>`adapter ${p} `+(u===!1?"is not supported by the environment":"is not available in the build"));let h=t?a.length>1?`since :
`+a.map(sw).join(`
`):" "+sw(a[0]):"as no adapter specified";throw new Or("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return n},adapters:$v};function yg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $u(null,e)}function aw(e){return yg(e),e.headers=ba.from(e.headers),e.data=vg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),OR.getAdapter(e.adapter||_p.adapter)(e).then(function(n){return yg(e),n.data=vg.call(e,e.transformResponse,n),n.headers=ba.from(n.headers),n},function(n){return RR(n)||(yg(e),n&&n.response&&(n.response.data=vg.call(e,e.transformResponse,n.response),n.response.headers=ba.from(n.response.headers))),Promise.reject(n)})}const NR="1.9.0",vm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vm[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const iw={};vm.transitional=function(t,r,n){function s(a,h){return"[Axios v"+NR+"] Transitional option '"+a+"'"+h+(n?". "+n:"")}return(a,h,p)=>{if(t===!1)throw new Or(s(h," has been removed"+(r?" in "+r:"")),Or.ERR_DEPRECATED);return r&&!iw[h]&&(iw[h]=!0,console.warn(s(h," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,h,p):!0}};vm.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function ED(e,t,r){if(typeof e!="object")throw new Or("options must be an object",Or.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],h=t[a];if(h){const p=e[a],u=p===void 0||h(p,a,e);if(u!==!0)throw new Or("option "+a+" must be "+u,Or.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Or("Unknown option "+a,Or.ERR_BAD_OPTION)}}const Hh={assertOptions:ED,validators:vm},vi=Hh.validators;let al=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Jb,response:new Jb}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=vl(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:a}=r;n!==void 0&&Hh.assertOptions(n,{silentJSONParsing:vi.transitional(vi.boolean),forcedJSONParsing:vi.transitional(vi.boolean),clarifyTimeoutError:vi.transitional(vi.boolean)},!1),s!=null&&(Ke.isFunction(s)?r.paramsSerializer={serialize:s}:Hh.assertOptions(s,{encode:vi.function,serialize:vi.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Hh.assertOptions(r,{baseUrl:vi.spelling("baseURL"),withXsrfToken:vi.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let h=a&&Ke.merge(a.common,a[r.method]);a&&Ke.forEach(["delete","get","head","post","put","patch","common"],w=>{delete a[w]}),r.headers=ba.concat(h,a);const p=[];let u=!0;this.interceptors.request.forEach(function(l){typeof l.runWhen=="function"&&l.runWhen(r)===!1||(u=u&&l.synchronous,p.unshift(l.fulfilled,l.rejected))});const i=[];this.interceptors.response.forEach(function(l){i.push(l.fulfilled,l.rejected)});let g,_=0,f;if(!u){const w=[aw.bind(this),void 0];for(w.unshift.apply(w,p),w.push.apply(w,i),f=w.length,g=Promise.resolve(r);_<f;)g=g.then(w[_++],w[_++]);return g}f=p.length;let o=r;for(_=0;_<f;){const w=p[_++],l=p[_++];try{o=w(o)}catch(y){l.call(this,y);break}}try{g=aw.call(this,o)}catch(w){return Promise.reject(w)}for(_=0,f=i.length;_<f;)g=g.then(i[_++],i[_++]);return g}getUri(t){t=vl(this.defaults,t);const r=kR(t.baseURL,t.url,t.allowAbsoluteUrls);return wR(r,t.params,t.paramsSerializer)}};Ke.forEach(["delete","get","head","options"],function(t){al.prototype[t]=function(r,n){return this.request(vl(n||{},{method:t,url:r,data:(n||{}).data}))}});Ke.forEach(["post","put","patch"],function(t){function r(n){return function(a,h,p){return this.request(vl(p||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:h}))}}al.prototype[t]=r(),al.prototype[t+"Form"]=r(!0)});let kD=class AR{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const h=new Promise(p=>{n.subscribe(p),a=p}).then(s);return h.cancel=function(){n.unsubscribe(a)},h},t(function(a,h,p){n.reason||(n.reason=new $u(a,h,p),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new AR(function(s){t=s}),cancel:t}}};function CD(e){return function(r){return e.apply(null,r)}}function TD(e){return Ke.isObject(e)&&e.isAxiosError===!0}const Wv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wv).forEach(([e,t])=>{Wv[t]=e});function IR(e){const t=new al(e),r=lR(al.prototype.request,t);return Ke.extend(r,al.prototype,t,{allOwnKeys:!0}),Ke.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return IR(vl(e,s))},r}const pr=IR(_p);pr.Axios=al;pr.CanceledError=$u;pr.CancelToken=kD;pr.isCancel=RR;pr.VERSION=NR;pr.toFormData=mm;pr.AxiosError=Or;pr.Cancel=pr.CanceledError;pr.all=function(t){return Promise.all(t)};pr.spread=CD;pr.isAxiosError=TD;pr.mergeConfig=vl;pr.AxiosHeaders=ba;pr.formToJSON=e=>xR(Ke.isHTMLForm(e)?new FormData(e):e);pr.getAdapter=OR.getAdapter;pr.HttpStatusCode=Wv;pr.default=pr;const{Axios:g7,AxiosError:v7,CanceledError:y7,isCancel:_7,CancelToken:b7,VERSION:w7,all:S7,Cancel:x7,isAxiosError:R7,spread:E7,toFormData:k7,AxiosHeaders:C7,HttpStatusCode:T7,formToJSON:P7,getAdapter:O7,mergeConfig:N7}=pr;function PD(){const[e,t]=D.useState(""),[r,n]=D.useState("all"),[s,a]=D.useState("all"),[h,p]=D.useState([]),[u,i]=D.useState(!1),[g,_]=D.useState(null),[f,o]=D.useState({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),[w,l]=D.useState(!1),y=to(E=>E.user),d="http://localhost:3000/api/patient";D.useEffect(()=>{(async()=>{var c;try{const b=await pr.get(`${d}/fetchAllDoctors`,{withCredentials:!0});b.data.success&&p(b.data.data)}catch(b){pr.isAxiosError(b)&&b.response?Lr.error(((c=b.response.data)==null?void 0:c.message)||"Something went wrong"):Lr.error("An unexpected error occurred.")}})()},[]);const m=["Cardiology","Dermatology","General Medicine","Neurology","Pediatrics","Psychiatry","Orthopedics","Gynecology"],S=["New York, NY","Los Angeles, CA","Chicago, IL","Boston, MA","Miami, FL","Seattle, WA"],x=h.filter(E=>{const c=E.user.name.toLowerCase().includes(e.toLowerCase())||E.specialty.toLowerCase().includes(e.toLowerCase()),b=r==="all"||E.specialty===r,R=s==="all"||E.clinicLocation===s;return c&&b&&R}),k=E=>{if(!y||y.role!=="PATIENT"){Lr.error("Please login as a patient to book appointments");return}_(E),o({doctorId:E.id,date:"",time:"",appointmentType:"OFFLINE",notes:""}),i(!0)},I=()=>{i(!1),_(null),o({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""})},T=async E=>{var c;if(E.preventDefault(),!f.date||!f.time){Lr.error("Please select both date and time");return}l(!0);try{(await pr.post(`${d}/book-direct-appointment`,f,{withCredentials:!0})).data.success&&(Lr.success("Appointment booked successfully!"),I())}catch(b){pr.isAxiosError(b)&&b.response?Lr.error(((c=b.response.data)==null?void 0:c.message)||"Failed to ppiunppointment"):Lr.error("An unexpected error occurred")}finally{l(!1)}},C=()=>{const E=[];for(let c=9;c<=17;c++)for(let b=0;b<60;b+=30){const R=`${c.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`;E.push(R)}return E};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12 mt-12",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Find Your Doctor"}),v.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Connect with certified healthcare professionals and book appointments with ease"})]}),v.jsx(br,{className:"mb-8",children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(Sv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),v.jsx(pl,{placeholder:"Search doctors or specialties...",value:e,onChange:E=>t(E.target.value),className:"pl-10"})]}),v.jsxs(Zc,{value:r,onValueChange:n,children:[v.jsx(Yo,{children:v.jsx(el,{placeholder:"All Specialties"})}),v.jsxs(Qo,{children:[v.jsx(Wa,{value:"all",children:"All Specialties"}),m.map(E=>v.jsx(Wa,{value:E,children:E},E))]})]}),v.jsxs(Zc,{value:s,onValueChange:a,children:[v.jsx(Yo,{children:v.jsx(el,{placeholder:"All Locations"})}),v.jsxs(Qo,{children:[v.jsx(Wa,{value:"all",children:"All Locations"}),S.map(E=>v.jsx(Wa,{value:E,children:E},E))]})]}),v.jsxs(mn,{className:"bg-blue-600 hover:bg-blue-700",children:[v.jsx(S6,{className:"h-4 w-4 mr-2"}),"Apply Filters"]})]})})}),v.jsx("div",{className:"mb-6",children:v.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Showing ",x.length," doctors"]})}),v.jsx("div",{className:"grid gap-6",children:x.map(E=>v.jsx(br,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"grid lg:grid-cols-12 gap-6 items-start",children:[v.jsx("div",{className:"lg:col-span-8",children:v.jsxs("div",{className:"flex gap-4",children:[v.jsxs(Ta,{className:"h-20 w-20 flex-shrink-0",children:[v.jsx(Pa,{src:E.user.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:E.user.name.split(" ").map(c=>c[0]).join("")})]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"flex items-center gap-2 mb-2",children:v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white truncate",children:E.user.name})}),v.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-medium mb-2",children:E.specialty}),v.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(gp,{className:"h-4 w-4 flex-shrink-0"}),v.jsx("span",{className:"truncate",children:E.clinicLocation})]}),v.jsxs("span",{className:"whitespace-nowrap",children:[E.experience," experience"]})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3 line-clamp-2",children:E.bio}),v.jsxs("div",{className:"flex flex-col gap-2",children:[E.education&&v.jsx("div",{className:"flex flex-wrap gap-2",children:v.jsx(es,{variant:"outline",className:"text-xs",children:E.education})}),v.jsx("div",{className:"flex flex-wrap gap-2",children:E.languages.map(c=>v.jsx(es,{variant:"outline",className:"text-xs",children:c},c))})]})]})]})}),v.jsx("div",{className:"lg:col-span-4",children:v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",E.consultationFee||" 0 "]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Consultation fee"})]}),v.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-300 mb-4",children:[v.jsx(Ci,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),v.jsx("span",{children:"Available for booking"})]}),v.jsxs(mn,{className:"w-full",onClick:()=>k(E),children:[v.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})]})})]})})},E.id))})]}),v.jsx(xA,{open:u,onOpenChange:i,children:v.jsxs(aR,{className:"sm:max-w-[425px]",children:[v.jsx(iR,{children:v.jsx(cR,{children:"Book Appointment"})}),g&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[v.jsxs(Ta,{className:"h-12 w-12",children:[v.jsx(Pa,{src:g.user.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:g.user.name.split(" ").map(E=>E[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:g.user.name}),v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:g.specialty}),v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["$",g.consultationFee," consultation fee"]})]})]}),v.jsxs("form",{onSubmit:T,className:"space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"date",children:"Date"}),v.jsx(pl,{id:"date",type:"date",value:f.date,onChange:E=>o(c=>({...c,date:E.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"time",children:"Time"}),v.jsxs(Zc,{value:f.time,onValueChange:E=>o(c=>({...c,time:E})),children:[v.jsx(Yo,{children:v.jsx(el,{placeholder:"Select time"})}),v.jsx(Qo,{children:C().map(E=>v.jsx(Wa,{value:E,children:E},E))})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"appointmentType",children:"Appointment Type"}),v.jsxs(Zc,{value:f.appointmentType,onValueChange:E=>o(c=>({...c,appointmentType:E})),children:[v.jsx(Yo,{children:v.jsx(el,{})}),v.jsxs(Qo,{children:[v.jsx(Wa,{value:"OFFLINE",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Tu,{className:"h-4 w-4"}),"In-Person"]})}),v.jsx(Wa,{value:"ONLINE",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(sx,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"notes",children:"Notes (Optional)"}),v.jsx(yy,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:f.notes,onChange:E=>o(c=>({...c,notes:E.target.value})),rows:3})]}),v.jsxs(oR,{children:[v.jsx(mn,{type:"button",variant:"outline",onClick:I,children:"Cancel"}),v.jsx(mn,{type:"submit",disabled:w,children:w?"Booking...":"Book Appointment"})]})]})]})]})}),v.jsx(Ei,{})]})}function OD(){const{id:e}=BS();return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 py-8",children:[v.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Doctor Profile"}),v.jsxs("p",{children:["Doctor ID: ",e]})]}),v.jsx(Ei,{})]})}function ND(){const{id:e}=BS(),t=io(),r=to(l=>l.user),[n,s]=D.useState(null),[a,h]=D.useState(!0),[p,u]=D.useState(!1),[i,g]=D.useState({doctorId:e||"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),_="http://localhost:3000/api/patient";D.useEffect(()=>{if(!r||r.role!=="PATIENT"){t("/auth/login");return}e&&(async()=>{var y;try{const d=await pr.get(`${_}/fetchAllDoctors`,{withCredentials:!0});if(d.data.success){const m=d.data.data;m&&m.id===e?s(m):(Lr.error("Doctor not found"),t("/doctors"))}}catch(d){pr.isAxiosError(d)&&d.response?Lr.error(((y=d.response.data)==null?void 0:y.message)||"Failed to fetch doctor details"):Lr.error("An unexpected error occurred"),t("/doctors")}finally{h(!1)}})()},[e,r,t,_]);const f=(l,y)=>{g(d=>({...d,[l]:y}))},o=async l=>{var y;if(l.preventDefault(),!i.date||!i.time){Lr.error("Please select both date and time");return}u(!0);try{(await pr.post(`${_}/book-direct-appointment`,i,{withCredentials:!0})).data.success&&(Lr.success("Appointment booked successfully!"),t("/dashboard/patient"))}catch(d){pr.isAxiosError(d)&&d.response?Lr.error(((y=d.response.data)==null?void 0:y.message)||"Failed to book appointment"):Lr.error("An unexpected error occurred")}finally{u(!1)}},w=()=>{const l=[];for(let y=9;y<=17;y++)for(let d=0;d<60;d+=30){const m=`${y.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`;l.push(m)}return l};return a?v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"text-lg",children:"Loading doctor details..."})})}),v.jsx(Ei,{})]}):n?v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsxs("div",{className:"max-w-4xl mx-auto",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Book an Appointment"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Schedule your consultation with ",n.user.name]})]}),v.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[v.jsx("div",{className:"lg:col-span-1",children:v.jsxs(br,{children:[v.jsx(Dn,{children:v.jsxs(kn,{className:"flex items-center gap-3",children:[v.jsxs(Ta,{className:"h-12 w-12",children:[v.jsx(Pa,{src:n.user.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:n.user.name.split(" ").map(l=>l[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold",children:n.user.name}),v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:n.specialty})]})]})}),v.jsxs(wr,{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(gp,{className:"h-4 w-4 text-gray-500"}),v.jsx("span",{children:n.clinicLocation})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(Ci,{className:"h-4 w-4 text-gray-500"}),v.jsxs("span",{children:[n.experience," experience"]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(ty,{className:"h-4 w-4 text-gray-500"}),v.jsxs("span",{children:["$",n.consultationFee," consultation fee"]})]}),n.education&&v.jsxs("div",{className:"text-sm",children:[v.jsx("p",{className:"font-medium mb-1",children:"Education:"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.education})]}),n.bio&&v.jsxs("div",{className:"text-sm",children:[v.jsx("p",{className:"font-medium mb-1",children:"About:"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]}),n.languages.length>0&&v.jsxs("div",{className:"text-sm",children:[v.jsx("p",{className:"font-medium mb-2",children:"Languages:"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:n.languages.map(l=>v.jsx(es,{variant:"outline",className:"text-xs",children:l},l))})]})]})]})}),v.jsx("div",{className:"lg:col-span-2",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Appointment Details"}),v.jsx(cs,{children:"Fill in the details to book your appointment"})]}),v.jsx(wr,{children:v.jsxs("form",{onSubmit:o,className:"space-y-6",children:[v.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"date",children:"Date"}),v.jsx(pl,{id:"date",type:"date",value:i.date,onChange:l=>f("date",l.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"time",children:"Time"}),v.jsxs(Zc,{value:i.time,onValueChange:l=>f("time",l),children:[v.jsx(Yo,{children:v.jsx(el,{placeholder:"Select time"})}),v.jsx(Qo,{children:w().map(l=>v.jsx(Wa,{value:l,children:l},l))})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"appointmentType",children:"Appointment Type"}),v.jsxs(Zc,{value:i.appointmentType,onValueChange:l=>f("appointmentType",l),children:[v.jsx(Yo,{children:v.jsx(el,{})}),v.jsxs(Qo,{children:[v.jsx(Wa,{value:"OFFLINE",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Tu,{className:"h-4 w-4"}),"In-Person"]})}),v.jsx(Wa,{value:"ONLINE",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(sx,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Gi,{htmlFor:"notes",children:"Notes (Optional)"}),v.jsx(yy,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:i.notes,onChange:l=>f("notes",l.target.value),rows:4})]}),v.jsxs("div",{className:"flex gap-4 pt-4",children:[v.jsx(mn,{type:"button",variant:"outline",onClick:()=>t("/doctors"),className:"flex-1",children:"Cancel"}),v.jsx(mn,{type:"submit",disabled:p,className:"flex-1",children:p?"Booking...":"Book Appointment"})]})]})})]})})]})]})}),v.jsx(Ei,{})]}):v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"text-lg text-red-600",children:"Doctor not found"})})}),v.jsx(Ei,{})]})}function AD(){return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx("h1",{className:"text-3xl font-bold mb-6",children:"My Profile"})}),v.jsx(Ei,{})]})}function ID(){return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Manage Appointments"})}),v.jsx(Ei,{})]})}function Qi(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Ey(e,t=[]){let r=[];function n(a,h){const p=D.createContext(h),u=r.length;r=[...r,h];const i=_=>{var d;const{scope:f,children:o,...w}=_,l=((d=f==null?void 0:f[e])==null?void 0:d[u])||p,y=D.useMemo(()=>w,Object.values(w));return v.jsx(l.Provider,{value:y,children:o})};i.displayName=a+"Provider";function g(_,f){var l;const o=((l=f==null?void 0:f[e])==null?void 0:l[u])||p,w=D.useContext(o);if(w)return w;if(h!==void 0)return h;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[i,g]}const s=()=>{const a=r.map(h=>D.createContext(h));return function(p){const u=(p==null?void 0:p[e])||a;return D.useMemo(()=>({[`__scope${e}`]:{...p,[e]:u}}),[p,u])}};return s.scopeName=e,[n,DD(s,...t)]}function DD(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const h=n.reduce((p,{useScope:u,scopeName:i})=>{const _=u(a)[`__scope${i}`];return{...p,..._}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function ow(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function DR(...e){return t=>{let r=!1;const n=e.map(s=>{const a=ow(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():ow(e[s],null)}}}}function Mf(...e){return D.useCallback(DR(...e),e)}function Vv(e){const t=MD(e),r=D.forwardRef((n,s)=>{const{children:a,...h}=n,p=D.Children.toArray(a),u=p.find(jD);if(u){const i=u.props.children,g=p.map(_=>_===u?D.Children.count(i)>1?D.Children.only(null):D.isValidElement(i)?i.props.children:null:_);return v.jsx(t,{...h,ref:s,children:D.isValidElement(i)?D.cloneElement(i,void 0,g):null})}return v.jsx(t,{...h,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function MD(e){const t=D.forwardRef((r,n)=>{const{children:s,...a}=r;if(D.isValidElement(s)){const h=FD(s),p=BD(a,s.props);return s.type!==D.Fragment&&(p.ref=n?DR(n,h):h),D.cloneElement(s,p)}return D.Children.count(s)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LD=Symbol("radix.slottable");function jD(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LD}function BD(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{const u=a(...p);return s(...p),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function FD(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function UD(e){const t=e+"CollectionProvider",[r,n]=Ey(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=l=>{const{scope:y,children:d}=l,m=_t.useRef(null),S=_t.useRef(new Map).current;return v.jsx(s,{scope:y,itemMap:S,collectionRef:m,children:d})};h.displayName=t;const p=e+"CollectionSlot",u=Vv(p),i=_t.forwardRef((l,y)=>{const{scope:d,children:m}=l,S=a(p,d),x=Mf(y,S.collectionRef);return v.jsx(u,{ref:x,children:m})});i.displayName=p;const g=e+"CollectionItemSlot",_="data-radix-collection-item",f=Vv(g),o=_t.forwardRef((l,y)=>{const{scope:d,children:m,...S}=l,x=_t.useRef(null),k=Mf(y,x),I=a(g,d);return _t.useEffect(()=>(I.itemMap.set(x,{ref:x,...S}),()=>void I.itemMap.delete(x))),v.jsx(f,{[_]:"",ref:k,children:m})});o.displayName=g;function w(l){const y=a(e+"CollectionConsumer",l);return _t.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const S=Array.from(m.querySelectorAll(`[${_}]`));return Array.from(y.itemMap.values()).sort((I,T)=>S.indexOf(I.ref.current)-S.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:h,Slot:i,ItemSlot:o},w,n]}var $D=yl[" useId ".trim().toString()]||(()=>{}),WD=0;function MR(e){const[t,r]=D.useState($D());return bn(()=>{r(n=>n??String(WD++))},[e]),t?`radix-${t}`:""}var VD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wu=VD.reduce((e,t)=>{const r=Vv(`Primitive.${t}`),n=D.forwardRef((s,a)=>{const{asChild:h,...p}=s,u=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...p,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),zD=yl[" useInsertionEffect ".trim().toString()]||bn;function LR({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,h]=HD({defaultProp:t,onChange:r}),p=e!==void 0,u=p?e:s;{const g=D.useRef(e!==void 0);D.useEffect(()=>{const _=g.current;_!==p&&console.warn(`${n} is changing from ${_?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=p},[p,n])}const i=D.useCallback(g=>{var _;if(p){const f=qD(g)?g(e):g;f!==e&&((_=h.current)==null||_.call(h,f))}else a(g)},[p,e,a,h]);return[u,i]}function HD({defaultProp:e,onChange:t}){const[r,n]=D.useState(e),s=D.useRef(r),a=D.useRef(t);return zD(()=>{a.current=t},[t]),D.useEffect(()=>{var h;s.current!==r&&((h=a.current)==null||h.call(a,r),s.current=r)},[r,s]),[r,n,a]}function qD(e){return typeof e=="function"}var KD=D.createContext(void 0);function jR(e){const t=D.useContext(KD);return e||t||"ltr"}var _g="rovingFocusGroup.onEntryFocus",GD={bubbles:!1,cancelable:!0},bp="RovingFocusGroup",[zv,BR,YD]=UD(bp),[QD,FR]=Ey(bp,[YD]),[JD,XD]=QD(bp),UR=D.forwardRef((e,t)=>v.jsx(zv.Provider,{scope:e.__scopeRovingFocusGroup,children:v.jsx(zv.Slot,{scope:e.__scopeRovingFocusGroup,children:v.jsx(ZD,{...e,ref:t})})}));UR.displayName=bp;var ZD=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:h,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:u,onEntryFocus:i,preventScrollOnEntryFocus:g=!1,..._}=e,f=D.useRef(null),o=Mf(t,f),w=jR(a),[l,y]=LR({prop:h,defaultProp:p??null,onChange:u,caller:bp}),[d,m]=D.useState(!1),S=us(i),x=BR(r),k=D.useRef(!1),[I,T]=D.useState(0);return D.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(_g,S),()=>C.removeEventListener(_g,S)},[S]),v.jsx(JD,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:l,onItemFocus:D.useCallback(C=>y(C),[y]),onItemShiftTab:D.useCallback(()=>m(!0),[]),onFocusableItemAdd:D.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:D.useCallback(()=>T(C=>C-1),[]),children:v.jsx(Wu.div,{tabIndex:d||I===0?-1:0,"data-orientation":n,..._,ref:o,style:{outline:"none",...e.style},onMouseDown:Qi(e.onMouseDown,()=>{k.current=!0}),onFocus:Qi(e.onFocus,C=>{const E=!k.current;if(C.target===C.currentTarget&&E&&!d){const c=new CustomEvent(_g,GD);if(C.currentTarget.dispatchEvent(c),!c.defaultPrevented){const b=x().filter(M=>M.focusable),R=b.find(M=>M.active),P=b.find(M=>M.id===l),N=[R,P,...b].filter(Boolean).map(M=>M.ref.current);VR(N,g)}}k.current=!1}),onBlur:Qi(e.onBlur,()=>m(!1))})})}),$R="RovingFocusGroupItem",WR=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:h,...p}=e,u=MR(),i=a||u,g=XD($R,r),_=g.currentTabStopId===i,f=BR(r),{onFocusableItemAdd:o,onFocusableItemRemove:w,currentTabStopId:l}=g;return D.useEffect(()=>{if(n)return o(),()=>w()},[n,o,w]),v.jsx(zv.ItemSlot,{scope:r,id:i,focusable:n,active:s,children:v.jsx(Wu.span,{tabIndex:_?0:-1,"data-orientation":g.orientation,...p,ref:t,onMouseDown:Qi(e.onMouseDown,y=>{n?g.onItemFocus(i):y.preventDefault()}),onFocus:Qi(e.onFocus,()=>g.onItemFocus(i)),onKeyDown:Qi(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){g.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const d=r8(y,g.orientation,g.dir);if(d!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let S=f().filter(x=>x.focusable).map(x=>x.ref.current);if(d==="last")S.reverse();else if(d==="prev"||d==="next"){d==="prev"&&S.reverse();const x=S.indexOf(y.currentTarget);S=g.loop?n8(S,x+1):S.slice(x+1)}setTimeout(()=>VR(S))}}),children:typeof h=="function"?h({isCurrentTabStop:_,hasTabStop:l!=null}):h})})});WR.displayName=$R;var e8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function t8(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function r8(e,t,r){const n=t8(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return e8[n]}function VR(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function n8(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var s8=UR,a8=WR;function i8(e,t){return D.useReducer((r,n)=>t[r][n]??r,e)}var zR=e=>{const{present:t,children:r}=e,n=o8(t),s=typeof r=="function"?r({present:n.isPresent}):D.Children.only(r),a=Mf(n.ref,c8(s));return typeof r=="function"||n.isPresent?D.cloneElement(s,{ref:a}):null};zR.displayName="Presence";function o8(e){const[t,r]=D.useState(),n=D.useRef(null),s=D.useRef(e),a=D.useRef("none"),h=e?"mounted":"unmounted",[p,u]=i8(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const i=Rh(n.current);a.current=p==="mounted"?i:"none"},[p]),bn(()=>{const i=n.current,g=s.current;if(g!==e){const f=a.current,o=Rh(i);e?u("MOUNT"):o==="none"||(i==null?void 0:i.display)==="none"?u("UNMOUNT"):u(g&&f!==o?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),bn(()=>{if(t){let i;const g=t.ownerDocument.defaultView??window,_=o=>{const l=Rh(n.current).includes(o.animationName);if(o.target===t&&l&&(u("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",i=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=o=>{o.target===t&&(a.current=Rh(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",_),t.addEventListener("animationend",_),()=>{g.clearTimeout(i),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",_),t.removeEventListener("animationend",_)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:D.useCallback(i=>{n.current=i?getComputedStyle(i):null,r(i)},[])}}function Rh(e){return(e==null?void 0:e.animationName)||"none"}function c8(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ym="Tabs",[l8,A7]=Ey(ym,[FR]),HR=FR(),[u8,ky]=l8(ym),qR=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:h="horizontal",dir:p,activationMode:u="automatic",...i}=e,g=jR(p),[_,f]=LR({prop:n,onChange:s,defaultProp:a??"",caller:ym});return v.jsx(u8,{scope:r,baseId:MR(),value:_,onValueChange:f,orientation:h,dir:g,activationMode:u,children:v.jsx(Wu.div,{dir:g,"data-orientation":h,...i,ref:t})})});qR.displayName=ym;var KR="TabsList",GR=D.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=ky(KR,r),h=HR(r);return v.jsx(s8,{asChild:!0,...h,orientation:a.orientation,dir:a.dir,loop:n,children:v.jsx(Wu.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});GR.displayName=KR;var YR="TabsTrigger",QR=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,h=ky(YR,r),p=HR(r),u=ZR(h.baseId,n),i=eE(h.baseId,n),g=n===h.value;return v.jsx(a8,{asChild:!0,...p,focusable:!s,active:g,children:v.jsx(Wu.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":i,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...a,ref:t,onMouseDown:Qi(e.onMouseDown,_=>{!s&&_.button===0&&_.ctrlKey===!1?h.onValueChange(n):_.preventDefault()}),onKeyDown:Qi(e.onKeyDown,_=>{[" ","Enter"].includes(_.key)&&h.onValueChange(n)}),onFocus:Qi(e.onFocus,()=>{const _=h.activationMode!=="manual";!g&&!s&&_&&h.onValueChange(n)})})})});QR.displayName=YR;var JR="TabsContent",XR=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...h}=e,p=ky(JR,r),u=ZR(p.baseId,n),i=eE(p.baseId,n),g=n===p.value,_=D.useRef(g);return D.useEffect(()=>{const f=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(f)},[]),v.jsx(zR,{present:s||g,children:({present:f})=>v.jsx(Wu.div,{"data-state":g?"active":"inactive","data-orientation":p.orientation,role:"tabpanel","aria-labelledby":u,hidden:!f,id:i,tabIndex:0,...h,ref:t,style:{...e.style,animationDuration:_.current?"0s":void 0},children:f&&a})})});XR.displayName=JR;function ZR(e,t){return`${e}-trigger-${t}`}function eE(e,t){return`${e}-content-${t}`}var d8=qR,tE=GR,rE=QR,nE=XR;const _m=d8,wp=D.forwardRef(({className:e,...t},r)=>v.jsx(tE,{ref:r,className:dn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));wp.displayName=tE.displayName;const Bs=D.forwardRef(({className:e,...t},r)=>v.jsx(rE,{ref:r,className:dn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Bs.displayName=rE.displayName;const Fs=D.forwardRef(({className:e,...t},r)=>v.jsx(nE,{ref:r,className:dn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Fs.displayName=nE.displayName;function p8(){const e=io(),{user:t,isLoading:r}=RP(),[n,s]=D.useState(""),[a,h]=D.useState("all");D.useEffect(()=>{!r&&(!t||t.role!=="admin")&&e("/auth/login")},[t,r,e]);const p={totalUsers:1247,totalDoctors:89,totalAppointments:2456,activeChats:156,pendingRequests:12,monthlyGrowth:15.3,revenue:45600,satisfaction:4.8},u={appointmentsThisMonth:[{month:"Jan",appointments:180},{month:"Feb",appointments:220},{month:"Mar",appointments:280},{month:"Apr",appointments:320},{month:"May",appointments:380},{month:"Jun",appointments:420}],topSpecialties:[{specialty:"General Medicine",count:45,percentage:35},{specialty:"Cardiology",count:32,percentage:25},{specialty:"Dermatology",count:28,percentage:22},{specialty:"Neurology",count:23,percentage:18}]},i=[{id:1,name:"Dr. James Wilson",email:"j.wilson@email.com",specialty:"Cardiology",experience:"8 years",licenseNumber:"MD789012",location:"Boston, MA",education:"Harvard Medical School",submittedDate:"2024-01-14",status:"Pending",documents:["License","Degree","CV"],avatar:"/placeholder.svg"},{id:2,name:"Dr. Lisa Chen",email:"l.chen@email.com",specialty:"Pediatrics",experience:"6 years",licenseNumber:"MD345678",location:"San Francisco, CA",education:"UCSF School of Medicine",submittedDate:"2024-01-13",status:"Under Review",documents:["License","Degree","CV","References"],avatar:"/placeholder.svg"},{id:3,name:"Dr. Robert Kim",email:"r.kim@email.com",specialty:"Orthopedics",experience:"12 years",licenseNumber:"MD901234",location:"Seattle, WA",education:"Johns Hopkins University",submittedDate:"2024-01-12",status:"Approved",documents:["License","Degree","CV","References","Background Check"],avatar:"/placeholder.svg"}],g=[{id:1,patient:"John Smith",doctor:"Dr. Sarah Johnson",date:"2024-01-15",time:"10:00 AM",status:"Completed",type:"Video Call",revenue:150},{id:2,patient:"Emily Davis",doctor:"Dr. Michael Chen",date:"2024-01-15",time:"2:30 PM",status:"Confirmed",type:"In-person",revenue:120},{id:3,patient:"Robert Wilson",doctor:"Dr. Lisa Park",date:"2024-01-15",time:"4:00 PM",status:"Cancelled",type:"Video Call",revenue:0}],_=o=>{console.log("Approving doctor:",o),alert("Doctor approved successfully!")},f=o=>{console.log("Rejecting doctor:",o),alert("Doctor application rejected.")};return r?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[v.jsxs("div",{className:"mb-8",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx(ey,{className:"h-8 w-8 text-red-600"}),v.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"})]}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome, ",(t==null?void 0:t.name)||"Admin","! Comprehensive platform management and analytics"]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Users"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.totalUsers}),v.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["+",p.monthlyGrowth,"% this month"]})]}),v.jsx(wi,{className:"h-8 w-8 text-blue-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Active Doctors"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.totalDoctors}),v.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:[p.pendingRequests," pending"]})]}),v.jsx(N6,{className:"h-8 w-8 text-green-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Appointments"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.totalAppointments}),v.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[p.activeChats," active chats"]})]}),v.jsx(sl,{className:"h-8 w-8 text-purple-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Monthly Revenue"}),v.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",p.revenue.toLocaleString()]}),v.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Rating: ",p.satisfaction,"/5.0"]})]}),v.jsx(O6,{className:"h-8 w-8 text-orange-600"})]})})})]}),v.jsxs(_m,{defaultValue:"analytics",className:"space-y-6",children:[v.jsxs(wp,{className:"grid w-full grid-cols-5 lg:w-auto lg:grid-cols-5",children:[v.jsxs(Bs,{value:"analytics",className:"flex items-center gap-2",children:[v.jsx(db,{className:"h-4 w-4"}),"Analytics"]}),v.jsxs(Bs,{value:"doctor-requests",className:"flex items-center gap-2",children:[v.jsx(Ci,{className:"h-4 w-4"}),"Doctor Requests"]}),v.jsxs(Bs,{value:"appointments",className:"flex items-center gap-2",children:[v.jsx(sl,{className:"h-4 w-4"}),"Appointments"]}),v.jsxs(Bs,{value:"users",className:"flex items-center gap-2",children:[v.jsx(wi,{className:"h-4 w-4"}),"Users"]}),v.jsxs(Bs,{value:"settings",className:"flex items-center gap-2",children:[v.jsx(nx,{className:"h-4 w-4"}),"Settings"]})]}),v.jsxs(Fs,{value:"analytics",className:"space-y-6",children:[v.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(f6,{className:"h-5 w-5 text-blue-600"}),"Appointment Trends"]}),v.jsx(cs,{children:"Monthly appointment statistics"})]}),v.jsx(wr,{children:v.jsx("div",{className:"space-y-4",children:u.appointmentsThisMonth.map((o,w)=>v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-sm font-medium",children:o.month}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:v.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${o.appointments/500*100}%`}})}),v.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 w-12",children:o.appointments})]})]},w))})})]}),v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(db,{className:"h-5 w-5 text-green-600"}),"Popular Specialties"]}),v.jsx(cs,{children:"Most requested medical specialties"})]}),v.jsx(wr,{children:v.jsx("div",{className:"space-y-4",children:u.topSpecialties.map((o,w)=>v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-sm font-medium",children:o.specialty}),v.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.count," doctors"]})]}),v.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:v.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${o.percentage}%`}})})]},w))})})]})]}),v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Recent Appointments"}),v.jsx(cs,{children:"Latest appointment activity and revenue"})]}),v.jsx(wr,{children:v.jsx("div",{className:"space-y-4",children:g.map(o=>v.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[v.jsxs("div",{children:[v.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[o.patient,"  ",o.doctor]}),v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.date," at ",o.time," "," ",o.type]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["$",o.revenue]}),v.jsx(es,{variant:o.status==="Completed"?"default":o.status==="Confirmed"?"secondary":"destructive",children:o.status})]})]},o.id))})})]})]}),v.jsx(Fs,{value:"doctor-requests",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(Ci,{className:"h-5 w-5 text-orange-600"}),"Doctor Applications"]}),v.jsx(cs,{children:"Review and approve new doctor registrations"})]}),v.jsx(wr,{children:v.jsx("div",{className:"space-y-6",children:i.map(o=>v.jsx(br,{className:"p-6",children:v.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[v.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[v.jsxs(Ta,{className:"h-16 w-16",children:[v.jsx(Pa,{src:o.avatar||"/placeholder.svg"}),v.jsx(Oa,{children:o.name.split(" ").map(w=>w[0]).join("")})]}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o.name}),v.jsx(es,{variant:o.status==="Approved"?"default":o.status==="Under Review"?"secondary":"outline",children:o.status})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-300",children:[v.jsxs("div",{children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Email:"})," ",o.email]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Specialty:"})," ",o.specialty]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Experience:"})," ",o.experience]})]}),v.jsxs("div",{children:[v.jsxs("p",{children:[v.jsx("strong",{children:"License:"})," ",o.licenseNumber]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Location:"})," ",o.location]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Education:"})," ",o.education]})]})]}),v.jsxs("div",{className:"mt-3",children:[v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[v.jsx("strong",{children:"Submitted:"})," ",o.submittedDate]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:o.documents.map(w=>v.jsx(es,{variant:"outline",className:"text-xs",children:w},w))})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-2 lg:w-48",children:[v.jsxs(mn,{variant:"outline",size:"sm",className:"w-full",children:[v.jsx(ap,{className:"h-4 w-4 mr-2"}),"View Details"]}),o.status==="Pending"&&v.jsxs(v.Fragment,{children:[v.jsxs(mn,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>_(o.id),children:[v.jsx(_6,{className:"h-4 w-4 mr-2"}),"Approve"]}),v.jsxs(mn,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>f(o.id),children:[v.jsx(b6,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})},o.id))})})]})}),v.jsx(Fs,{value:"appointments",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Appointment Management"}),v.jsx(cs,{children:"Monitor and manage all appointments"})]}),v.jsx(wr,{children:v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Appointment management interface..."})})]})}),v.jsx(Fs,{value:"users",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"User Management"}),v.jsx(cs,{children:"Manage all platform users"})]}),v.jsx(wr,{children:v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"User management interface..."})})]})}),v.jsx(Fs,{value:"settings",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Platform Settings"}),v.jsx(cs,{children:"Configure platform-wide settings"})]}),v.jsx(wr,{children:v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Settings interface..."})})]})})]})]})]})}function cw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function sE(...e){return t=>{let r=!1;const n=e.map(s=>{const a=cw(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():cw(e[s],null)}}}}function Rl(...e){return D.useCallback(sE(...e),e)}function h8(e){const t=f8(e),r=D.forwardRef((n,s)=>{const{children:a,...h}=n,p=D.Children.toArray(a),u=p.find(g8);if(u){const i=u.props.children,g=p.map(_=>_===u?D.Children.count(i)>1?D.Children.only(null):D.isValidElement(i)?i.props.children:null:_);return v.jsx(t,{...h,ref:s,children:D.isValidElement(i)?D.cloneElement(i,void 0,g):null})}return v.jsx(t,{...h,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function f8(e){const t=D.forwardRef((r,n)=>{const{children:s,...a}=r;if(D.isValidElement(s)){const h=y8(s),p=v8(a,s.props);return s.type!==D.Fragment&&(p.ref=n?sE(n,h):h),D.cloneElement(s,p)}return D.Children.count(s)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var m8=Symbol("radix.slottable");function g8(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===m8}function v8(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...p)=>{const u=a(...p);return s(...p),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function y8(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var _8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Sp=_8.reduce((e,t)=>{const r=h8(`Primitive.${t}`),n=D.forwardRef((s,a)=>{const{asChild:h,...p}=s,u=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...p,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function b8(e,t){return D.useReducer((r,n)=>t[r][n]??r,e)}var xp=e=>{const{present:t,children:r}=e,n=w8(t),s=typeof r=="function"?r({present:n.isPresent}):D.Children.only(r),a=Rl(n.ref,S8(s));return typeof r=="function"||n.isPresent?D.cloneElement(s,{ref:a}):null};xp.displayName="Presence";function w8(e){const[t,r]=D.useState(),n=D.useRef(null),s=D.useRef(e),a=D.useRef("none"),h=e?"mounted":"unmounted",[p,u]=b8(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const i=Eh(n.current);a.current=p==="mounted"?i:"none"},[p]),bn(()=>{const i=n.current,g=s.current;if(g!==e){const f=a.current,o=Eh(i);e?u("MOUNT"):o==="none"||(i==null?void 0:i.display)==="none"?u("UNMOUNT"):u(g&&f!==o?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),bn(()=>{if(t){let i;const g=t.ownerDocument.defaultView??window,_=o=>{const l=Eh(n.current).includes(o.animationName);if(o.target===t&&l&&(u("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",i=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=o=>{o.target===t&&(a.current=Eh(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",_),t.addEventListener("animationend",_),()=>{g.clearTimeout(i),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",_),t.removeEventListener("animationend",_)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:D.useCallback(i=>{n.current=i?getComputedStyle(i):null,r(i)},[])}}function Eh(e){return(e==null?void 0:e.animationName)||"none"}function S8(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function x8(e,t=[]){let r=[];function n(a,h){const p=D.createContext(h),u=r.length;r=[...r,h];const i=_=>{var d;const{scope:f,children:o,...w}=_,l=((d=f==null?void 0:f[e])==null?void 0:d[u])||p,y=D.useMemo(()=>w,Object.values(w));return v.jsx(l.Provider,{value:y,children:o})};i.displayName=a+"Provider";function g(_,f){var l;const o=((l=f==null?void 0:f[e])==null?void 0:l[u])||p,w=D.useContext(o);if(w)return w;if(h!==void 0)return h;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[i,g]}const s=()=>{const a=r.map(h=>D.createContext(h));return function(p){const u=(p==null?void 0:p[e])||a;return D.useMemo(()=>({[`__scope${e}`]:{...p,[e]:u}}),[p,u])}};return s.scopeName=e,[n,R8(s,...t)]}function R8(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const h=n.reduce((p,{useScope:u,scopeName:i})=>{const _=u(a)[`__scope${i}`];return{...p,..._}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}var E8=D.createContext(void 0);function k8(e){const t=D.useContext(E8);return e||t||"ltr"}function il(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function C8(e,t){return D.useReducer((r,n)=>t[r][n]??r,e)}var Cy="ScrollArea",[aE,I7]=x8(Cy),[T8,Qa]=aE(Cy),iE=D.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...h}=e,[p,u]=D.useState(null),[i,g]=D.useState(null),[_,f]=D.useState(null),[o,w]=D.useState(null),[l,y]=D.useState(null),[d,m]=D.useState(0),[S,x]=D.useState(0),[k,I]=D.useState(!1),[T,C]=D.useState(!1),E=Rl(t,b=>u(b)),c=k8(s);return v.jsx(T8,{scope:r,type:n,dir:c,scrollHideDelay:a,scrollArea:p,viewport:i,onViewportChange:g,content:_,onContentChange:f,scrollbarX:o,onScrollbarXChange:w,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:l,onScrollbarYChange:y,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:m,onCornerHeightChange:x,children:v.jsx(Sp.div,{dir:c,...h,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":d+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});iE.displayName=Cy;var oE="ScrollAreaViewport",cE=D.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=e,h=Qa(oE,r),p=D.useRef(null),u=Rl(t,p,h.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),v.jsx(Sp.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:h.scrollbarXEnabled?"scroll":"hidden",overflowY:h.scrollbarYEnabled?"scroll":"hidden",...e.style},children:v.jsx("div",{ref:h.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});cE.displayName=oE;var Ai="ScrollAreaScrollbar",Ty=D.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Qa(Ai,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:h}=s,p=e.orientation==="horizontal";return D.useEffect(()=>(p?a(!0):h(!0),()=>{p?a(!1):h(!1)}),[p,a,h]),s.type==="hover"?v.jsx(P8,{...n,ref:t,forceMount:r}):s.type==="scroll"?v.jsx(O8,{...n,ref:t,forceMount:r}):s.type==="auto"?v.jsx(lE,{...n,ref:t,forceMount:r}):s.type==="always"?v.jsx(Py,{...n,ref:t}):null});Ty.displayName=Ai;var P8=D.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Qa(Ai,e.__scopeScrollArea),[a,h]=D.useState(!1);return D.useEffect(()=>{const p=s.scrollArea;let u=0;if(p){const i=()=>{window.clearTimeout(u),h(!0)},g=()=>{u=window.setTimeout(()=>h(!1),s.scrollHideDelay)};return p.addEventListener("pointerenter",i),p.addEventListener("pointerleave",g),()=>{window.clearTimeout(u),p.removeEventListener("pointerenter",i),p.removeEventListener("pointerleave",g)}}},[s.scrollArea,s.scrollHideDelay]),v.jsx(xp,{present:r||a,children:v.jsx(lE,{"data-state":a?"visible":"hidden",...n,ref:t})})}),O8=D.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Qa(Ai,e.__scopeScrollArea),a=e.orientation==="horizontal",h=wm(()=>u("SCROLL_END"),100),[p,u]=C8("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return D.useEffect(()=>{if(p==="idle"){const i=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(i)}},[p,s.scrollHideDelay,u]),D.useEffect(()=>{const i=s.viewport,g=a?"scrollLeft":"scrollTop";if(i){let _=i[g];const f=()=>{const o=i[g];_!==o&&(u("SCROLL"),h()),_=o};return i.addEventListener("scroll",f),()=>i.removeEventListener("scroll",f)}},[s.viewport,a,u,h]),v.jsx(xp,{present:r||p!=="hidden",children:v.jsx(Py,{"data-state":p==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:il(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:il(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),lE=D.forwardRef((e,t)=>{const r=Qa(Ai,e.__scopeScrollArea),{forceMount:n,...s}=e,[a,h]=D.useState(!1),p=e.orientation==="horizontal",u=wm(()=>{if(r.viewport){const i=r.viewport.offsetWidth<r.viewport.scrollWidth,g=r.viewport.offsetHeight<r.viewport.scrollHeight;h(p?i:g)}},10);return Nu(r.viewport,u),Nu(r.content,u),v.jsx(xp,{present:n||a,children:v.jsx(Py,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Py=D.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Qa(Ai,e.__scopeScrollArea),a=D.useRef(null),h=D.useRef(0),[p,u]=D.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),i=fE(p.viewport,p.content),g={...n,sizes:p,onSizesChange:u,hasThumb:i>0&&i<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:f=>h.current=f};function _(f,o){return L8(f,h.current,p,o)}return r==="horizontal"?v.jsx(N8,{...g,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,o=lw(f,p,s.dir);a.current.style.transform=`translate3d(${o}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=_(f,s.dir))}}):r==="vertical"?v.jsx(A8,{...g,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,o=lw(f,p);a.current.style.transform=`translate3d(0, ${o}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=_(f))}}):null}),N8=D.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=Qa(Ai,e.__scopeScrollArea),[h,p]=D.useState(),u=D.useRef(null),i=Rl(t,u,a.onScrollbarXChange);return D.useEffect(()=>{u.current&&p(getComputedStyle(u.current))},[u]),v.jsx(dE,{"data-orientation":"horizontal",...s,ref:i,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":bm(r)+"px",...e.style},onThumbPointerDown:g=>e.onThumbPointerDown(g.x),onDragScroll:g=>e.onDragScroll(g.x),onWheelScroll:(g,_)=>{if(a.viewport){const f=a.viewport.scrollLeft+g.deltaX;e.onWheelScroll(f),gE(f,_)&&g.preventDefault()}},onResize:()=>{u.current&&a.viewport&&h&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:jf(h.paddingLeft),paddingEnd:jf(h.paddingRight)}})}})}),A8=D.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=Qa(Ai,e.__scopeScrollArea),[h,p]=D.useState(),u=D.useRef(null),i=Rl(t,u,a.onScrollbarYChange);return D.useEffect(()=>{u.current&&p(getComputedStyle(u.current))},[u]),v.jsx(dE,{"data-orientation":"vertical",...s,ref:i,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":bm(r)+"px",...e.style},onThumbPointerDown:g=>e.onThumbPointerDown(g.y),onDragScroll:g=>e.onDragScroll(g.y),onWheelScroll:(g,_)=>{if(a.viewport){const f=a.viewport.scrollTop+g.deltaY;e.onWheelScroll(f),gE(f,_)&&g.preventDefault()}},onResize:()=>{u.current&&a.viewport&&h&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:jf(h.paddingTop),paddingEnd:jf(h.paddingBottom)}})}})}),[I8,uE]=aE(Ai),dE=D.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:h,onThumbPointerDown:p,onThumbPositionChange:u,onDragScroll:i,onWheelScroll:g,onResize:_,...f}=e,o=Qa(Ai,r),[w,l]=D.useState(null),y=Rl(t,E=>l(E)),d=D.useRef(null),m=D.useRef(""),S=o.viewport,x=n.content-n.viewport,k=us(g),I=us(u),T=wm(_,10);function C(E){if(d.current){const c=E.clientX-d.current.left,b=E.clientY-d.current.top;i({x:c,y:b})}}return D.useEffect(()=>{const E=c=>{const b=c.target;(w==null?void 0:w.contains(b))&&k(c,x)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[S,w,x,k]),D.useEffect(I,[n,I]),Nu(w,T),Nu(o.content,T),v.jsx(I8,{scope:r,scrollbar:w,hasThumb:s,onThumbChange:us(a),onThumbPointerUp:us(h),onThumbPositionChange:I,onThumbPointerDown:us(p),children:v.jsx(Sp.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:il(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),d.current=w.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",o.viewport&&(o.viewport.style.scrollBehavior="auto"),C(E))}),onPointerMove:il(e.onPointerMove,C),onPointerUp:il(e.onPointerUp,E=>{const c=E.target;c.hasPointerCapture(E.pointerId)&&c.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=m.current,o.viewport&&(o.viewport.style.scrollBehavior=""),d.current=null})})})}),Lf="ScrollAreaThumb",pE=D.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=uE(Lf,e.__scopeScrollArea);return v.jsx(xp,{present:r||s.hasThumb,children:v.jsx(D8,{ref:t,...n})})}),D8=D.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,a=Qa(Lf,r),h=uE(Lf,r),{onThumbPositionChange:p}=h,u=Rl(t,_=>h.onThumbChange(_)),i=D.useRef(void 0),g=wm(()=>{i.current&&(i.current(),i.current=void 0)},100);return D.useEffect(()=>{const _=a.viewport;if(_){const f=()=>{if(g(),!i.current){const o=j8(_,p);i.current=o,p()}};return p(),_.addEventListener("scroll",f),()=>_.removeEventListener("scroll",f)}},[a.viewport,g,p]),v.jsx(Sp.div,{"data-state":h.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:il(e.onPointerDownCapture,_=>{const o=_.target.getBoundingClientRect(),w=_.clientX-o.left,l=_.clientY-o.top;h.onThumbPointerDown({x:w,y:l})}),onPointerUp:il(e.onPointerUp,h.onThumbPointerUp)})});pE.displayName=Lf;var Oy="ScrollAreaCorner",hE=D.forwardRef((e,t)=>{const r=Qa(Oy,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?v.jsx(M8,{...e,ref:t}):null});hE.displayName=Oy;var M8=D.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Qa(Oy,r),[a,h]=D.useState(0),[p,u]=D.useState(0),i=!!(a&&p);return Nu(s.scrollbarX,()=>{var _;const g=((_=s.scrollbarX)==null?void 0:_.offsetHeight)||0;s.onCornerHeightChange(g),u(g)}),Nu(s.scrollbarY,()=>{var _;const g=((_=s.scrollbarY)==null?void 0:_.offsetWidth)||0;s.onCornerWidthChange(g),h(g)}),i?v.jsx(Sp.div,{...n,ref:t,style:{width:a,height:p,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function jf(e){return e?parseInt(e,10):0}function fE(e,t){const r=e/t;return isNaN(r)?0:r}function bm(e){const t=fE(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function L8(e,t,r,n="ltr"){const s=bm(r),a=s/2,h=t||a,p=s-h,u=r.scrollbar.paddingStart+h,i=r.scrollbar.size-r.scrollbar.paddingEnd-p,g=r.content-r.viewport,_=n==="ltr"?[0,g]:[g*-1,0];return mE([u,i],_)(e)}function lw(e,t,r="ltr"){const n=bm(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,h=t.content-t.viewport,p=a-n,u=r==="ltr"?[0,h]:[h*-1,0],i=Rv(e,u);return mE([0,h],[0,p])(i)}function mE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function gE(e,t){return e>0&&e<t}var j8=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},h=r.left!==a.left,p=r.top!==a.top;(h||p)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function wm(e,t){const r=us(e),n=D.useRef(0);return D.useEffect(()=>()=>window.clearTimeout(n.current),[]),D.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Nu(e,t){const r=us(t);bn(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var vE=iE,B8=cE,F8=hE;const Hv=D.forwardRef(({className:e,children:t,...r},n)=>v.jsxs(vE,{ref:n,className:dn("relative overflow-hidden",e),...r,children:[v.jsx(B8,{className:"h-full w-full rounded-[inherit]",children:t}),v.jsx(yE,{}),v.jsx(F8,{})]}));Hv.displayName=vE.displayName;const yE=D.forwardRef(({className:e,orientation:t="vertical",...r},n)=>v.jsx(Ty,{ref:n,orientation:t,className:dn("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:v.jsx(pE,{className:"relative flex-1 rounded-full bg-border"})}));yE.displayName=Ty.displayName;const Oi=Object.create(null);Oi.open="0";Oi.close="1";Oi.ping="2";Oi.pong="3";Oi.message="4";Oi.upgrade="5";Oi.noop="6";const qh=Object.create(null);Object.keys(Oi).forEach(e=>{qh[Oi[e]]=e});const qv={type:"error",data:"parser error"},_E=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",bE=typeof ArrayBuffer=="function",wE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ny=({type:e,data:t},r,n)=>_E&&t instanceof Blob?r?n(t):uw(t,n):bE&&(t instanceof ArrayBuffer||wE(t))?r?n(t):uw(new Blob([t]),n):n(Oi[e]+(t||"")),uw=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function dw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let bg;function U8(e,t){if(_E&&e.data instanceof Blob)return e.data.arrayBuffer().then(dw).then(t);if(bE&&(e.data instanceof ArrayBuffer||wE(e.data)))return t(dw(e.data));Ny(e,!1,r=>{bg||(bg=new TextEncoder),t(bg.encode(r))})}const pw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Od=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<pw.length;e++)Od[pw.charCodeAt(e)]=e;const $8=e=>{let t=e.length*.75,r=e.length,n,s=0,a,h,p,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const i=new ArrayBuffer(t),g=new Uint8Array(i);for(n=0;n<r;n+=4)a=Od[e.charCodeAt(n)],h=Od[e.charCodeAt(n+1)],p=Od[e.charCodeAt(n+2)],u=Od[e.charCodeAt(n+3)],g[s++]=a<<2|h>>4,g[s++]=(h&15)<<4|p>>2,g[s++]=(p&3)<<6|u&63;return i},W8=typeof ArrayBuffer=="function",Ay=(e,t)=>{if(typeof e!="string")return{type:"message",data:SE(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:V8(e.substring(1),t)}:qh[r]?e.length>1?{type:qh[r],data:e.substring(1)}:{type:qh[r]}:qv},V8=(e,t)=>{if(W8){const r=$8(e);return SE(r,t)}else return{base64:!0,data:e}},SE=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},xE="",z8=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((a,h)=>{Ny(a,!1,p=>{n[h]=p,++s===r&&t(n.join(xE))})})},H8=(e,t)=>{const r=e.split(xE),n=[];for(let s=0;s<r.length;s++){const a=Ay(r[s],t);if(n.push(a),a.type==="error")break}return n};function q8(){return new TransformStream({transform(e,t){U8(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const a=new DataView(s.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{s=new Uint8Array(9);const a=new DataView(s.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let wg;function kh(e){return e.reduce((t,r)=>t+r.length,0)}function Ch(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function K8(e,t){wg||(wg=new TextDecoder);const r=[];let n=0,s=-1,a=!1;return new TransformStream({transform(h,p){for(r.push(h);;){if(n===0){if(kh(r)<1)break;const u=Ch(r,1);a=(u[0]&128)===128,s=u[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(kh(r)<2)break;const u=Ch(r,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(kh(r)<8)break;const u=Ch(r,8),i=new DataView(u.buffer,u.byteOffset,u.length),g=i.getUint32(0);if(g>Math.pow(2,21)-1){p.enqueue(qv);break}s=g*Math.pow(2,32)+i.getUint32(4),n=3}else{if(kh(r)<s)break;const u=Ch(r,s);p.enqueue(Ay(a?u:wg.decode(u),t)),n=0}if(s===0||s>e){p.enqueue(qv);break}}}})}const RE=4;function ys(e){if(e)return G8(e)}function G8(e){for(var t in ys.prototype)e[t]=ys.prototype[t];return e}ys.prototype.on=ys.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ys.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ys.prototype.off=ys.prototype.removeListener=ys.prototype.removeAllListeners=ys.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ys.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};ys.prototype.emitReserved=ys.prototype.emit;ys.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ys.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Sm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ha=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Y8="arraybuffer";function EE(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const Q8=Ha.setTimeout,J8=Ha.clearTimeout;function xm(e,t){t.useNativeTimers?(e.setTimeoutFn=Q8.bind(Ha),e.clearTimeoutFn=J8.bind(Ha)):(e.setTimeoutFn=Ha.setTimeout.bind(Ha),e.clearTimeoutFn=Ha.clearTimeout.bind(Ha))}const X8=1.33;function Z8(e){return typeof e=="string"?eM(e):Math.ceil((e.byteLength||e.size)*X8)}function eM(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function kE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tM(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function rM(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let a=r[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class nM extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Iy extends ys{constructor(t){super(),this.writable=!1,xm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new nM(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ay(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=tM(t);return r.length?"?"+r:""}}class sM extends Iy{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};H8(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,z8(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=kE()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let CE=!1;try{CE=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const aM=CE;function iM(){}class oM extends sM{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,a)=>{this.onError("xhr post error",s,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let _u=class Kh extends ys{constructor(t,r,n){super(),this.createRequest=t,xm(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=EE(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Kh.requestsCount++,Kh.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=iM,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Kh.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};_u.requestsCount=0;_u.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hw);else if(typeof addEventListener=="function"){const e="onpagehide"in Ha?"pagehide":"unload";addEventListener(e,hw,!1)}}function hw(){for(let e in _u.requests)_u.requests.hasOwnProperty(e)&&_u.requests[e].abort()}const cM=function(){const e=TE({xdomain:!1});return e&&e.responseType!==null}();class lM extends oM{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=cM&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new _u(TE,this.uri(),t)}}function TE(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||aM))return new XMLHttpRequest}catch{}if(!t)try{return new Ha[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const PE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class uM extends Iy{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=PE?{}:EE(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;Ny(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}s&&Sm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=kE()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Sg=Ha.WebSocket||Ha.MozWebSocket;class dM extends uM{createSocket(t,r,n){return PE?new Sg(t,r,n):r?new Sg(t,r):new Sg(t)}doWrite(t,r){this.ws.send(r)}}class pM extends Iy{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=K8(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=q8();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const a=()=>{n.read().then(({done:p,value:u})=>{p||(this.onPacket(u),a())}).catch(p=>{})};a();const h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this._writer.write(h).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&Sm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const hM={websocket:dM,webtransport:pM,polling:lM},fM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Kv(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=fM.exec(e||""),a={},h=14;for(;h--;)a[mM[h]]=s[h]||"";return r!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=gM(a,a.path),a.queryKey=vM(a,a.query),a}function gM(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function vM(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,a){s&&(r[s]=a)}),r}const Gv=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gh=[];Gv&&addEventListener("offline",()=>{Gh.forEach(e=>e())},!1);class oc extends ys{constructor(t,r){if(super(),this.binaryType=Y8,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Kv(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Kv(r.host).host);xm(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rM(this.opts.query)),Gv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=RE,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&oc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",oc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=Z8(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Sm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:r,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(oc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Gh.indexOf(this._offlineEventListener);n!==-1&&Gh.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}oc.protocol=RE;class yM extends oc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;oc.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",_=>{if(!n)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;oc.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(g(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function a(){n||(n=!0,g(),r.close(),r=null)}const h=_=>{const f=new Error("probe error: "+_);f.transport=r.name,a(),this.emitReserved("upgradeError",f)};function p(){h("transport closed")}function u(){h("socket closed")}function i(_){r&&_.name!==r.name&&a()}const g=()=>{r.removeListener("open",s),r.removeListener("error",h),r.removeListener("close",p),this.off("close",u),this.off("upgrading",i)};r.once("open",s),r.once("error",h),r.once("close",p),this.once("close",u),this.once("upgrading",i),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let _M=class extends yM{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>hM[s]).filter(s=>!!s)),super(t,n)}};function bM(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Kv(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}const wM=typeof ArrayBuffer=="function",SM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,OE=Object.prototype.toString,xM=typeof Blob=="function"||typeof Blob<"u"&&OE.call(Blob)==="[object BlobConstructor]",RM=typeof File=="function"||typeof File<"u"&&OE.call(File)==="[object FileConstructor]";function Dy(e){return wM&&(e instanceof ArrayBuffer||SM(e))||xM&&e instanceof Blob||RM&&e instanceof File}function Yh(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Yh(e[r]))return!0;return!1}if(Dy(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Yh(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Yh(e[r]))return!0;return!1}function EM(e){const t=[],r=e.data,n=e;return n.data=Yv(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Yv(e,t){if(!e)return e;if(Dy(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Yv(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Yv(e[n],t));return r}return e}function kM(e,t){return e.data=Qv(e.data,t),delete e.attachments,e}function Qv(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Qv(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Qv(e[r],t));return e}const CM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],TM=5;var Yr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Yr||(Yr={}));class PM{constructor(t){this.replacer=t}encode(t){return(t.type===Yr.EVENT||t.type===Yr.ACK)&&Yh(t)?this.encodeAsBinary({type:t.type===Yr.EVENT?Yr.BINARY_EVENT:Yr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Yr.BINARY_EVENT||t.type===Yr.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=EM(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function fw(e){return Object.prototype.toString.call(e)==="[object Object]"}class My extends ys{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Yr.BINARY_EVENT;n||r.type===Yr.BINARY_ACK?(r.type=n?Yr.EVENT:Yr.ACK,this.reconstructor=new OM(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Dy(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Yr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Yr.BINARY_EVENT||n.type===Yr.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const h=t.substring(a,r);if(h!=Number(h)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(h)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(a,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const a=r+1;for(;++r;){const h=t.charAt(r);if(h==null||Number(h)!=h){--r;break}if(r===t.length)break}n.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(My.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Yr.CONNECT:return fw(r);case Yr.DISCONNECT:return r===void 0;case Yr.CONNECT_ERROR:return typeof r=="string"||fw(r);case Yr.EVENT:case Yr.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&CM.indexOf(r[0])===-1);case Yr.ACK:case Yr.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class OM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=kM(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const NM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:My,Encoder:PM,get PacketType(){return Yr},protocol:TM},Symbol.toStringTag,{value:"Module"}));function si(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const AM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class NE extends ys{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[si(t,"open",this.onopen.bind(this)),si(t,"packet",this.onpacket.bind(this)),si(t,"error",this.onerror.bind(this)),si(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,a;if(AM.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const h={type:Yr.EVENT,data:r};if(h.options={},h.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const g=this.ids++,_=r.pop();this._registerAckCallback(g,_),h.id=g}const p=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!p||(u?(this.notifyOutgoingListeners(h),this.packet(h)):this.sendBuffer.push(h)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},s),h=(...p)=>{this.io.clearTimeoutFn(a),r.apply(this,p)};h.withError=!0,this.acks[t]=h}emitWithAck(t,...r){return new Promise((n,s)=>{const a=(h,p)=>h?s(h):n(p);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...a)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Yr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Yr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Yr.EVENT:case Yr.BINARY_EVENT:this.onevent(t);break;case Yr.ACK:case Yr.BINARY_ACK:this.onack(t);break;case Yr.DISCONNECT:this.ondisconnect();break;case Yr.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:Yr.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Yr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Vu(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Vu.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Vu.prototype.reset=function(){this.attempts=0};Vu.prototype.setMin=function(e){this.ms=e};Vu.prototype.setMax=function(e){this.max=e};Vu.prototype.setJitter=function(e){this.jitter=e};class Jv extends ys{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,xm(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Vu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||NM;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new _M(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=si(r,"open",function(){n.onopen(),t&&t()}),a=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},h=si(r,"error",a);if(this._timeout!==!1){const p=this._timeout,u=this.setTimeoutFn(()=>{s(),a(new Error("timeout")),r.close()},p);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(h),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(si(t,"ping",this.onping.bind(this)),si(t,"data",this.ondata.bind(this)),si(t,"error",this.onerror.bind(this)),si(t,"close",this.onclose.bind(this)),si(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Sm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new NE(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Rd={};function Qh(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=bM(e,t.path||"/socket.io"),n=r.source,s=r.id,a=r.path,h=Rd[s]&&a in Rd[s].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||h;let u;return p?u=new Jv(n,t):(Rd[s]||(Rd[s]=new Jv(n,t)),u=Rd[s]),r.query&&!t.query&&(t.query=r.queryKey),u.socket(r.path,t)}Object.assign(Qh,{Manager:Jv,Socket:NE,io:Qh,connect:Qh});const IM="http://localhost:3000",AE="http://localhost:3000",Rp=Qh(IM,{withCredentials:!0}),xg=e=>{console.log("join"),Rp.emit("joinDmRoom",e)},DM=e=>{Rp.emit("dmMessage",{event:"dmMessage",data:e})},MM=e=>{Rp.on("message",t=>{e(t)})},LM=()=>{Rp.off("message")},jM=e=>{Rp.emit("roomMessage",{event:"roomMessage",data:e})},mw=async(e,t=1,r=50)=>{try{return(await pr.get(`${AE}/api/chat/one-on-one/${e}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading 1-on-1 chat history:",n),n}},BM=async(e,t=1,r=50)=>{try{return(await pr.get(`${AE}/api/chat/city/${encodeURIComponent(e)}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading city chat history:",n),n}};function FM(){const[e,t]=D.useState(""),[r,n]=D.useState([]),[s,a]=D.useState("ai"),[h,p]=D.useState([]),[u,i]=D.useState([]),[g,_]=D.useState([]),[f,o]=D.useState(null),w=D.useRef(null),l="http://localhost:3000/api",y=to(A=>A.user);D.useEffect(()=>{async function A(){var j;try{const G=await pr.get(`${l}/patient/fetchAllDoctors`,{withCredentials:!0});G.data.success&&n(G.data.data)}catch(G){pr.isAxiosError(G)&&G.response?Lr.error(((j=G.response.data)==null?void 0:j.message)||"Something went wrong"):Lr.error("Unknown error occurred")}}A()},[l]),D.useEffect(()=>{async function A(){var j;if(y)try{const G=y.role==="DOCTOR"?`${l}/doctor/city-rooms`:`${l}/patient/city-rooms`,de=await pr.get(G,{withCredentials:!0});if(de.data.success){const te=de.data.data;i(Array.isArray(te)?te:[te])}}catch(G){pr.isAxiosError(G)&&G.response?Lr.error(((j=G.response.data)==null?void 0:j.message)||"Something went wrong"):Lr.error("Unknown error ocurred")}}A()},[y]);const[d,m]=D.useState([]),[S,x]=D.useState(!1),[k,I]=D.useState(()=>localStorage.getItem("ai-chat-language")||"en"),T=[{code:"en",name:"English",flag:""},{code:"hi",name:"",flag:""},{code:"gu",name:"",flag:""},{code:"pa",name:"",flag:""},{code:"mr",name:"",flag:""},{code:"bn",name:"",flag:""},{code:"ta",name:"",flag:""},{code:"te",name:"",flag:""},{code:"kn",name:"",flag:""},{code:"ml",name:"",flag:""},{code:"or",name:"",flag:""}],C=A=>{I(A),localStorage.setItem("ai-chat-language",A)},E=A=>{const j=A.toLowerCase();return j.includes("severe")||j.includes("grave")||j.includes("severo")||j.includes("svre")?"severe":j.includes("moderate")||j.includes("moderado")||j.includes("modr")||j.includes("moderato")?"moderate":"mild"};D.useEffect(()=>{(y==null?void 0:y.role)==="DOCTOR"&&O()},[y]),D.useEffect(()=>{var A;(A=w.current)==null||A.scrollIntoView({behavior:"auto"})},[h,d,s]),D.useEffect(()=>{s==="ai"&&c()},[s]);const c=async()=>{try{const A=await pr.get(`${l}/ai-chat/history`,{withCredentials:!0});if(A.data.success){const j=A.data.data.chats.map(G=>[{id:`${G.id}-user`,type:"user",message:G.userMessage,time:new Date(G.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},{id:`${G.id}-ai`,type:"ai",message:b(G),time:new Date(G.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),aiData:G}]).flat();m(j)}}catch(A){console.error("Error loading AI chat history:",A),m([{id:"welcome",type:"ai",message:"Hello! I'm CareXpert AI, your health assistant. Describe your symptoms and I'll help analyze them for you.",time:"Just now"}])}},b=A=>{const j=A.probable_causes||A.probableCauses||[],{severity:G,recommendation:de,disclaimer:te}=A;let J=`**Probable Causes:**
${j.map(ae=>` ${ae}`).join(`
`)}

`;return J+=`**Recommendation:**
${de}

`,J+=`**Disclaimer:**
${te}`,J},R=async A=>{try{x(!0);const j={id:`user-${Date.now()}`,type:"user",message:A,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};m(de=>[...de,j]),t("");const G=await pr.post(`${l}/ai-chat/process`,{symptoms:A,language:k},{withCredentials:!0});if(G.data.success){const de=G.data.data,te={id:`ai-${Date.now()}`,type:"ai",message:b(de),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),aiData:de};m(J=>[...J,te])}}catch(j){console.error("Error sending AI message:",j),Lr.error("Failed to get AI response. Please try again.");const G={id:`error-${Date.now()}`,type:"ai",message:"Sorry, I'm having trouble processing your request. Please try again.",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};m(de=>[...de,G])}finally{x(!1)}};function P(A,j){return[A,j].sort().join("_")}const O=async()=>{try{const A=await pr.get(`${l}/chat/doctor/conversations`,{withCredentials:!0});A.data.success&&_(A.data.data.conversations)}catch(A){console.error("Error fetching DM conversations:",A)}},N=async A=>{o(A),a({type:"doctor",data:{id:A.otherUser.id,userId:A.otherUser.id,specialty:"Patient",clinicLocation:"",user:{name:A.otherUser.name,profilePicture:A.otherUser.profilePicture}}}),p([]);const j=P((y==null?void 0:y.id)||"",A.otherUser.id);xg(j),await M(A.otherUser.id)},M=async A=>{try{const j=await mw(A);if(j.success){const G=j.data.messages.map(de=>({roomId:P((y==null?void 0:y.id)||"",A),senderId:de.senderId,receiverId:de.receiverId,username:de.sender.name,text:de.message,time:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:de.messageType,imageUrl:de.imageUrl}));p(G)}}catch(j){console.error("Error loading conversation history:",j)}};D.useEffect(()=>{(async()=>{if(console.log("ChatPage - User:",y),console.log("ChatPage - Selected Chat:",s),y&&typeof s=="object"&&s.type==="doctor"){const j=P(y.id,s.data.userId);xg(j);try{console.log("Loading chat history for doctor:",s.data.userId);const G=await mw(s.data.userId);if(console.log("Chat history response:",G),G.success){const de=G.data.messages.map(te=>({roomId:j,senderId:te.senderId,receiverId:te.receiverId,username:te.sender.name,text:te.message,time:new Date(te.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:te.messageType,imageUrl:te.imageUrl}));p(de)}}catch(G){console.error("Error loading doctor chat history:",G),p([])}}else if(typeof s=="object"&&s.type==="room"){xg(s.id);try{const j=await BM(s.name);if(j.success){const G=j.data.messages.map(de=>({roomId:s.id,senderId:de.senderId,receiverId:null,username:de.sender.name,text:de.message,time:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:de.messageType,imageUrl:de.imageUrl}));p(G)}}catch(j){console.error("Error loading city chat history:",j),p([])}}else s==="ai"&&p([])})()},[s,y]);const L=async()=>{if(!(!e.trim()||!s||!y)){if(typeof s=="object"&&s.type==="doctor"){const j={roomId:P(y.id,s.data.userId),senderId:y.id,receiverId:s.data.userId,username:y.name,text:e.trim(),messageType:"TEXT",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};DM(j),p(G=>[...G,{...j,type:"user"}]),t("")}else if(s==="ai")await R(e.trim());else if(typeof s=="object"&&s.type==="room"){const A={roomId:s.id,senderId:y.id,username:y.name,text:e.trim(),messageType:"TEXT",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};jM(A),p(j=>[...j,{...A,type:"user"}]),t("")}}};return D.useEffect(()=>(MM(j=>{j.senderId!==(y==null?void 0:y.id)&&(typeof s=="object"&&s.type==="doctor"&&P((y==null?void 0:y.id)||"",s.data.userId)===j.roomId?p(G=>[...G,j]):typeof s=="object"&&s.type==="room"&&s.id===j.roomId&&p(G=>[...G,j]))}),()=>{LM()}),[s,y]),v.jsxs("div",{className:"h-screen lg:overflow-y-hidden bg-gray-50 dark:bg-gray-900 flex flex-col",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 pt-10 pb-12 flex-1 flex flex-col mt-12",children:v.jsxs("div",{className:"grid lg:grid-cols-4 gap-6 flex-1 overflow-hidden",children:[v.jsx("div",{className:"lg:col-span-1 flex flex-col",children:v.jsxs(_m,{defaultValue:"ai",className:"space-y-4 flex flex-col flex-1",children:[v.jsxs(wp,{className:`grid w-full ${(y==null?void 0:y.role)==="DOCTOR"?"grid-cols-4":"grid-cols-3"}`,children:[v.jsx(Bs,{value:"ai",className:"text-xs",children:"AI"}),v.jsx(Bs,{value:"doctors",className:"text-xs",children:"Doctors"}),(y==null?void 0:y.role)==="DOCTOR"&&v.jsx(Bs,{value:"patients",className:"text-xs",children:"Patients"}),v.jsx(Bs,{value:"community",className:"text-xs",children:"Community"})]}),v.jsx(Fs,{value:"ai",className:"flex-1 overflow-hidden",children:v.jsxs(br,{className:"h-full flex flex-col",children:[v.jsx(Dn,{className:"pb-3",children:v.jsxs(kn,{className:"flex items-center gap-2 text-lg",children:[v.jsx(tg,{className:"h-5 w-5 text-purple-600"}),"CareXpert AI"]})}),v.jsx(wr,{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${s==="ai"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>a("ai"),children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:v.jsx(tg,{className:"h-5 w-5 text-white"})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"AI Assistant"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Always available"})]})]})})})]})}),v.jsx(Fs,{value:"doctors",className:"flex-1 overflow-hidden",children:v.jsxs(br,{className:"h-full flex flex-col",children:[v.jsx(Dn,{className:"pb-3",children:v.jsxs(kn,{className:"flex items-center gap-2 text-lg",children:[v.jsx(Z0,{className:"h-5 w-5 text-blue-600"}),"Doctor Chats"]})}),v.jsx(wr,{className:"space-y-3 flex-1 overflow-y-auto",children:r.length>0?r.map(A=>v.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="doctor"&&s.data.id===A.id?"bg-blue-100 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>a({type:"doctor",data:A}),children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"relative",children:v.jsxs(Ta,{className:"h-10 w-10",children:[v.jsx(Pa,{src:A.user.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:A.user.name.split(" ").map(j=>j[0]).join("")})]})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:A.user.name}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.specialty})]})]})},A.id)):v.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No doctors found."})})]})}),(y==null?void 0:y.role)==="DOCTOR"&&v.jsx(Fs,{value:"patients",className:"flex-1 overflow-hidden",children:v.jsxs(br,{className:"h-full flex flex-col",children:[v.jsxs(Dn,{className:"pb-3",children:[v.jsxs(kn,{className:"flex items-center gap-2 text-lg",children:[v.jsx(wi,{className:"h-5 w-5 text-green-600"}),"Patient Messages"]}),v.jsx(cs,{children:"Chat with your patients"})]}),v.jsx(wr,{className:"p-0",children:v.jsx(Hv,{className:"h-[500px]",children:g.length>0?g.map(A=>v.jsx("div",{className:`p-4 border-b cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${(f==null?void 0:f.otherUser.id)===A.otherUser.id?"bg-green-50 dark:bg-green-900/20 border-l-4 border-l-green-500":""}`,onClick:()=>N(A),children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{className:"h-10 w-10",children:[v.jsx(Pa,{src:A.otherUser.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:A.otherUser.name.split(" ").map(j=>j[0]).join("")})]}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:A.otherUser.name}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:A.lastMessage.message}),v.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(A.lastMessage.timestamp).toLocaleDateString()})]}),A.unreadCount>0&&v.jsx(es,{variant:"destructive",className:"text-xs",children:A.unreadCount})]})},A.otherUser.id)):v.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[v.jsx(wi,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),v.jsx("p",{children:"No conversations yet"}),v.jsx("p",{className:"text-sm",children:"Patients will appear here when they message you"})]})})})]})}),v.jsx(Fs,{value:"community",className:"flex-1 overflow-hidden",children:v.jsxs(br,{className:"h-full flex flex-col",children:[v.jsx(Dn,{className:"pb-3",children:v.jsxs(kn,{className:"flex items-center justify-between text-lg",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(wi,{className:"h-5 w-5 text-green-600"}),"City Rooms"]}),v.jsx("div",{children:v.jsx(C6,{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-8 w-8 p-1"})})]})}),v.jsx(wr,{className:"space-y-3 flex-1 overflow-y-auto",children:u.length>0?u.map(A=>v.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="room"&&s.name===A.name?"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>a({type:"room",...A}),children:v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:A.name}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(gp,{className:"h-3 w-3 text-gray-400"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.name})]}),v.jsxs(es,{variant:"secondary",className:"text-xs",children:[A.members.length," members"]})]})},A.id)):v.jsx("p",{children:"Loading city rooms..."})})]})})]})}),v.jsx("div",{className:"lg:col-span-3 flex flex-col",children:v.jsxs(br,{className:"h-[80vh] flex flex-col",children:[v.jsxs(Dn,{className:"border-b",children:[s==="ai"&&v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:v.jsx(tg,{className:"h-5 w-5 text-white"})}),v.jsxs("div",{children:[v.jsx(kn,{className:"text-lg",children:"CareXpert AI Assistant"}),v.jsx(cs,{children:"Your personal health companion"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language:"}),v.jsx("select",{value:k,onChange:A=>C(A.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:T.map(A=>v.jsxs("option",{value:A.code,children:[A.flag," ",A.name]},A.code))})]})]}),typeof s=="object"&&s.type==="doctor"&&v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{className:"h-10 w-10",children:[v.jsx(Pa,{src:s.data.user.profilePicture}),v.jsx(Oa,{children:s.data.user.name.split(" ").map(A=>A[0]).join("")})]}),v.jsxs("div",{children:[v.jsx(kn,{className:"text-lg",children:s.data.user.name}),v.jsxs(cs,{children:[s.data.specialty,"  Online"]})]})]}),typeof s=="object"&&s.type==="room"&&v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:v.jsx(wi,{className:"h-5 w-5 text-white"})}),v.jsxs("div",{children:[v.jsx(kn,{className:"text-lg",children:s.name}),v.jsxs(cs,{children:[s.members.length," members "," ",s.name]})]})]})]}),v.jsx(wr,{className:"flex-1 p-4 overflow-y-auto ",children:v.jsxs(Hv,{className:"h-full ",children:[s==="ai"&&v.jsxs(v.Fragment,{children:[d.map(A=>v.jsx("div",{className:`flex mb-4 ${A.type==="user"?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${A.type==="user"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[A.type==="ai"?v.jsxs("div",{className:"text-sm",children:[A.aiData&&v.jsx("div",{className:"mb-3",children:v.jsxs(es,{variant:E(A.aiData.severity)==="severe"?"destructive":E(A.aiData.severity)==="moderate"?"default":"secondary",className:"mb-2",children:[A.aiData.severity.charAt(0).toUpperCase()+A.aiData.severity.slice(1)," ","Severity"]})}),A.message.split(`
`).map((j,G)=>j.startsWith("**")&&j.endsWith("**")?v.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:j.replace(/\*\*/g,"")},G):j.startsWith("")?v.jsx("div",{className:"ml-4 mb-1",children:j},G):j.trim()===""?v.jsx("br",{},G):v.jsx("div",{className:"mb-2",children:j},G))]}):v.jsx("p",{className:"text-sm whitespace-pre-wrap",children:A.message}),v.jsx("p",{className:`text-xs mt-1 ${A.type==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:A.time})]})},A.id)),S&&v.jsx("div",{className:"flex justify-start mb-4",children:v.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white p-3 rounded-lg max-w-[80%]",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),v.jsx("span",{className:"text-sm",children:"AI is analyzing your symptoms..."})]})})})]}),typeof s=="object"&&(s.type==="doctor"||s.type==="room")&&(h.length>0?h.map((A,j)=>v.jsx("div",{className:`flex mb-2 ${A.senderId===(y==null?void 0:y.id)?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`max-w-[80%] py-2 px-[10px] rounded-lg ${A.senderId===(y==null?void 0:y.id)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[A.messageType==="IMAGE"&&A.imageUrl?v.jsx("img",{src:A.imageUrl,alt:"sent-img",className:"rounded mb-1 max-w-full h-auto"}):v.jsx("p",{className:"text-sm whitespace-pre-wrap",children:A.text}),v.jsx("p",{className:"text-xs mt-1 text-right text-gray-400",children:A.time})]})},j)):v.jsx("div",{className:"text-center py-8",children:v.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s.type==="doctor"?"Start a conversation with your doctor":"Join the community discussion"})})),v.jsx("div",{ref:w})," "]})}),v.jsx("div",{className:"border-t p-4",children:v.jsxs("div",{className:"flex gap-2",children:[v.jsx(pl,{placeholder:"Type your message...",value:e,onChange:A=>t(A.target.value),onKeyPress:A=>A.key==="Enter"&&L(),className:"flex-1"}),v.jsx(mn,{onClick:L,className:"px-6",children:v.jsx(rx,{className:"h-4 w-4"})})]})})]})})]})})]})}const ra=D.forwardRef(({className:e,icon:t,...r},n)=>v.jsxs("div",{className:"relative flex items-center",children:[v.jsx("div",{className:"absolute left-2 flex items-center pointer-events-none",children:t}),v.jsx(pl,{ref:n,className:dn("pl-8",e),...r})]}));ra.displayName="InputWithIcon";function UM(){const[e,t]=D.useState(!1),[r,n]=D.useState(!1),[s,a]=D.useState(""),[h,p]=D.useState(""),[u,i]=D.useState(""),[g,_]=D.useState(""),[f,o]=D.useState(""),w=io(),l=async y=>{var d;if(y.preventDefault(),g!==f){Lr.error("Passwords do not match");return}try{const m=await pr.post("http://localhost:3000/api/user/signup",{firstName:s,lastName:h,email:u,password:g},{withCredentials:!0});m.data.success?(Lr.success("Account created successfully!"),to.getState().setUser({id:m.data.data.id,name:m.data.data.name,email:m.data.data.email,profilePicture:m.data.data.profilePicture,role:m.data.data.role,refreshToken:m.data.data.refreshToken}),m.data.data.role==="PATIENT"?w("/dashboard/patient"):w("/dashboard/doctor")):Lr.error(m.data.message||"Signup failed")}catch(m){pr.isAxiosError(m)&&m.response?Lr.error(((d=m.response.data)==null?void 0:d.message)||"Something went wrong"):Lr.error("Unknown error occurred")}};return v.jsx("div",{className:"flex justify-center items-center min-h-[80vh]",children:v.jsxs(br,{className:"w-full max-w-md",children:[v.jsxs(Dn,{className:"flex flex-col items-center space-y-2",children:[v.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:v.jsx(Ti,{className:"h-6 w-6 text-white"})}),v.jsx(kn,{className:"text-2xl font-bold",children:"Join as Patient"}),v.jsx(cs,{className:"text-gray-600 dark:text-gray-300",children:"Create your account to start your healthcare journey"})]}),v.jsxs(wr,{children:[v.jsxs("form",{className:"space-y-6",onSubmit:l,children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"firstName",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"First Name"}),v.jsx(ra,{id:"firstName",type:"text",placeholder:"John",value:s,onChange:y=>a(y.target.value),icon:v.jsx(Tu,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"lastName",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Last Name"}),v.jsx(ra,{id:"lastName",type:"text",placeholder:"Doe",value:h,onChange:y=>p(y.target.value),icon:v.jsx(Tu,{className:"h-4 w-4 text-gray-400"})})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Email Address"}),v.jsx(ra,{id:"email",type:"email",placeholder:"john.doe@example.com",value:u,onChange:y=>i(y.target.value),icon:v.jsx(X0,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"password",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(ra,{id:"password",type:e?"text":"password",placeholder:"Create a strong password",value:g,onChange:y=>_(y.target.value),icon:v.jsx(Ef,{className:"h-4 w-4 text-gray-400"})}),v.jsx("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t(!e),children:e?v.jsx(Rf,{className:"h-4 w-4"}):v.jsx(ap,{className:"h-4 w-4"})})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Confirm Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(ra,{id:"confirmPassword",type:r?"text":"password",placeholder:"Confirm your password",value:f,onChange:y=>o(y.target.value),icon:v.jsx(Ef,{className:"h-4 w-4 text-gray-400"})}),v.jsx("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>n(!r),children:r?v.jsx(Rf,{className:"h-4 w-4"}):v.jsx(ap,{className:"h-4 w-4"})})]})]}),v.jsx(mn,{type:"submit",className:"w-full",children:"Create Account"})]}),v.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",v.jsx(as,{to:"/auth/login",className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:"Sign in"})]})]})]})})}function $M(){const[e,t]=D.useState(!1),[r,n]=D.useState(""),[s,a]=D.useState(""),[h,p]=D.useState(""),[u,i]=D.useState(""),[g,_]=D.useState(""),[f,o]=D.useState(""),[w,l]=D.useState(""),[y,d]=D.useState(""),m=io(),S=["Cardiology","Dermatology","General Medicine","Neurology","Pediatrics","Psychiatry","Orthopedics","Gynecology","Other"],x=async k=>{var I;if(k.preventDefault(),!r||!s||!h||!u||!w||!y){Lr.error("Please fill in all required fields.");return}try{const T=await pr.post("http://localhost:3000/api/user/signup",{firstName:r,lastName:s,email:h,password:y,role:"DOCTOR",specialty:u,clinicLocation:w},{withCredentials:!0});T.data.success?(Lr.success("Doctor account created successfully!"),m("/dashboard/doctor")):Lr.error(T.data.message||"Signup failed")}catch(T){pr.isAxiosError(T)&&T.response?Lr.error(((I=T.response.data)==null?void 0:I.message)||"Something went wrong"):Lr.error("Unknown error occurred."),console.error(T)}};return v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsxs(br,{className:"w-full max-w-2xl",children:[v.jsxs(Dn,{className:"flex flex-col items-center space-y-2",children:[v.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center",children:v.jsx(T6,{className:"h-6 w-6 text-white"})}),v.jsx(kn,{className:"text-2xl font-bold",children:"Join as Doctor"}),v.jsx(cs,{className:"text-gray-600 dark:text-gray-300",children:"Create your professional account to start helping patients"})]}),v.jsxs(wr,{children:[v.jsxs("form",{className:"space-y-6",onSubmit:x,children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"firstName",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"First Name"}),v.jsx(ra,{id:"firstName",type:"text",placeholder:"Dr. John",value:r,onChange:k=>n(k.target.value),icon:v.jsx(Tu,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"lastName",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Last Name"}),v.jsx(ra,{id:"lastName",type:"text",placeholder:"Smith",value:s,onChange:k=>a(k.target.value),icon:v.jsx(Tu,{className:"h-4 w-4 text-gray-400"})})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Email Address"}),v.jsx(ra,{id:"email",type:"email",placeholder:"dr.smith@hospital.com",value:h,onChange:k=>p(k.target.value),icon:v.jsx(X0,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"specialty",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Specialty"}),v.jsxs(Zc,{value:u,onValueChange:i,children:[v.jsx(Yo,{id:"specialty",children:v.jsx(el,{placeholder:"Select specialty"})}),v.jsx(Qo,{children:S.map(k=>v.jsx(Wa,{value:k,children:k},k))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"experience",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Experience"}),v.jsx(ra,{id:"experience",type:"text",placeholder:"5 years",value:g,onChange:k=>_(k.target.value),icon:v.jsx(g6,{className:"h-4 w-4 text-gray-400"})})]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"license",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"License Number"}),v.jsx(ra,{id:"license",type:"text",placeholder:"MD123456",value:f,onChange:k=>o(k.target.value),icon:v.jsx(w6,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"location",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Location"}),v.jsx(ra,{id:"location",type:"text",placeholder:"New York, NY",value:w,onChange:k=>l(k.target.value),icon:v.jsx(gp,{className:"h-4 w-4 text-gray-400"})})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"password",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(ra,{id:"password",type:e?"text":"password",placeholder:"Create a strong password",value:y,onChange:k=>d(k.target.value),icon:v.jsx(Ef,{className:"h-4 w-4 text-gray-400"})}),v.jsx("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t(!e),children:e?v.jsx(Rf,{className:"h-4 w-4"}):v.jsx(ap,{className:"h-4 w-4"})})]})]}),v.jsx(mn,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700",children:"Create Doctor Account"})]}),v.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",v.jsx(as,{to:"/auth/login",className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:"Sign in"})]})]})]})})}function WM(){const[e,t]=D.useState(!1),[r,n]=D.useState(""),[s,a]=D.useState(""),h=io(),p=async u=>{var i;u.preventDefault();try{const g=await pr.post("http://localhost:3000/api/user/login",{data:r,password:s},{withCredentials:!0});g.data.success&&(to.getState().setUser({id:g.data.data.id,name:g.data.data.name,email:g.data.data.email,profilePicture:g.data.data.profilePicture,role:g.data.data.role,refreshToken:g.data.data.refreshToken}),g.data.data.role==="PATIENT"?h("/dashboard/patient"):h("/dashboard/doctor"))}catch(g){pr.isAxiosError(g)&&g.response?Lr.error(((i=g.response.data)==null?void 0:i.message)||"Something went wrong"):Lr.error("Unknown error occured..")}};return v.jsx("div",{className:"flex justify-center items-center min-h-[80vh]",children:v.jsxs(br,{className:"w-full max-w-md",children:[v.jsxs(Dn,{className:"flex flex-col items-center space-y-2",children:[v.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:v.jsx(Ti,{className:"h-6 w-6 text-white"})}),v.jsx(kn,{className:"text-2xl font-bold",children:"Welcome Back"}),v.jsx(cs,{className:"text-gray-600 dark:text-gray-300",children:"Sign in to your careXpert account"})]}),v.jsxs(wr,{children:[v.jsxs("form",{className:"space-y-6",onSubmit:p,children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"email",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Email Address"}),v.jsx(ra,{id:"email",type:"text",placeholder:"Enter your email",value:r,onChange:u=>n(u.target.value),icon:v.jsx(X0,{className:"h-4 w-4 text-gray-400"})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("label",{htmlFor:"password",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Password"}),v.jsx(as,{to:"/auth/forgot-password",className:"text-sm font-medium text-blue-600 hover:underline dark:text-blue-400",children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(ra,{id:"password",type:e?"text":"password",placeholder:"Enter your password",value:s,onChange:u=>a(u.target.value),icon:v.jsx(Ef,{className:"h-4 w-4 text-gray-400"})}),v.jsx("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t(!e),children:e?v.jsx(Rf,{className:"h-4 w-4"}):v.jsx(ap,{className:"h-4 w-4"})})]})]}),v.jsx(mn,{type:"submit",className:"w-full",children:"Sign In"})]}),v.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-300",children:["Don't have an account?"," ",v.jsx(as,{to:"/auth/patient/signup",className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:"Sign up"})]})]})]})})}function VM(){return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsx("div",{className:"container mx-auto px-4 py-8 pt-16 mt-12",children:v.jsxs(VS,{children:[v.jsx(Ts,{path:"patient/signup",element:v.jsx(UM,{})}),v.jsx(Ts,{path:"doctor/signup",element:v.jsx($M,{})}),v.jsx(Ts,{path:"login",element:v.jsx(WM,{})})]})}),v.jsx(Ei,{})]})}function zM(){const e=io(),t=to(w=>w.user),r=!1,[n,s]=D.useState(""),[a,h]=D.useState([]),[p,u]=D.useState([]),[i,g]=D.useState([]),[_,f]=D.useState([]),o="http://localhost:3000/api/patient";return D.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,r,e]),D.useEffect(()=>{async function w(){try{const l=await pr.get(`${o}/all-appointments`,{withCredentials:!0});if(l.data.success){const y=l.data.data,d=new Date,m=y.filter(x=>new Date(`${x.date}T${x.time}`)>=d),S=y.filter(x=>new Date(`${x.date}T${x.time}`)<d);h(m),u(S)}}catch(l){pr.isAxiosError(l)&&l.response?Lr.error(l.response.data.message):Lr.error("Unknown error occured..")}}w()},[]),D.useEffect(()=>{async function w(){var l;try{const y=await pr.get(`${o}/fetchAllDoctors`,{withCredentials:!0});y.data.success&&f(y.data.data)}catch(y){pr.isAxiosError(y)&&y.response?Lr.error(((l=y.response.data)==null?void 0:l.message)||"Something went wrong"):Lr.error("Unknown error occured")}}w()},[]),D.useEffect(()=>{async function w(){var l;try{const y=await pr.get(`${o}/view-prescriptions`,{withCredentials:!0});console.log(y.data),y.data.success&&g(y.data.data)}catch(y){pr.isAxiosError(y)&&y.response?Lr.error(((l=y.response.data)==null?void 0:l.message)||"Something went wrong"):Lr.error("Unknown error occured")}}w()},[]),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[v.jsxs("div",{className:"mb-8",children:[v.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome back, ",(t==null?void 0:t.name)||"Patient","!"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your health journey with careXpert"})]}),v.jsxs(_m,{defaultValue:"appointments",className:"space-y-6",children:[v.jsxs(wp,{className:"grid w-full grid-cols-4 lg:w-auto lg:grid-cols-4",children:[v.jsxs(Bs,{value:"appointments",className:"flex items-center gap-2",children:[v.jsx(sl,{className:"h-4 w-4"}),"Appointments"]}),v.jsxs(Bs,{value:"doctors",className:"flex items-center gap-2",children:[v.jsx(Sv,{className:"h-4 w-4"}),"Find Doctors"]}),v.jsxs(Bs,{value:"prescriptions",className:"flex items-center gap-2",children:[v.jsx(tx,{className:"h-4 w-4"}),"Prescriptions"]}),v.jsxs(Bs,{value:"chat",className:"flex items-center gap-2",children:[v.jsx(Z0,{className:"h-4 w-4"}),"Chat"]})]}),v.jsx(Fs,{value:"appointments",className:"space-y-6",children:v.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[v.jsxs(br,{children:[v.jsx(Dn,{children:v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(Ci,{className:"h-5 w-5 text-blue-600"}),"Upcoming Appointments"]})}),v.jsx(wr,{className:"space-y-4",children:a==null?void 0:a.map(w=>v.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{children:[v.jsx(Pa,{src:w.doctor.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:w.doctor.name.split(" ").map(l=>l[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:w.doctor.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:w.doctor.specialty}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(w.date).toLocaleDateString("en-US")," ","at"," ",w.time]}),v.jsxs("div",{className:"flex gap-2 mt-1",children:[v.jsx(es,{variant:w.appointmentType==="ONLINE"?"secondary":"default",children:w.appointmentType==="ONLINE"?"Video Call":"In-Person"}),v.jsx(es,{variant:w.status==="PENDING"?"outline":w.status==="CONFIRMED"?"default":w.status==="COMPLETED"?"secondary":"destructive",children:w.status})]})]})]})},w.id))})]}),v.jsxs(br,{children:[v.jsx(Dn,{children:v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(sl,{className:"h-5 w-5 text-gray-600"}),"Past Appointments"]})}),v.jsx(wr,{className:"space-y-4",children:p.map(w=>v.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{children:[v.jsx(Pa,{src:w.doctor.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:w.doctor.name.split(" ").map(l=>l[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:w.doctor.name}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:w.doctor.specialty}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(w.date).toLocaleDateString("en-US")," ","at"," ",w.time]}),v.jsxs("div",{className:"flex gap-2 mt-1",children:[v.jsx(es,{variant:w.appointmentType==="ONLINE"?"secondary":"default",children:w.appointmentType==="ONLINE"?"Video Call":"In-Person"}),v.jsx(es,{variant:w.status==="PENDING"?"outline":w.status==="CONFIRMED"?"default":w.status==="COMPLETED"?"secondary":"destructive",children:w.status})]})]})]}),v.jsx(es,{variant:"outline",className:"text-green-600 border-green-600",children:w.status})]},w.id))})]})]})}),v.jsx(Fs,{value:"doctors",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Find Doctors"}),v.jsx(cs,{children:"Search for doctors by name, specialty, or location"})]}),v.jsxs(wr,{children:[v.jsx("div",{className:"flex gap-4 mb-6",children:v.jsxs("div",{className:"relative flex-1",children:[v.jsx(Sv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),v.jsx(pl,{placeholder:"Search doctors, specialties, or locations...",value:n,onChange:w=>s(w.target.value),className:"pl-10"})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(w=>v.jsxs(br,{className:"flex flex-col items-center text-center p-6",children:[v.jsxs(Ta,{className:"h-20 w-20 mb-4",children:[v.jsx(Pa,{src:w.user.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:w.user.name.split(" ").map(l=>l[0]).join("")})]}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:w.user.name}),v.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm mb-2",children:w.specialty}),v.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-300 text-sm mb-2",children:[v.jsx(gp,{className:"h-4 w-4"})," ",w.clinicLocation]}),v.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-300 text-sm mb-4",children:[v.jsx(ty,{className:"h-4 w-4 text-yellow-400 fill-current"})," ","(",w.experience,")"]}),v.jsx(as,{to:`/book-appointment/${w.id}`,className:"w-full",children:v.jsx(mn,{className:"w-full",variant:w.nextAvailable?"default":"outline",children:w.nextAvailable?v.jsxs(v.Fragment,{children:[" ",v.jsx(Ti,{className:"h-4 w-4 mr-2"})," Book Appointment"," "]}):"Not Available"})})]},w.id))})]})]})}),v.jsx(Fs,{value:"prescriptions",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"My Prescriptions"}),v.jsx(cs,{children:"View and download your active and past prescriptions"})]}),v.jsx(wr,{className:"space-y-4",children:i.map(w=>v.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[v.jsxs("div",{children:[v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Prescribed by: Dr. ",w.doctorName]}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Date: ",new Date(w.date).toLocaleDateString()," "," ",new Date(w.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),v.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2",children:["Instructions: ",w.prescriptionText]})]}),v.jsx(mn,{variant:"outline",size:"sm",onClick:()=>window.open(`${o}/prescription-pdf/${w.id}`,"_blank"),children:"View PDF"})]},w.id))})]})}),v.jsx(Fs,{value:"chat",className:"space-y-6",children:v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsx(kn,{children:"Health Chat"}),v.jsx(cs,{children:"Chat with CareXpert AI or your doctors"})]}),v.jsxs(wr,{children:[v.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" ","Chat functionality will be available here."," "]}),v.jsx(as,{to:"/chat",children:v.jsx(mn,{className:"mt-4",children:"Go to Chat Hub"})})]})]})})]})]})]})}function HM(){const e=io(),t=to(f=>f.user),r=!1,[n,s]=D.useState(""),[a,h]=D.useState(""),[p,u]=D.useState([]),[i,g]=D.useState([]),_="http://localhost:3000/api/doctor";return D.useEffect(()=>{(!t||t.role!=="DOCTOR")&&e("/auth/login")},[t,r,e]),D.useEffect(()=>{async function f(){var o;try{const w=await pr.get(`${_}/all-appointments`,{withCredentials:!0});if(w.data.success){const l=w.data.data,y=new Date,d=new Date;d.setHours(0,0,0,0);const m=new Date(d);m.setDate(m.getDate()+1);const S=l.filter(k=>{const I=new Date(k.date);return I>=d&&I<m}),x=l.filter(k=>new Date(`${k.date}T${k.time}`)>=y);u(S),g(x)}}catch(w){pr.isAxiosError(w)&&w.response?Lr.error(((o=w.response.data)==null?void 0:o.message)||"Something went wrong"):Lr.error("Unknown error occured")}}f()},[]),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[v.jsx(ya,{}),v.jsxs("div",{className:"container mx-auto px-4 py-8 mt-12",children:[v.jsxs("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:["Welcome back, ",(t==null?void 0:t.name)||"Doctor","!"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your practice and help your patients"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Today's Appointments"}),v.jsx("p",{className:"text-2xl font-bold dark:text-white",children:p==null?void 0:p.length})]}),v.jsx(sl,{className:"h-8 w-8 text-blue-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Patients"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"247"})]}),v.jsx(wi,{className:"h-8 w-8 text-green-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Unread Messages"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"3"})]}),v.jsx(Z0,{className:"h-8 w-8 text-purple-600"})]})})}),v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"This Month"}),v.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"89"})]}),v.jsx(tx,{className:"h-8 w-8 text-orange-600"})]})})})]}),v.jsxs(_m,{defaultValue:"appointments",className:"space-y-6",children:[v.jsxs(wp,{className:"grid w-full grid-cols-3 lg:w-auto lg:grid-cols-3",children:[v.jsxs(Bs,{value:"appointments",className:"flex items-center gap-2",children:[v.jsx(sl,{className:"h-4 w-4"}),"Appointments"]}),v.jsxs(Bs,{value:"availability",className:"flex items-center gap-2",children:[v.jsx(Ci,{className:"h-4 w-4"}),"Availability"]}),v.jsxs(Bs,{value:"patients",className:"flex items-center gap-2",children:[v.jsx(wi,{className:"h-4 w-4"}),"Patients"]})]}),v.jsx(Fs,{value:"appointments",className:"space-y-6",children:v.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[v.jsxs(br,{children:[v.jsxs(Dn,{children:[v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(sl,{className:"h-5 w-5 text-blue-600"}),"Today's Appointments"]}),v.jsx(cs,{children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),v.jsx(wr,{className:"space-y-4",children:p.map(f=>v.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{children:[v.jsx(Pa,{src:f.patient.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:f.patient.name.split(" ").map(o=>o[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:f.patient.name}),v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(f.date).toLocaleDateString("en-US")," at ",f.time]}),v.jsxs("div",{className:"flex gap-2 mt-1",children:[v.jsx(es,{variant:f.appointmentType==="ONLINE"?"secondary":"default",children:f.appointmentType==="ONLINE"?"Video Call":"In-Person"}),v.jsx(es,{variant:f.status==="PENDING"?"outline":f.status==="CONFIRMED"?"default":f.status==="COMPLETED"?"secondary":"destructive",children:f.status})]}),f.notes&&v.jsx(es,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:f.notes})]})]}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsx(es,{variant:f.status==="COMPLETED"?"default":f.status==="PENDING"?"secondary":f.status==="CANCELLED"?"destructive":"outline",children:f.status}),v.jsxs(mn,{variant:"outline",size:"sm",children:[v.jsx(nx,{className:"h-4 w-4 mr-2"})," Manage"]})]})]},f.id))})]}),v.jsxs(br,{children:[v.jsx(Dn,{children:v.jsxs(kn,{className:"flex items-center gap-2",children:[v.jsx(Ci,{className:"h-5 w-5 text-green-600"}),"Upcoming Appointments"]})}),v.jsx(wr,{className:"space-y-4",children:i==null?void 0:i.map(f=>v.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Ta,{children:[v.jsx(Pa,{src:f.patient.profilePicture||"/placeholder.svg"}),v.jsx(Oa,{children:f.patient.name.split(" ").map(o=>o[0]).join("")})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:f.patient.name}),v.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(f.date).toLocaleDateString("en-US")," at ",f.time]}),v.jsxs("div",{className:"flex gap-2 mt-1",children:[v.jsx(es,{variant:f.appointmentType==="ONLINE"?"secondary":"default",children:f.appointmentType==="ONLINE"?"Video Call":"In-Person"}),v.jsx(es,{variant:f.status==="PENDING"?"outline":f.status==="CONFIRMED"?"default":f.status==="COMPLETED"?"secondary":"destructive",children:f.status})]}),f.notes&&v.jsx(es,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:f.notes})]})]}),v.jsx(es,{variant:f.status==="CONFIRMED"?"default":"secondary",children:f.status})]},f.id))})]})]})}),v.jsx(Fs,{value:"availability",children:v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsx("p",{children:"Availability tab content placeholder"})})})}),v.jsx(Fs,{value:"patients",children:v.jsx(br,{children:v.jsx(wr,{className:"p-6",children:v.jsx("p",{children:"Patients tab content placeholder"})})})})]})]})]})}var Ly={exports:{}},bu=typeof Reflect=="object"?Reflect:null,gw=bu&&typeof bu.apply=="function"?bu.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Jh;bu&&typeof bu.ownKeys=="function"?Jh=bu.ownKeys:Object.getOwnPropertySymbols?Jh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Jh=function(t){return Object.getOwnPropertyNames(t)};function qM(e){console&&console.warn&&console.warn(e)}var IE=Number.isNaN||function(t){return t!==t};function Cn(){Cn.init.call(this)}Ly.exports=Cn;Ly.exports.once=QM;Cn.EventEmitter=Cn;Cn.prototype._events=void 0;Cn.prototype._eventsCount=0;Cn.prototype._maxListeners=void 0;var vw=10;function Rm(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Cn,"defaultMaxListeners",{enumerable:!0,get:function(){return vw},set:function(e){if(typeof e!="number"||e<0||IE(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");vw=e}});Cn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Cn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||IE(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function DE(e){return e._maxListeners===void 0?Cn.defaultMaxListeners:e._maxListeners}Cn.prototype.getMaxListeners=function(){return DE(this)};Cn.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",a=this._events;if(a!==void 0)s=s&&a.error===void 0;else if(!s)return!1;if(s){var h;if(r.length>0&&(h=r[0]),h instanceof Error)throw h;var p=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw p.context=h,p}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")gw(u,this,r);else for(var i=u.length,g=FE(u,i),n=0;n<i;++n)gw(g[n],this,r);return!0};function ME(e,t,r,n){var s,a,h;if(Rm(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),h=a[t]),h===void 0)h=a[t]=r,++e._eventsCount;else if(typeof h=="function"?h=a[t]=n?[r,h]:[h,r]:n?h.unshift(r):h.push(r),s=DE(e),s>0&&h.length>s&&!h.warned){h.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=h.length,qM(p)}return e}Cn.prototype.addListener=function(t,r){return ME(this,t,r,!1)};Cn.prototype.on=Cn.prototype.addListener;Cn.prototype.prependListener=function(t,r){return ME(this,t,r,!0)};function KM(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function LE(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=KM.bind(n);return s.listener=r,n.wrapFn=s,s}Cn.prototype.once=function(t,r){return Rm(r),this.on(t,LE(this,t,r)),this};Cn.prototype.prependOnceListener=function(t,r){return Rm(r),this.prependListener(t,LE(this,t,r)),this};Cn.prototype.removeListener=function(t,r){var n,s,a,h,p;if(Rm(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,h=n.length-1;h>=0;h--)if(n[h]===r||n[h].listener===r){p=n[h].listener,a=h;break}if(a<0)return this;a===0?n.shift():GM(n,a),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,p||r)}return this};Cn.prototype.off=Cn.prototype.removeListener;Cn.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),h;for(s=0;s<a.length;++s)h=a[s],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function jE(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?YM(s):FE(s,s.length)}Cn.prototype.listeners=function(t){return jE(this,t,!0)};Cn.prototype.rawListeners=function(t){return jE(this,t,!1)};Cn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):BE.call(e,t)};Cn.prototype.listenerCount=BE;function BE(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Cn.prototype.eventNames=function(){return this._eventsCount>0?Jh(this._events):[]};function FE(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function GM(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function YM(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function QM(e,t){return new Promise(function(r,n){function s(h){e.removeListener(t,a),n(h)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}UE(e,t,a,{once:!0}),t!=="error"&&JM(e,s,{once:!0})})}function JM(e,t,r){typeof e.on=="function"&&UE(e,"error",t,r)}function UE(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(a){n.once&&e.removeEventListener(t,s),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var XM=Ly.exports;const ZM=Xv(XM);var $E={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(n,s){e.exports=s()})(self,()=>(()=>{var n={11:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Chrome74=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(5938),y=i(4256),d=i(4893),m=i(521),S=i(1305),x=i(3303),k=new _.Logger("Chrome74"),I={OS:1024,MIS:1024};class T extends m.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new T}get name(){return"Chrome74"}close(){if(k.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const b=await c.createOffer();try{c.close()}catch{}const R=g.parse(b.sdp),P=w.extractRtpCapabilities({sdpObject:R});return y.addNackSupportForOpus(P),P}catch(b){try{c.close()}catch{}throw b}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:L,proprietaryConstraints:A,extendedRtpCapabilities:j}){k.debug("run()"),this._direction=c,this._remoteSdp=new S.RemoteSdp({iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",j),video:o.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",j),video:o.getSendingRemoteRtpParameters("video",j)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},A),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),k.debug("updateIceServers()");const b=this._pc.getConfiguration();b.iceServers=c,this._pc.setConfiguration(b)}async restartIce(c){if(this.assertNotClosed(),k.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const b=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:b,codecOptions:R,codec:P}){this.assertNotClosed(),this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),b&&b.length>1&&b.forEach((be,xe)=>{be.rid=`r${xe}`});const O=f.clone(this._sendingRtpParametersByKind[c.kind]);O.codecs=o.reduceCodecs(O.codecs,P);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=o.reduceCodecs(N.codecs,P);const M=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:b});let A,j=await this._pc.createOffer(),G=g.parse(j.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G});let de=!1;const te=(0,x.parse)((b??[{}])[0].scalabilityMode);b&&b.length===1&&te.spatialLayers>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(k.debug("send() | enabling legacy simulcast for VP9 SVC"),de=!0,G=g.parse(j.sdp),A=G.media[M.idx],l.addLegacySimulcast({offerMediaObject:A,numStreams:te.spatialLayers}),j={type:"offer",sdp:g.write(G)}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const J=L.mid;if(O.mid=J,G=g.parse(this._pc.localDescription.sdp),A=G.media[M.idx],O.rtcp.cname=w.getCname({offerMediaObject:A}),b)if(b.length===1){let be=l.getRtpEncodings({offerMediaObject:A});Object.assign(be[0],b[0]),de&&(be=[be[0]]),O.encodings=be}else O.encodings=b;else O.encodings=l.getRtpEncodings({offerMediaObject:A});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const be of O.encodings)be.scalabilityMode?be.scalabilityMode=`L1T${te.temporalLayers}`:be.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:A,reuseMid:M.reuseMid,offerRtpParameters:O,answerRtpParameters:N,codecOptions:R});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(J,L),{localId:J,rtpParameters:O,rtpSender:L.sender}}async stopSending(c){if(this.assertSendDirection(),k.debug("stopSending() [localId:%s]",c),this._closed)return;const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");if(b.sender.replaceTrack(null),this._pc.removeTrack(b.sender),this._remoteSdp.closeMediaSection(b.mid))try{b.stop()}catch{}const R=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("pauseSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="inactive",this._remoteSdp.pauseMediaSection(c);const R=await this._pc.createOffer();k.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("resumeSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="sendonly";const R=await this._pc.createOffer();k.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(c,b){this.assertNotClosed(),this.assertSendDirection(),b?k.debug("replaceTrack() [localId:%s, track.id:%s]",c,b.id):k.debug("replaceTrack() [localId:%s, no track]",c);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(b)}async setMaxSpatialLayer(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{M.active=L<=b}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{P.encodings[L]={...M,...b}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:b,maxRetransmits:R,label:P,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:b,maxRetransmits:R,protocol:O};k.debug("sendDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(P,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),A=g.parse(L.sdp),j=A.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const G={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const b=[],R=new Map;for(const M of c){const{trackId:L,kind:A,rtpParameters:j,streamId:G}=M;k.debug("receive() [trackId:%s, kind:%s]",L,A);const de=j.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:A,offerRtpParameters:j,streamId:G??j.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);let O=await this._pc.createAnswer();const N=g.parse(O.sdp);for(const M of c){const{trackId:L,rtpParameters:A}=M,j=R.get(L),G=N.media.find(de=>String(de.mid)===j);w.applyCodecParameters({offerRtpParameters:A,answerMediaObject:G})}O={type:"answer",sdp:g.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const M of c){const{trackId:L}=M,A=R.get(L),j=this._pc.getTransceivers().find(G=>G.mid===A);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(A,j),b.push({localId:A,track:j.receiver.track,rtpReceiver:j.receiver})}return b}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const P of c){k.debug("stopReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of c)this._mapMidTransceiver.delete(P)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("pauseReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("resumeReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:b,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M}=c,L={negotiated:!0,id:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M,protocol:R};k.debug("receiveDataChannel() [options:%o]",L);const A=this._pc.createDataChannel(b,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const G=await this._pc.createAnswer();if(!this._transportReady){const de=g.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:A}}async setupTransport({localDtlsRole:c,localSdpObject:b}){b||(b=g.parse(this._pc.localDescription.sdp));const R=w.extractDtlsParameters({sdpObject:b});R.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((P,O)=>{this.safeEmit("@connect",{dtlsParameters:R},P,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Chrome74=T},19:function(p,u,i){var g,_,f,o,w,l,y,d,m;p.exports=(m=i(9021),i(3009),i(1025),_=(g=m).lib,f=_.Base,o=_.WordArray,w=g.algo,l=w.SHA256,y=w.HMAC,d=w.PBKDF2=f.extend({cfg:f.extend({keySize:4,hasher:l,iterations:25e4}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,x){for(var k=this.cfg,I=y.create(k.hasher,S),T=o.create(),C=o.create([1]),E=T.words,c=C.words,b=k.keySize,R=k.iterations;E.length<b;){var P=I.update(x).finalize(C);I.reset();for(var O=P.words,N=O.length,M=P,L=1;L<R;L++){M=I.finalize(M),I.reset();for(var A=M.words,j=0;j<N;j++)O[j]^=A[j]}T.concat(P),c[0]++}return T.sigBytes=4*b,T}}),g.PBKDF2=function(S,x,k){return d.create(k).compute(S,x)},m.PBKDF2)},25:function(p,u,i){var g,_,f,o;p.exports=(o=i(9021),i(7165),_=(g=o).lib.CipherParams,f=g.enc.Hex,g.format.Hex={stringify:function(w){return w.ciphertext.toString(f)},parse:function(w){var l=f.parse(w);return _.create({ciphertext:l})}},o.format.Hex)},76:(p,u,i)=>{u.s$=u.pF=void 0,i(7833).default,i(8057);var g=i(6004);Object.defineProperty(u,"pF",{enumerable:!0,get:function(){return g.Device}});var _=i(3303);Object.defineProperty(u,"s$",{enumerable:!0,get:function(){return _.parse}}),i(8046),i(2731),i(5248)},182:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.version=u.validate=u.v7=u.v6ToV1=u.v6=u.v5=u.v4=u.v3=u.v1ToV6=u.v1=u.stringify=u.parse=u.NIL=u.MAX=void 0;var g=i(2196);Object.defineProperty(u,"MAX",{enumerable:!0,get:function(){return g.default}});var _=i(3465);Object.defineProperty(u,"NIL",{enumerable:!0,get:function(){return _.default}});var f=i(1797);Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return f.default}});var o=i(6011);Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return o.default}});var w=i(1425);Object.defineProperty(u,"v1",{enumerable:!0,get:function(){return w.default}});var l=i(6568);Object.defineProperty(u,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var y=i(591);Object.defineProperty(u,"v3",{enumerable:!0,get:function(){return y.default}});var d=i(8286);Object.defineProperty(u,"v4",{enumerable:!0,get:function(){return d.default}});var m=i(4557);Object.defineProperty(u,"v5",{enumerable:!0,get:function(){return m.default}});var S=i(6356);Object.defineProperty(u,"v6",{enumerable:!0,get:function(){return S.default}});var x=i(268);Object.defineProperty(u,"v6ToV1",{enumerable:!0,get:function(){return x.default}});var k=i(4299);Object.defineProperty(u,"v7",{enumerable:!0,get:function(){return k.default}});var I=i(9746);Object.defineProperty(u,"validate",{enumerable:!0,get:function(){return I.default}});var T=i(2770);Object.defineProperty(u,"version",{enumerable:!0,get:function(){return T.default}})},268:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(1797),_=i(6011);u.default=function(f){const o=function(w){return Uint8Array.of((15&w[3])<<4|w[4]>>4&15,(15&w[4])<<4|(240&w[5])>>4,(15&w[5])<<4|15&w[6],w[7],(15&w[1])<<4|(240&w[2])>>4,(15&w[2])<<4|(240&w[3])>>4,16|(240&w[0])>>4,(15&w[0])<<4|(240&w[1])>>4,w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}(typeof f=="string"?(0,g.default)(f):f);return typeof f=="string"?(0,_.unsafeStringify)(o):o}},296:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(7800);function _(f,o){return function(w){if(Array.isArray(w))return w}(f)||function(w,l){var y=w==null?null:typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(y!=null){var d,m,S,x,k=[],I=!0,T=!1;try{if(S=(y=y.call(w)).next,l===0){if(Object(y)!==y)return;I=!1}else for(;!(I=(d=S.call(y)).done)&&(k.push(d.value),k.length!==l);I=!0);}catch(C){T=!0,m=C}finally{try{if(!I&&y.return!=null&&(x=y.return(),Object(x)!==x))return}finally{if(T)throw m}}return k}}(f,o)||(0,g.A)(f,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(p,u,i)=>{i(8624),p.exports=self.fetch.bind(self)},338:(p,u)=>{function i(y){return 14+(y+64>>>9<<4)+1}function g(y,d){const m=(65535&y)+(65535&d);return(y>>16)+(d>>16)+(m>>16)<<16|65535&m}function _(y,d,m,S,x,k){return g((I=g(g(d,y),g(S,k)))<<(T=x)|I>>>32-T,m);var I,T}function f(y,d,m,S,x,k,I){return _(d&m|~d&S,y,d,x,k,I)}function o(y,d,m,S,x,k,I){return _(d&S|m&~S,y,d,x,k,I)}function w(y,d,m,S,x,k,I){return _(d^m^S,y,d,x,k,I)}function l(y,d,m,S,x,k,I){return _(m^(d|~S),y,d,x,k,I)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(y){return function(d){const m=new Uint8Array(4*d.length);for(let S=0;S<4*d.length;S++)m[S]=d[S>>2]>>>S%4*8&255;return m}(function(d,m){const S=new Uint32Array(i(m)).fill(0);S.set(d),S[m>>5]|=128<<m%32,S[S.length-1]=m,d=S;let x=1732584193,k=-271733879,I=-1732584194,T=271733878;for(let C=0;C<d.length;C+=16){const E=x,c=k,b=I,R=T;x=f(x,k,I,T,d[C],7,-680876936),T=f(T,x,k,I,d[C+1],12,-389564586),I=f(I,T,x,k,d[C+2],17,606105819),k=f(k,I,T,x,d[C+3],22,-1044525330),x=f(x,k,I,T,d[C+4],7,-176418897),T=f(T,x,k,I,d[C+5],12,1200080426),I=f(I,T,x,k,d[C+6],17,-1473231341),k=f(k,I,T,x,d[C+7],22,-45705983),x=f(x,k,I,T,d[C+8],7,1770035416),T=f(T,x,k,I,d[C+9],12,-1958414417),I=f(I,T,x,k,d[C+10],17,-42063),k=f(k,I,T,x,d[C+11],22,-1990404162),x=f(x,k,I,T,d[C+12],7,1804603682),T=f(T,x,k,I,d[C+13],12,-40341101),I=f(I,T,x,k,d[C+14],17,-1502002290),k=f(k,I,T,x,d[C+15],22,1236535329),x=o(x,k,I,T,d[C+1],5,-165796510),T=o(T,x,k,I,d[C+6],9,-1069501632),I=o(I,T,x,k,d[C+11],14,643717713),k=o(k,I,T,x,d[C],20,-373897302),x=o(x,k,I,T,d[C+5],5,-701558691),T=o(T,x,k,I,d[C+10],9,38016083),I=o(I,T,x,k,d[C+15],14,-660478335),k=o(k,I,T,x,d[C+4],20,-405537848),x=o(x,k,I,T,d[C+9],5,568446438),T=o(T,x,k,I,d[C+14],9,-1019803690),I=o(I,T,x,k,d[C+3],14,-187363961),k=o(k,I,T,x,d[C+8],20,1163531501),x=o(x,k,I,T,d[C+13],5,-1444681467),T=o(T,x,k,I,d[C+2],9,-51403784),I=o(I,T,x,k,d[C+7],14,1735328473),k=o(k,I,T,x,d[C+12],20,-1926607734),x=w(x,k,I,T,d[C+5],4,-378558),T=w(T,x,k,I,d[C+8],11,-2022574463),I=w(I,T,x,k,d[C+11],16,1839030562),k=w(k,I,T,x,d[C+14],23,-35309556),x=w(x,k,I,T,d[C+1],4,-1530992060),T=w(T,x,k,I,d[C+4],11,1272893353),I=w(I,T,x,k,d[C+7],16,-155497632),k=w(k,I,T,x,d[C+10],23,-1094730640),x=w(x,k,I,T,d[C+13],4,681279174),T=w(T,x,k,I,d[C],11,-358537222),I=w(I,T,x,k,d[C+3],16,-722521979),k=w(k,I,T,x,d[C+6],23,76029189),x=w(x,k,I,T,d[C+9],4,-640364487),T=w(T,x,k,I,d[C+12],11,-421815835),I=w(I,T,x,k,d[C+15],16,530742520),k=w(k,I,T,x,d[C+2],23,-995338651),x=l(x,k,I,T,d[C],6,-198630844),T=l(T,x,k,I,d[C+7],10,1126891415),I=l(I,T,x,k,d[C+14],15,-1416354905),k=l(k,I,T,x,d[C+5],21,-57434055),x=l(x,k,I,T,d[C+12],6,1700485571),T=l(T,x,k,I,d[C+3],10,-1894986606),I=l(I,T,x,k,d[C+10],15,-1051523),k=l(k,I,T,x,d[C+1],21,-2054922799),x=l(x,k,I,T,d[C+8],6,1873313359),T=l(T,x,k,I,d[C+15],10,-30611744),I=l(I,T,x,k,d[C+6],15,-1560198380),k=l(k,I,T,x,d[C+13],21,1309151649),x=l(x,k,I,T,d[C+4],6,-145523070),T=l(T,x,k,I,d[C+11],10,-1120210379),I=l(I,T,x,k,d[C+2],15,718787259),k=l(k,I,T,x,d[C+9],21,-343485551),x=g(x,E),k=g(k,c),I=g(I,b),T=g(T,R)}return Uint32Array.of(x,k,I,T)}(function(d){if(d.length===0)return new Uint32Array;const m=new Uint32Array(i(8*d.length)).fill(0);for(let S=0;S<d.length;S++)m[S>>2]|=(255&d[S])<<S%4*8;return m}(y),8*y.length))}},388:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(2284);function _(f,o){if(o&&((0,g.A)(o)=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(f)}},467:(p,u,i)=>{function g(f,o,w,l,y,d,m){try{var S=f[d](m),x=S.value}catch(k){return void w(k)}S.done?o(x):Promise.resolve(x).then(l,y)}function _(f){return function(){var o=this,w=arguments;return new Promise(function(l,y){var d=f.apply(o,w);function m(x){g(d,l,y,m,S,"next",x)}function S(x){g(d,l,y,m,S,"throw",x)}m(void 0)})}}i.d(u,{A:()=>_})},477:()=>{},482:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.pad.Iso97971={pad:function(_,f){_.concat(g.lib.WordArray.create([2147483648],1)),g.pad.ZeroPadding.pad(_,f)},unpad:function(_){g.pad.ZeroPadding.unpad(_),_.sigBytes--}},g.pad.Iso97971)},521:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.HandlerInterface=void 0;const g=i(3953);class _ extends g.EnhancedEventEmitter{constructor(){super()}}u.HandlerInterface=_},591:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const g=i(338),_=i(2988);var f=i(2988);function o(w,l,y,d){return(0,_.default)(48,g.default,w,l,y,d)}Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return f.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return f.URL}}),o.DNS=_.DNS,o.URL=_.URL,u.default=o},736:(p,u,i)=>{p.exports=function(g){function _(w){let l,y,d,m=null;function S(...x){if(!S.enabled)return;const k=S,I=Number(new Date),T=I-(l||I);k.diff=T,k.prev=l,k.curr=I,l=I,x[0]=_.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let C=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(E,c)=>{if(E==="%%")return"%";C++;const b=_.formatters[c];if(typeof b=="function"){const R=x[C];E=b.call(k,R),x.splice(C,1),C--}return E}),_.formatArgs.call(k,x),(k.log||_.log).apply(k,x)}return S.namespace=w,S.useColors=_.useColors(),S.color=_.selectColor(w),S.extend=f,S.destroy=_.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==_.namespaces&&(y=_.namespaces,d=_.enabled(w)),d),set:x=>{m=x}}),typeof _.init=="function"&&_.init(S),S}function f(w,l){const y=_(this.namespace+(l===void 0?":":l)+w);return y.log=this.log,y}function o(w,l){let y=0,d=0,m=-1,S=0;for(;y<w.length;)if(d<l.length&&(l[d]===w[y]||l[d]==="*"))l[d]==="*"?(m=d,S=y,d++):(y++,d++);else{if(m===-1)return!1;d=m+1,S++,y=S}for(;d<l.length&&l[d]==="*";)d++;return d===l.length}return _.debug=_,_.default=_,_.coerce=function(w){return w instanceof Error?w.stack||w.message:w},_.disable=function(){const w=[..._.names,..._.skips.map(l=>"-"+l)].join(",");return _.enable(""),w},_.enable=function(w){_.save(w),_.namespaces=w,_.names=[],_.skips=[];const l=(typeof w=="string"?w:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const y of l)y[0]==="-"?_.skips.push(y.slice(1)):_.names.push(y)},_.enabled=function(w){for(const l of _.skips)if(o(w,l))return!1;for(const l of _.names)if(o(w,l))return!0;return!1},_.humanize=i(6585),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(g).forEach(w=>{_[w]=g[w]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(w){let l=0;for(let y=0;y<w.length;y++)l=(l<<5)-l+w.charCodeAt(y),l|=0;return _.colors[Math.abs(l)%_.colors.length]},_.enable(_.load()),_}},754:function(p,u,i){var g;p.exports=(g=i(9021),function(){var _=g,f=_.lib.WordArray;function o(w,l,y){for(var d=[],m=0,S=0;S<l;S++)if(S%4){var x=y[w.charCodeAt(S-1)]<<S%4*2|y[w.charCodeAt(S)]>>>6-S%4*2;d[m>>>2]|=x<<24-m%4*8,m++}return f.create(d,m)}_.enc.Base64={stringify:function(w){var l=w.words,y=w.sigBytes,d=this._map;w.clamp();for(var m=[],S=0;S<y;S+=3)for(var x=(l[S>>>2]>>>24-S%4*8&255)<<16|(l[S+1>>>2]>>>24-(S+1)%4*8&255)<<8|l[S+2>>>2]>>>24-(S+2)%4*8&255,k=0;k<4&&S+.75*k<y;k++)m.push(d.charAt(x>>>6*(3-k)&63));var I=d.charAt(64);if(I)for(;m.length%4;)m.push(I);return m.join("")},parse:function(w){var l=w.length,y=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var m=0;m<y.length;m++)d[y.charCodeAt(m)]=m}var S=y.charAt(64);if(S){var x=w.indexOf(S);x!==-1&&(l=x)}return o(w,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),g.enc.Base64)},816:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(2284);function _(f){var o=function(w,l){if((0,g.A)(w)!="object"||!w)return w;var y=w[Symbol.toPrimitive];if(y!==void 0){var d=y.call(w,l);if((0,g.A)(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(w)}(f,"string");return(0,g.A)(o)=="symbol"?o:o+""}},955:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib.BlockCipher,o=_.algo,w=[],l=[],y=[],d=[],m=[],S=[],x=[],k=[],I=[],T=[];(function(){for(var c=[],b=0;b<256;b++)c[b]=b<128?b<<1:b<<1^283;var R=0,P=0;for(b=0;b<256;b++){var O=P^P<<1^P<<2^P<<3^P<<4;O=O>>>8^255&O^99,w[R]=O,l[O]=R;var N=c[R],M=c[N],L=c[M],A=257*c[O]^16843008*O;y[R]=A<<24|A>>>8,d[R]=A<<16|A>>>16,m[R]=A<<8|A>>>24,S[R]=A,A=16843009*L^65537*M^257*N^16843008*R,x[O]=A<<24|A>>>8,k[O]=A<<16|A>>>16,I[O]=A<<8|A>>>24,T[O]=A,R?(R=N^c[c[c[L^N]]],P^=c[c[P]]):R=P=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],E=o.AES=f.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var c=this._keyPriorReset=this._key,b=c.words,R=c.sigBytes/4,P=4*((this._nRounds=R+6)+1),O=this._keySchedule=[],N=0;N<P;N++)N<R?O[N]=b[N]:(A=O[N-1],N%R?R>6&&N%R==4&&(A=w[A>>>24]<<24|w[A>>>16&255]<<16|w[A>>>8&255]<<8|w[255&A]):(A=w[(A=A<<8|A>>>24)>>>24]<<24|w[A>>>16&255]<<16|w[A>>>8&255]<<8|w[255&A],A^=C[N/R|0]<<24),O[N]=O[N-R]^A);for(var M=this._invKeySchedule=[],L=0;L<P;L++){if(N=P-L,L%4)var A=O[N];else A=O[N-4];M[L]=L<4||N<=4?A:x[w[A>>>24]]^k[w[A>>>16&255]]^I[w[A>>>8&255]]^T[w[255&A]]}}},encryptBlock:function(c,b){this._doCryptBlock(c,b,this._keySchedule,y,d,m,S,w)},decryptBlock:function(c,b){var R=c[b+1];c[b+1]=c[b+3],c[b+3]=R,this._doCryptBlock(c,b,this._invKeySchedule,x,k,I,T,l),R=c[b+1],c[b+1]=c[b+3],c[b+3]=R},_doCryptBlock:function(c,b,R,P,O,N,M,L){for(var A=this._nRounds,j=c[b]^R[0],G=c[b+1]^R[1],de=c[b+2]^R[2],te=c[b+3]^R[3],J=4,ae=1;ae<A;ae++){var be=P[j>>>24]^O[G>>>16&255]^N[de>>>8&255]^M[255&te]^R[J++],xe=P[G>>>24]^O[de>>>16&255]^N[te>>>8&255]^M[255&j]^R[J++],se=P[de>>>24]^O[te>>>16&255]^N[j>>>8&255]^M[255&G]^R[J++],ze=P[te>>>24]^O[j>>>16&255]^N[G>>>8&255]^M[255&de]^R[J++];j=be,G=xe,de=se,te=ze}be=(L[j>>>24]<<24|L[G>>>16&255]<<16|L[de>>>8&255]<<8|L[255&te])^R[J++],xe=(L[G>>>24]<<24|L[de>>>16&255]<<16|L[te>>>8&255]<<8|L[255&j])^R[J++],se=(L[de>>>24]<<24|L[te>>>16&255]<<16|L[j>>>8&255]<<8|L[255&G])^R[J++],ze=(L[te>>>24]<<24|L[j>>>16&255]<<16|L[G>>>8&255]<<8|L[255&de])^R[J++],c[b]=be,c[b+1]=xe,c[b+2]=se,c[b+3]=ze},keySize:8});_.AES=f._createHelper(E)}(),g.AES)},1025:function(p,u,i){var g,_,f,o;p.exports=(g=i(9021),f=(_=g).lib.Base,o=_.enc.Utf8,void(_.algo.HMAC=f.extend({init:function(w,l){w=this._hasher=new w.init,typeof l=="string"&&(l=o.parse(l));var y=w.blockSize,d=4*y;l.sigBytes>d&&(l=w.finalize(l)),l.clamp();for(var m=this._oKey=l.clone(),S=this._iKey=l.clone(),x=m.words,k=S.words,I=0;I<y;I++)x[I]^=1549556828,k[I]^=909522486;m.sigBytes=S.sigBytes=d,this.reset()},reset:function(){var w=this._hasher;w.reset(),w.update(this._iKey)},update:function(w){return this._hasher.update(w),this},finalize:function(w){var l=this._hasher,y=l.finalize(w);return l.reset(),l.finalize(this._oKey.clone().concat(y))}})))},1305:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RemoteSdp=void 0;const g=i(7363),_=i(2994),f=i(3471),o=new _.Logger("RemoteSdp");u.RemoteSdp=class{constructor({iceParameters:w,iceCandidates:l,dtlsParameters:y,sctpParameters:d,plainRtpParameters:m,planB:S=!1}){ye(this,"_iceParameters");ye(this,"_iceCandidates");ye(this,"_dtlsParameters");ye(this,"_sctpParameters");ye(this,"_plainRtpParameters");ye(this,"_planB");ye(this,"_mediaSections",[]);ye(this,"_midToIndex",new Map);ye(this,"_firstMid");ye(this,"_sdpObject");if(this._iceParameters=w,this._iceCandidates=l,this._dtlsParameters=y,this._sctpParameters=d,this._plainRtpParameters=m,this._planB=S,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},w!=null&&w.iceLite&&(this._sdpObject.icelite="ice-lite"),y){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const x=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:y.fingerprints[x-1].algorithm,hash:y.fingerprints[x-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}m&&(this._sdpObject.origin.address=m.ip,this._sdpObject.origin.ipVer=m.ipVersion)}updateIceParameters(w){o.debug("updateIceParameters() [iceParameters:%o]",w),this._iceParameters=w,this._sdpObject.icelite=w.iceLite?"ice-lite":void 0;for(const l of this._mediaSections)l.setIceParameters(w)}updateDtlsRole(w){o.debug("updateDtlsRole() [role:%s]",w),this._dtlsParameters.role=w;for(const l of this._mediaSections)l.setDtlsRole(w)}setSessionExtmapAllowMixed(){o.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let w=0;w<this._mediaSections.length;++w){const l=this._mediaSections[w];if(l.closed)return{idx:w,reuseMid:l.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:w,reuseMid:l,offerRtpParameters:y,answerRtpParameters:d,codecOptions:m}){const S=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:w,offerRtpParameters:y,answerRtpParameters:d,codecOptions:m});l?this._replaceMediaSection(S,l):this._midToIndex.has(S.mid)?this._replaceMediaSection(S):this._addMediaSection(S)}receive({mid:w,kind:l,offerRtpParameters:y,streamId:d,trackId:m}){const S=this._midToIndex.get(w);let x;if(S!==void 0&&(x=this._mediaSections[S]),this.setSessionExtmapAllowMixed(),x)x.planBReceive({offerRtpParameters:y,streamId:d,trackId:m}),this._replaceMediaSection(x);else{x=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:w,kind:l,offerRtpParameters:y,streamId:d,trackId:m});const k=this._mediaSections.find(I=>I.closed);k?this._replaceMediaSection(x,k.mid):this._addMediaSection(x)}}pauseMediaSection(w){this._findMediaSection(w).pause()}resumeSendingMediaSection(w){this._findMediaSection(w).resume()}resumeReceivingMediaSection(w){this._findMediaSection(w).resume()}disableMediaSection(w){this._findMediaSection(w).disable()}closeMediaSection(w){const l=this._findMediaSection(w);return w===this._firstMid?(o.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",w),this.disableMediaSection(w),!1):(l.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(w,l){const y=this._findMediaSection(w);y.muxSimulcastStreams(l),this._replaceMediaSection(y)}planBStopReceiving({mid:w,offerRtpParameters:l}){const y=this._findMediaSection(w);y.planBStopReceiving({offerRtpParameters:l}),this._replaceMediaSection(y)}sendSctpAssociation({offerMediaObject:w}){const l=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:w});this._addMediaSection(l)}receiveSctpAssociation({oldDataChannelSpec:w=!1}={}){const l=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:w});this._addMediaSection(l)}getSdp(){return this._sdpObject.origin.sessionVersion++,g.write(this._sdpObject)}_addMediaSection(w){this._firstMid||(this._firstMid=w.mid),this._mediaSections.push(w),this._midToIndex.set(w.mid,this._mediaSections.length-1),this._sdpObject.media.push(w.getObject()),this._regenerateBundleMids()}_replaceMediaSection(w,l){if(typeof l=="string"){const y=this._midToIndex.get(l);if(y===void 0)throw new Error(`no media section found for reuseMid '${l}'`);const d=this._mediaSections[y];this._mediaSections[y]=w,this._midToIndex.delete(d.mid),this._midToIndex.set(w.mid,y),this._sdpObject.media[y]=w.getObject(),this._regenerateBundleMids()}else{const y=this._midToIndex.get(w.mid);if(y===void 0)throw new Error(`no media section found with mid '${w.mid}'`);this._mediaSections[y]=w,this._sdpObject.media[y]=w.getObject()}}_findMediaSection(w){const l=this._midToIndex.get(w);if(l===void 0)throw new Error(`no media section found with mid '${w}'`);return this._mediaSections[l]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(w=>!w.closed).map(w=>w.mid).join(" "))}}},1380:function(p,u,i){var g;p.exports=(g=i(9021),i(3240),function(){var _=g,f=_.lib.Hasher,o=_.x64,w=o.Word,l=o.WordArray,y=_.algo;function d(){return w.create.apply(w,arguments)}var m=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],S=[];(function(){for(var k=0;k<80;k++)S[k]=d()})();var x=y.SHA512=f.extend({_doReset:function(){this._hash=new l.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(k,I){for(var T=this._hash.words,C=T[0],E=T[1],c=T[2],b=T[3],R=T[4],P=T[5],O=T[6],N=T[7],M=C.high,L=C.low,A=E.high,j=E.low,G=c.high,de=c.low,te=b.high,J=b.low,ae=R.high,be=R.low,xe=P.high,se=P.low,ze=O.high,Ie=O.low,Ne=N.high,Ee=N.low,Le=M,dt=L,cr=A,gr=j,Ot=G,xr=de,vr=te,Bt=J,Qr=ae,Nt=be,Kt=xe,Wr=se,tn=ze,Nr=Ie,Vr=Ne,rn=Ee,It=0;It<80;It++){var nn,Jr,Fr=S[It];if(It<16)Jr=Fr.high=0|k[I+2*It],nn=Fr.low=0|k[I+2*It+1];else{var Ar=S[It-15],hn=Ar.high,Hr=Ar.low,wn=(hn>>>1|Hr<<31)^(hn>>>8|Hr<<24)^hn>>>7,fn=(Hr>>>1|hn<<31)^(Hr>>>8|hn<<24)^(Hr>>>7|hn<<25),Tn=S[It-2],Sn=Tn.high,Ft=Tn.low,Pn=(Sn>>>19|Ft<<13)^(Sn<<3|Ft>>>29)^Sn>>>6,Gn=(Ft>>>19|Sn<<13)^(Ft<<3|Sn>>>29)^(Ft>>>6|Sn<<26),sn=S[It-7],er=sn.high,Ge=sn.low,Me=S[It-16],it=Me.high,je=Me.low;Jr=(Jr=(Jr=wn+er+((nn=fn+Ge)>>>0<fn>>>0?1:0))+Pn+((nn+=Gn)>>>0<Gn>>>0?1:0))+it+((nn+=je)>>>0<je>>>0?1:0),Fr.high=Jr,Fr.low=nn}var ct,tr=Qr&Kt^~Qr&tn,Ae=Nt&Wr^~Nt&Nr,Gt=Le&cr^Le&Ot^cr&Ot,jt=dt&gr^dt&xr^gr&xr,hr=(Le>>>28|dt<<4)^(Le<<30|dt>>>2)^(Le<<25|dt>>>7),ir=(dt>>>28|Le<<4)^(dt<<30|Le>>>2)^(dt<<25|Le>>>7),Rr=(Qr>>>14|Nt<<18)^(Qr>>>18|Nt<<14)^(Qr<<23|Nt>>>9),Je=(Nt>>>14|Qr<<18)^(Nt>>>18|Qr<<14)^(Nt<<23|Qr>>>9),Wt=m[It],Ct=Wt.high,Ut=Wt.low,Ir=Vr+Rr+((ct=rn+Je)>>>0<rn>>>0?1:0),Er=ir+jt;Vr=tn,rn=Nr,tn=Kt,Nr=Wr,Kt=Qr,Wr=Nt,Qr=vr+(Ir=(Ir=(Ir=Ir+tr+((ct+=Ae)>>>0<Ae>>>0?1:0))+Ct+((ct+=Ut)>>>0<Ut>>>0?1:0))+Jr+((ct+=nn)>>>0<nn>>>0?1:0))+((Nt=Bt+ct|0)>>>0<Bt>>>0?1:0)|0,vr=Ot,Bt=xr,Ot=cr,xr=gr,cr=Le,gr=dt,Le=Ir+(hr+Gt+(Er>>>0<ir>>>0?1:0))+((dt=ct+Er|0)>>>0<ct>>>0?1:0)|0}L=C.low=L+dt,C.high=M+Le+(L>>>0<dt>>>0?1:0),j=E.low=j+gr,E.high=A+cr+(j>>>0<gr>>>0?1:0),de=c.low=de+xr,c.high=G+Ot+(de>>>0<xr>>>0?1:0),J=b.low=J+Bt,b.high=te+vr+(J>>>0<Bt>>>0?1:0),be=R.low=be+Nt,R.high=ae+Qr+(be>>>0<Nt>>>0?1:0),se=P.low=se+Wr,P.high=xe+Kt+(se>>>0<Wr>>>0?1:0),Ie=O.low=Ie+Nr,O.high=ze+tn+(Ie>>>0<Nr>>>0?1:0),Ee=N.low=Ee+rn,N.high=Ne+Vr+(Ee>>>0<rn>>>0?1:0)},_doFinalize:function(){var k=this._data,I=k.words,T=8*this._nDataBytes,C=8*k.sigBytes;return I[C>>>5]|=128<<24-C%32,I[30+(C+128>>>10<<5)]=Math.floor(T/4294967296),I[31+(C+128>>>10<<5)]=T,k.sigBytes=4*I.length,this._process(),this._hash.toX32()},clone:function(){var k=f.clone.call(this);return k._hash=this._hash.clone(),k},blockSize:32});_.SHA512=f._createHelper(x),_.HmacSHA512=f._createHmacHelper(x)}(),g.SHA512)},1396:function(p,u,i){var g;p.exports=(g=i(9021),i(3240),i(6440),i(5503),i(754),i(4725),i(4636),i(5471),i(3009),i(6308),i(1380),i(9557),i(5953),i(8056),i(1025),i(19),i(9506),i(7165),i(2169),i(6939),i(6372),i(3797),i(8454),i(2073),i(4905),i(482),i(2155),i(8124),i(25),i(955),i(7628),i(7193),i(6298),i(2696),i(3128),g)},1425:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.updateV1State=void 0;const g=i(2291),_=i(6011),f={};function o(l,y,d){return l.msecs??(l.msecs=-1/0),l.nsecs??(l.nsecs=0),y===l.msecs?(l.nsecs++,l.nsecs>=1e4&&(l.node=void 0,l.nsecs=0)):y>l.msecs?l.nsecs=0:y<l.msecs&&(l.node=void 0),l.node||(l.node=d.slice(10,16),l.node[0]|=1,l.clockseq=16383&(d[8]<<8|d[9])),l.msecs=y,l}function w(l,y,d,m,S,x,k=0){if(l.length<16)throw new Error("Random bytes length must be >= 16");if(x){if(k<0||k+16>x.length)throw new RangeError(`UUID byte range ${k}:${k+15} is out of buffer bounds`)}else x=new Uint8Array(16),k=0;y??(y=Date.now()),d??(d=0),m??(m=16383&(l[8]<<8|l[9])),S??(S=l.slice(10,16));const I=(1e4*(268435455&(y+=122192928e5))+d)%4294967296;x[k++]=I>>>24&255,x[k++]=I>>>16&255,x[k++]=I>>>8&255,x[k++]=255&I;const T=y/4294967296*1e4&268435455;x[k++]=T>>>8&255,x[k++]=255&T,x[k++]=T>>>24&15|16,x[k++]=T>>>16&255,x[k++]=m>>>8|128,x[k++]=255&m;for(let C=0;C<6;++C)x[k++]=S[C];return x}u.updateV1State=o,u.default=function(l,y,d){var x;let m;const S=(l==null?void 0:l._v6)??!1;if(l){const k=Object.keys(l);k.length===1&&k[0]==="_v6"&&(l=void 0)}if(l)m=w(l.random??((x=l.rng)==null?void 0:x.call(l))??(0,g.default)(),l.msecs,l.nsecs,l.clockseq,l.node,y,d);else{const k=Date.now(),I=(0,g.default)();o(f,k,I),m=w(I,f.msecs,f.nsecs,S?void 0:f.clockseq,S?void 0:f.node,y,d)}return y??(0,_.unsafeStringify)(m)}},1765:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.clone=function(i){return i===void 0?void 0:Number.isNaN(i)?NaN:typeof structuredClone=="function"?structuredClone(i):JSON.parse(JSON.stringify(i))},u.generateRandomNumber=function(){return Math.round(1e7*Math.random())},u.deepFreeze=function i(g){const _=Reflect.ownKeys(g);for(const f of _){const o=g[f];(o&&typeof o=="object"||typeof o=="function")&&i(o)}return Object.freeze(g)}},1767:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Firefox60=void 0;const g=i(7363),_=i(2994),f=i(4893),o=i(1765),w=i(8046),l=i(5544),y=i(5938),d=i(521),m=i(1305),S=i(3303),x=new _.Logger("Firefox60"),k={OS:16,MIS:2048};class I extends d.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new I}get name(){return"Firefox60"}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const E=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const b=c.captureStream().getVideoTracks()[0];try{E.addTransceiver("audio",{direction:"sendrecv"});const R=E.addTransceiver(b,{direction:"sendrecv"}),P=R.sender.getParameters(),O=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];P.encodings=O,await R.sender.setParameters(P);const N=await E.createOffer();try{c.remove()}catch{}try{b.stop()}catch{}try{E.close()}catch{}const M=g.parse(N.sdp);return l.extractRtpCapabilities({sdpObject:M})}catch(R){try{c.remove()}catch{}try{b.stop()}catch{}try{E.close()}catch{}throw R}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:E,iceParameters:c,iceCandidates:b,dtlsParameters:R,sctpParameters:P,iceServers:O,iceTransportPolicy:N,additionalSettings:M,proprietaryConstraints:L,extendedRtpCapabilities:A}){this.assertNotClosed(),x.debug("run()"),this._direction=E,this._remoteSdp=new m.RemoteSdp({iceParameters:c,iceCandidates:b,dtlsParameters:R,sctpParameters:P}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",A),video:w.getSendingRtpParameters("video",A)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",A),video:w.getSendingRemoteRtpParameters("video",A)},this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",j=>{this.emit("@icecandidateerror",j)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(E){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(E){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(E),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const b={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:E,encodings:c,codecOptions:b,codec:R}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",E.kind,E.id),c&&((c=o.clone(c)).forEach((te,J)=>{te.rid=`r${J}`}),c.reverse());const P=o.clone(this._sendingRtpParametersByKind[E.kind]);P.codecs=w.reduceCodecs(P.codecs,R);const O=o.clone(this._sendingRemoteRtpParametersByKind[E.kind]);O.codecs=w.reduceCodecs(O.codecs,R);const N=this._pc.addTransceiver(E,{direction:"sendonly",streams:[this._sendStream]});if(c){const te=N.sender.getParameters();te.encodings=c,await N.sender.setParameters(te)}const M=await this._pc.createOffer();let L=g.parse(M.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L});const A=(0,S.parse)((c??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const j=N.mid;P.mid=j,L=g.parse(this._pc.localDescription.sdp);const G=L.media[L.media.length-1];if(P.rtcp.cname=l.getCname({offerMediaObject:G}),c)if(c.length===1){const te=y.getRtpEncodings({offerMediaObject:G});Object.assign(te[0],c[0]),P.encodings=te}else P.encodings=c.reverse();else P.encodings=y.getRtpEncodings({offerMediaObject:G});if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const te of P.encodings)te.scalabilityMode?te.scalabilityMode=`L1T${A.temporalLayers}`:te.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:G,offerRtpParameters:P,answerRtpParameters:O,codecOptions:b});const de={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",de),await this._pc.setRemoteDescription(de),this._mapMidTransceiver.set(j,N),{localId:j,rtpParameters:P,rtpSender:N.sender}}async stopSending(E){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",E),this._closed)return;const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const b=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R),this._mapMidTransceiver.delete(E)}async pauseSending(E){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",E);const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(E);const b=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async resumeSending(E){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",E);const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(E);const b=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async replaceTrack(E,c){this.assertNotClosed(),this.assertSendDirection(),c?x.debug("replaceTrack() [localId:%s, track.id:%s]",E,c.id):x.debug("replaceTrack() [localId:%s, no track]",E);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated RTCRtpTransceiver not found");await b.sender.replaceTrack(c)}async setMaxSpatialLayer(E,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",E,c);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated transceiver not found");const R=b.sender.getParameters();c=R.encodings.length-1-c,R.encodings.forEach((N,M)=>{N.active=M>=c}),await b.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(E,R.encodings);const P=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const O={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(E,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",E,c);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated RTCRtpTransceiver not found");const R=b.sender.getParameters();R.encodings.forEach((N,M)=>{R.encodings[M]={...N,...c}}),await b.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(E,R.encodings);const P=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const O={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(E){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:E,maxPacketLifeTime:c,maxRetransmits:b,label:R,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:E,maxPacketLifeTime:c,maxRetransmits:b,protocol:P};x.debug("sendDataChannel() [options:%o]",O);const N=this._pc.createDataChannel(R,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),L=g.parse(M.sdp),A=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:A});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(E){this.assertNotClosed(),this.assertRecvDirection();const c=[],b=new Map;for(const N of E){const{trackId:M,kind:L,rtpParameters:A,streamId:j}=N;x.debug("receive() [trackId:%s, kind:%s]",M,L);const G=A.mid??String(this._mapMidTransceiver.size);b.set(M,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:A,streamId:j??A.rtcp.cname,trackId:M})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let P=await this._pc.createAnswer();const O=g.parse(P.sdp);for(const N of E){const{trackId:M,rtpParameters:L}=N,A=b.get(M),j=O.media.find(G=>String(G.mid)===A);l.applyCodecParameters({offerRtpParameters:L,answerMediaObject:j}),P={type:"answer",sdp:g.write(O)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:O}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const N of E){const{trackId:M}=N,L=b.get(M),A=this._pc.getTransceivers().find(j=>j.mid===L);if(!A)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,A),c.push({localId:L,track:A.receiver.track,rtpReceiver:A.receiver})}return c}async stopReceiving(E){if(this.assertRecvDirection(),this._closed)return;for(const R of E){x.debug("stopReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b);for(const R of E)this._mapMidTransceiver.delete(R)}async pauseReceiving(E){this.assertNotClosed(),this.assertRecvDirection();for(const R of E){x.debug("pauseReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(R)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}async resumeReceiving(E){this.assertNotClosed(),this.assertRecvDirection();for(const R of E){x.debug("resumeReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(R)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}async getReceiverStats(E){this.assertRecvDirection();const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:E,label:c,protocol:b}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:R,ordered:P,maxPacketLifeTime:O,maxRetransmits:N}=E,M={negotiated:!0,id:R,ordered:P,maxPacketLifeTime:O,maxRetransmits:N,protocol:b};x.debug("receiveDataChannel() [options:%o]",M);const L=this._pc.createDataChannel(c,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const A={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);const j=await this._pc.createAnswer();if(!this._transportReady){const G=g.parse(j.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:E,localSdpObject:c}){c||(c=g.parse(this._pc.localDescription.sdp));const b=l.extractDtlsParameters({sdpObject:c});b.role=E,this._remoteSdp.updateDtlsRole(E==="client"?"server":"client"),await new Promise((R,P)=>{this.safeEmit("@connect",{dtlsParameters:b},R,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Firefox60=I},1797:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(9746);u.default=function(_){if(!(0,g.default)(_))throw TypeError("Invalid UUID");let f;return Uint8Array.of((f=parseInt(_.slice(0,8),16))>>>24,f>>>16&255,f>>>8&255,255&f,(f=parseInt(_.slice(9,13),16))>>>8,255&f,(f=parseInt(_.slice(14,18),16))>>>8,255&f,(f=parseInt(_.slice(19,23),16))>>>8,255&f,(f=parseInt(_.slice(24,36),16))/1099511627776&255,f/4294967296&255,f>>>24&255,f>>>16&255,f>>>8&255,255&f)}},1803:(p,u,i)=>{i.d(u,{ed:()=>R,sg:()=>P,v7:()=>E});var g=i(4467),_=i(296),f=i(9027);function o(O,N){var M=Object.keys(O);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(O);N&&(L=L.filter(function(A){return Object.getOwnPropertyDescriptor(O,A).enumerable})),M.push.apply(M,L)}return M}var w={},l={},y={};for(var d in f.$.videoProfiles)f.$.videoProfiles[d].aspectRatio=="oneSixNine"&&(w[d]=f.$.videoProfiles[d],w[d].encoding={maxBitrate:w[d].bitRate,maxFramerate:w[d].frameRate}),f.$.videoProfiles[d].aspectRatio=="fourThree"&&(l[d]=f.$.videoProfiles[d],l[d].encoding={maxBitrate:l[d].bitRate,maxFramerate:l[d].frameRate});for(var d in f.$.screenShareProfiles)y[d]=f.$.screenShareProfiles[d],y[d].encoding={maxBitrate:y[d].bitRate,maxFramerate:y[d].frameRate};var m=Object.values(w),S=Object.values(l),x=Object.values(y),k=[w.h180p_w320p,w.h360p_w640p],I=[l.h180p_w240p,l.h360p_w480p],T=function(O){return[{scaleResolutionDownBy:2,fps:3}].map(function(N){var M;return{width:Math.floor(O.width/N.scaleResolutionDownBy),height:Math.floor(O.height/N.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(O.encoding.maxBitrate/(Math.pow(N.scaleResolutionDownBy,2)*(((M=O.encoding.maxFramerate)!==null&&M!==void 0?M:30)/N.fps)))),maxFramerate:N.fps}}})},C=["q","h","f"];function E(O,N,M,L,A){var j=L&&L.videoEncoding;O&&(j=L&&L.screenShareEncoding);var G=L==null?void 0:L.simulcast;if(j||(j=function(se,ze,Ie){for(var Ne=function(gr,Ot,xr){if(gr)return x;var vr=Ot>xr?Ot/xr:xr/Ot;return Math.abs(vr-1.7777777777777777)<Math.abs(vr-1.3333333333333333)?m:S}(se,ze,Ie),Ee=Ne[0].encoding,Le=Math.max(ze,Ie),dt=0;dt<Ne.length;dt+=1){var cr=Ne[dt];if(Ee=cr.encoding,cr.width>=Le)break}return Ee}(O,N,M)),!G)return[j];var de,te={width:N,height:M,encoding:{maxBitrate:j.maxBitrate,maxFramerate:j.maxFramerate}},J=[],ae=(J=c(O,te))[0];if(J.length>1){var be=J;de=(0,_.A)(be,2)[1]}var xe=Math.max(N,M);return b(N,M,xe>=960&&de?[ae,de,te]:xe>=480?[ae,te]:[te],A)}function c(O,N){O&&T(N);var M=N.width,L=N.height,A=M>L?M/L:L/M;return Math.abs(A-1.7777777777777777)<Math.abs(A-1.3333333333333333)?k:I}function b(O,N,M,L){var A=[];return M.forEach(function(j,G){if(!(G>=C.length)){var de=L?null:{maxFramerate:j.encoding.maxFramerate},te=Math.min(O,N),J=function(ae){for(var be=1;be<arguments.length;be++){var xe=arguments[be]!=null?arguments[be]:{};be%2?o(Object(xe),!0).forEach(function(se){(0,g.A)(ae,se,xe[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(xe)):o(Object(xe)).forEach(function(se){Object.defineProperty(ae,se,Object.getOwnPropertyDescriptor(xe,se))})}return ae}({rid:C[G],scaleResolutionDownBy:te/Math.min(j.width,j.height),maxBitrate:j.encoding.maxBitrate},de);A.push(J)}}),A}function R(O,N,M){if(!O)return{};var L=O.id,A=O.appData,j=A.width,G=A.height,de=A.encodings;try{var te=function(ze){var Ie=[];if(ze&&ze.length!=0){if(ze.length===1){for(var Ne=0;Ne<3;Ne++)Ie.push(Math.pow(2,3-Ne-1));return Ie}var Ee=!1;return ze.forEach(function(Le){Le.scaleResolutionDownBy!==void 0?(Ee=!0,Ie.push(Math.max(1,Le.scaleResolutionDownBy))):Ie.push(1)}),Ee||ze.forEach(function(Le,dt){Ie[dt]=Math.pow(2,ze.length-dt-1)}),Ie}}(de);if(!te)return{};var J=te.map(function(ze){return{width:j/ze,height:G/ze}}).sort(function(ze,Ie){return ze.width-Ie.width}),ae=J.findIndex(function(ze){return ze.width>=N&&ze.height>=M});ae===-1&&(ae=J.length-1);var be=O.temporalLayers?O.temporalLayers:2;if(ae===0&&be>0){var xe=j/te[0],se=G/te[0];N<.5*xe&&M<.5*se&&(be-=1),be>0&&N<.25*xe&&M<.25*se&&(be-=1)}return{consumerId:L,newPreferredSpatialLayer:Math.max(0,ae),newPreferredTemporalLayer:Math.max(0,be)}}catch{return{}}}function P(O,N){var M;return function(){for(var L=this,A=arguments.length,j=new Array(A),G=0;G<A;G++)j[G]=arguments[G];clearTimeout(M),M=setTimeout(function(){return O.apply(L,j)},N)}}},1806:(p,u,i)=>{i.d(u,{$Q:()=>g,T4:()=>_,Ts:()=>o,ue:()=>f});var g="vk_e2ee",_={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},f=["vp8","vp9","h264","av1"],o=["opus"]},1919:(p,u,i)=>{i.r(u),i.d(u,{default:()=>zs});var g={};i.r(g),i.d(g,{Decoder:()=>Ae,Encoder:()=>ct,PacketType:()=>je,protocol:()=>it});var _=i(296),f=i(2284),o=i(467),w=i(3029),l=i(2901),y=i(4467),d=i(4756),m=i.n(d);const S=Object.create(null);S.open="0",S.close="1",S.ping="2",S.pong="3",S.message="4",S.upgrade="5",S.noop="6";const x=Object.create(null);Object.keys(S).forEach(q=>{x[S[q]]=q});const k={type:"error",data:"parser error"},I=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",T=typeof ArrayBuffer=="function",C=q=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(q):q&&q.buffer instanceof ArrayBuffer,E=({type:q,data:F},$,Y)=>I&&F instanceof Blob?$?Y(F):c(F,Y):T&&(F instanceof ArrayBuffer||C(F))?$?Y(F):c(new Blob([F]),Y):Y(S[q]+(F||"")),c=(q,F)=>{const $=new FileReader;return $.onload=function(){const Y=$.result.split(",")[1];F("b"+(Y||""))},$.readAsDataURL(q)};function b(q){return q instanceof Uint8Array?q:q instanceof ArrayBuffer?new Uint8Array(q):new Uint8Array(q.buffer,q.byteOffset,q.byteLength)}let R;const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let q=0;q<64;q++)O[P.charCodeAt(q)]=q;const N=typeof ArrayBuffer=="function",M=(q,F)=>{if(typeof q!="string")return{type:"message",data:A(q,F)};const $=q.charAt(0);return $==="b"?{type:"message",data:L(q.substring(1),F)}:x[$]?q.length>1?{type:x[$],data:q.substring(1)}:{type:x[$]}:k},L=(q,F)=>{if(N){const $=(Y=>{let fe,ke,tt,lt,He,zt=.75*Y.length,ot=Y.length,Tt=0;Y[Y.length-1]==="="&&(zt--,Y[Y.length-2]==="="&&zt--);const Zt=new ArrayBuffer(zt),pn=new Uint8Array(Zt);for(fe=0;fe<ot;fe+=4)ke=O[Y.charCodeAt(fe)],tt=O[Y.charCodeAt(fe+1)],lt=O[Y.charCodeAt(fe+2)],He=O[Y.charCodeAt(fe+3)],pn[Tt++]=ke<<2|tt>>4,pn[Tt++]=(15&tt)<<4|lt>>2,pn[Tt++]=(3&lt)<<6|63&He;return Zt})(q);return A($,F)}return{base64:!0,data:q}},A=(q,F)=>F==="blob"?q instanceof Blob?q:new Blob([q]):q instanceof ArrayBuffer?q:q.buffer,j="";function G(){return new TransformStream({transform(q,F){(function($,Y){I&&$.data instanceof Blob?$.data.arrayBuffer().then(b).then(Y):T&&($.data instanceof ArrayBuffer||C($.data))?Y(b($.data)):E($,!1,fe=>{R||(R=new TextEncoder),Y(R.encode(fe))})})(q,$=>{const Y=$.length;let fe;if(Y<126)fe=new Uint8Array(1),new DataView(fe.buffer).setUint8(0,Y);else if(Y<65536){fe=new Uint8Array(3);const ke=new DataView(fe.buffer);ke.setUint8(0,126),ke.setUint16(1,Y)}else{fe=new Uint8Array(9);const ke=new DataView(fe.buffer);ke.setUint8(0,127),ke.setBigUint64(1,BigInt(Y))}q.data&&typeof q.data!="string"&&(fe[0]|=128),F.enqueue(fe),F.enqueue($)})}})}let de;function te(q){return q.reduce((F,$)=>F+$.length,0)}function J(q,F){if(q[0].length===F)return q.shift();const $=new Uint8Array(F);let Y=0;for(let fe=0;fe<F;fe++)$[fe]=q[0][Y++],Y===q[0].length&&(q.shift(),Y=0);return q.length&&Y<q[0].length&&(q[0]=q[0].slice(Y)),$}function ae(q){if(q)return function(F){for(var $ in ae.prototype)F[$]=ae.prototype[$];return F}(q)}ae.prototype.on=ae.prototype.addEventListener=function(q,F){return this._callbacks=this._callbacks||{},(this._callbacks["$"+q]=this._callbacks["$"+q]||[]).push(F),this},ae.prototype.once=function(q,F){function $(){this.off(q,$),F.apply(this,arguments)}return $.fn=F,this.on(q,$),this},ae.prototype.off=ae.prototype.removeListener=ae.prototype.removeAllListeners=ae.prototype.removeEventListener=function(q,F){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var $,Y=this._callbacks["$"+q];if(!Y)return this;if(arguments.length==1)return delete this._callbacks["$"+q],this;for(var fe=0;fe<Y.length;fe++)if(($=Y[fe])===F||$.fn===F){Y.splice(fe,1);break}return Y.length===0&&delete this._callbacks["$"+q],this},ae.prototype.emit=function(q){this._callbacks=this._callbacks||{};for(var F=new Array(arguments.length-1),$=this._callbacks["$"+q],Y=1;Y<arguments.length;Y++)F[Y-1]=arguments[Y];if($){Y=0;for(var fe=($=$.slice(0)).length;Y<fe;++Y)$[Y].apply(this,F)}return this},ae.prototype.emitReserved=ae.prototype.emit,ae.prototype.listeners=function(q){return this._callbacks=this._callbacks||{},this._callbacks["$"+q]||[]},ae.prototype.hasListeners=function(q){return!!this.listeners(q).length};const be=typeof Promise=="function"&&typeof Promise.resolve=="function"?q=>Promise.resolve().then(q):(q,F)=>F(q,0),xe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function se(q,...F){return F.reduce(($,Y)=>(q.hasOwnProperty(Y)&&($[Y]=q[Y]),$),{})}const ze=xe.setTimeout,Ie=xe.clearTimeout;function Ne(q,F){F.useNativeTimers?(q.setTimeoutFn=ze.bind(xe),q.clearTimeoutFn=Ie.bind(xe)):(q.setTimeoutFn=xe.setTimeout.bind(xe),q.clearTimeoutFn=xe.clearTimeout.bind(xe))}function Ee(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Le extends Error{constructor(F,$,Y){super(F),this.description=$,this.context=Y,this.type="TransportError"}}class dt extends ae{constructor(F){super(),this.writable=!1,Ne(this,F),this.opts=F,this.query=F.query,this.socket=F.socket,this.supportsBinary=!F.forceBase64}onError(F,$,Y){return super.emitReserved("error",new Le(F,$,Y)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(F){this.readyState==="open"&&this.write(F)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(F){const $=M(F,this.socket.binaryType);this.onPacket($)}onPacket(F){super.emitReserved("packet",F)}onClose(F){this.readyState="closed",super.emitReserved("close",F)}pause(F){}createUri(F,$={}){return F+"://"+this._hostname()+this._port()+this.opts.path+this._query($)}_hostname(){const F=this.opts.hostname;return F.indexOf(":")===-1?F:"["+F+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(F){const $=function(Y){let fe="";for(let ke in Y)Y.hasOwnProperty(ke)&&(fe.length&&(fe+="&"),fe+=encodeURIComponent(ke)+"="+encodeURIComponent(Y[ke]));return fe}(F);return $.length?"?"+$:""}}class cr extends dt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(F){this.readyState="pausing";const $=()=>{this.readyState="paused",F()};if(this._polling||!this.writable){let Y=0;this._polling&&(Y++,this.once("pollComplete",function(){--Y||$()})),this.writable||(Y++,this.once("drain",function(){--Y||$()}))}else $()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(F){(($,Y)=>{const fe=$.split(j),ke=[];for(let tt=0;tt<fe.length;tt++){const lt=M(fe[tt],Y);if(ke.push(lt),lt.type==="error")break}return ke})(F,this.socket.binaryType).forEach($=>{if(this.readyState==="opening"&&$.type==="open"&&this.onOpen(),$.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket($)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const F=()=>{this.write([{type:"close"}])};this.readyState==="open"?F():this.once("open",F)}write(F){this.writable=!1,(($,Y)=>{const fe=$.length,ke=new Array(fe);let tt=0;$.forEach((lt,He)=>{E(lt,!1,zt=>{ke[He]=zt,++tt===fe&&Y(ke.join(j))})})})(F,$=>{this.doWrite($,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const F=this.opts.secure?"https":"http",$=this.query||{};return this.opts.timestampRequests!==!1&&($[this.opts.timestampParam]=Ee()),this.supportsBinary||$.sid||($.b64=1),this.createUri(F,$)}}let gr=!1;try{gr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ot=gr;function xr(){}class vr extends cr{constructor(F){if(super(F),typeof location<"u"){const $=location.protocol==="https:";let Y=location.port;Y||(Y=$?"443":"80"),this.xd=typeof location<"u"&&F.hostname!==location.hostname||Y!==F.port}}doWrite(F,$){const Y=this.request({method:"POST",data:F});Y.on("success",$),Y.on("error",(fe,ke)=>{this.onError("xhr post error",fe,ke)})}doPoll(){const F=this.request();F.on("data",this.onData.bind(this)),F.on("error",($,Y)=>{this.onError("xhr poll error",$,Y)}),this.pollXhr=F}}class Bt extends ae{constructor(F,$,Y){super(),this.createRequest=F,Ne(this,Y),this._opts=Y,this._method=Y.method||"GET",this._uri=$,this._data=Y.data!==void 0?Y.data:null,this._create()}_create(){var F;const $=se(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");$.xdomain=!!this._opts.xd;const Y=this._xhr=this.createRequest($);try{Y.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){Y.setDisableHeaderCheck&&Y.setDisableHeaderCheck(!0);for(let fe in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(fe)&&Y.setRequestHeader(fe,this._opts.extraHeaders[fe])}}catch{}if(this._method==="POST")try{Y.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{Y.setRequestHeader("Accept","*/*")}catch{}(F=this._opts.cookieJar)===null||F===void 0||F.addCookies(Y),"withCredentials"in Y&&(Y.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(Y.timeout=this._opts.requestTimeout),Y.onreadystatechange=()=>{var fe;Y.readyState===3&&((fe=this._opts.cookieJar)===null||fe===void 0||fe.parseCookies(Y.getResponseHeader("set-cookie"))),Y.readyState===4&&(Y.status===200||Y.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof Y.status=="number"?Y.status:0)},0))},Y.send(this._data)}catch(fe){return void this.setTimeoutFn(()=>{this._onError(fe)},0)}typeof document<"u"&&(this._index=Bt.requestsCount++,Bt.requests[this._index]=this)}_onError(F){this.emitReserved("error",F,this._xhr),this._cleanup(!0)}_cleanup(F){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=xr,F)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Bt.requests[this._index],this._xhr=null}}_onLoad(){const F=this._xhr.responseText;F!==null&&(this.emitReserved("data",F),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Bt.requestsCount=0,Bt.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Qr):typeof addEventListener=="function"&&addEventListener("onpagehide"in xe?"pagehide":"unload",Qr,!1));function Qr(){for(let q in Bt.requests)Bt.requests.hasOwnProperty(q)&&Bt.requests[q].abort()}const Nt=function(){const q=Kt({xdomain:!1});return q&&q.responseType!==null}();function Kt(q){const F=q.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!F||Ot))return new XMLHttpRequest}catch{}if(!F)try{return new xe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Wr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tn extends dt{get name(){return"websocket"}doOpen(){const F=this.uri(),$=this.opts.protocols,Y=Wr?{}:se(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(Y.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(F,$,Y)}catch(fe){return this.emitReserved("error",fe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=F=>this.onClose({description:"websocket connection closed",context:F}),this.ws.onmessage=F=>this.onData(F.data),this.ws.onerror=F=>this.onError("websocket error",F)}write(F){this.writable=!1;for(let $=0;$<F.length;$++){const Y=F[$],fe=$===F.length-1;E(Y,this.supportsBinary,ke=>{try{this.doWrite(Y,ke)}catch{}fe&&be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const F=this.opts.secure?"wss":"ws",$=this.query||{};return this.opts.timestampRequests&&($[this.opts.timestampParam]=Ee()),this.supportsBinary||($.b64=1),this.createUri(F,$)}}const Nr=xe.WebSocket||xe.MozWebSocket,Vr={websocket:class extends tn{createSocket(q,F,$){return Wr?new Nr(q,F,$):F?new Nr(q,F):new Nr(q)}doWrite(q,F){this.ws.send(F)}},webtransport:class extends dt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(q){return this.emitReserved("error",q)}this._transport.closed.then(()=>{this.onClose()}).catch(q=>{this.onError("webtransport error",q)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(q=>{const F=function(tt,lt){de||(de=new TextDecoder);const He=[];let zt=0,ot=-1,Tt=!1;return new TransformStream({transform(Zt,pn){for(He.push(Zt);;){if(zt===0){if(te(He)<1)break;const Zr=J(He,1);Tt=!(128&~Zr[0]),ot=127&Zr[0],zt=ot<126?3:ot===126?1:2}else if(zt===1){if(te(He)<2)break;const Zr=J(He,2);ot=new DataView(Zr.buffer,Zr.byteOffset,Zr.length).getUint16(0),zt=3}else if(zt===2){if(te(He)<8)break;const Zr=J(He,8),ns=new DataView(Zr.buffer,Zr.byteOffset,Zr.length),Se=ns.getUint32(0);if(Se>Math.pow(2,21)-1){pn.enqueue(k);break}ot=Se*Math.pow(2,32)+ns.getUint32(4),zt=3}else{if(te(He)<ot)break;const Zr=J(He,ot);pn.enqueue(M(Tt?Zr:de.decode(Zr),lt)),zt=0}if(ot===0||ot>tt){pn.enqueue(k);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),$=q.readable.pipeThrough(F).getReader(),Y=G();Y.readable.pipeTo(q.writable),this._writer=Y.writable.getWriter();const fe=()=>{$.read().then(({done:tt,value:lt})=>{tt||(this.onPacket(lt),fe())}).catch(tt=>{})};fe();const ke={type:"open"};this.query.sid&&(ke.data=`{"sid":"${this.query.sid}"}`),this._writer.write(ke).then(()=>this.onOpen())})})}write(q){this.writable=!1;for(let F=0;F<q.length;F++){const $=q[F],Y=F===q.length-1;this._writer.write($).then(()=>{Y&&be(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var q;(q=this._transport)===null||q===void 0||q.close()}},polling:class extends vr{constructor(q){super(q);const F=q&&q.forceBase64;this.supportsBinary=Nt&&!F}request(q={}){return Object.assign(q,{xd:this.xd},this.opts),new Bt(Kt,this.uri(),q)}}},rn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,It=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nn(q){if(q.length>8e3)throw"URI too long";const F=q,$=q.indexOf("["),Y=q.indexOf("]");$!=-1&&Y!=-1&&(q=q.substring(0,$)+q.substring($,Y).replace(/:/g,";")+q.substring(Y,q.length));let fe=rn.exec(q||""),ke={},tt=14;for(;tt--;)ke[It[tt]]=fe[tt]||"";return $!=-1&&Y!=-1&&(ke.source=F,ke.host=ke.host.substring(1,ke.host.length-1).replace(/;/g,":"),ke.authority=ke.authority.replace("[","").replace("]","").replace(/;/g,":"),ke.ipv6uri=!0),ke.pathNames=function(lt,He){const zt=/\/{2,9}/g,ot=He.replace(zt,"/").split("/");return He.slice(0,1)!="/"&&He.length!==0||ot.splice(0,1),He.slice(-1)=="/"&&ot.splice(ot.length-1,1),ot}(0,ke.path),ke.queryKey=function(lt,He){const zt={};return He.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(ot,Tt,Zt){Tt&&(zt[Tt]=Zt)}),zt}(0,ke.query),ke}const Jr=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fr=[];Jr&&addEventListener("offline",()=>{Fr.forEach(q=>q())},!1);class Ar extends ae{constructor(F,$){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,F&&typeof F=="object"&&($=F,F=null),F){const Y=nn(F);$.hostname=Y.host,$.secure=Y.protocol==="https"||Y.protocol==="wss",$.port=Y.port,Y.query&&($.query=Y.query)}else $.host&&($.hostname=nn($.host).host);Ne(this,$),this.secure=$.secure!=null?$.secure:typeof location<"u"&&location.protocol==="https:",$.hostname&&!$.port&&($.port=this.secure?"443":"80"),this.hostname=$.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=$.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},$.transports.forEach(Y=>{const fe=Y.prototype.name;this.transports.push(fe),this._transportsByName[fe]=Y}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},$),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(Y){let fe={},ke=Y.split("&");for(let tt=0,lt=ke.length;tt<lt;tt++){let He=ke[tt].split("=");fe[decodeURIComponent(He[0])]=decodeURIComponent(He[1])}return fe}(this.opts.query)),Jr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(F){const $=Object.assign({},this.opts.query);$.EIO=4,$.transport=F,this.id&&($.sid=this.id);const Y=Object.assign({},this.opts,{query:$,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[F]);return new this._transportsByName[F](Y)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const F=this.opts.rememberUpgrade&&Ar.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const $=this.createTransport(F);$.open(),this.setTransport($)}setTransport(F){this.transport&&this.transport.removeAllListeners(),this.transport=F,F.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",$=>this._onClose("transport close",$))}onOpen(){this.readyState="open",Ar.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(F){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",F),this.emitReserved("heartbeat"),F.type){case"open":this.onHandshake(JSON.parse(F.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const $=new Error("server error");$.code=F.data,this._onError($);break;case"message":this.emitReserved("data",F.data),this.emitReserved("message",F.data)}}onHandshake(F){this.emitReserved("handshake",F),this.id=F.sid,this.transport.query.sid=F.sid,this._pingInterval=F.pingInterval,this._pingTimeout=F.pingTimeout,this._maxPayload=F.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const F=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+F,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},F),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const F=this._getWritablePackets();this.transport.send(F),this._prevBufferLen=F.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let F=1;for(let Y=0;Y<this.writeBuffer.length;Y++){const fe=this.writeBuffer[Y].data;if(fe&&(F+=typeof($=fe)=="string"?function(ke){let tt=0,lt=0;for(let He=0,zt=ke.length;He<zt;He++)tt=ke.charCodeAt(He),tt<128?lt+=1:tt<2048?lt+=2:tt<55296||tt>=57344?lt+=3:(He++,lt+=4);return lt}($):Math.ceil(1.33*($.byteLength||$.size))),Y>0&&F>this._maxPayload)return this.writeBuffer.slice(0,Y);F+=2}var $;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const F=Date.now()>this._pingTimeoutTime;return F&&(this._pingTimeoutTime=0,be(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),F}write(F,$,Y){return this._sendPacket("message",F,$,Y),this}send(F,$,Y){return this._sendPacket("message",F,$,Y),this}_sendPacket(F,$,Y,fe){if(typeof $=="function"&&(fe=$,$=void 0),typeof Y=="function"&&(fe=Y,Y=null),this.readyState==="closing"||this.readyState==="closed")return;(Y=Y||{}).compress=Y.compress!==!1;const ke={type:F,data:$,options:Y};this.emitReserved("packetCreate",ke),this.writeBuffer.push(ke),fe&&this.once("flush",fe),this.flush()}close(){const F=()=>{this._onClose("forced close"),this.transport.close()},$=()=>{this.off("upgrade",$),this.off("upgradeError",$),F()},Y=()=>{this.once("upgrade",$),this.once("upgradeError",$)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?Y():F()}):this.upgrading?Y():F()),this}_onError(F){if(Ar.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",F),this._onClose("transport error",F)}_onClose(F,$){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Jr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const Y=Fr.indexOf(this._offlineEventListener);Y!==-1&&Fr.splice(Y,1)}this.readyState="closed",this.id=null,this.emitReserved("close",F,$),this.writeBuffer=[],this._prevBufferLen=0}}}Ar.protocol=4;class hn extends Ar{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let F=0;F<this._upgrades.length;F++)this._probe(this._upgrades[F])}_probe(F){let $=this.createTransport(F),Y=!1;Ar.priorWebsocketSuccess=!1;const fe=()=>{Y||($.send([{type:"ping",data:"probe"}]),$.once("packet",Tt=>{if(!Y)if(Tt.type==="pong"&&Tt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",$),!$)return;Ar.priorWebsocketSuccess=$.name==="websocket",this.transport.pause(()=>{Y||this.readyState!=="closed"&&(ot(),this.setTransport($),$.send([{type:"upgrade"}]),this.emitReserved("upgrade",$),$=null,this.upgrading=!1,this.flush())})}else{const Zt=new Error("probe error");Zt.transport=$.name,this.emitReserved("upgradeError",Zt)}}))};function ke(){Y||(Y=!0,ot(),$.close(),$=null)}const tt=Tt=>{const Zt=new Error("probe error: "+Tt);Zt.transport=$.name,ke(),this.emitReserved("upgradeError",Zt)};function lt(){tt("transport closed")}function He(){tt("socket closed")}function zt(Tt){$&&Tt.name!==$.name&&ke()}const ot=()=>{$.removeListener("open",fe),$.removeListener("error",tt),$.removeListener("close",lt),this.off("close",He),this.off("upgrading",zt)};$.once("open",fe),$.once("error",tt),$.once("close",lt),this.once("close",He),this.once("upgrading",zt),this._upgrades.indexOf("webtransport")!==-1&&F!=="webtransport"?this.setTimeoutFn(()=>{Y||$.open()},200):$.open()}onHandshake(F){this._upgrades=this._filterUpgrades(F.upgrades),super.onHandshake(F)}_filterUpgrades(F){const $=[];for(let Y=0;Y<F.length;Y++)~this.transports.indexOf(F[Y])&&$.push(F[Y]);return $}}class Hr extends hn{constructor(F,$={}){const Y=typeof F=="object"?F:$;(!Y.transports||Y.transports&&typeof Y.transports[0]=="string")&&(Y.transports=(Y.transports||["polling","websocket","webtransport"]).map(fe=>Vr[fe]).filter(fe=>!!fe)),super(F,Y)}}const wn=typeof ArrayBuffer=="function",fn=Object.prototype.toString,Tn=typeof Blob=="function"||typeof Blob<"u"&&fn.call(Blob)==="[object BlobConstructor]",Sn=typeof File=="function"||typeof File<"u"&&fn.call(File)==="[object FileConstructor]";function Ft(q){return wn&&(q instanceof ArrayBuffer||(F=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(F):F.buffer instanceof ArrayBuffer)(q))||Tn&&q instanceof Blob||Sn&&q instanceof File}function Pn(q,F){if(!q||typeof q!="object")return!1;if(Array.isArray(q)){for(let $=0,Y=q.length;$<Y;$++)if(Pn(q[$]))return!0;return!1}if(Ft(q))return!0;if(q.toJSON&&typeof q.toJSON=="function"&&arguments.length===1)return Pn(q.toJSON(),!0);for(const $ in q)if(Object.prototype.hasOwnProperty.call(q,$)&&Pn(q[$]))return!0;return!1}function Gn(q){const F=[],$=q.data,Y=q;return Y.data=sn($,F),Y.attachments=F.length,{packet:Y,buffers:F}}function sn(q,F){if(!q)return q;if(Ft(q)){const $={_placeholder:!0,num:F.length};return F.push(q),$}if(Array.isArray(q)){const $=new Array(q.length);for(let Y=0;Y<q.length;Y++)$[Y]=sn(q[Y],F);return $}if(typeof q=="object"&&!(q instanceof Date)){const $={};for(const Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&($[Y]=sn(q[Y],F));return $}return q}function er(q,F){return q.data=Ge(q.data,F),delete q.attachments,q}function Ge(q,F){if(!q)return q;if(q&&q._placeholder===!0){if(typeof q.num=="number"&&q.num>=0&&q.num<F.length)return F[q.num];throw new Error("illegal attachments")}if(Array.isArray(q))for(let $=0;$<q.length;$++)q[$]=Ge(q[$],F);else if(typeof q=="object")for(const $ in q)Object.prototype.hasOwnProperty.call(q,$)&&(q[$]=Ge(q[$],F));return q}const Me=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],it=5;var je;(function(q){q[q.CONNECT=0]="CONNECT",q[q.DISCONNECT=1]="DISCONNECT",q[q.EVENT=2]="EVENT",q[q.ACK=3]="ACK",q[q.CONNECT_ERROR=4]="CONNECT_ERROR",q[q.BINARY_EVENT=5]="BINARY_EVENT",q[q.BINARY_ACK=6]="BINARY_ACK"})(je||(je={}));class ct{constructor(F){this.replacer=F}encode(F){return F.type!==je.EVENT&&F.type!==je.ACK||!Pn(F)?[this.encodeAsString(F)]:this.encodeAsBinary({type:F.type===je.EVENT?je.BINARY_EVENT:je.BINARY_ACK,nsp:F.nsp,data:F.data,id:F.id})}encodeAsString(F){let $=""+F.type;return F.type!==je.BINARY_EVENT&&F.type!==je.BINARY_ACK||($+=F.attachments+"-"),F.nsp&&F.nsp!=="/"&&($+=F.nsp+","),F.id!=null&&($+=F.id),F.data!=null&&($+=JSON.stringify(F.data,this.replacer)),$}encodeAsBinary(F){const $=Gn(F),Y=this.encodeAsString($.packet),fe=$.buffers;return fe.unshift(Y),fe}}function tr(q){return Object.prototype.toString.call(q)==="[object Object]"}class Ae extends ae{constructor(F){super(),this.reviver=F}add(F){let $;if(typeof F=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");$=this.decodeString(F);const Y=$.type===je.BINARY_EVENT;Y||$.type===je.BINARY_ACK?($.type=Y?je.EVENT:je.ACK,this.reconstructor=new Gt($),$.attachments===0&&super.emitReserved("decoded",$)):super.emitReserved("decoded",$)}else{if(!Ft(F)&&!F.base64)throw new Error("Unknown type: "+F);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");$=this.reconstructor.takeBinaryData(F),$&&(this.reconstructor=null,super.emitReserved("decoded",$))}}decodeString(F){let $=0;const Y={type:Number(F.charAt(0))};if(je[Y.type]===void 0)throw new Error("unknown packet type "+Y.type);if(Y.type===je.BINARY_EVENT||Y.type===je.BINARY_ACK){const ke=$+1;for(;F.charAt(++$)!=="-"&&$!=F.length;);const tt=F.substring(ke,$);if(tt!=Number(tt)||F.charAt($)!=="-")throw new Error("Illegal attachments");Y.attachments=Number(tt)}if(F.charAt($+1)==="/"){const ke=$+1;for(;++$&&!(F.charAt($)===","||$===F.length););Y.nsp=F.substring(ke,$)}else Y.nsp="/";const fe=F.charAt($+1);if(fe!==""&&Number(fe)==fe){const ke=$+1;for(;++$;){const tt=F.charAt($);if(tt==null||Number(tt)!=tt){--$;break}if($===F.length)break}Y.id=Number(F.substring(ke,$+1))}if(F.charAt(++$)){const ke=this.tryParse(F.substr($));if(!Ae.isPayloadValid(Y.type,ke))throw new Error("invalid payload");Y.data=ke}return Y}tryParse(F){try{return JSON.parse(F,this.reviver)}catch{return!1}}static isPayloadValid(F,$){switch(F){case je.CONNECT:return tr($);case je.DISCONNECT:return $===void 0;case je.CONNECT_ERROR:return typeof $=="string"||tr($);case je.EVENT:case je.BINARY_EVENT:return Array.isArray($)&&(typeof $[0]=="number"||typeof $[0]=="string"&&Me.indexOf($[0])===-1);case je.ACK:case je.BINARY_ACK:return Array.isArray($)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Gt{constructor(F){this.packet=F,this.buffers=[],this.reconPack=F}takeBinaryData(F){if(this.buffers.push(F),this.buffers.length===this.reconPack.attachments){const $=er(this.reconPack,this.buffers);return this.finishedReconstruction(),$}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function jt(q,F,$){return q.on(F,$),function(){q.off(F,$)}}const hr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ir extends ae{constructor(F,$,Y){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=F,this.nsp=$,Y&&Y.auth&&(this.auth=Y.auth),this._opts=Object.assign({},Y),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const F=this.io;this.subs=[jt(F,"open",this.onopen.bind(this)),jt(F,"packet",this.onpacket.bind(this)),jt(F,"error",this.onerror.bind(this)),jt(F,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...F){return F.unshift("message"),this.emit.apply(this,F),this}emit(F,...$){var Y,fe,ke;if(hr.hasOwnProperty(F))throw new Error('"'+F.toString()+'" is a reserved event name');if($.unshift(F),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue($),this;const tt={type:je.EVENT,data:$,options:{}};if(tt.options.compress=this.flags.compress!==!1,typeof $[$.length-1]=="function"){const zt=this.ids++,ot=$.pop();this._registerAckCallback(zt,ot),tt.id=zt}const lt=(fe=(Y=this.io.engine)===null||Y===void 0?void 0:Y.transport)===null||fe===void 0?void 0:fe.writable,He=this.connected&&!(!((ke=this.io.engine)===null||ke===void 0)&&ke._hasPingExpired());return this.flags.volatile&&!lt||(He?(this.notifyOutgoingListeners(tt),this.packet(tt)):this.sendBuffer.push(tt)),this.flags={},this}_registerAckCallback(F,$){var Y;const fe=(Y=this.flags.timeout)!==null&&Y!==void 0?Y:this._opts.ackTimeout;if(fe===void 0)return void(this.acks[F]=$);const ke=this.io.setTimeoutFn(()=>{delete this.acks[F];for(let lt=0;lt<this.sendBuffer.length;lt++)this.sendBuffer[lt].id===F&&this.sendBuffer.splice(lt,1);$.call(this,new Error("operation has timed out"))},fe),tt=(...lt)=>{this.io.clearTimeoutFn(ke),$.apply(this,lt)};tt.withError=!0,this.acks[F]=tt}emitWithAck(F,...$){return new Promise((Y,fe)=>{const ke=(tt,lt)=>tt?fe(tt):Y(lt);ke.withError=!0,$.push(ke),this.emit(F,...$)})}_addToQueue(F){let $;typeof F[F.length-1]=="function"&&($=F.pop());const Y={id:this._queueSeq++,tryCount:0,pending:!1,args:F,flags:Object.assign({fromQueue:!0},this.flags)};F.push((fe,...ke)=>{if(Y===this._queue[0])return fe!==null?Y.tryCount>this._opts.retries&&(this._queue.shift(),$&&$(fe)):(this._queue.shift(),$&&$(null,...ke)),Y.pending=!1,this._drainQueue()}),this._queue.push(Y),this._drainQueue()}_drainQueue(F=!1){if(!this.connected||this._queue.length===0)return;const $=this._queue[0];$.pending&&!F||($.pending=!0,$.tryCount++,this.flags=$.flags,this.emit.apply(this,$.args))}packet(F){F.nsp=this.nsp,this.io._packet(F)}onopen(){typeof this.auth=="function"?this.auth(F=>{this._sendConnectPacket(F)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(F){this.packet({type:je.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},F):F})}onerror(F){this.connected||this.emitReserved("connect_error",F)}onclose(F,$){this.connected=!1,delete this.id,this.emitReserved("disconnect",F,$),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(F=>{if(!this.sendBuffer.some($=>String($.id)===F)){const $=this.acks[F];delete this.acks[F],$.withError&&$.call(this,new Error("socket has been disconnected"))}})}onpacket(F){if(F.nsp===this.nsp)switch(F.type){case je.CONNECT:F.data&&F.data.sid?this.onconnect(F.data.sid,F.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case je.EVENT:case je.BINARY_EVENT:this.onevent(F);break;case je.ACK:case je.BINARY_ACK:this.onack(F);break;case je.DISCONNECT:this.ondisconnect();break;case je.CONNECT_ERROR:this.destroy();const $=new Error(F.data.message);$.data=F.data.data,this.emitReserved("connect_error",$)}}onevent(F){const $=F.data||[];F.id!=null&&$.push(this.ack(F.id)),this.connected?this.emitEvent($):this.receiveBuffer.push(Object.freeze($))}emitEvent(F){if(this._anyListeners&&this._anyListeners.length){const $=this._anyListeners.slice();for(const Y of $)Y.apply(this,F)}super.emit.apply(this,F),this._pid&&F.length&&typeof F[F.length-1]=="string"&&(this._lastOffset=F[F.length-1])}ack(F){const $=this;let Y=!1;return function(...fe){Y||(Y=!0,$.packet({type:je.ACK,id:F,data:fe}))}}onack(F){const $=this.acks[F.id];typeof $=="function"&&(delete this.acks[F.id],$.withError&&F.data.unshift(null),$.apply(this,F.data))}onconnect(F,$){this.id=F,this.recovered=$&&this._pid===$,this._pid=$,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(F=>this.emitEvent(F)),this.receiveBuffer=[],this.sendBuffer.forEach(F=>{this.notifyOutgoingListeners(F),this.packet(F)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(F=>F()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:je.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(F){return this.flags.compress=F,this}get volatile(){return this.flags.volatile=!0,this}timeout(F){return this.flags.timeout=F,this}onAny(F){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(F),this}prependAny(F){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(F),this}offAny(F){if(!this._anyListeners)return this;if(F){const $=this._anyListeners;for(let Y=0;Y<$.length;Y++)if(F===$[Y])return $.splice(Y,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(F){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(F),this}prependAnyOutgoing(F){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(F),this}offAnyOutgoing(F){if(!this._anyOutgoingListeners)return this;if(F){const $=this._anyOutgoingListeners;for(let Y=0;Y<$.length;Y++)if(F===$[Y])return $.splice(Y,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(F){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const $=this._anyOutgoingListeners.slice();for(const Y of $)Y.apply(this,F.data)}}}function Rr(q){q=q||{},this.ms=q.min||100,this.max=q.max||1e4,this.factor=q.factor||2,this.jitter=q.jitter>0&&q.jitter<=1?q.jitter:0,this.attempts=0}Rr.prototype.duration=function(){var q=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var F=Math.random(),$=Math.floor(F*this.jitter*q);q=1&Math.floor(10*F)?q+$:q-$}return 0|Math.min(q,this.max)},Rr.prototype.reset=function(){this.attempts=0},Rr.prototype.setMin=function(q){this.ms=q},Rr.prototype.setMax=function(q){this.max=q},Rr.prototype.setJitter=function(q){this.jitter=q};class Je extends ae{constructor(F,$){var Y;super(),this.nsps={},this.subs=[],F&&typeof F=="object"&&($=F,F=void 0),($=$||{}).path=$.path||"/socket.io",this.opts=$,Ne(this,$),this.reconnection($.reconnection!==!1),this.reconnectionAttempts($.reconnectionAttempts||1/0),this.reconnectionDelay($.reconnectionDelay||1e3),this.reconnectionDelayMax($.reconnectionDelayMax||5e3),this.randomizationFactor((Y=$.randomizationFactor)!==null&&Y!==void 0?Y:.5),this.backoff=new Rr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout($.timeout==null?2e4:$.timeout),this._readyState="closed",this.uri=F;const fe=$.parser||g;this.encoder=new fe.Encoder,this.decoder=new fe.Decoder,this._autoConnect=$.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(F){return arguments.length?(this._reconnection=!!F,F||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(F){return F===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=F,this)}reconnectionDelay(F){var $;return F===void 0?this._reconnectionDelay:(this._reconnectionDelay=F,($=this.backoff)===null||$===void 0||$.setMin(F),this)}randomizationFactor(F){var $;return F===void 0?this._randomizationFactor:(this._randomizationFactor=F,($=this.backoff)===null||$===void 0||$.setJitter(F),this)}reconnectionDelayMax(F){var $;return F===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=F,($=this.backoff)===null||$===void 0||$.setMax(F),this)}timeout(F){return arguments.length?(this._timeout=F,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(F){if(~this._readyState.indexOf("open"))return this;this.engine=new Hr(this.uri,this.opts);const $=this.engine,Y=this;this._readyState="opening",this.skipReconnect=!1;const fe=jt($,"open",function(){Y.onopen(),F&&F()}),ke=lt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",lt),F?F(lt):this.maybeReconnectOnOpen()},tt=jt($,"error",ke);if(this._timeout!==!1){const lt=this._timeout,He=this.setTimeoutFn(()=>{fe(),ke(new Error("timeout")),$.close()},lt);this.opts.autoUnref&&He.unref(),this.subs.push(()=>{this.clearTimeoutFn(He)})}return this.subs.push(fe),this.subs.push(tt),this}connect(F){return this.open(F)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const F=this.engine;this.subs.push(jt(F,"ping",this.onping.bind(this)),jt(F,"data",this.ondata.bind(this)),jt(F,"error",this.onerror.bind(this)),jt(F,"close",this.onclose.bind(this)),jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(F){try{this.decoder.add(F)}catch($){this.onclose("parse error",$)}}ondecoded(F){be(()=>{this.emitReserved("packet",F)},this.setTimeoutFn)}onerror(F){this.emitReserved("error",F)}socket(F,$){let Y=this.nsps[F];return Y?this._autoConnect&&!Y.active&&Y.connect():(Y=new ir(this,F,$),this.nsps[F]=Y),Y}_destroy(F){const $=Object.keys(this.nsps);for(const Y of $)if(this.nsps[Y].active)return;this._close()}_packet(F){const $=this.encoder.encode(F);for(let Y=0;Y<$.length;Y++)this.engine.write($[Y],F.options)}cleanup(){this.subs.forEach(F=>F()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(F,$){var Y;this.cleanup(),(Y=this.engine)===null||Y===void 0||Y.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",F,$),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const F=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const $=this.backoff.duration();this._reconnecting=!0;const Y=this.setTimeoutFn(()=>{F.skipReconnect||(this.emitReserved("reconnect_attempt",F.backoff.attempts),F.skipReconnect||F.open(fe=>{fe?(F._reconnecting=!1,F.reconnect(),this.emitReserved("reconnect_error",fe)):F.onreconnect()}))},$);this.opts.autoUnref&&Y.unref(),this.subs.push(()=>{this.clearTimeoutFn(Y)})}}onreconnect(){const F=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",F)}}const Wt={};function Ct(q,F){typeof q=="object"&&(F=q,q=void 0);const $=function(He,zt="",ot){let Tt=He;ot=ot||typeof location<"u"&&location,He==null&&(He=ot.protocol+"//"+ot.host),typeof He=="string"&&(He.charAt(0)==="/"&&(He=He.charAt(1)==="/"?ot.protocol+He:ot.host+He),/^(https?|wss?):\/\//.test(He)||(He=ot!==void 0?ot.protocol+"//"+He:"https://"+He),Tt=nn(He)),Tt.port||(/^(http|ws)$/.test(Tt.protocol)?Tt.port="80":/^(http|ws)s$/.test(Tt.protocol)&&(Tt.port="443")),Tt.path=Tt.path||"/";const Zt=Tt.host.indexOf(":")!==-1?"["+Tt.host+"]":Tt.host;return Tt.id=Tt.protocol+"://"+Zt+":"+Tt.port+zt,Tt.href=Tt.protocol+"://"+Zt+(ot&&ot.port===Tt.port?"":":"+Tt.port),Tt}(q,(F=F||{}).path||"/socket.io"),Y=$.source,fe=$.id,ke=$.path,tt=Wt[fe]&&ke in Wt[fe].nsps;let lt;return F.forceNew||F["force new connection"]||F.multiplex===!1||tt?lt=new Je(Y,F):(Wt[fe]||(Wt[fe]=new Je(Y,F)),lt=Wt[fe]),$.query&&!F.query&&(F.query=$.queryKey),lt.socket($.path,F)}Object.assign(Ct,{Manager:Je,Socket:ir,io:Ct,connect:Ct});var Ut=i(76),Ir=i(7833),Er=i.n(Ir),Mr="mediasoup-demo",yr=function(){return(0,l.A)(function q(F){(0,w.A)(this,q),F?(this._debug=Er()("".concat(Mr,":").concat(F)),this._warn=Er()("".concat(Mr,":WARN:").concat(F)),this._error=Er()("".concat(Mr,":ERROR:").concat(F))):(this._debug=Er()(Mr),this._warn=Er()("".concat(Mr,":WARN")),this._error=Er()("".concat(Mr,":ERROR"))),Er().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}(),fr=i(1396),zr=fr.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),Wn=fr.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function Yn(q){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,o.A)(m().mark(function q(F){var $,Y,fe,ke,tt,lt,He,zt,ot,Tt,Zt,pn,Zr,ns,Se;return m().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return $=F.roomId,Y=F.secret,fe=F.signalingBaseUrl,ke="call-api.videosdk.live",tt=[],lt=null,He={},zt={},ot={},Tt=null,Zt=null,pn=null,Dt.next=12,fetch("https://".concat(fe,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:Y,"Content-Type":"application/json"},body:JSON.stringify({roomId:$})}).then(function(Eo){return Eo.json()}).catch(function(Eo){return{}});case 12:return Zr=Dt.sent,(ns=Zr.data)&&(ke=ns.baseUrl,Se=ns.observability,tt=As(ns.iceServers),lt=Se.jwt,He=Se.traces,zt=Se.logs,ot=Se.metaData,Tt=ns.signalingUrl,pn=ns.socketPath,Zt=ns.socketUrl),Dt.abrupt("return",{baseUrl:ke,iceServers:tt,observabilityJwt:lt,traces:He,logs:zt,metaData:ot,signalingUrl:Tt,socketPath:pn,socketUrl:Zt});case 16:case"end":return Dt.stop()}},q)}))).apply(this,arguments)}function As(q){try{var F=fr.AES.decrypt(q,zr,{iv:Wn,mode:fr.mode.CBC,padding:fr.pad.ZeroPadding}).toString(fr.enc.Utf8);return JSON.parse(F)}catch{return[]}}var Xs=i(2215),ia=i.n(Xs),Zs="mediasoup-demo.user",Qn="mediasoup-demo.devices";function Jn(q){var F=q.displayName;ia().set(Zs,{displayName:F})}function wa(){return ia().getJSON(Qn)}var Et=i(2211),Xt=i.n(Et),Vt=function(q){return{type:"SET_ROOM_STATE",payload:{state:q}}},gn=function(q){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:q}}},nr=function(q){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:q}}},mr=function(q){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:q.canSendMic,canSendWebcam:q.canSendWebcam}}},an=function(q){return{type:"SET_DISPLAY_NAME",payload:{displayName:q}}},Sr=function(q){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:q}}},_r=function(q){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:q}}},Xr=function(q){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:q}}},ps=function(q){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:q}}},xn=function(q){return{type:"ADD_PRODUCER",payload:{producer:q}}},On=function(q){return{type:"REMOVE_PRODUCER",payload:{producerId:q}}},Is=function(q,F){return{type:"SET_PRODUCER_TRACK",payload:{producerId:q,track:F}}},is=function(q,F){return{type:"SET_PRODUCER_SCORE",payload:{producerId:q,score:F}}},Sa=function(q){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:q}}},Ds=function(q){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:q}}},Ja=function(q){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:q}}},Vs=function(q){return{type:"ADD_PEER",payload:{peer:q}}},hi=function(q){return{type:"REMOVE_PEER",payload:{peerId:q}}},Ii=function(q,F){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:q,peerId:F}}},co=function(q,F){return{type:"ADD_CONSUMER",payload:{consumer:q,peerId:F}}},lo=function(q,F){return{type:"REMOVE_CONSUMER",payload:{consumerId:q,peerId:F}}},xa=function(q,F){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:q,originator:F}}},uo=function(q,F){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:q,originator:F}}},vc=function(q,F,$){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:q,spatialLayer:F,temporalLayer:$}}},yc=function(q,F,$){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:q,spatialLayer:F,temporalLayer:$}}},po=function(q,F){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:q,priority:F}}},ho=function(q,F){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:q,score:F}}},_c=function(q,F){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:q,peerId:F}}},fo=function(q,F){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:q,peerId:F}}},rr=function(q){var F=q.type,$=F===void 0?"info":F,Y=q.text,fe=q.title,ke=q.timeout;if(!ke)switch($){case"info":ke=3e3;break;case"error":ke=5e3}var tt={id:Xt()({length:6}).toLowerCase(),type:$,title:fe,text:Y,timeout:ke};return function(lt){lt(function(He){return{type:"ADD_NOTIFICATION",payload:{notification:He}}}(tt)),setTimeout(function(){lt({type:"REMOVE_NOTIFICATION",payload:{notificationId:tt.id}})},ke)}},mo=i(7007),go=i(1803),Ma=i(9027),lr=i(7080),bc="CONNECTING",vo="CONNECTED",wc="RECONNECTING",Sc="DISCONNECTED",xc=i(5414),xs=i(2107),Rc=i(5071),yo=i(5458),oa=Array(32);function Di(){for(var q=0;q<16;q++)oa[q]=Math.floor(16*Math.random())+48,oa[q]>=58&&(oa[q]+=39);return String.fromCharCode.apply(null,oa.slice(0,16))}function La(){var q=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(q)}function _o(q,F){var $=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);F&&(Y=Y.filter(function(fe){return Object.getOwnPropertyDescriptor(q,fe).enumerable})),$.push.apply($,Y)}return $}function bo(q){for(var F=1;F<arguments.length;F++){var $=arguments[F]!=null?arguments[F]:{};F%2?_o(Object($),!0).forEach(function(Y){(0,y.A)(q,Y,$[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors($)):_o(Object($)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor($,Y))})}return q}var Ec=function(){return(0,l.A)(function q(F){var $=this,Y=F.roomId,fe=F.peerId,ke=F.sdkName,tt=F.observabilityJwt,lt=F.metaData,He=F.traces;(0,w.A)(this,q),this._traceId=function(){for(var ot=0;ot<32;ot++)oa[ot]=Math.floor(16*Math.random())+48,oa[ot]>=58&&(oa[ot]+=39);return String.fromCharCode.apply(null,oa.slice(0,32))}(),this._rootSpanId=Di(),this._observabilityJwt=tt,this._tracesEnabled=He.enabled,this._tracesEndpoint=He.endPoint;var zt=function(ot){for(var Tt="0123456789abcdefghijklmnopqrstuvwxyz",Zt="",pn=ot;pn>0;pn--)Zt+=Tt[Math.floor(36*Math.random())];return Zt}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.9"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:zt},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(Y,fe,ke,lt),setInterval(function(){$.processQueue()},4e3))},[{key:"addRootSpan",value:function(q,F,$,Y){var fe={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(q,"_peer_").concat(F,"_sdk_").concat($),kind:1,startTimeUnixNano:La(),endTimeUnixNano:La(),attributes:[{key:"roomId",value:{stringValue:q}},{key:"peerId",value:{stringValue:F}},{key:"sdkName",value:{stringValue:$}},{key:"userId",value:{stringValue:Y.userId}},{key:"email",value:{stringValue:Y.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(fe)}},{key:"addSpanToTrace",value:function(q){this._spans.push(q)}},{key:"trace",value:function(q){var F=q.spanName,$=q.attributes,Y=$===void 0?{}:$,fe=q.span,ke=fe===void 0?void 0:fe;if(this._tracesEnabled){var tt=Di(),lt=La(),He={traceId:this._traceId,spanId:tt,parentSpanId:ke||this._rootSpanId,name:F,kind:1,startTimeUnixNano:lt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(Y).length>0&&(He.attributes=Object.entries(Y).map(function(zt){var ot=(0,_.A)(zt,2);return{key:ot[0],value:{stringValue:ot[1]}}})),this.addSpanToTrace(He),tt}}},{key:"traceAutoComplete",value:function(q){var F=q.spanName,$=q.attributes,Y=$===void 0?{}:$,fe=q.status,ke=fe===void 0?1:fe,tt=q.span,lt=tt===void 0?void 0:tt,He=q.message,zt=He===void 0?"SUCCESS":He;if(this._tracesEnabled){var ot=Di(),Tt=La(),Zt=La(),pn={traceId:this._traceId,spanId:ot,parentSpanId:lt||this._rootSpanId,name:F,kind:1,startTimeUnixNano:Tt,endTimeUnixNano:Zt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:ke,message:zt}};Object.keys(Y).length>0&&(pn.attributes=Object.entries(Y).map(function(Zr){var ns=(0,_.A)(Zr,2);return{key:ns[0],value:{stringValue:ns[1]}}})),this.addSpanToTrace(pn)}}},{key:"completeSpan",value:function(q){var F=q.span,$=q.status,Y=q.message,fe=q.attributes,ke=fe===void 0?{}:fe;if(this._tracesEnabled){var tt=La();this._spans=this._spans.map(function(lt){if(lt.spanId!==F)return lt;var He=Object.entries(ke).map(function(zt){var ot=(0,_.A)(zt,2);return{key:ot[0],value:{stringValue:ot[1]}}});return lt.attributes=lt.attributes?[].concat((0,yo.A)(lt.attributes),(0,yo.A)(He)):He,bo(bo({},lt),{},{status:{code:$,message:Y},endTimeUnixNano:tt})})}}},{key:"processQueue",value:function(){var q=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var F={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,F).then(function(){var $=(0,o.A)(m().mark(function Y(fe){return m().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return q._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],ke.next=3,fe.text();case 3:return ke.abrupt("return",ke.sent);case 4:case"end":return ke.stop()}},Y)}));return function(Y){return $.apply(this,arguments)}}()).then(function($){}).catch(function($){q._spans=q._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",$)})}}}])}();function wo(q,F){var $=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);F&&(Y=Y.filter(function(fe){return Object.getOwnPropertyDescriptor(q,fe).enumerable})),$.push.apply($,Y)}return $}function Mi(q){for(var F=1;F<arguments.length;F++){var $=arguments[F]!=null?arguments[F]:{};F%2?wo(Object($),!0).forEach(function(Y){(0,y.A)(q,Y,$[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors($)):wo(Object($)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor($,Y))})}return q}var kc=function(){return(0,l.A)(function F($){var Y=$.roomId,fe=$.peerId,ke=$.logs,tt=$.observabilityJwt,lt=$.deviceInfo,He=$.sessionId,zt=$.debugMode;(0,w.A)(this,F);var ot=lt.browserUserAgent,Tt=lt.deviceUserAgent,Zt=lt.platform;this._peerId=fe,this._roomId=Y,this._logs=ke,this._observabilityJwt=tt,this._deviceInfo=lt,this._sessionId=He,this._debugMode=zt,this.browserOrDeviceInfo=ot?{browserName:ot.browser.name,browserVersion:ot.browser.version,osName:ot.os.name,osVersion:ot.os.version,platform:Zt}:Tt?Mi({platform:Zt},Tt):null},[{key:"pushLogs",value:(q=(0,o.A)(m().mark(function F($){var Y,fe,ke,tt,lt,He,zt,ot;return m().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(Y=$.logType,fe=$.logText,ke=$.attributes,tt=$.dashboardLog,lt=tt!==void 0&&tt,He=this._logs,zt=He.enabled,ot=He.endPoint,!zt){Tt.next=8;break}return Tt.next=5,fetch(ot,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:Y,logText:fe,attributes:Mi(Mi({},ke),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:lt})}).then(function(Zt){return Zt.json()}).catch(function(Zt){return console.log("error",Zt),{}});case 5:return Tt.abrupt("return",Tt.sent);case 8:return Tt.abrupt("return",null);case 9:case"end":return Tt.stop()}},F,this)})),function(F){return q.apply(this,arguments)})}]);var q}(),Cc=i(4973),Li=i(388),ja=i(3954),ji=i(5501),So=i(3662);function xo(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xo=function(){return!!q})()}function fi(q){var F=typeof Map=="function"?new Map:void 0;return fi=function($){if($===null||!function(fe){try{return Function.toString.call(fe).indexOf("[native code]")!==-1}catch{return typeof fe=="function"}}($))return $;if(typeof $!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has($))return F.get($);F.set($,Y)}function Y(){return function(fe,ke,tt){if(xo())return Reflect.construct.apply(null,arguments);var lt=[null];lt.push.apply(lt,ke);var He=new(fe.bind.apply(fe,lt));return tt&&(0,So.A)(He,tt.prototype),He}($,arguments,(0,ja.A)(this).constructor)}return Y.prototype=Object.create($.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),(0,So.A)(Y,$)},fi(q)}function St(q,F,$){return F=(0,ja.A)(F),(0,Li.A)(q,ee()?Reflect.construct(F,$||[],(0,ja.A)(q).constructor):F.apply(q,$))}function ee(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ee=function(){return!!q})()}var at,sr=function(q){function F($,Y){var fe;return(0,w.A)(this,F),fe=St(this,F,[Y||"an error has occured"]),(0,y.A)(fe,"code",void 0),fe.name="VideoSdkError",fe.code=$,fe}return(0,ji.A)(F,q),(0,l.A)(F)}(fi(Error));(function(q){q[q.InvalidKey=0]="InvalidKey",q[q.MissingKey=1]="MissingKey",q[q.InternalError=2]="InternalError"})(at||(at={}));var Vn=function(q){function F($){var Y;return(0,w.A)(this,F),(Y=St(this,F,[21,$??"device is unsupported"])).name="DeviceUnsupportedError",Y}return(0,ji.A)(F,q),(0,l.A)(F)}(sr),Nn=i(1806),ur=i(6746),zu=i(8278);function El(q,F){return q?F=="audio"?"shareAudio":"share":F}function Ro(q,F){var $=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!$){if(Array.isArray(q)||($=function(He,zt){if(He){if(typeof He=="string")return Tc(He,zt);var ot={}.toString.call(He).slice(8,-1);return ot==="Object"&&He.constructor&&(ot=He.constructor.name),ot==="Map"||ot==="Set"?Array.from(He):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?Tc(He,zt):void 0}}(q))||F){$&&(q=$);var Y=0,fe=function(){};return{s:fe,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(He){throw He},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ke,tt=!0,lt=!1;return{s:function(){$=$.call(q)},n:function(){var He=$.next();return tt=He.done,He},e:function(He){lt=!0,ke=He},f:function(){try{tt||$.return==null||$.return()}finally{if(lt)throw ke}}}}function Tc(q,F){(F==null||F>q.length)&&(F=q.length);for(var $=0,Y=Array(F);$<F;$++)Y[$]=q[$];return Y}function Hu(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hu=function(){return!!q})()}var Pc=function(q){function F(Y){var fe,ke,tt,lt;return(0,w.A)(this,F),ke=this,tt=F,tt=(0,ja.A)(tt),(fe=(0,Li.A)(ke,Hu()?Reflect.construct(tt,[],(0,ja.A)(ke).constructor):tt.apply(ke,lt))).onWorkerMessage=function(He){var zt,ot=He.data,Tt=ot.kind,Zt=ot.data;switch(Tt){case"error":console.error(Zt.error.message),fe.emit(ur.KS.EncryptionError,Zt.error);break;case"initAck":Zt.enabled&&fe.keyProvider.getKeys().forEach(function(Zr){fe.postKey(Zr)});break;case"enable":if(Zt.enabled&&fe.keyProvider.getKeys().forEach(function(Zr){fe.postKey(Zr)}),fe.encryptionEnabled!==Zt.enabled&&Zt.participantIdentity===fe.room._peerId)fe.emit(ur.KS.ParticipantEncryptionStatusChanged,Zt.enabled,fe.room.localParticipant),fe.encryptionEnabled=Zt.enabled;else if(Zt.participantIdentity){var pn=(zt=fe.room)===null||zt===void 0?void 0:zt.getParticipantByIdentity(Zt.participantIdentity);if(!pn)throw TypeError("couldn't set encryption status, participant not found".concat(Zt.participantIdentity));fe.emit(ur.KS.ParticipantEncryptionStatusChanged,Zt.enabled,pn)}break;case"ratchetKey":fe.keyProvider.emit(ur.fo.KeyRatcheted,Zt.material,Zt.keyIndex);break;case"e2eeStateChange":fe.emit(ur.KS.E2EEStateChange,Zt);break;default:console.log("unknown message kind",He)}},fe.onWorkerError=function(He){var zt;console.error("Worker encountered an error:",He),console.error("Error message:",He.message),console.error("Error filename:",He.filename),console.error("Error line number:",He.lineno),console.error("Error stack:",(zt=He.error)===null||zt===void 0?void 0:zt.stack)},fe.keyProvider=Y.keyProvider,fe.worker=Y.worker,fe.encryptionEnabled=!1,fe}return(0,ji.A)(F,q),(0,l.A)(F,[{key:"setup",value:function(Y){if(!(0,zu.Ag)())throw new Vn("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),Y!==this.room){this.room=Y,this.setupEventListeners(Y,this.keyProvider),this.handleE2EEManagerEvents();var fe={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",fe),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(fe))}}},{key:"setParticipantCryptorEnabled",value:function(Y,fe){console.debug("set e2ee to ".concat(Y," for participant ").concat(fe)),this.postEnable(Y,fe)}},{key:"setSifTrailer",value:function(Y){Y&&Y.length!==0?this.postSifTrailer(Y):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(Y,fe){var ke=this;fe.on(ur.fo.SetKey,function(tt){console.log("### keyInfo",tt),ke.postKey(tt)}).on(ur.fo.RatchetRequest,function(tt,lt){return ke.postRatchetRequest(tt,lt)})}},{key:"postRatchetRequest",value:function(Y,fe){if(!this.worker)throw Error("could not ratchet key, worker is missing");var ke={kind:"ratchetRequest",data:{participantIdentity:Y,keyIndex:fe}};this.worker.postMessage(ke)}},{key:"postKey",value:function(Y){var fe=Y.key,ke=Y.participantIdentity,tt=Y.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var lt={kind:"setKey",data:{participantIdentity:ke,isPublisher:ke===this.room._peerId,key:fe,keyIndex:tt}};this.worker.postMessage(lt)}},{key:"postEnable",value:function(Y,fe){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var ke={kind:"enable",data:{enabled:Y,participantIdentity:fe}};this.worker.postMessage(ke)}},{key:"postRTPMap",value:function(Y){var fe;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((fe=this.room)===null||fe===void 0)&&fe._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var ke={kind:"setRTPMap",data:{map:Y,participantIdentity:this.room._peerId}};this.worker.postMessage(ke)}},{key:"postSifTrailer",value:function(Y){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var fe={kind:"setSifTrailer",data:{trailer:Y}};this.worker.postMessage(fe)}},{key:"setupE2EEReceiver",value:function(Y,fe){var ke;this.handleReceiver(Y,Y.rtpReceiver,Y.track.id,fe,this.extractCodec(Y.rtpParameters.codecs),El((ke=Y.appData)===null||ke===void 0?void 0:ke.share,Y.kind))}},{key:"setupE2EESender",value:function(Y){var fe;Y?this.handleSender(Y.rtpSender,Y.track.id,this.extractCodec(Y.rtpParameters.codecs),El((fe=Y.appData)===null||fe===void 0?void 0:fe.share,Y.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:($=(0,o.A)(m().mark(function Y(fe,ke,tt,lt,He,zt){var ot,Tt,Zt,pn,Zr,ns;return m().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(this.worker){Se.next=2;break}return Se.abrupt("return");case 2:if(!(0,zu.Wm)()){Se.next=7;break}ot={kind:"decode",participantIdentity:lt,trackId:fe.track.id,codec:He},ke.transform=new RTCRtpScriptTransform(this.worker,ot),Se.next=18;break;case 7:if(!(Nn.$Q in ke)||!He){Se.next=11;break}return Zt={kind:"updateCodec",data:{trackId:tt,codec:He,participantIdentity:lt}},this.worker.postMessage(Zt),Se.abrupt("return");case 11:if(pn=ke.writableStream,Zr=ke.readableStream,pn&&Zr){Se.next=16;break}return console.error("no writable or readable stream"),Se.abrupt("return");case 16:ns={kind:"decode",data:{readableStream:Zr,writableStream:pn,trackId:tt,codec:He,participantIdentity:lt,mediaKind:zt,peerId:(Tt=fe.appData)===null||Tt===void 0?void 0:Tt.peerId}},this.worker.postMessage(ns,[Zr,pn]);case 18:ke[Nn.$Q]=!0;case 19:case"end":return Se.stop()}},Y,this)})),function(Y,fe,ke,tt,lt,He){return $.apply(this,arguments)})},{key:"handleSender",value:function(Y,fe,ke,tt,lt){var He;if(!(Nn.$Q in Y)&&this.worker){if(!(!((He=this.room)===null||He===void 0)&&He._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,zu.Wm)()){console.info("### initialize script transform");var zt={kind:"encode",participantIdentity:this.room._peerId,trackId:fe,codec:ke,mediaKind:tt,peerId:lt};Y.transform=new RTCRtpScriptTransform(this.worker,zt)}else try{var ot=Y.senderStreams;if(ot){var Tt={kind:"encode",data:{readableStream:ot.readable,writableStream:ot.writable,codec:ke,trackId:fe,participantIdentity:this.room._peerId,mediaKind:tt,peerId:lt}};this.worker.postMessage(Tt,[ot.readable,ot.writable])}else console.error("Error no sender streams found")}catch(Zt){console.log("Error in handle sender ",Zt)}Y[Nn.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var Y=this;this.on("NEW_CONSUMER",function(fe){var ke=fe.consumer,tt=fe.peerId;console.log("NEW_CONSUMER",ke),Y.setupE2EEReceiver(ke,tt)}),this.on("NEW_PRODUCER",function(fe){Y.setupE2EESender(fe)})}},{key:"extractCodec",value:function(Y){var fe,ke=Ro(Y);try{for(ke.s();!(fe=ke.n()).done;){var tt=fe.value,lt=tt.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(Nn.Ts.includes(lt)){tt=lt;break}}else if(Nn.ue.includes(lt)){tt=lt;break}}}catch(He){ke.e(He)}finally{ke.f()}return""}}]);var $}(mo.EventEmitter);function qu(){return kl.apply(this,arguments)}function kl(){return(kl=(0,o.A)(m().mark(function q(){var F,$,Y,fe;return m().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 2:if((F=ke.sent).ok){ke.next=5;break}throw new Error("Failed to load worker script: ".concat(F.statusText));case 5:return ke.next=7,F.text();case 7:return $=ke.sent,Y=new Blob([$],{type:"application/javascript"}),fe=URL.createObjectURL(Y),ke.abrupt("return",new Worker(fe));case 11:case"end":return ke.stop()}},q)}))).apply(this,arguments)}var Ep=i(9633);function Rs(q,F){var $=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);F&&(Y=Y.filter(function(fe){return Object.getOwnPropertyDescriptor(q,fe).enumerable})),$.push.apply($,Y)}return $}function Xn(q){for(var F=1;F<arguments.length;F++){var $=arguments[F]!=null?arguments[F]:{};F%2?Rs(Object($),!0).forEach(function(Y){(0,y.A)(q,Y,$[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors($)):Rs(Object($)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor($,Y))})}return q}function ca(q,F){var $=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!$){if(Array.isArray(q)||($=function(He,zt){if(He){if(typeof He=="string")return kp(He,zt);var ot={}.toString.call(He).slice(8,-1);return ot==="Object"&&He.constructor&&(ot=He.constructor.name),ot==="Map"||ot==="Set"?Array.from(He):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?kp(He,zt):void 0}}(q))||F){$&&(q=$);var Y=0,fe=function(){};return{s:fe,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(He){throw He},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ke,tt=!0,lt=!1;return{s:function(){$=$.call(q)},n:function(){var He=$.next();return tt=He.done,He},e:function(He){lt=!0,ke=He},f:function(){try{tt||$.return==null||$.return()}finally{if(lt)throw ke}}}}function kp(q,F){(F==null||F>q.length)&&(F=q.length);for(var $=0,Y=Array(F);$<F;$++)Y[$]=q[$];return Y}function Cp(q,F){(function($,Y){if(Y.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")})(q,F),F.add(q)}var qe,Ku={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},Gu={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Em={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Tp=[{scalabilityMode:"S3T3_KEY"}],Ba=[{dtx:!0,maxFramerate:30}],$e=new yr("RoomClient"),la=new WeakSet,zs=function(){return(0,l.A)(function re(W){var z,H,K=W.roomId,ie=W.peerId,pe=W.secret,Ce=W.displayName,Te=W.device,ht=W.handlerName,Xe=W.useSimulcast,pt=W.forceTcp,ft=W.mode,le=W.forceH264,mt=W.forceVP9,st=W.svc,We=W.datachannel,Ue=W.externalVideo,Fe=W.micEnabled,gt=W.webcamEnabled,Ye=W.maxResolution,vt=W.useSpartialLayerAnalytics,kt=W._deviceInfo,At=W.customCameraVideoTrack,Rt=W.customMicrophoneAudioTrack,yt=W.autoConsume,Jt=W.preferredProtocol,Mt=W.signalingBaseUrl,Lt=W.metaData,kr=W.defaultCameraIndex,vn=W.debugMode,qr=W.keyProvider;switch((0,w.A)(this,re),Cp(this,la),(0,y.A)(this,"e2eeManager",null),$e.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',K,ie,Ce,Te.flag),this.useSpartialLayerAnalytics=vt||!1,this._deviceInfo=kt,this._eventEmitter=new mo.EventEmitter,this._closed=!1,this._displayName=Ce,this._device=Te,this._forceTcp=pt,this._preferredProtocol=Jt,ft){case xs.nI.CONFERENCE:case xs.nI.SEND_AND_RECV:z=!0,H=!0;break;case xs.nI.RECV_ONLY:z=!1,H=!0;break;default:z=!1,H=!1}if(this._mode=ft,this._produce=z,this._consume=H,this._useDataChannel=We,this._forceH264=!!le,this._forceVP9=!!mt,this._micEnabled=!!Fe,this._webcamEnabled=!!gt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,Ue&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=Ue,this._externalVideo.play().catch(function(Br){return $e.warn("externalVideo.play() failed:%o",Br)})),this._handlerName=ht,this._useSimulcast=Xe,this._socketUrl="",this._secret=pe,this._peerId=ie,this._roomId=K,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Ye||"hd"},this._pinnedParticipants=new Map,st&&(Tp[0].scalabilityMode="".concat(st,"_KEY")),this.customCameraVideoTrack=At,this.customMicrophoneAudioTrack=Rt,this._autoConsume=yt,this._iceServers=[],this._metrics=new xc.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Mt||"api.videosdk.live",this._metaData=Lt,this._defaultCameraIndex=kr,this._debugMode=!!vn,this._meetingConnectionState=null,qr){if(!(qr instanceof Ep.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Br,Rn,An){if(typeof Br=="function"?Br===Rn:Br.has(Rn))return arguments.length<3?Rn:An;throw new TypeError("Private element is not present on this object")})(la,this,km).call(this,qr)}},[{key:"on",value:function(re,W){this._eventEmitter.on(re,W)}},{key:"softClose",value:function(){var re,W=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"softClose() Start "});try{var z,H,K;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var ie,pe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"Consumer Cleanup",parentSpan:W,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Ce=ca(this._consumers.values());try{for(Ce.s();!(ie=Ce.n()).done;)ie.value.close()}catch(ht){Ce.e(ht)}finally{Ce.f()}(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:pe,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:W,status:1,message:"Soft close completed successfully"})}catch(ht){var Te;(Te=this._openTelemetry)===null||Te===void 0||Te.completeSpan({span:W,status:2,message:"Soft close failed: ".concat(ht.message)}),console.error(ht)}}},{key:"close",value:function(re){var W,z,H,K,ie,pe=re.sendLeft,Ce=pe===void 0||pe;if(Ce&&((ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),$e.debug("close()");var Te=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Te,status:1,message:"Closed Trasnport"}),qe.dispatch(Vt("closed")),Ce&&this.emitMeetingStateChange(Sc),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Ce&&this._eventEmitter.emit("MEETING_LEFT"),(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Jp=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le=this;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,Yn({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:H=mt.sent,K=H.baseUrl,ie=H.iceServers,pe=H.logs,Ce=H.observabilityJwt,Te=H.traces,ht=H.metaData,Xe=H.signalingUrl,pt=H.socketPath,ft=H.socketUrl,this._baseUrl=K,this._socketUrl="wss://".concat(ft||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=ie,this._tracesEnabled=Te.enabled,this._openTelemetry=new Ec((0,y.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Te,logs:pe,observabilityJwt:Ce,metaData:ht},"traces",Te)),this._joinSpan=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Xe||"signalingUrl not specify"}}),this._webSocket=Ct(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(pt??"","/socket.io")}),this.emitMeetingStateChange(bc),qe.dispatch(Vt("connecting")),(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var st;le._isWebsocketAlive=!0,le._closed=!1,le._mode===(xs.nI.RECV_ONLY||xs.nI.SIGNALLING_ONLY)&&le.emitMeetingStateChange(vo),(st=le._openTelemetry)===null||st===void 0||st.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:le._joinSpan,status:1}),le.requestEntry()}),this._webSocket.on("disconnect",function(st){}),this._webSocket.io.on("reconnect_failed",function(){le._closed||le.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(st){var We,Ue,Fe,gt,Ye;le._webSocket.active&&le._webSocket.io._reconnecting?((We=le._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:le._joinSpan,status:1}),qe.dispatch(rr({type:"error",text:"WebSocket Reconnecting"})),le.emitMeetingStateChange(wc),le._sendTransport&&((gt=le._sendTransport)===null||gt===void 0||gt.close(),le._sendTransport=null),le._recvTransport&&((Ye=le._recvTransport)===null||Ye===void 0||Ye.close(),le._recvTransport=null),(Ue=le.customMicrophoneAudioTrack)===null||Ue===void 0||Ue.getTracks().forEach(function(vt){vt.stop()}),le.customMicrophoneAudioTrack=null,(Fe=le.customCameraVideoTrack)===null||Fe===void 0||Fe.getTracks().forEach(function(vt){vt.stop()}),le.customCameraVideoTrack=null):console.log("Error while trying to reconnect",st.message)}),this._webSocket.on("close",function(){le._closed||le.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt,kt,At,Rt,yt,Jt,Mt,Lt,kr,vn,qr,Br,Rn,An,zn,Cr,En,Ln,Hn,Kr,os,In,Yt,qn;return m().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(vt=(gt=le._openTelemetry)===null||gt===void 0?void 0:gt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(Ue)}}),le._consume){xt.next=5;break}return Fe({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(kt=le._openTelemetry)===null||kt===void 0||kt.completeSpan({span:vt,status:2,message:"I do not want to consume"}),xt.abrupt("return");case 5:return At=Ue.peerId,Rt=Ue.producerId,yt=Ue.id,Jt=Ue.kind,Mt=Ue.rtpParameters,Lt=Ue.type,kr=Ue.appData,vn=Ue.producerPaused,qr=(Ye=le._openTelemetry)===null||Ye===void 0?void 0:Ye.trace({spanName:"Creating Consumer",span:vt}),xt.prev=7,xt.next=10,le._recvTransport.consume({id:yt,producerId:Rt,kind:Jt,rtpParameters:Mt,appData:Xn(Xn({},kr),{},{peerId:At}),onRtpReceiver:function(or){if(le.e2eeManager){var ln=or.writableStream,on=or.readableStream;if(!ln||!on){var un=or.createEncodedStreams();or.writableStream=un.writable,ln=un.writable,or.readableStream=un.readable,on=un.readable}}}});case 10:Cr=xt.sent,En=Ut.s$(Cr.rtpParameters.encodings[0].scalabilityMode),Ln=En.spatialLayers,Hn=En.temporalLayers,Cr.spatialLayers=Ln,Cr.temporalLayers=Hn,Cr.currentSpatialLayers=Ln-1,Cr.currentTemporalLayers=Hn-1,le._consumers.set(Cr.id,Cr),Cr.on("transportclose",function(){le._consumers.delete(Cr.id);var or=lo(Cr.id,At);qe.dispatch(or),le._eventEmitter.emit(or.type,or.payload)}),(Br=le._openTelemetry)===null||Br===void 0||Br.completeSpan({span:qr,status:1,message:"Consumer Created"}),qr=(Rn=le._openTelemetry)===null||Rn===void 0?void 0:Rn.trace({spanName:"Sending Stream Enabled Event",span:vt}),Kr=co({id:Cr.id,type:Lt,locallyPaused:!1,remotelyPaused:vn,rtpParameters:Cr.rtpParameters,spatialLayers:Ln,temporalLayers:Hn,currentSpatialLayer:Ln-1,currentTemporalLayer:Hn-1,preferredSpatialLayer:Ln-1,preferredTemporalLayer:Hn-1,priority:1,codec:Cr.rtpParameters.codecs[0].mimeType.split("/")[1],track:Cr.track,appData:kr,instance:Cr},At),qe.dispatch(Kr),le._eventEmitter.emit(Kr.type,Kr.payload),Fe(),Cr.kind==="video"&&qe.getState().me.audioOnly&&le._pauseConsumer(Cr),(An=le._openTelemetry)===null||An===void 0||An.completeSpan({span:qr,status:1,message:"Event Send Successfully"}),(zn=le._openTelemetry)===null||zn===void 0||zn.completeSpan({span:vt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Cr.id}}),Cr.kind=="video"&&Cr.appData.share&&((os=le._openTelemetry)===null||os===void 0||os.traceAutoComplete({spanName:"Presenter Changed",span:vt,attributes:{"peer.id":At}})),le.e2eeManager&&le.e2eeManager.emit("NEW_CONSUMER",{consumer:Cr,peerId:le._peerId}),xt.next=38;break;case 31:throw xt.prev=31,xt.t0=xt.catch(7),(In=le._openTelemetry)===null||In===void 0||In.completeSpan({span:qr,status:2,message:"Error creating a Consumer: ".concat(xt.t0)}),(Yt=le._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:vt,status:2,message:"Error creating a Consumer: ".concat(xt.t0)}),qe.dispatch(rr({type:"error",text:"Error creating a Consumer: ".concat(xt.t0)})),(qn=le._videosdkLogs)===null||qn===void 0||qn.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:xt.t0.message}}),xt.t0;case 38:case"end":return xt.stop()}},We,null,[[7,31]])}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt,kt,At,Rt,yt,Jt;return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(le._consume){Mt.next=3;break}return Fe({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),Mt.abrupt("return");case 3:if(le._useDataChannel){Mt.next=6;break}return Fe({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),Mt.abrupt("return");case 6:return gt=Ue.peerId,Ye=Ue.dataProducerId,vt=Ue.id,kt=Ue.sctpStreamParameters,At=Ue.label,Rt=Ue.protocol,yt=Ue.appData,Mt.prev=7,Mt.next=10,le._recvTransport.consumeData({id:vt,dataProducerId:Ye,sctpStreamParameters:kt,label:At,protocol:Rt,appData:Xn(Xn({},yt),{},{peerId:gt})});case 10:Jt=Mt.sent,le._dataConsumers.set(Jt.id,Jt),Jt.on("transportclose",function(){le._dataConsumers.delete(Jt.id)}),Jt.on("open",function(){$e.debug('DataConsumer "open" event')}),Jt.on("close",function(){$e.warn('DataConsumer "close" event'),le._dataConsumers.delete(Jt.id),qe.dispatch(rr({type:"error",text:"DataConsumer closed"}))}),Jt.on("error",function(Lt){$e.error('DataConsumer "error" event:%o',Lt),qe.dispatch(rr({type:"error",text:"DataConsumer error: ".concat(Lt)}))}),Jt.on("message",function(Lt){if($e.debug('DataConsumer "message" event [streamId:%d]',Jt.sctpStreamParameters.streamId),window.DC_MESSAGE=Lt,Lt instanceof ArrayBuffer){var kr=new DataView(Lt).getUint32();return kr==Math.pow(2,32)-1?($e.warn("dataChannelTest finished!"),void(le._nextDataChannelTestNumber=0)):(kr>le._nextDataChannelTestNumber&&$e.warn("dataChannelTest: %s packets missing",kr-le._nextDataChannelTestNumber),void(le._nextDataChannelTestNumber=kr+1))}if(typeof Lt=="string")switch(Jt.label){case"chat":var vn=qe.getState().peers,qr=Object.keys(vn).map(function(Br){return vn[Br]}).find(function(Br){return Br.dataConsumers.includes(Jt.id)});if(!qr){$e.warn('DataConsumer "message" from unknown peer');break}qe.dispatch(rr({title:"".concat(qr.displayName," says:"),text:Lt,timeout:5e3})),le._eventEmitter.emit("CHAT_MESSAGE",{text:Lt,senderId:qr.id,timestamp:new Date().getTime()});break;case"bot":qe.dispatch(rr({title:"Message from Bot:",text:Lt,timeout:5e3}))}else $e.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=Jt,qe.dispatch(_c({id:Jt.id,sctpStreamParameters:Jt.sctpStreamParameters,label:Jt.label,protocol:Jt.protocol},gt)),Fe(),Mt.next=26;break;case 22:Mt.prev=22,Mt.t0=Mt.catch(7),$e.error('"newDataConsumer" request failed:%o',Mt.t0),qe.dispatch(rr({type:"error",text:"Error creating a DataConsumer: ".concat(Mt.t0)}));case 26:case"end":return Mt.stop()}},We,null,[[7,22]])}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt;return m().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:try{Ye=Ue.peerId,(gt=le._openTelemetry)===null||gt===void 0||gt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(Ye),status:1}),le._eventEmitter.emit("MIC_REQUESTED",{peerId:Ye}),Fe()}catch(At){$e.error('"enableMic" request failed:%o',At),(vt=le._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:At.message}}),le._emitError({code:3027,message:At.message})}case 1:case"end":return kt.stop()}},We)}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt,kt,At;return m().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.prev=0,gt=(Ye=le._openTelemetry)===null||Ye===void 0?void 0:Ye.trace({spanName:"Websocket REQ: disableMic"}),Rt.next=4,le.disableMic(!1,gt);case 4:(vt=le._openTelemetry)===null||vt===void 0||vt.completeSpan({span:gt,status:1,message:"Request Completed"}),Fe(),Rt.next=13;break;case 8:Rt.prev=8,Rt.t0=Rt.catch(0),(kt=le._openTelemetry)===null||kt===void 0||kt.completeSpan({span:gt,status:2,message:"disableMic request failed ".concat(Rt.t0)}),(At=le._videosdkLogs)===null||At===void 0||At.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Rt.t0.message}}),le._emitError({code:3028,message:Rt.t0.message});case 13:case"end":return Rt.stop()}},We,null,[[0,8]])}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt;return m().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:try{Ye=Ue.peerId,(gt=le._openTelemetry)===null||gt===void 0||gt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(Ye),status:1}),le._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Ye}),Fe()}catch(At){$e.error('"enableWebcam" request failed:%o',At),(vt=le._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:At.message}}),le._emitError({code:3029,message:At.message})}case 1:case"end":return kt.stop()}},We)}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt,kt,At;return m().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.prev=0,gt=(Ye=le._openTelemetry)===null||Ye===void 0?void 0:Ye.trace({spanName:"Websocket REQ: disableWebcam"}),Rt.next=4,le.disableWebcam(gt);case 4:(vt=le._openTelemetry)===null||vt===void 0||vt.completeSpan({span:gt,status:1,message:"Request Completed"}),Fe(),Rt.next=13;break;case 8:Rt.prev=8,Rt.t0=Rt.catch(0),(kt=le._openTelemetry)===null||kt===void 0||kt.completeSpan({span:gt,status:2,message:"disableWebcam request failed ".concat(Rt.t0)}),(At=le._videosdkLogs)===null||At===void 0||At.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Rt.t0.message}}),le._emitError({code:3030,message:Rt.t0.message});case 13:case"end":return Rt.stop()}},We,null,[[0,8]])}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){var gt,Ye,vt,kt,At,Rt,yt,Jt,Mt;return m().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:Lt.prev=0,kt=Ue.peerId,At=Ue.state,Rt=Ue.pinnedBy,gt=(Ye=le._openTelemetry)===null||Ye===void 0?void 0:Ye.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:kt,state:At,pinnedBy:Rt})}}),le._pinnedParticipants.has(kt)||le._pinnedParticipants.set(kt,{cam:!1,share:!1}),yt=le._pinnedParticipants.get(kt),At.cam!=null&&(yt.cam=At.cam),At.share!=null&&(yt.share=At.share),le._pinnedParticipants.set(kt,yt),le._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:kt,state:At,pinnedBy:Rt}),yt.share==0&&yt.cam==0&&le._pinnedParticipants.delete(kt),(vt=le._openTelemetry)===null||vt===void 0||vt.completeSpan({span:gt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(le._pinnedParticipants)}}),Fe(),Lt.next=19;break;case 14:throw Lt.prev=14,Lt.t0=Lt.catch(0),(Jt=le._openTelemetry)===null||Jt===void 0||Jt.completeSpan({span:gt,status:2,message:"pinStateChanged request failed"}),(Mt=le._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:Lt.t0.message}}),Lt.t0;case 19:case"end":return Lt.stop()}},We,null,[[0,14]])}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){return m().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:le._eventEmitter.emit("SWITCH_ROOM",Ue),Fe();case 2:case"end":return gt.stop()}},We)}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var st=(0,o.A)(m().mark(function We(Ue,Fe){return m().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:Fe({peerId:le._peerId,statsData:le._stats}),le._stats={};case 2:case"end":return gt.stop()}},We)}));return function(We,Ue){return st.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var st=(0,o.A)(m().mark(function We(Ue){var Fe,gt,Ye,vt,kt,At,Rt,yt,Jt,Mt,Lt,kr,vn,qr,Br,Rn,An,zn,Cr,En,Ln,Hn,Kr,os,In,Yt,qn,xt,or,ln,on,un,jn,ea,Xa,ua,Ua,$a,ks,fs,qs,Cs,da,B,U,V,Z,ce,ne,he,ge,ve,Re,Pe,oe,_e,me,Q,X,ue,Oe,De,bt,ut,Ze,qt,Be,we,Qe,Ve,$t,dr,Pt,Ur,yn,Gr,bs,en,ms,Lo,qc,ud,Xp,dd,Zp,jy,By,Fy,Uy;return m().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:Fe=Ue,$e.debug('proto "notification" event [method:%s, data:%o]',Ue.method,Fe),rt.t0=Ue.method,rt.next=rt.t0==="error"?5:rt.t0==="participantMediaStateChanged"?10:rt.t0==="producerScore"?11:rt.t0==="entryRequested"?14:rt.t0==="entryResponded"?18:rt.t0==="newPeer"?34:rt.t0==="peerClosed"?41:rt.t0==="peerDisplayNameChanged"?47:rt.t0==="consumerClosed"?51:rt.t0==="consumerPaused"?63:rt.t0==="consumerResumed"?71:rt.t0==="consumerLayersChanged"?79:rt.t0==="consumerScore"?90:rt.t0==="dataConsumerClosed"?93:rt.t0==="activeSpeaker"?102:rt.t0==="consumerResumedSubManager"?107:rt.t0==="consumerPausedSubManager"?109:rt.t0==="transcriptionStateChanged"?111:rt.t0==="transcriptionText"?114:rt.t0==="recordingStateChanged"?116:rt.t0==="recordingStarted"?119:rt.t0==="recordingStopped"?121:rt.t0==="livestreamStateChanged"?123:rt.t0==="livestreamStarted"?126:rt.t0==="livestreamStopped"?128:rt.t0==="hlsStateChanged"?130:rt.t0==="hlsPlayableStateChanged"?133:rt.t0==="hlsStarted"?135:rt.t0==="hlsStopped"?138:rt.t0==="whiteboardStarted"?140:rt.t0==="whiteboardStopped"?143:rt.t0==="addCharacter"?145:rt.t0==="removeCharacter"?151:rt.t0==="characterStateChanged"?157:rt.t0==="characterMessage"?160:rt.t0==="userMessage"?162:rt.t0==="characterData"?164:rt.t0==="characterError"?166:rt.t0==="videoStatusChanged"?168:rt.t0==="videoSeeked"?170:rt.t0==="connectionOpen"?173:rt.t0==="connectionClose"?175:rt.t0==="connectionChatMessage"?177:rt.t0==="connectionParticipantJoined"?179:rt.t0==="connectionParticipantLeft"?181:rt.t0==="pubsubMessage"?183:rt.t0==="peerModeChanged"?185:rt.t0==="restartIce"?188:rt.t0==="mediaRelayStarted"?192:rt.t0==="mediaRelayStopped"?195:rt.t0==="mediaRelayError"?198:rt.t0==="mediaRelayRequestResponse"?201:rt.t0==="mediaRelayRequestReceived"?204:207;break;case 5:return vt=Fe,le._eventEmitter.emit("ERROR",vt),(gt=le._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:vt.message}}),(Ye=le._openTelemetry)===null||Ye===void 0||Ye.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:vt.message},status:2}),rt.abrupt("break",208);case 10:try{kt=Fe.peerId,At=Fe.kind,Rt=Fe.newState,le._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:kt,kind:At,newState:Rt}),At=="video"&&((yt=le._openTelemetry)===null||yt===void 0||yt.traceAutoComplete({spanName:"".concat(kt," has ").concat(Rt?"enable":"disable"," ").concat(At),status:1}))}catch(pd){$e.error('"newProducer" request failed:%o',pd),(Jt=le._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:pd.message}})}case 11:return Mt=Fe.producerId,Lt=Fe.score,qe.dispatch(is(Mt,Lt)),rt.abrupt("break",208);case 14:return vn=Fe.id,qr=Fe.name,Br=(kr=le._openTelemetry)===null||kr===void 0?void 0:kr.trace({spanName:"Websocket Noti: entryRequested",span:le._joinSpan,attributes:{data:JSON.stringify({id:vn,name:qr})}}),vn!==le._peerId?(le._eventEmitter.emit("ENTRY_REQUESTED",{id:vn,name:qr}),(Rn=le._openTelemetry)===null||Rn===void 0||Rn.completeSpan({span:Br,status:1,message:"EntryResponded Recieved"})):(An=le._openTelemetry)===null||An===void 0||An.completeSpan({span:Br,status:2,message:"Entry Request Failed"}),rt.abrupt("break",208);case 18:if(En=Fe.id,Ln=Fe.decision,Hn=Fe.sessionId,Kr=Fe.switchingRoomId,os=(zn=le._openTelemetry)===null||zn===void 0?void 0:zn.trace({name:"Entry Response Handling",attributes:{"peer.id":En,"entry.decision":Ln,switching_room:!!Kr}}),En===le._peerId&&Ln==="allowed"){rt.next=24;break}return(In=le._openTelemetry)===null||In===void 0||In.completeSpan({span:le._joinSpan,status:2,message:"Join Request Denied"}),(Yt=le._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:os,status:2,message:"Entry denied for peer"}),rt.abrupt("break",208);case 24:if(le._eventEmitter.emit("ENTRY_RESPONDED",{id:En,decision:Ln}),!Kr){rt.next=30;break}return(qn=le._openTelemetry)===null||qn===void 0||qn.completeSpan({span:os,status:1,message:"Switching room initiated"}),le.softClose(),le.switchingRoom(Kr),rt.abrupt("break",208);case 30:return le._videosdkLogs=new kc({roomId:le._roomId,peerId:le._peerId,logs:pe,observabilityJwt:Ce,deviceInfo:le._deviceInfo,sessionId:Hn,debugMode:le._debugMode}),le.joinRoom(),(Cr=le._openTelemetry)===null||Cr===void 0||Cr.completeSpan({span:os,status:1,message:"Entry response handled successfully"}),rt.abrupt("break",208);case 34:or=Vs(Xn(Xn({},xt=Fe),{},{consumers:[],dataConsumers:[]})),qe.dispatch(or),le._eventEmitter.emit(or.type,or.payload),qe.dispatch(rr({text:"".concat(xt.displayName," has joined the room")}));try{(ln=le._openTelemetry)===null||ln===void 0||ln.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(xt.displayName),attributes:{peerData:JSON.stringify(xt)}})}catch(pd){(on=le._videosdkLogs)===null||on===void 0||on.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:pd.message}}),console.error(pd)}return rt.abrupt("break",208);case 41:return jn=Fe.peerId,ea=hi(jn),qe.dispatch(ea),le._eventEmitter.emit(ea.type,ea.payload),(un=le._openTelemetry)===null||un===void 0||un.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(jn)}),rt.abrupt("break",208);case 47:return Xa=Fe.peerId,ua=Fe.displayName,Ua=Fe.oldDisplayName,qe.dispatch(Ii(ua,Xa)),qe.dispatch(rr({text:"".concat(Ua," is now ").concat(ua)})),rt.abrupt("break",208);case 51:if(ks=Fe.consumerId,fs=le._consumers.get(ks)){rt.next=55;break}return rt.abrupt("break",208);case 55:return fs.close(),le._consumers.delete(ks),qs=fs.appData.peerId,Cs=lo(ks,qs),qe.dispatch(Cs),le._eventEmitter.emit(Cs.type,Cs.payload),($a=le._openTelemetry)===null||$a===void 0||$a.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(ks),attributes:{consumerData:JSON.stringify(fs)}}),rt.abrupt("break",208);case 63:if(da=Fe.consumerId,B=le._consumers.get(da)){rt.next=67;break}return rt.abrupt("break",208);case 67:return B.pause(),qe.dispatch(xa(da,"remote")),le._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:da,peerId:B.appData.peerId}),rt.abrupt("break",208);case 71:if(U=Fe.consumerId,V=le._consumers.get(U)){rt.next=75;break}return rt.abrupt("break",208);case 75:return V.resume(),qe.dispatch(uo(U,"remote")),le._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:U,peerId:V.appData.peerId}),rt.abrupt("break",208);case 79:if(ce=Fe.consumerId,ne=Fe.spatialLayer,he=Fe.temporalLayer,(ge=le._consumers.get(ce)).currentSpatialLayer=ne,ge.currentTemporalLayer=he,ge){rt.next=85;break}return rt.abrupt("break",208);case 85:return((Z=ge.appData)===null||Z===void 0||(Z=Z.encodings)===null||Z===void 0?void 0:Z.length)>1&&le._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:ge.appData.peerId,prevQuality:ge.spatialLayers-1-ge.currentSpatialLayer==0?"HIGH":ge.spatialLayers-1-ge.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:ge.spatialLayers-1-ne==0?"HIGH":ge.spatialLayers-1-ne==1?"MEDIUM":"LOW"}),ge.currentSpatialLayer=ne,ge.currentTemporalLayer=he,qe.dispatch(vc(ce,ne,he)),rt.abrupt("break",208);case 90:return ve=Fe.consumerId,Re=Fe.score,qe.dispatch(ho(ve,Re)),rt.abrupt("break",208);case 93:if(Pe=Fe.dataConsumerId,oe=le._dataConsumers.get(Pe)){rt.next=97;break}return rt.abrupt("break",208);case 97:return oe.close(),le._dataConsumers.delete(Pe),_e=oe.appData.peerId,qe.dispatch(fo(Pe,_e)),rt.abrupt("break",208);case 102:return me=Fe.peerId,Q=gn(me),qe.dispatch(Q),le._eventEmitter.emit(Q.type,Q.payload),rt.abrupt("break",208);case 107:return le._eventEmitter.emit("SUB_MANAGER_RESUMED",Fe),rt.abrupt("break",208);case 109:return le._eventEmitter.emit("SUB_MANAGER_PAUSED",Fe),rt.abrupt("break",208);case 111:return le._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Fe),(X=le._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Fe.status),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 114:return le._eventEmitter.emit("TRANSCRIPTION_TEXT",Fe),rt.abrupt("break",208);case 116:return le._eventEmitter.emit("RECORDING_STATE_CHANGED",Fe),(ue=le._openTelemetry)===null||ue===void 0||ue.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Fe.status),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 119:return le._eventEmitter.emit("RECORDING_STARTED",{}),rt.abrupt("break",208);case 121:return le._eventEmitter.emit("RECORDING_STOPPED",{}),rt.abrupt("break",208);case 123:return le._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Fe),(Oe=le._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Fe.status),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 126:return le._eventEmitter.emit("LIVESTREAM_STARTED",{}),rt.abrupt("break",208);case 128:return le._eventEmitter.emit("LIVESTREAM_STOPPED",{}),rt.abrupt("break",208);case 130:return le._eventEmitter.emit("HLS_STATE_CHANGED",Fe),(De=le._openTelemetry)===null||De===void 0||De.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Fe.status),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 133:return Fe.isPlayable&&(le._eventEmitter.emit("HLS_STATE_CHANGED",Xn(Xn({},Fe),{},{status:Rc.V.HLS_PLAYABLE})),(bt=le._openTelemetry)===null||bt===void 0||bt.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),rt.abrupt("break",208);case 135:return ut=Fe.downstreamUrl,le._eventEmitter.emit("HLS_STARTED",ut),rt.abrupt("break",208);case 138:return le._eventEmitter.emit("HLS_STOPPED",{}),rt.abrupt("break",208);case 140:return Ze=Fe.state,qt=Fe.url,Ze?le._eventEmitter.emit("WHITEBOARD_STARTED",{state:Ze}):qt&&le._eventEmitter.emit("WHITEBOARD_STARTED",{url:qt}),rt.abrupt("break",208);case 143:return le._eventEmitter.emit("WHITEBOARD_STOPPED",{}),rt.abrupt("break",208);case 145:return we=Vs(Xn(Xn({},Fe),{},{consumers:[],dataConsumers:[]})),qe.dispatch(we),le._eventEmitter.emit("ADD_CHARACTER",Fe),(Be=le._openTelemetry)===null||Be===void 0||Be.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Fe),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 151:return Ve=Fe.id,$t=hi(Ve),qe.dispatch($t),le._eventEmitter.emit("REMOVE_CHARACTER",Fe),(Qe=le._openTelemetry)===null||Qe===void 0||Qe.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Fe),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 157:return le._eventEmitter.emit("CHARACTER_STATE_CHANGED",Fe),(dr=le._openTelemetry)===null||dr===void 0||dr.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Fe.status),attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 160:return le._eventEmitter.emit("CHARACTER_MESSAGE",Fe),rt.abrupt("break",208);case 162:return le._eventEmitter.emit("USER_MESSAGE",Fe),rt.abrupt("break",208);case 164:return le._eventEmitter.emit("CHARACTER_DATA",Fe),rt.abrupt("break",208);case 166:return le._eventEmitter.emit("CHARACTER_ERROR",Fe),rt.abrupt("break",208);case 168:return le._eventEmitter.emit("VIDEO_STATE_CHANGED",Fe),rt.abrupt("break",208);case 170:return Pt=Fe.currentTime,le._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Pt}),rt.abrupt("break",208);case 173:return le._eventEmitter.emit("CONNECTION_OPEN",Fe),rt.abrupt("break",208);case 175:return le._eventEmitter.emit("CONNECTION_CLOSE",Fe),rt.abrupt("break",208);case 177:return le._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Fe),rt.abrupt("break",208);case 179:return le._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Fe),rt.abrupt("break",208);case 181:return le._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Fe),rt.abrupt("break",208);case 183:return le._eventEmitter.emit("PUBSUB_MESSAGE",Fe),rt.abrupt("break",208);case 185:return le._eventEmitter.emit("PEER_MODE_CHANGED",Fe),(Ur=le._openTelemetry)===null||Ur===void 0||Ur.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Fe)},status:1}),rt.abrupt("break",208);case 188:return Gr=Fe.transportId,bs=Fe.iceParameters,en=(yn=le._openTelemetry)===null||yn===void 0?void 0:yn.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(Gr),attributes:{iceParameters:JSON.stringify(bs)}}),le.handleRemoteRestartIce({transportId:Gr,iceParameters:bs,internalSpan:en}),rt.abrupt("break",208);case 192:return ms=Ue.meetingId,le._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:ms}),rt.abrupt("break",208);case 195:return Lo=Ue.meetingId,qc=Ue.reason,le._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:Lo,reason:qc}),rt.abrupt("break",208);case 198:return ud=Ue.meetingId,Xp=Ue.reason,le._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:ud,reason:Xp}),rt.abrupt("break",208);case 201:return dd=Ue.decision,Zp=Ue.decidedBy,jy=Ue.meetingId,le._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:dd,decidedBy:Zp,meetingId:jy}),rt.abrupt("break",208);case 204:return By=Ue.peerId,Fy=Ue.meetingId,Uy=Ue.displayName,le._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:By,meetingId:Fy,displayName:Uy}),rt.abrupt("break",208);case 207:$e.error('unknown Websocket notification.method "%s"',Ue.method);case 208:case"end":return rt.stop()}},We)}));return function(We){return st.apply(this,arguments)}}());case 38:case"end":return mt.stop()}},re,this)})),function(){return Jp.apply(this,arguments)})},{key:"requestEntry",value:(Qp=(0,o.A)(m().mark(function re(){var W,z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Requesting Entry",span:this._joinSpan}),K.next=3,this._socketRequest("requestEntry",{name:this._displayName});case 3:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"Entry Requested Successfully"});case 4:case"end":return K.stop()}},re,this)})),function(){return Qp.apply(this,arguments)})},{key:"respondEntry",value:(Hc=(0,o.A)(m().mark(function re(W,z){var H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return ie=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Responding Entry",attributes:{peerId:W,decision:z},span:this._joinSpan}),pe.next=3,this._socketRequest("respondEntry",{id:W,decision:z});case 3:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Entry Responded Successfully",span:ie,status:1});case 4:case"end":return pe.stop()}},re,this)})),function(re,W){return Hc.apply(this,arguments)})},{key:"startTranscription",value:(mi=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe;return m().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return $e.debug("startTranscription()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startTranscription() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify"}}),Ce.prev=2,Ce.next=5,this._socketRequest("startTranscription",{config:W});case 5:Ce.next=13;break;case 7:Ce.prev=7,Ce.t0=Ce.catch(2),$e.error("startTranscription() | failed:%o",Ce.t0),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:K,status:2,message:"startTranscription() failed"}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Ce.t0.message}}),this._emitError({code:4031,message:Ce.t0.message});case 13:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"startTranscription() End"});case 14:case"end":return Ce.stop()}},re,this,[[2,7]])})),function(re){return mi.apply(this,arguments)})},{key:"stopTranscription",value:(ld=(0,o.A)(m().mark(function re(){var W,z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return $e.debug("stopTranscription()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopTranscription() Start"}),pe.prev=2,pe.next=5,this._socketRequest("stopTranscription",{});case 5:pe.next=12;break;case 7:pe.prev=7,pe.t0=pe.catch(2),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopTranscription() failed"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:pe.t0.message}}),this._emitError({code:4032,message:pe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopTranscription() End"});case 13:case"end":return pe.stop()}},re,this,[[2,7]])})),function(){return ld.apply(this,arguments)})},{key:"pauseAllConsumers",value:(Kl=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt;return m().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:W||"Kind not specified"}}),ft.prev=1,ft.next=4,this._socketRequest("pauseAllConsumers",{kind:W===void 0?"all":W});case 4:if(pe=ft.sent,Ce=!1,!((pe==null||(ie=pe.consumersWithIssues)===null||ie===void 0?void 0:ie.length)>0)){ft.next=13;break}return ft.next=9,this._socketRequest("pauseAllConsumers",{kind:W===void 0?"all":W});case 9:((ht=ft.sent)==null||(Te=ht.consumersWithIssues)===null||Te===void 0?void 0:Te.length)===0&&(Ce=!0),ft.next=14;break;case 13:Ce=!0;case 14:Ce&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:W}),ft.next=22;break;case 17:ft.prev=17,ft.t0=ft.catch(1),$e.error("pauseAllConsumers() | failed:%o",ft.t0),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:K,status:2,message:"pauseAllConsumers() failed"}),(pt=this._videosdkLogs)===null||pt===void 0||pt.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:ft.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"pauseAllConsumers() End"});case 23:case"end":return ft.stop()}},re,this,[[1,17]])})),function(re){return Kl.apply(this,arguments)})},{key:"resumeAllConsumers",value:(Yp=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt;return m().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:W||"Kind not specified"}}),ft.prev=1,ft.next=4,this._socketRequest("resumeAllConsumers",{kind:W===void 0?"all":W});case 4:if(pe=ft.sent,Ce=!1,!((pe==null||(ie=pe.consumersWithIssues)===null||ie===void 0?void 0:ie.length)>0)){ft.next=13;break}return ft.next=9,this._socketRequest("resumeAllConsumers",{kind:W===void 0?"all":W});case 9:((ht=ft.sent)==null||(Te=ht.consumersWithIssues)===null||Te===void 0?void 0:Te.length)===0&&(Ce=!0),ft.next=14;break;case 13:Ce=!0;case 14:Ce&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:W}),ft.next=22;break;case 17:ft.prev=17,ft.t0=ft.catch(1),$e.error("resumeAllConsumers() | failed:%o",ft.t0),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:K,status:2,message:"resumeAllConsumers() failed"}),(pt=this._videosdkLogs)===null||pt===void 0||pt.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:ft.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"resumeAllConsumers() End"});case 23:case"end":return ft.stop()}},re,this,[[1,17]])})),function(re){return Yp.apply(this,arguments)})},{key:"startRecording",value:(Gp=(0,o.A)(m().mark(function re(W,z,H,K){var ie,pe,Ce,Te,ht;return m().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return $e.debug("startRecording()"),Ce=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"startRecording() Start",attributes:{webhookUrl:W||"webhookUrl Not Specify",awsDirPath:z||"awsDirPath Not Specify",config:H?JSON.stringify(H):"config Not Specify",transcription:K?JSON.stringify(K):"transcription Not Specify"}}),Xe.prev=2,Xe.next=5,this._socketRequest("startRecording",{webhookUrl:W,awsDirPath:z,config:H,transcription:K});case 5:Xe.next=13;break;case 7:Xe.prev=7,Xe.t0=Xe.catch(2),$e.error("startRecording() | failed:%o",Xe.t0),(Te=this._openTelemetry)===null||Te===void 0||Te.completeSpan({span:Ce,status:2,message:"startRecording() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Xe.t0.message}}),this._emitError({code:4011,message:Xe.t0.message});case 13:(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:Ce,status:1,message:"startRecording() End"});case 14:case"end":return Xe.stop()}},re,this,[[2,7]])})),function(re,W,z,H){return Gp.apply(this,arguments)})},{key:"stopRecording",value:(Hs=(0,o.A)(m().mark(function re(){var W,z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(!this._closed){pe.next=2;break}return pe.abrupt("return");case 2:return $e.debug("stopRecording()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopRecording() Start"}),pe.prev=4,pe.next=7,this._socketRequest("stopRecording",{});case 7:pe.next=14;break;case 9:pe.prev=9,pe.t0=pe.catch(4),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopRecording() failed"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:pe.t0.message}}),this._emitError({code:4012,message:pe.t0.message});case 14:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopRecording() End"});case 15:case"end":return pe.stop()}},re,this,[[4,9]])})),function(){return Hs.apply(this,arguments)})},{key:"startLivestream",value:(Kp=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce;return m().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return $e.debug("startLivestream()"),ie=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startLivestream() Start",attributes:{outputs:W?JSON.stringify(W):"outputs Not Specify",config:z?JSON.stringify(z):"config Not Specify"}}),Te.prev=2,Te.next=5,this._socketRequest("startLivestream",{outputs:W,config:z});case 5:Te.next=12;break;case 7:Te.prev=7,Te.t0=Te.catch(2),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:ie,status:1,message:"startLivestream() End"}),(Ce=this._videosdkLogs)===null||Ce===void 0||Ce.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Te.t0.message}}),this._emitError({code:4013,message:Te.t0.message});case 12:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:ie,status:1,message:"startLivestream() End"});case 13:case"end":return Te.stop()}},re,this,[[2,7]])})),function(re,W){return Kp.apply(this,arguments)})},{key:"stopLivestream",value:(qp=(0,o.A)(m().mark(function re(){var W,z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return $e.debug("stopLivestream()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopLivestream() Start"}),pe.prev=2,pe.next=5,this._socketRequest("stopLivestream",{});case 5:pe.next=12;break;case 7:pe.prev=7,pe.t0=pe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:pe.t0.message}}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:pe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopLivestream() End"});case 13:case"end":return pe.stop()}},re,this,[[2,7]])})),function(){return qp.apply(this,arguments)})},{key:"startHls",value:(ql=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce;return m().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return W=W||{},z=z||{},$e.debug("startHls()"),ie=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startHls() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify",transcription:z?JSON.stringify(z):"transcription Not Specify"}}),Te.prev=4,Te.next=7,this._socketRequest("startHls",{config:W,transcription:z});case 7:Te.next=15;break;case 9:Te.prev=9,Te.t0=Te.catch(4),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Te.t0.message}}),(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:ie,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Te.t0.message}),$e.error("startHls() | failed:%o",Te.t0);case 15:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:ie,status:1,message:"startHlsSpan() End"});case 16:case"end":return Te.stop()}},re,this,[[4,9]])})),function(re,W){return ql.apply(this,arguments)})},{key:"stopHls",value:(cd=(0,o.A)(m().mark(function re(){var W,z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return $e.debug("stopHls()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopHls() Start"}),pe.prev=2,pe.next=5,this._socketRequest("stopHls",{});case 5:pe.next=12;break;case 7:pe.prev=7,pe.t0=pe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:pe.t0.message}}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:pe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopHls() End"});case 13:case"end":return pe.stop()}},re,this,[[2,7]])})),function(){return cd.apply(this,arguments)})},{key:"startWhiteboard",value:(Wi=(0,o.A)(m().mark(function re(){var W,z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return $e.debug("startWhiteboard()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"startWhiteboard() Start"}),ie.prev=2,ie.next=5,this._socketRequest("startWhiteboard",{version:"v2"});case 5:ie.next=12;break;case 7:ie.prev=7,ie.t0=ie.catch(2),$e.error("startWhiteboard() | failed:%o",ie.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:ie.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"startWhiteboard() End"});case 13:case"end":return ie.stop()}},re,this,[[2,7]])})),function(){return Wi.apply(this,arguments)})},{key:"stopWhiteboard",value:(Hl=(0,o.A)(m().mark(function re(){var W,z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return $e.debug("stopWhiteboard()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopWhiteboard() Start"}),ie.prev=2,ie.next=5,this._socketRequest("stopWhiteboard",{});case 5:ie.next=12;break;case 7:ie.prev=7,ie.t0=ie.catch(2),$e.error("stopWhiteboard() | failed:%o",ie.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:ie.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopWhiteboard() End"});case 13:case"end":return ie.stop()}},re,this,[[2,7]])})),function(){return Hl.apply(this,arguments)})},{key:"joinCharacter",value:(zc=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe;return m().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return $e.debug("joinCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"joinCharacter() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify"}}),Ce.prev=2,Ce.next=5,this._socketRequest("joinCharacter",{config:W});case 5:return Ce.abrupt("return",Ce.sent);case 8:Ce.prev=8,Ce.t0=Ce.catch(2),$e.error("joinCharacter() | failed:%o",Ce.t0),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:K,status:2,message:"joinCharacter() failed"}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Ce.t0.message}}),this._emitError({code:4033,message:Ce.t0.message});case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"joinCharacter() End"}),Ce.abrupt("return",!1);case 16:case"end":return Ce.stop()}},re,this,[[2,8]])})),function(re){return zc.apply(this,arguments)})},{key:"switchTo",value:(zl=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht;return m().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return H=W.meetingId,K=W.participantId,ie=W.token,pe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"switchTo() Start",attributes:{"peer.id":K,meetingId:H}}),Xe.prev=2,Xe.next=5,this._socketRequest("switchToMeeting",{meetingId:H,participantId:K,secret:ie||this._secret});case 5:(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:pe,status:1,message:"switchTo() Success"}),Xe.next=12;break;case 8:Xe.prev=8,Xe.t0=Xe.catch(2),(Te=this._openTelemetry)===null||Te===void 0||Te.completeSpan({span:pe,status:2,message:"switchTo() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:Xe.t0.message}});case 12:case"end":return Xe.stop()}},re,this,[[2,8]])})),function(re){return zl.apply(this,arguments)})},{key:"removeCharacter",value:(Hp=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe;return m().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return $e.debug("removeCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"removeCharacter() Start"}),Ce.prev=2,Ce.next=5,this._socketRequest("leaveCharacter",{config:W});case 5:Ce.next=14;break;case 7:return Ce.prev=7,Ce.t0=Ce.catch(2),$e.error("removeCharacter() | failed:%o",Ce.t0),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:K,status:2,message:"removeCharacter() failed"}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Ce.t0.message}}),this._emitError({code:4034,message:Ce.t0.message}),Ce.abrupt("return",!1);case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"removeCharacter() End"}),Ce.abrupt("return",!0);case 16:case"end":return Ce.stop()}},re,this,[[2,7]])})),function(re){return Hp.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Vc=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=W.interactionId,H=W.text,$e.debug("sendCharacterMessage()"),K.prev=2,K.next=5,this._socketRequest("sendCharacterMessage",{interactionId:z,text:H});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),$e.error("sendCharacterMessage() | failed:%o",K.t0),this._emitError({code:4035,message:K.t0.message});case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Vc.apply(this,arguments)})},{key:"interruptCharacter",value:(Mo=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=W.interactionId,$e.debug("interruptCharacter()"),H.prev=2,H.next=5,this._socketRequest("interruptCharacter",{interactionId:z});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),$e.error("interruptCharacter() | failed:%o",H.t0),this._emitError({code:4036,message:H.t0.message});case 11:case"end":return H.stop()}},re,this,[[2,7]])})),function(re){return Mo.apply(this,arguments)})},{key:"pinStateChange",value:(Wc=(0,o.A)(m().mark(function re(W){var z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return H=W.peerId,K=W.state,(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Pin state Change for ".concat(H),attributes:{state:K?JSON.stringify(K):null},status:1}),pe.prev=2,pe.next=5,this._socketRequest("pinStateChanged",{peerId:H,state:K});case 5:pe.next=11;break;case 7:pe.prev=7,pe.t0=pe.catch(2),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:pe.t0.message}}),$e.error("pinStateChange() | failed");case 11:case"end":return pe.stop()}},re,this,[[2,7]])})),function(re){return Wc.apply(this,arguments)})},{key:"startVideo",value:($c=(0,o.A)(m().mark(function re(W){var z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return H=W.link,$e.debug("startVideo()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),ie.prev=3,ie.next=6,this._socketRequest("startVideo",{link:H});case 6:ie.next=13;break;case 8:ie.prev=8,ie.t0=ie.catch(3),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),$e.error("startVideo() | failed:%o",ie.t0),this._emitError({code:3023,message:ie.t0.message});case 13:case"end":return ie.stop()}},re,this,[[3,8]])})),function(re){return $c.apply(this,arguments)})},{key:"stopVideo",value:(Do=(0,o.A)(m().mark(function re(){var W,z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $e.debug("stopVideo()"),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),H.prev=2,H.next=5,this._socketRequest("stopVideo",{});case 5:H.next=12;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:H.t0.message}}),$e.error("stopVideo() | failed:%o",H.t0),this._emitError({code:3024,message:H.t0.message});case 12:case"end":return H.stop()}},re,this,[[2,7]])})),function(){return Do.apply(this,arguments)})},{key:"pauseVideo",value:(zp=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return $e.debug("pauseVideo()"),z.prev=1,z.next=4,this._socketRequest("pauseVideo",{currentTime:W});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),$e.error("pauseVideo() | failed:%o",z.t0),this._emitError({code:3025,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return zp.apply(this,arguments)})},{key:"resumeVideo",value:(Vp=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return $e.debug("resumeVideo()"),W.prev=1,W.next=4,this._socketRequest("resumeVideo",{});case 4:W.next=10;break;case 6:W.prev=6,W.t0=W.catch(1),$e.error("resumeVideo() | failed:%o",W.t0),this._emitError({code:3026,message:W.t0.message});case 10:case"end":return W.stop()}},re,this,[[1,6]])})),function(){return Vp.apply(this,arguments)})},{key:"seekVideo",value:(Io=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return $e.debug("seekVideo()"),z.prev=1,z.next=4,this._socketRequest("seekVideo",{currentTime:W});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),$e.error("seekVideo() | failed:%o",z.t0),this._emitError({code:3031,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return Io.apply(this,arguments)})},{key:"enablePeerMic",value:(Wp=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat(W," Mic"),status:1}),$e.debug("enablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("enablePeerMic",{peerId:W});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("enablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Wp.apply(this,arguments)})},{key:"requestMediaRelay",value:(od=(0,o.A)(m().mark(function re(W,z,H){var K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._socketRequest("mediaRelayRequestSent",{meetingId:W,secret:z??this._secret,kinds:H??["audio","video","share","share_audio"]});case 3:ie.next=8;break;case 5:ie.prev=5,ie.t0=ie.catch(0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:ie.t0.message}});case 8:case"end":return ie.stop()}},re,this,[[0,5]])})),function(re,W,z){return od.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(id=(0,o.A)(m().mark(function re(W){var z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return z=W.decision,H=W.peerId,K=W.meetingId,pe.prev=1,pe.next=4,this._socketRequest("respondToMediaRelayRequest",{decision:z,decidedBy:this._peerId,peerId:H,meetingId:K});case 4:pe.next=9;break;case 6:pe.prev=6,pe.t0=pe.catch(1),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:pe.t0.message}});case 9:case"end":return pe.stop()}},re,this,[[1,6]])})),function(re){return id.apply(this,arguments)})},{key:"stopMediaRelay",value:($p=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,this._socketRequest("mediaRelayRequestStop",{meetingId:W});case 3:H.next=8;break;case 5:H.prev=5,H.t0=H.catch(0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:H.t0.message}});case 8:case"end":return H.stop()}},re,this,[[0,5]])})),function(re){return $p.apply(this,arguments)})},{key:"enableRelayMedia",value:(ad=(0,o.A)(m().mark(function re(W,z){var H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("enableRelayMedia",{meetingId:W,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,W){return ad.apply(this,arguments)})},{key:"disableRelayMedia",value:(Vl=(0,o.A)(m().mark(function re(W,z){var H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("disableRelayMedia",{meetingId:W,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,W){return Vl.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Wl=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("enableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return Wl.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:($l=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("disableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return $l.apply(this,arguments)})},{key:"disablePeerMic",value:(Ul=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat(W," Mic"),status:1}),$e.debug("disablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("disablePeerMic",{peerId:W});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("disablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Ul.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Uc=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return $e.debug("consumeWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:W}}),K.prev=4,K.next=7,this._socketRequest("consumeVideoStreams",{peerId:W});case 7:K.next=13;break;case 9:K.prev=9,K.t0=K.catch(4),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("consumeWebcamStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[4,9]])})),function(re){return Uc.apply(this,arguments)})},{key:"consumeMicStreams",value:(sd=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return $e.debug("consumeMicStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:W}}),K.prev=2,K.next=5,this._socketRequest("consumeAudioStreams",{peerId:W});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("consumeMicStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return sd.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(nd=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return $e.debug("stopConsumingAudioStreams()"),K.prev=3,K.next=6,this._socketRequest("stopConsumingAudioStreams",{peerId:W});case 6:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:W}}),K.next=13;break;case 9:K.prev=9,K.t0=K.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("stopConsumingMicStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[3,9]])})),function(re){return nd.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(rd=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return $e.debug("stopConsumingWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:W}}),K.prev=2,K.next=5,this._socketRequest("stopConsumingVideoStreams",{peerId:W});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("stopConsumingWebcamStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return rd.apply(this,arguments)})},{key:"changeMode",value:(Fl=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt=this;return m().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMode() Calling with mode: ".concat(W)}),K=this._mode,Ye.prev=2,K!==W){Ye.next=7;break}throw(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:2,message:"changeMode() Ending"}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"You are already in ".concat(W," mode"),logType:"INFO"}),new Error("You are already in ".concat(W," mode"));case 7:if(Ce=function(){var vt=(0,o.A)(m().mark(function kt(At,Rt){return m().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.next=2,gt._socketRequest("createWebRtcTransport",{preferredProtocol:gt._preferredProtocol,producing:At,consuming:Rt,sctpCapabilities:gt._useDataChannel?gt._mediasoupDevice.sctpCapabilities:void 0});case 2:return yt.abrupt("return",yt.sent);case 3:case"end":return yt.stop()}},kt)}));return function(kt,At){return vt.apply(this,arguments)}}(),!(0,xs.kR)(W)){Ye.next=36;break}return this._consume=!0,this._produce=!0,this._mode=W,this._mediasoupDevice=new Ut.pF({handlerName:this._handlerName}),Ye.next=15,this._socketRequest("getRouterRtpCapabilities");case 15:return ht=Ye.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(ht.headerExtensions=(Xe=ht.headerExtensions)===null||Xe===void 0?void 0:Xe.filter(function(vt){return vt.uri!="urn:3gpp:video-orientation"})),Ye.next=19,this._mediasoupDevice.load({routerRtpCapabilities:ht});case 19:if(!this._produce){Ye.next=24;break}return Ye.next=22,Ce(!0,!1);case 22:pt=Ye.sent,this.createProducerTransport(pt,H);case 24:if(K===xs.nI.RECV_ONLY||!this._consume){Ye.next=29;break}return Ye.next=27,Ce(!1,!0);case 27:ft=Ye.sent,this.createConsumerTransport(ft,H);case 29:return(Te=this._openTelemetry)===null||Te===void 0||Te.traceAutoComplete({spanName:"Sending changeMode request to server",span:H,status:1}),Ye.next=32,this._socketRequest("changeMode",{mode:W});case 32:this._produce&&(qe.dispatch(mr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,H)),window.SHOW_INFO&&(le=qe.getState(),mt=le.me,qe.dispatch(nr(mt.id))),Ye.next=62;break;case 36:if(!(0,xs.kR)(K)||W!==xs.nI.RECV_ONLY){Ye.next=44;break}return this._produce=!1,this._mode=W,this._closeProducersAndTransport(),Ye.next=42,this._socketRequest("changeMode",{mode:W});case 42:Ye.next=62;break;case 44:if(!(0,xs.wZ)(K)||W!==xs.nI.RECV_ONLY){Ye.next=54;break}return this._consume=!0,this._mode=W,Ye.next=49,this._setupWebrtcTransport(H);case 49:return Ye.next=51,this._socketRequest("changeMode",{mode:W});case 51:window.SHOW_INFO&&(st=qe.getState(),We=st.me,qe.dispatch(nr(We.id))),Ye.next=62;break;case 54:if(!(0,xs.wZ)(W)){Ye.next=62;break}return Ye.next=57,this._socketRequest("changeMode",{mode:W});case 57:this._consume=!1,this._produce=!1,this._mode=W,this._dataConsumers.clear(),this._closeTransports();case 62:Ye.next=68;break;case 64:Ye.prev=64,Ye.t0=Ye.catch(2),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Error changeMode(".concat(W,") | failed"),logType:"ERROR",attributes:{error:Ye.t0.message}}),(Fe=this._openTelemetry)===null||Fe===void 0||Fe.completeSpan({span:H,status:2,message:"changeMode(".concat(W,") | failed")});case 68:case"end":return Ye.stop()}},re,this,[[2,64]])})),function(re){return Fl.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var re;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var re,W;this._sendTransport&&((re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null),this._recvTransport&&((W=this._recvTransport)===null||W===void 0||W.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(Bl=(0,o.A)(m().mark(function re(W){var z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return this._mediasoupDevice=new Ut.pF({handlerName:this._handlerName}),ie.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return z=ie.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(z.headerExtensions=(H=z.headerExtensions)===null||H===void 0?void 0:H.filter(function(pe){return pe.uri!="urn:3gpp:video-orientation"})),ie.next=7,this._mediasoupDevice.load({routerRtpCapabilities:z});case 7:return ie.next=9,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 9:K=ie.sent,this.createConsumerTransport(K,W);case 11:case"end":return ie.stop()}},re,this)})),function(re){return Bl.apply(this,arguments)})},{key:"enablePeerWebcam",value:($i=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat(W," Webcam"),status:1}),$e.debug("enablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("enablePeerWebcam",{peerId:W});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("enablePeerWebcam() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return $i.apply(this,arguments)})},{key:"disablePeerWebcam",value:(Fc=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat(W," Webcam"),status:1}),$e.debug("disablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("disablePeerWebcam",{peerId:W});case 5:K.next=10;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}});case 10:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Fc.apply(this,arguments)})},{key:"getMicStats",value:function(re){var W=this;if(this._micProducer){var z=0;re.onStatsCollected=function(H){var K;W._stats.producerStats||(W._stats.producerStats={}),W._stats.producerStats.audio||(W._stats.producerStats.audio=[]),W._micProducer&&(W._latestStats[(K=W._micProducer)===null||K===void 0?void 0:K.id]=[]),H.audio.forEach(function(ie){var pe;W._micProducer&&W._latestStats[(pe=W._micProducer)===null||pe===void 0?void 0:pe.id].push(ie)}),z%5==0&&W._micProducer!=null&&W._stats.producerStats.audio.push(Xn({timestamp:new Date},W._latestStats[W._micProducer.id]?W._latestStats[W._micProducer.id][0]:{})),z++}}}},{key:"enableMic",value:(Bc=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt,Ye,vt,kt,At,Rt,yt,Jt,Mt,Lt,kr,vn,qr,Br,Rn,An,zn,Cr,En,Ln,Hn,Kr,os,In,Yt,qn,xt,or,ln,on,un,jn,ea,Xa,ua,Ua,$a,ks,fs,qs,Cs,da,B,U,V,Z,ce,ne,he,ge,ve,Re,Pe,oe=this,_e=arguments;return m().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(pe=_e.length>0&&_e[0]!==void 0?_e[0]:void 0,Ce=_e.length>1&&_e[1]!==void 0?_e[1]:void 0,Te=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableMic() Calling ".concat(pe?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:pe?JSON.stringify(pe):"Not Specify Custom Track"},span:Ce||null}),$e.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){me.next=28;break}if(pt=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Mic Producer found",span:Te}),pe&&((ft=this._openTelemetry)===null||ft===void 0||ft.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Te,status:1}),pe.getTracks().forEach(function(Q){Q.stop()})),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:pt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),le=this._micProducer,!this._sendTransport){me.next=19;break}return me.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(Q){oe.e2eeManager&&(Q.senderStreams=Q.createEncodedStreams())}});case 14:this._micProducer=me.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(st=xn({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:le._appData.encodings,codecOptions:le._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),qe.dispatch(st),this._eventEmitter.emit(st.type,st.payload),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Te,status:1,message:"Enable Mic Successful"})):(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:Te,status:2,message:"Error in enableMic() :: micProducer null"}),me.next=22;break;case 19:return(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),me.abrupt("return");case 22:return Fe=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Fe==null||Fe.stop(),oe._latestStats[oe._micProducer.id]=[],oe._metrics.removeExistingProbe(Fe)}),this._micProducer.observer.on("close",function(){Fe==null||Fe.stop(),oe._latestStats[oe._micProducer.id]=[],oe._metrics.removeExistingProbe(Fe)}),this.getMicStats(Fe),Fe.start(),me.abrupt("return");case 28:if(!this._mediasoupDevice){me.next=37;break}if(this._mediasoupDevice.canProduce("audio")){me.next=35;break}return vt=this._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:lr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:vt,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),$e.error("enableMic() | cannot produce audio"),(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:Te,status:2,message:"Error in enableMic() :: ".concat(vt)}),me.abrupt("return");case 35:me.next=40;break;case 37:return(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:Te,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),me.abrupt("return");case 40:if(me.prev=40,this._externalVideo){me.next=107;break}return $e.debug("enableMic() | calling getUserMedia()"),me.next=45,this._updateMics(Te);case 45:if(this._mic.device){me.next=48;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 48:try{pe&&(Rt=pe.getAudioTracks()[0]).readyState=="ended"&&(Rt=null,Br=lr.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(qr=this._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:Br.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Br))}catch(Q){An=lr.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(Rn=this._videosdkLogs)===null||Rn===void 0||Rn.pushLogs({logText:An.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(An),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Q))}if(Rt){me.next=105;break}return En=(zn=this._openTelemetry)===null||zn===void 0?void 0:zn.trace({spanName:"Creating Track",span:Te}),me.prev=51,me.next=54,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 54:Ln=me.sent,me.next=103;break;case 57:if(me.prev=57,me.t0=me.catch(51),(Hn=this._openTelemetry)===null||Hn===void 0||Hn.completeSpan({message:"Error in enableMic() :: ".concat(me.t0.message),span:En,status:2}),me.t0.name!=="SecurityError"){me.next=68;break}In=lr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,Yt=In.message,this._emitError(In),(Kr=this._videosdkLogs)===null||Kr===void 0||Kr.pushLogs({logText:Yt,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(os=this._openTelemetry)===null||os===void 0||os.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(Yt),span:Te,status:2}),me.next=102;break;case 68:if(me.t0.name!=="DOMException"){me.next=76;break}or=lr.q.ERROR_RN_MIC_NOT_FOUND,ln=or.message,this._emitError(or),(qn=this._videosdkLogs)===null||qn===void 0||qn.pushLogs({logText:ln,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(xt=this._openTelemetry)===null||xt===void 0||xt.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ln),span:Te,status:2}),me.next=102;break;case 76:if(!(me.t0 instanceof DOMException)){me.next=99;break}me.t1=me.t0.name,me.next=me.t1==="NotAllowedError"?80:me.t1==="NotReadableError"?83:me.t1==="NotFoundError"?86:93;break;case 80:return on=this.handleNotAllowedError(me.t0,this._openTelemetry,this._videosdkLogs,Te,"audio"),this._emitError(on),me.abrupt("break",97);case 83:return un=this.handleNotReadableError(me.t0,this._openTelemetry,this._videosdkLogs,Te,"audio"),this._emitError(un),me.abrupt("break",97);case 86:return jn=lr.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(jn=lr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),ea=jn.message,this._emitError(jn),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:ea,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ea),span:Te,status:2}),me.abrupt("break",97);case 93:return Xa="An error occurred in creating audio track, ".concat(me.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:me.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Xa)},dashboardLog:!0}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Error in enableMic() :: ".concat(Xa),span:Te,status:2}),me.abrupt("break",97);case 97:me.next=102;break;case 99:$a="An error occurred in creating audio track, ".concat(me.t0.message),(ua=this._videosdkLogs)===null||ua===void 0||ua.pushLogs({logText:me.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat($a)},dashboardLog:!0}),(Ua=this._openTelemetry)===null||Ua===void 0||Ua.completeSpan({message:"Error in enableMic() :: ".concat($a),span:Te,status:2});case 102:return me.abrupt("return");case 103:Rt=Ln.getAudioTracks()[0],(Cr=this._openTelemetry)===null||Cr===void 0||Cr.completeSpan({message:"Audio Track Generated",span:En,status:1});case 105:me.next=111;break;case 107:return me.next=109,this._getExternalVideoStream();case 109:ks=me.sent,Rt=ks.getAudioTracks()[0].clone();case 111:if(yt=(Jt=this._openTelemetry)===null||Jt===void 0?void 0:Jt.trace({spanName:"Generating Producer Configuration",span:Te}),fs={opusStereo:1,opusDtx:1},pe&&(qs=pe.encoderConfig?Ma.$.audioProfiles[pe.encoderConfig]:Ma.$.audioProfiles.speech_standard,fs={opusStereo:qs.stereo?1:0,opusFec:qs.fec?1:0,opusDtx:qs.dtx?1:0,opusMaxPlaybackRate:qs.maxPlaybackRate,opusPtime:qs.packetTime}),da={encodings:Cs=[{networkPriority:"high"}],codecOptions:fs},(Mt=this._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Generated AppData",span:yt,attributes:{appData:JSON.stringify(da)},status:1}),(Lt=this._openTelemetry)===null||Lt===void 0||Lt.completeSpan({span:yt,status:1,message:"Producer Configuration Generated"}),yt=(kr=this._openTelemetry)===null||kr===void 0?void 0:kr.trace({spanName:"Creating Mic Producer",span:Te}),(vn=Rt)===null||vn===void 0||vn.addEventListener("ended",function(){console.log("Track Ended Error");try{var Q,X,ue=oe._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_TRACK_ENDED:lr.q.ERROR_MICROPHONE_TRACK_ENDED;(Q=oe._videosdkLogs)===null||Q===void 0||Q.pushLogs({logText:ue.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(ue.message)},dashboardLog:!0}),(X=oe._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Te,message:ue.message,status:2}),qe.dispatch(rr({type:"error",text:"Microphone disconnected!"})),oe.disableMic(!0,Te).catch(function(){})}catch(Oe){console.error(Oe)}}),!this._sendTransport){me.next=128;break}return me.next=124,this._sendTransport.produce({track:Rt,encodings:Cs,codecOptions:fs,appData:Xn(Xn({},da),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Q){oe.e2eeManager&&(Q.senderStreams=Q.createEncodedStreams())}});case 124:this._micProducer=me.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),me.next=131;break;case 128:return(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),me.abrupt("return");case 131:this._micProducer?(Rt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Rt.getConstraints().deviceId)),Z=xn({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Cs,codecOptions:fs,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),qe.dispatch(Z),this._eventEmitter.emit(Z.type,Z.payload),(ce=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(ce),this._micProducer.on("transportclose",function(){var Q,X=On(oe._micProducer.id);qe.dispatch(X),oe._eventEmitter.emit(X.type,X.payload),(Q=oe._micProducer)===null||Q===void 0||Q.close(),oe._micProducer=null}),this._micProducer.observer.on("pause",function(){ce==null||ce.stop(),oe._latestStats[oe._micProducer.id]=[],oe._metrics.removeExistingProbe(ce)}),this._micProducer.observer.on("close",function(){ce==null||ce.stop(),oe._latestStats[oe._micProducer.id]=[],oe._metrics.removeExistingProbe(ce)}),this._micProducer.on("trackended",function(){var Q,X,ue=oe._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_MIC_TRACK_ENDED:lr.q.ERROR_MICROPHONE_TRACK_ENDED;(Q=oe._videosdkLogs)===null||Q===void 0||Q.pushLogs({logText:ue.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(ue.message)},dashboardLog:!0}),(X=oe._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Te,message:ue.message,status:2}),qe.dispatch(rr({type:"error",text:"Microphone disconnected!"})),oe.disableMic(!0,Te).catch(function(){})}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:yt,status:1,message:"Mic Producer Created"}),(V=this._openTelemetry)===null||V===void 0||V.completeSpan({span:Te,status:1,message:"Enable Mic Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(he=this._openTelemetry)===null||he===void 0||he.completeSpan({span:yt,status:2,message:"Error in enableMic() :: micProducer null"}),(ge=this._openTelemetry)===null||ge===void 0||ge.completeSpan({span:Te,status:2,message:"Error in enableMic() :: micProducer null"})),me.next=144;break;case 134:return me.prev=134,me.t2=me.catch(40),(ve=this._openTelemetry)===null||ve===void 0||ve.completeSpan({span:yt,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(me.t2.message)}),(Re=this._openTelemetry)===null||Re===void 0||Re.completeSpan({span:Te,status:2,message:"Error in enableMic :: ".concat(me.t2.message)}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:me.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(me.t2.message)},dashboardLog:!0}),$e.error("enableMic() | failed:%o",me.t2),qe.dispatch(rr({type:"error",text:"Error enabling microphone: ".concat(me.t2)})),me.next=143,this._socketRequest("produceError",{mediaType:"audio",message:me.t2.message});case 143:Rt&&Rt.stop();case 144:case"end":return me.stop()}},re,this,[[40,134],[51,57]])})),function(){return Bc.apply(this,arguments)})},{key:"disableMic",value:(Ao=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt,Ye,vt,kt,At,Rt,yt,Jt=arguments;return m().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(H=Jt.length>0&&Jt[0]!==void 0&&Jt[0],K=Jt.length>1&&Jt[1]!==void 0?Jt[1]:void 0,$e.debug("disableMic()"),ie=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableMic() Calling",status:1,span:K||null}),this._micProducer){Mt.next=8;break}return(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:ie,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Ce=this._videosdkLogs)===null||Ce===void 0||Ce.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Mt.abrupt("return");case 8:if(Te=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Mic Producer",span:ie,status:1}),this._micEnabled=!1,!this._micProducer||H){Mt.next=32;break}return ft=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Pausing Mic Producer",span:Te,status:1}),this._micProducer.pause(),le=On(this._micProducer.id),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:ft,status:1,message:"Pause Mic Successfully"}),qe.dispatch(le),this._eventEmitter.emit(le.type,le.payload),Mt.prev=17,Mt.next=20,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 20:(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Te,status:1,message:"Requested Server to Close Producer"}),Mt.next=30;break;case 23:Mt.prev=23,Mt.t0=Mt.catch(17),qe.dispatch(rr({type:"error",text:"Error closing server-side mic Producer: ".concat(Mt.t0)})),Fe="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:Te,status:2,message:"Error in disableMic() :: ".concat(Mt.t0.message)}),(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:ie,status:2,message:Fe}),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:Fe,logType:"ERROR",attributes:{error:Mt.t0.message},dashboardLog:!0});case 30:return(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:ie,status:1,message:"Mic Disabled Successfully"}),Mt.abrupt("return");case 32:return this._micProducer.close(),gt=On(this._micProducer.id),qe.dispatch(gt),this._eventEmitter.emit(gt.type,gt.payload),Mt.prev=36,Mt.next=39,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 39:(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:Te,status:1,message:"Requested Server to Close Producer"}),(vt=this._openTelemetry)===null||vt===void 0||vt.completeSpan({span:ie,status:1,message:"Mic Disabled Successfully"}),Mt.next=50;break;case 43:Mt.prev=43,Mt.t1=Mt.catch(36),qe.dispatch(rr({type:"error",text:"Error closing server-side mic Producer: ".concat(Mt.t1)})),yt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Te,status:2,message:"Error in disableMic() :: ".concat(Mt.t1.message)}),(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:ie,status:2,message:yt}),(Rt=this._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:yt,logType:"ERROR",attributes:{error:Mt.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return Mt.stop()}},re,this,[[17,23],[36,43]])})),function(){return Ao.apply(this,arguments)})},{key:"muteMic",value:(Up=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return $e.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),z.prev=3,z.next=6,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 6:qe.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),$e.error("muteMic() | failed: %o",z.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),qe.dispatch(rr({type:"error",text:"Error pausing server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return Up.apply(this,arguments)})},{key:"unmuteMic",value:(Fp=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return $e.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),z.prev=3,z.next=6,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 6:qe.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),$e.error("unmuteMic() | failed: %o",z.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),qe.dispatch(rr({type:"error",text:"Error resuming server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return Fp.apply(this,arguments)})},{key:"enableWebcam",value:(td=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt,Ye,vt,kt,At,Rt,yt,Jt,Mt,Lt,kr,vn,qr,Br,Rn,An,zn,Cr,En,Ln,Hn,Kr,os,In,Yt,qn,xt,or,ln,on,un,jn,ea,Xa,ua,Ua,$a,ks,fs,qs,Cs,da,B,U,V,Z,ce,ne,he,ge,ve,Re,Pe=this,oe=arguments;return m().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(pe=oe.length>0&&oe[0]!==void 0?oe[0]:void 0,Ce=oe.length>1&&oe[1]!==void 0?oe[1]:void 0,Te=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableWebcam() Calling ".concat(pe?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:pe?JSON.stringify(pe):"Not Specify Custom Track"},span:Ce||null}),$e.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){_e.next=9;break}return(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:Te,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Xe=this._videosdkLogs)===null||Xe===void 0||Xe.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),_e.abrupt("return");case 9:if(!this._mediasoupDevice){_e.next=18;break}if(this._mediasoupDevice.canProduce("video")){_e.next=16;break}return le=this._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:lr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:Te,status:2,message:"Error in enableWebcam() :: ".concat(le)}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:le,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),$e.error("enableWebcam() | cannot produce video"),_e.abrupt("return");case 16:_e.next=21;break;case 18:return(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:Te,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),_e.abrupt("return");case 21:if(qe.dispatch(Ds(!0)),Fe=this._webcam.resolution,_e.prev=23,this._externalVideo){_e.next=100;break}return _e.next=27,this._updateWebcams(Te);case 27:if(Ue=this._webcam.device){_e.next=31;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 31:$e.debug("enableWebcam() | calling getUserMedia()");try{pe&&(We=pe.getVideoTracks()[0]).readyState=="ended"&&(We=null,Rt=lr.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(At=this._videosdkLogs)===null||At===void 0||At.pushLogs({logText:Rt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Rt))}catch(me){Jt=lr.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(yt=this._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:Jt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(Jt),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(me))}if(We){_e.next=98;break}if(Lt=(Mt=this._openTelemetry)===null||Mt===void 0?void 0:Mt.trace({spanName:"Creating Track",span:Te}),kr=null,_e.prev=36,this._webcam.resolution!="hd"){_e.next=44;break}return _e.next=40,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 40:pe=_e.sent,kr=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),_e.next=48;break;case 44:return _e.next=46,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 46:pe=_e.sent,kr=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:We=pe.getVideoTracks()[0],(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({message:"Video Track Generated",span:Lt,attributes:{customVideoTrackConfig:kr},status:1}),_e.next=98;break;case 52:if(_e.prev=52,_e.t0=_e.catch(36),(qr=this._openTelemetry)===null||qr===void 0||qr.completeSpan({message:"Error in enableWebcam() :: ".concat(_e.t0.message),span:Lt,status:2}),_e.t0.name!=="SecurityError"){_e.next=63;break}An=lr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,zn=An.message,this._emitError(An),(Br=this._videosdkLogs)===null||Br===void 0||Br.pushLogs({logText:zn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(Rn=this._openTelemetry)===null||Rn===void 0||Rn.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(zn),span:enableMicSpan,status:2}),_e.next=97;break;case 63:if(_e.t0.name!=="DOMException"){_e.next=71;break}Ln=lr.q.ERROR_RN_CAMERA_NOT_FOUND,Hn=Ln.message,this._emitError(Ln),(Cr=this._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:Hn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Hn),span:enableMicSpan,status:2}),_e.next=97;break;case 71:if(!(_e.t0 instanceof DOMException)){_e.next=94;break}_e.t1=_e.t0.name,_e.next=_e.t1==="NotAllowedError"?75:_e.t1==="NotReadableError"?78:_e.t1==="NotFoundError"?81:88;break;case 75:return Kr=this.handleNotAllowedError(_e.t0,this._openTelemetry,this._videosdkLogs,Te,"video"),this._emitError(Kr),_e.abrupt("break",92);case 78:return os=this.handleNotReadableError(_e.t0,this._openTelemetry,this._videosdkLogs,Te,"video"),this._emitError(os),_e.abrupt("break",92);case 81:return In=lr.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(In=lr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),Yt=In.message,this._emitError(In),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:Yt,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Yt),span:Te,status:2}),_e.abrupt("break",92);case 88:return qn="An error occurred in creating video track, ".concat(_e.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:_e.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(qn)},dashboardLog:!0}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Error in enableWebcam() :: ".concat(qn),span:Te,status:2}),_e.abrupt("break",92);case 92:_e.next=97;break;case 94:ln="An error occurred in creating video track, ".concat(_e.t0.message),(xt=this._videosdkLogs)===null||xt===void 0||xt.pushLogs({logText:_e.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(ln)},dashboardLog:!0}),(or=this._openTelemetry)===null||or===void 0||or.completeSpan({message:"Error in enableWebcam() :: ".concat(ln),span:Te,status:2});case 97:return _e.abrupt("return");case 98:_e.next=105;break;case 100:return Ue={label:"external video"},_e.next=103,this._getExternalVideoStream();case 103:on=_e.sent,We=on.getVideoTracks()[0].clone();case 105:if(un=(gt=this._openTelemetry)===null||gt===void 0?void 0:gt.trace({spanName:"Generating Producer Configuration",span:Te}),Xa={videoGoogleStartBitrate:1e3},!this._forceH264){_e.next=114;break}if(ea=this._mediasoupDevice.rtpCapabilities.codecs.find(function(me){return me.mimeType.toLowerCase()==="video/h264"})){_e.next=112;break}throw new Error("The desired H.264 codec and configuration are not supported");case 112:_e.next=119;break;case 114:if(!this._forceVP9){_e.next=119;break}if(ea=this._mediasoupDevice.rtpCapabilities.codecs.find(function(me){return me.mimeType.toLowerCase()==="video/vp9"})){_e.next=119;break}throw new Error("The desired VP9 codec and configuration are not supported");case 119:We?(ua=We.getConstraints(),Ua=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",jn=(0,go.v7)(!1,ua.width,ua.height,{simulcast:pe.multiStream},Ua)):this._useSimulcast&&($a=this._mediasoupDevice.rtpCapabilities.codecs.find(function(me){return me.kind==="video"}),jn=this._forceVP9&&ea||$a.mimeType.toLowerCase()==="video/vp9"?Tp:Em[this._webcam.resolution]),ks={};try{ks={encodings:jn,width:pe?(fs=We)===null||fs===void 0?void 0:fs.getConstraints().width:Gu[Fe].width.ideal,height:pe?(qs=We)===null||qs===void 0?void 0:qs.getConstraints().height:Gu[Fe].height.ideal}}catch(me){(Cs=this._videosdkLogs)===null||Cs===void 0||Cs.pushLogs({logText:me.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(me.message)},dashboardLog:!0}),console.log(me)}if((Ye=this._openTelemetry)===null||Ye===void 0||Ye.traceAutoComplete({spanName:"Track Generated with height ".concat(ks.height," and width ").concat(ks.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(ks)},span:Te,status:1}),(vt=this._openTelemetry)===null||vt===void 0||vt.completeSpan({span:un,status:1,message:"Producer Configuration Generated"}),un=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Creating Webcam Producer",span:Te}),!this._sendTransport){_e.next=132;break}return _e.next=128,this._sendTransport.produce({track:We,encodings:jn,codecOptions:Xa,codec:ea,appData:Xn(Xn({},ks),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(me){Pe.e2eeManager&&(me.senderStreams=me.createEncodedStreams())}});case 128:this._webcamProducer=_e.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),_e.next=135;break;case 132:return(da=this._videosdkLogs)===null||da===void 0||da.pushLogs({logText:lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(lr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),_e.abrupt("return");case 135:We.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(We.getConstraints().deviceId)),this._webcamProducer?(V=xn({id:this._webcamProducer.id,deviceLabel:Ue.label,type:this._getWebcamType(Ue),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),qe.dispatch(V),this._eventEmitter.emit(V.type,V.payload),Z=0,(ce=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(me){try{var Q;Pe._stats.producerStats||(Pe._stats.producerStats={}),Pe._stats.producerStats.video||(Pe._stats.producerStats.video=[]),Pe._webcamProducer&&(Pe._latestStats[(Q=Pe._webcamProducer)===null||Q===void 0?void 0:Q.id]=[]),me.video.forEach(function(ue){var Oe;Pe._latestStats[(Oe=Pe._webcamProducer)===null||Oe===void 0?void 0:Oe.id].push(ue)}),Z%5==0&&Pe._webcamProducer!=null&&Pe._stats.producerStats.video.push({timestamp:new Date,stats:Pe._latestStats[Pe._webcamProducer.id]}),Z++}catch(ue){var X;(X=Pe._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:ue.message}}),console.log("PRODUCER ERROR",ue)}},ce.start(),this._webcamProducer.observer.on("close",function(){ce.stop(),Pe._metrics.removeExistingProbe(ce)}),this._webcamProducer.on("transportclose",function(){var me,Q=On(Pe._webcamProducer.id);qe.dispatch(Q),Pe._eventEmitter.emit(Q.type,Q.payload),(me=Pe._webcamProducer)===null||me===void 0||me.close(),Pe._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var me,Q,X=Pe._deviceInfo.sdkType=="react-native"?lr.q.ERROR_RN_CAMERA_TRACK_ENDED:lr.q.ERROR_WEBCAM_TRACK_ENDED;(me=Pe._videosdkLogs)===null||me===void 0||me.pushLogs({logText:X.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(X.message)},dashboardLog:!0}),(Q=Pe._openTelemetry)===null||Q===void 0||Q.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Te,message:X.message,status:2}),qe.dispatch(rr({type:"error",text:"Webcam disconnected!"})),Pe.disableWebcam(Te).catch(function(){})}),(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:un,status:1,message:"Webcam Producer Created"}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Te,status:1,message:"Enable Webcam Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(he=this._openTelemetry)===null||he===void 0||he.completeSpan({span:un,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(ge=this._openTelemetry)===null||ge===void 0||ge.completeSpan({span:Te,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),_e.next=147;break;case 139:return _e.prev=139,_e.t2=_e.catch(23),(ve=this._videosdkLogs)===null||ve===void 0||ve.pushLogs({logText:_e.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(_e.t2.message)},dashboardLog:!0}),(Re=this._openTelemetry)===null||Re===void 0||Re.completeSpan({span:Te,status:2,message:"Error in enableWebcam() :: ".concat(_e.t2.message)}),qe.dispatch(rr({type:"error",text:"Error enabling webcam: ".concat(_e.t2)})),_e.next=146,this._socketRequest("produceError",{mediaType:"video",message:_e.t2.message});case 146:We&&We.stop();case 147:qe.dispatch(Ds(!1));case 148:case"end":return _e.stop()}},re,this,[[23,139],[36,52]])})),function(){return td.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(re,W,z,H,K){var ie={};return ie=re.message==="Permission denied"||re.message==="Permission dismissed"?K==="video"?lr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:lr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message.includes("The request is not allowed by the user agent")?K==="video"?lr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:lr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message==="Permission denied by system"?K==="video"?lr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:lr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?lr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:lr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,z.pushLogs({logText:ie.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),W.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(ie.message):"Error in enableMic() :: occurred in creating audio track, ".concat(ie.message),span:H,status:2}),ie}},{key:"handleNotReadableError",value:function(re,W,z,H,K){var ie={};return ie=re.message==="Device in use"?K==="video"?lr.q.ERROR_CAMERA_IN_USE:lr.q.ERROR_MICROPHONE_IN_USE:K==="video"?lr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:lr.q.ERROR_MICROPHONE_IN_USE,z.pushLogs({logText:ie.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),W.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(ie.message):"Error in enableMic() :: occurred in creating audio track, ".concat(ie.message),span:H,status:2}),ie}},{key:"createCameraVideoTrack",value:(jl=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt;return m().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return z=W.cameraId,H=z===void 0?void 0:z,K=W.encoderConfig,ie=K===void 0?void 0:K,pe=W.facingMode,Ce=pe===void 0?void 0:pe,Te=W.optimizationMode,ht=Te===void 0?void 0:Te,Xe=W.multiStream,pt=Xe===void 0||Xe,ft=ie?Ma.$.videoProfiles[ie]:Ma.$.videoProfiles.h360p_w640p,le={video:{deviceId:H||void 0,facingMode:Ce||void 0,width:ft.width,height:ft.height,frameRate:ft.frameRate}},st.next=5,(0,Cc.lp)(le);case 5:return mt=st.sent,ht&&(mt.contentHint=ht),mt.encoderConfig=ie||"h360p_w640p",mt.contentHint=ht||"",mt.multiStream=pt,mt.cameraId=H,st.abrupt("return",mt);case 12:case"end":return st.stop()}},re)})),function(re){return jl.apply(this,arguments)})},{key:"disableWebcam",value:(Es=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt=arguments;return m().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(H=mt.length>0&&mt[0]!==void 0?mt[0]:void 0,K=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableWebcam() Calling",status:1,span:H||null}),$e.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){st.next=8;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),st.abrupt("return");case 8:return Ce=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Webcam Producer",span:K,status:1}),this._webcamProducer.close(),Te=On(this._webcamProducer.id),qe.dispatch(Te),this._eventEmitter.emit(Te.type,Te.payload),st.prev=13,st.next=16,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 16:(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:Ce,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:K,status:1,message:"Webcam Disabled Successfully"}),st.next=27;break;case 21:st.prev=21,st.t0=st.catch(13),(pt=this._videosdkLogs)===null||pt===void 0||pt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:st.t0.message},dashboardLog:!0}),(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Ce,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(st.t0)}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(st.t0)}),qe.dispatch(rr({type:"error",text:"Error closing server-side webcam Producer: ".concat(st.t0)}));case 27:case"end":return st.stop()}},re,this,[[13,21]])})),function(){return Es.apply(this,arguments)})},{key:"getMics",value:(Bp=(0,o.A)(m().mark(function re(){var W,z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return W=[],H.prev=1,H.next=4,this._updateMics();case 4:this._mics.forEach(function(K,ie){W.push({deviceId:ie,label:K.label})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),$e.error("getMics() | Error",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return H.abrupt("return",W);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return Bp.apply(this,arguments)})},{key:"changeMic",value:(ed=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMic() Calling"}),We.prev=1,(0,f.A)(W)!="object"){We.next=9;break}return We.next=5,this.disableMic(!0,H);case 5:return We.next=7,this.enableMic(W,H);case 7:We.next=27;break;case 9:return Ce=W,We.next=12,this._updateMics();case 12:if(Te=Array.from(this._mics.keys()),ht=Te.length,Xe=this._mic.device?this._mic.device.deviceId:void 0,Ce!=null&&Ce!=null?pt=Te.indexOf(Ce):(pt=Te.indexOf(Xe))<ht-1?pt++:pt=0,this._mic.device=this._mics.get(Te[pt]),ft=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({spanName:"Getting Selected Mic",span:H,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){We.next=21;break}throw(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return We.next=23,this.disableMic(!0,H);case 23:return We.next=25,this.enableMic(void 0,H);case 25:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:ft,status:1,message:"Done"}),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:H,status:1,message:"changeMic() Ending"});case 27:We.next=33;break;case 29:We.prev=29,We.t0=We.catch(1),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:H,status:2,message:"changeMic() | Error ".concat(We.t0)}),(st=this._videosdkLogs)===null||st===void 0||st.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:We.t0.message}});case 33:case"end":return We.stop()}},re,this,[[1,29]])})),function(re){return ed.apply(this,arguments)})},{key:"getWebcams",value:(jp=(0,o.A)(m().mark(function re(){var W,z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return W=[],H.prev=1,H.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(K,ie){W.push({deviceId:ie,label:K.label,facingMode:K.facing||"environment"})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),$e.error("getWebcams() | failed %o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return H.abrupt("return",W);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return jp.apply(this,arguments)})},{key:"replaceWebcamStream",value:(jc=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._webcamProducer){H.next=7;break}return z=W.getVideoTracks()[0],H.next=4,this._webcamProducer.replaceTrack({track:z});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),H.next=11;break;case 7:return H.next=9,this.disableWebcam();case 9:return H.next=11,this.enableWebcam(W);case 11:case"end":return H.stop()}},re,this)})),function(re){return jc.apply(this,arguments)})},{key:"changeWebcam",value:(Zu=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeWebcam() Calling"}),qe.dispatch(Ds(!0)),(0,f.A)(W)!=="object"){We.next=17;break}return We.prev=3,We.next=6,this.disableWebcam(H);case 6:return We.next=8,this.enableWebcam(W,H);case 8:We.next=15;break;case 10:We.prev=10,We.t0=We.catch(3),$e.error("changeWebcam() | failed: %o",We.t0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(W),error:We.t0.message}}),qe.dispatch(rr({type:"error",text:"Could not change webcam: ".concat(We.t0)}));case 15:We.next=46;break;case 17:return We.prev=17,We.next=20,this._updateWebcams(H);case 20:if(Te=Array.from(this._webcams.keys()),ht=Te.length,Xe=this._webcam.device?this._webcam.device.deviceId:void 0,W!=null&&W!=null?pt=Te.indexOf(W):(pt=Te.indexOf(Xe))<ht-1?pt++:pt=0,this._webcam.device=this._webcams.get(Te[pt]),$e.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",ft=(ie=this._openTelemetry)===null||ie===void 0?void 0:ie.trace({spanName:"Getting Selected Webcam",span:H,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){We.next=31;break}throw(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return We.next=33,this.disableWebcam(H);case 33:return We.next=35,this.enableWebcam(void 0,H);case 35:return(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:ft,status:1,message:"Done"}),(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:H,status:1,message:"changeWebcam() Ending"}),We.abrupt("return");case 40:We.prev=40,We.t1=We.catch(17),$e.error("changeWebcam() | failed: %o",We.t1),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(W),error:We.t1.message}}),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:H,status:2,message:"Could not change webcam ".concat(We.t1)}),qe.dispatch(rr({type:"error",text:"Could not change webcam: ".concat(We.t1)}));case 46:qe.dispatch(Ds(!1));case 47:case"end":return We.stop()}},re,this,[[3,10],[17,40]])})),function(re){return Zu.apply(this,arguments)})},{key:"changeWebcamResolution",value:(Lc=(0,o.A)(m().mark(function re(){var W,z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:$e.debug("changeWebcamResolution()"),qe.dispatch(Ds(!0)),ie.prev=2,ie.t0=this._webcam.resolution,ie.next=ie.t0==="qvga"?6:ie.t0==="vga"?8:ie.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",ie.abrupt("break",13);case 8:return this._webcam.resolution="hd",ie.abrupt("break",13);case 10:return this._webcam.resolution="qvga",ie.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return $e.debug("changeWebcamResolution() | calling getUserMedia()"),ie.prev=14,ie.next=17,navigator.mediaDevices.getUserMedia({video:Xn({deviceId:{exact:this._webcam.device.deviceId}},Gu[this._webcam.resolution])});case 17:W=ie.sent,ie.next=25;break;case 20:return ie.prev=20,ie.t1=ie.catch(14),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(ie.t1)}}),ie.t1.message==="Permission denied"||ie.t1.name==="NotAllowedError"?this._emitError(lr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(lr.q.ERROR_GET_VIDEO_MEDIA),ie.abrupt("return");case 25:return H=W.getVideoTracks()[0],ie.next=28,this._webcamProducer.replaceTrack({track:H});case 28:qe.dispatch(Is(this._webcamProducer.id,H)),ie.next=36;break;case 31:ie.prev=31,ie.t2=ie.catch(2),$e.error("changeWebcamResolution() | failed: %o",ie.t2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:ie.t2.message}}),qe.dispatch(rr({type:"error",text:"Could not change webcam resolution: ".concat(ie.t2)}));case 36:qe.dispatch(Ds(!1));case 37:case"end":return ie.stop()}},re,this,[[2,31],[14,20]])})),function(){return Lc.apply(this,arguments)})},{key:"enableShare",value:(Xu=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt,Ye,vt,kt,At,Rt,yt,Jt,Mt,Lt,kr,vn,qr,Br,Rn,An,zn,Cr,En,Ln,Hn,Kr,os,In,Yt=this,qn=arguments;return m().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(z=qn.length>0&&qn[0]!==void 0?qn[0]:void 0,H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableShare() Calling ".concat(z?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:z?JSON.stringify(z):"Not Specify Custom Track"}}),$e.debug("enableShare()"),!this._shareProducer){xt.next=6;break}return(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Screen Share Producer found"}),xt.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){xt.next=10;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:2,message:"enableShare() | cannot produce video"}),$e.error("enableShare() | cannot produce video"),xt.abrupt("return");case 10:if(Te=[],qe.dispatch(Ja(!0)),xt.prev=12,$e.debug("enableShare() | calling getUserMedia()"),st=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Creating Track",span:H}),!z||!z.active){xt.next=21;break}pe=z.getVideoTracks()[0],Ce=z.getAudioTracks()[0],z.multiStream?(We=pe.getConstraints(),Ue=We.height,Fe=We.frameRate,gt=Ma.$.screenShareProfiles["h".concat(Ue,"p_").concat(Fe,"fps")],Ye=[{maxBitrate:gt.bitrates.high,maxFramerate:Fe,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:gt.bitrates.medium,maxFramerate:Fe,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:gt.bitrates.low,maxFramerate:Fe,scalabilityMode:"S1T3",dtx:!0}],Te=Ye):Te=Ba,xt.next=41;break;case 21:return xt.prev=21,xt.next=24,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 24:kt=xt.sent,xt.next=33;break;case 27:return xt.prev=27,xt.t0=xt.catch(21),(At=this._videosdkLogs)===null||At===void 0||At.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(xt.t0)}}),(Rt=this._openTelemetry)===null||Rt===void 0||Rt.completeSpan({span:H,status:2,message:"Error in getDisplayMedia for screen share ".concat(xt.t0)}),xt.t0.message==="Permission denied"||xt.t0.name==="NotAllowedError"?this._emitError(lr.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(lr.q.ERROR_GET_DISPLAY_MEDIA),xt.abrupt("return");case 33:if(kt){xt.next=37;break}return qe.dispatch(Ja(!0)),(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:H,status:2,message:"Stream not found"}),xt.abrupt("return");case 37:pe=kt.getVideoTracks()[0],Ce=kt.getAudioTracks()[0],Te=Ba,(vt=this._openTelemetry)===null||vt===void 0||vt.completeSpan({message:"Track Generated with height ".concat(pe.getSettings().height," and width ").concat(pe.getSettings().width),span:st,status:1});case 41:if(Jt=(Xe=this._openTelemetry)===null||Xe===void 0?void 0:Xe.trace({spanName:"Generating Producer Configuration",span:H}),Lt={videoGoogleStartBitrate:1e3},!this._forceH264){xt.next=50;break}if(Mt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(or){return or.mimeType.toLowerCase()==="video/h264"})){xt.next=48;break}throw(kr=this._videosdkLogs)===null||kr===void 0||kr.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 48:xt.next=55;break;case 50:if(!this._forceVP9){xt.next=55;break}if(Mt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(or){return or.mimeType.toLowerCase()==="video/vp9"})){xt.next=55;break}throw(vn=this._videosdkLogs)===null||vn===void 0||vn.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 55:return(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:Jt,status:1,message:"Producer Configuration Generated"}),Jt=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Creating Share Producer",span:H}),xt.next=59,this._sendTransport.produce({track:pe,encodings:Te.length>0?Te:Ba,codecOptions:Lt,codec:Mt,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(or){Yt.e2eeManager&&(or.senderStreams=or.createEncodedStreams())}});case 59:if(this._shareProducer=xt.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),qr=xn({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),qe.dispatch(qr),this._eventEmitter.emit(qr.type,qr.payload),this._shareProducer.on("transportclose",function(){var or,ln=On(Yt._shareProducer.id);qe.dispatch(ln),Yt._eventEmitter.emit(ln.type,ln.payload),(or=Yt._shareProducer)===null||or===void 0||or.close(),Yt._shareProducer=null}),this._shareProducer.on("trackended",function(){var or;(or=Yt._openTelemetry)===null||or===void 0||or.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:H,status:2}),qe.dispatch(rr({type:"error",text:"Share disconnected!"})),Yt.disableShare().catch(function(){})}),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:Jt,status:1,message:"Share Producer Created"}),!Ce){xt.next=88;break}return xt.prev=68,An={opusStereo:1,opusDtx:1},Jt=(Br=this._openTelemetry)===null||Br===void 0?void 0:Br.trace({spanName:"Creating Share Audio Producer",span:H}),xt.next=73,this._sendTransport.produce({track:Ce,codecOptions:An,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(or){Yt.e2eeManager&&(or.senderStreams=or.createEncodedStreams())}});case 73:this._shareAudioProducer=xt.sent,zn=xn({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),qe.dispatch(zn),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(zn.type,zn.payload),this._shareAudioProducer.on("transportclose",function(){var or,ln=On(Yt._shareAudioProducer.id);qe.dispatch(ln),Yt._eventEmitter.emit(ln.type,ln.payload),(or=Yt._shareAudioProducer)===null||or===void 0||or.close(),Yt._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var or;(or=Yt._openTelemetry)===null||or===void 0||or.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:H,status:2}),qe.dispatch(rr({type:"error",text:"Share disconnected!"}))}),(Rn=this._openTelemetry)===null||Rn===void 0||Rn.completeSpan({span:Jt,status:1,message:"Share Audio Producer Created"}),xt.next=88;break;case 83:return xt.prev=83,xt.t1=xt.catch(68),xt.next=87,this._socketRequest("produceError",{mediaType:"shareAudio",message:xt.t1.message});case 87:(Cr=this._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:xt.t1.message}});case 88:(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:H,status:1,message:"Enable Share Successful"}),xt.next=102;break;case 91:return xt.prev=91,xt.t2=xt.catch(12),$e.error("enableShare() | failed:%o",xt.t2),(En=this._openTelemetry)===null||En===void 0||En.completeSpan({span:H,status:2,attributes:{error:xt.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",xt.t2.message),(Ln=this._videosdkLogs)===null||Ln===void 0||Ln.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:xt.t2.message}}),xt.t2.name!=="NotAllowedError"&&qe.dispatch(rr({type:"error",text:"Error sharing: ".concat(xt.t2)})),xt.next=100,this._socketRequest("produceError",{mediaType:"share",message:xt.t2.message});case 100:pe&&pe.stop(),Ce&&Ce.stop();case 102:qe.dispatch(Ja(!1)),this._shareProducer&&(Hn=0,(Kr=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(or){try{var ln;Yt._stats.producerStats||(Yt._stats.producerStats={}),Yt._stats.producerStats.share||(Yt._stats.producerStats.share=[]),Yt._shareProducer&&(Yt._latestStats[(ln=Yt._shareProducer)===null||ln===void 0?void 0:ln.id]=[]),or.video.forEach(function(un){var jn;Yt._shareProducer&&Yt._latestStats[(jn=Yt._shareProducer)===null||jn===void 0?void 0:jn.id].push(un)}),Hn%5==0&&Yt._shareProducer!=null&&Yt._stats.producerStats.share.push({timestamp:new Date,stats:Yt._latestStats[Yt._shareProducer.id]}),Hn++}catch(un){var on;(on=Yt._videosdkLogs)===null||on===void 0||on.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:un.message}}),console.log("PRODUCER ERROR",un)}},Kr.start(),this._shareProducer.observer.on("close",function(){Kr.stop(),Yt._metrics.removeExistingProbe(Kr)})),this._shareAudioProducer&&(os=0,(In=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(or){try{var ln;Yt._stats.producerStats||(Yt._stats.producerStats={}),Yt._stats.producerStats.shareAudio||(Yt._stats.producerStats.shareAudio=[]),Yt._shareAudioProducer&&(Yt._latestStats[(ln=Yt._shareAudioProducer)===null||ln===void 0?void 0:ln.id]=[]),or.audio.forEach(function(un){var jn;Yt._shareAudioProducer&&Yt._latestStats[(jn=Yt._shareAudioProducer)===null||jn===void 0?void 0:jn.id].push(un)}),os%5==0&&Yt._shareAudioProducer!=null&&Yt._stats.producerStats.shareAudio.push(Xn({timestamp:new Date},Yt._latestStats[Yt._shareAudioProducer.id]?Yt._latestStats[Yt._shareAudioProducer.id][0]:{})),os++}catch(un){var on;(on=Yt._videosdkLogs)===null||on===void 0||on.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:un.message}}),console.log("PRODUCER ERROR",un)}},In.start(),this._shareAudioProducer.observer.on("close",function(){In.stop(),Yt._metrics.removeExistingProbe(In)}));case 105:case"end":return xt.stop()}},re,this,[[12,91],[21,27],[68,83]])})),function(){return Xu.apply(this,arguments)})},{key:"disableShare",value:(No=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if($e.debug("disableShare()"),K=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){mt.next=5;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:K,status:2,message:"Share Producer Not found"}),mt.abrupt("return");case 5:return pe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Share Producer",span:K,status:1}),this._shareProducer.close(),Ce=On(this._shareProducer.id),qe.dispatch(Ce),this._eventEmitter.emit(Ce.type,Ce.payload),this._shareAudioProducer&&(Xe=(Te=this._openTelemetry)===null||Te===void 0?void 0:Te.trace({spanName:"Closing Share Audio Producer",span:K,status:1}),this._shareAudioProducer.close(),Ce=On(this._shareAudioProducer.id),qe.dispatch(Ce),this._eventEmitter.emit(Ce.type,Ce.payload),(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:Xe,status:1,message:"Closed Share Audio Producer"})),mt.prev=11,mt.next=14,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){mt.next=17;break}return mt.next=17,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:pe,status:1,message:"Requested Server to Close Producer"}),mt.next=25;break;case 20:mt.prev=20,mt.t0=mt.catch(11),qe.dispatch(rr({type:"error",text:"Error closing server-side share Producer: ".concat(mt.t0)})),(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:K,status:2,message:"Error closing server-side share Producer ".concat(mt.t0)}),(le=this._videosdkLogs)===null||le===void 0||le.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:mt.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return mt.stop()}},re,this,[[11,20]])})),function(){return No.apply(this,arguments)})},{key:"enableAudioOnly",value:(Ll=(0,o.A)(m().mark(function re(){var W,z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:$e.debug("enableAudioOnly()"),qe.dispatch(_r(!0)),this.disableWebcam(),W=ca(this._consumers.values()),K.prev=4,W.s();case 6:if((z=W.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._pauseConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),W.e(K.t0);case 18:return K.prev=18,W.f(),K.finish(18);case 21:qe.dispatch(Sr(!0)),qe.dispatch(_r(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return Ll.apply(this,arguments)})},{key:"disableAudioOnly",value:(Oo=(0,o.A)(m().mark(function re(){var W,z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:$e.debug("disableAudioOnly()"),qe.dispatch(_r(!0)),!this._webcamProducer&&this._produce&&(wa()||{}).webcamEnabled&&this.enableWebcam(),W=ca(this._consumers.values()),K.prev=4,W.s();case 6:if((z=W.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._resumeConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),W.e(K.t0);case 18:return K.prev=18,W.f(),K.finish(18);case 21:qe.dispatch(Sr(!1)),qe.dispatch(_r(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return Oo.apply(this,arguments)})},{key:"muteAudio",value:(Ml=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:$e.debug("muteAudio()"),qe.dispatch(Xr(!0));case 2:case"end":return W.stop()}},re)})),function(){return Ml.apply(this,arguments)})},{key:"unmuteAudio",value:(Dl=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:$e.debug("unmuteAudio()"),qe.dispatch(Xr(!1));case 2:case"end":return W.stop()}},re)})),function(){return Dl.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(Il=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht;return m().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return K=W.iceParameters,ie=W.transportId,pe=W.internalSpan,ie===((z=this._sendTransport)===null||z===void 0?void 0:z.id)&&this._sendTransport.restartIce({iceParameters:K}),ie===((H=this._recvTransport)===null||H===void 0?void 0:H.id)&&this._recvTransport.restartIce({iceParameters:K}),Xe.prev=3,Xe.next=6,this._socketRequest("iceRestarted",{transportId:ie});case 6:(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:pe,status:1,message:"iceRestarted"}),Xe.next=14;break;case 9:Xe.prev=9,Xe.t0=Xe.catch(3),(Te=this._openTelemetry)===null||Te===void 0||Te.completeSpan({span:pe,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Xe.t0)}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Xe.t0.message}}),qe.dispatch(rr({type:"error",text:"ICE restart failed: ".concat(Xe.t0)}));case 14:case"end":return Xe.stop()}},re,this,[[3,9]])})),function(re){return Il.apply(this,arguments)})},{key:"restartIce",value:(Mc=(0,o.A)(m().mark(function re(){var W,z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if($e.debug("restartIce()"),qe.dispatch(ps(!0)),K.prev=2,!this._sendTransport){K.next=9;break}return K.next=6,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 6:return W=K.sent,K.next=9,this._sendTransport.restartIce({iceParameters:W});case 9:if(!this._recvTransport){K.next=15;break}return K.next=12,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 12:return z=K.sent,K.next=15,this._recvTransport.restartIce({iceParameters:z});case 15:qe.dispatch(rr({text:"ICE restarted"})),K.next=23;break;case 18:K.prev=18,K.t0=K.catch(2),$e.error("restartIce() | failed:%o",K.t0),qe.dispatch(rr({type:"error",text:"ICE restart failed: ".concat(K.t0)})),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:K.t0.message}});case 23:qe.dispatch(ps(!1));case 24:case"end":return K.stop()}},re,this,[[2,18]])})),function(){return Mc.apply(this,arguments)})},{key:"_socketRequest",value:(Ui=(0,o.A)(m().mark(function re(W){var z,H=this,K=arguments;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return z=K.length>1&&K[1]!==void 0?K[1]:{},ie.abrupt("return",new Promise(function(pe,Ce){H._webSocket.emit("request",{method:W,request:!0,data:z},function(Te){Te!=null&&Te.error?Ce(new Error(Te.error)):pe(Te.data)})}));case 2:case"end":return ie.stop()}},re)})),function(re){return Ui.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(Po=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if($e.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",W),H.prev=1,!this._webcamProducer){H.next=7;break}return H.next=5,this._webcamProducer.setMaxSpatialLayer(W);case 5:H.next=10;break;case 7:if(!this._shareProducer){H.next=10;break}return H.next=10,this._shareProducer.setMaxSpatialLayer(W);case 10:H.next=17;break;case 12:H.prev=12,H.t0=H.catch(1),$e.error("setMaxSendingSpatialLayer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error setting max sending video spatial layer: ".concat(H.t0)}));case 17:case"end":return H.stop()}},re,this,[[1,12]])})),function(re){return Po.apply(this,arguments)})},{key:"setWebcamQuality",value:(Fi=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(this._webcamProducer){K.next=2;break}return K.abrupt("return");case 2:if(z=this._webcam.resolution,H=Ku[z][W].s,this._webcamProducer.maxSpatialLayer!=H){K.next=6;break}return K.abrupt("return");case 6:return K.next=8,this._webcamProducer.setMaxSpatialLayer(H);case 8:case"end":return K.stop()}},re,this)})),function(re){return Fi.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(Fa=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce,Te;return m().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return pe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality for Screen Share')}),Te=(Ce={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[z]||Ce.high,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:pe,attributes:{selectedQuality:Te},status:1}),ht.next=6,this.setConsumerPreferredLayers(W,Te.spatialLayer,Te.temporalLayer);case 6:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Done",span:pe,status:1});case 7:case"end":return ht.stop()}},re,this)})),function(re,W){return Fa.apply(this,arguments)})},{key:"setConsumerQuality",value:(To=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce,Te,ht;return m().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return pe=this._webcam.resolution,Ce=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality')}),Te=Ku[pe][z].s,ht=Ku[pe][z].t,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Ce,attributes:{spatialLayers:JSON.parse(Te),temporalLayers:JSON.parse(ht)},status:1}),Xe.next=7,this.setConsumerPreferredLayers(W,Te,ht);case 7:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({message:"Done",span:Ce,status:1});case 8:case"end":return Xe.stop()}},re,this)})),function(re,W){return To.apply(this,arguments)})},{key:"setViewPort",value:(Co=(0,o.A)(m().mark(function re(W,z,H){var K,ie,pe,Ce;return m().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(this._consumers.get(W.id)){Te.next=2;break}return Te.abrupt("return");case 2:if(K=(0,go.ed)(this._consumers.get(W.id),z,H),ie=K.consumerId,pe=K.newPreferredSpatialLayer,Ce=K.newPreferredTemporalLayer,pe!==W.preferredSpatialLayer||Ce!==W.preferredTemporalLayer){Te.next=5;break}return Te.abrupt("return");case 5:if(!ie){Te.next=8;break}return Te.next=8,this.setConsumerPreferredLayers(ie,pe,Ce);case 8:case"end":return Te.stop()}},re,this)})),function(re,W,z){return Co.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(ko=(0,o.A)(m().mark(function re(W,z,H){var K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return $e.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",W,z,H),pe.prev=1,(K=this._consumers.get(W)).spatialLayers>1&&(K.preferredSpatialLayer=z,K.preferredTemporalLayer=H),pe.next=6,this._socketRequest("setConsumerPreferredLayers",{consumerId:W,spatialLayer:z,temporalLayer:H});case 6:qe.dispatch(yc(W,z,H)),pe.next=14;break;case 9:pe.prev=9,pe.t0=pe.catch(1),$e.error("setConsumerPreferredLayers() | failed:%o",pe.t0),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:pe.t0.message}}),qe.dispatch(rr({type:"error",text:"Error setting Consumer preferred layers: ".concat(pe.t0)}));case 14:case"end":return pe.stop()}},re,this,[[1,9]])})),function(re,W,z){return ko.apply(this,arguments)})},{key:"setConsumerPriority",value:(Al=(0,o.A)(m().mark(function re(W,z){var H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return $e.debug("setConsumerPriority() [consumerId:%s, priority:%d]",W,z),K.prev=1,K.next=4,this._socketRequest("setConsumerPriority",{consumerId:W,priority:z});case 4:qe.dispatch(po(W,z)),K.next=12;break;case 7:K.prev=7,K.t0=K.catch(1),$e.error("setConsumerPriority() | failed:%o",K.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:K.t0.message}}),qe.dispatch(rr({type:"error",text:"Error setting Consumer priority: ".concat(K.t0)}));case 12:case"end":return K.stop()}},re,this,[[1,7]])})),function(re,W){return Al.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(Nl=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $e.debug("requestConsumerKeyFrame() [consumerId:%s]",W),H.prev=1,H.next=4,this._socketRequest("requestConsumerKeyFrame",{consumerId:W});case 4:qe.dispatch(rr({text:"Keyframe requested for video consumer"})),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),$e.error("requestConsumerKeyFrame() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error requesting key frame for Consumer: ".concat(H.t0)}));case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(re){return Nl.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Bi=(0,o.A)(m().mark(function re(){var W,z=this;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if($e.debug("enableChatDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=H.sent,qe.dispatch(Sa({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){z._chatDataProducer=null}),this._chatDataProducer.on("open",function(){$e.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){$e.error('chat DataProducer "close" event'),z._chatDataProducer=null,qe.dispatch(rr({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(K){$e.error('chat DataProducer "error" event:%o',K),qe.dispatch(rr({type:"error",text:"Chat DataProducer error: ".concat(K)}))}),this._chatDataProducer.on("bufferedamountlow",function(){$e.debug('chat DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),$e.error("enableChatDataProducer() | failed:%o",H.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error enabling chat DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return Bi.apply(this,arguments)})},{key:"enableBotDataProducer",value:(Ol=(0,o.A)(m().mark(function re(){var W,z=this;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if($e.debug("enableBotDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=H.sent,qe.dispatch(Sa({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){z._botDataProducer=null}),this._botDataProducer.on("open",function(){$e.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){$e.error('bot DataProducer "close" event'),z._botDataProducer=null,qe.dispatch(rr({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(K){$e.error('bot DataProducer "error" event:%o',K),qe.dispatch(rr({type:"error",text:"Bot DataProducer error: ".concat(K)}))}),this._botDataProducer.on("bufferedamountlow",function(){$e.debug('bot DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),$e.error("enableBotDataProducer() | failed:%o",H.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error enabling bot DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return Ol.apply(this,arguments)})},{key:"sendChatMessage",value:(Dc=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug('sendChatMessage() [text:"%s]',W),this._chatDataProducer){z.next=4;break}return qe.dispatch(rr({type:"error",text:"No chat DataProducer"})),z.abrupt("return");case 4:try{this._chatDataProducer.send(W)}catch(H){$e.error("chat DataProducer.send() failed:%o",H),qe.dispatch(rr({type:"error",text:"chat DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return Dc.apply(this,arguments)})},{key:"sendBotMessage",value:(Pl=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug('sendBotMessage() [text:"%s]',W),this._botDataProducer){z.next=4;break}return qe.dispatch(rr({type:"error",text:"No bot DataProducer"})),z.abrupt("return");case 4:try{this._botDataProducer.send(W)}catch(H){$e.error("bot DataProducer.send() failed:%o",H),qe.dispatch(rr({type:"error",text:"bot DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return Pl.apply(this,arguments)})},{key:"changeDisplayName",value:(Tl=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return $e.debug('changeDisplayName() [displayName:"%s"]',W),Jn({displayName:W}),z.prev=2,z.next=5,this._socketRequest("changeDisplayName",{displayName:W});case 5:this._displayName=W,qe.dispatch(an(W)),qe.dispatch(rr({text:"Display name changed"})),z.next=15;break;case 10:z.prev=10,z.t0=z.catch(2),$e.error("changeDisplayName() | failed: %o",z.t0),qe.dispatch(rr({type:"error",text:"Could not change display name: ".concat(z.t0)})),qe.dispatch(an());case 15:case"end":return z.stop()}},re,this,[[2,10]])})),function(re){return Tl.apply(this,arguments)})},{key:"openConnection",value:(Cl=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=W.roomId,H=W.payload,K.next=3,this._socketRequest("openConnection",{roomId:z,payload:H}).catch(function(ie){throw new Error(ie)});case 3:case"end":return K.stop()}},re,this)})),function(re){return Cl.apply(this,arguments)})},{key:"closeConnection",value:(Ic=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this._socketRequest("closeConnection",{roomId:W});case 2:case"end":return z.stop()}},re,this)})),function(re){return Ic.apply(this,arguments)})},{key:"switchPeerRoom",value:(Ac=(0,o.A)(m().mark(function re(W){var z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return z=W.peerId,H=W.roomId,K=W.payload,ie=W.token,pe.next=3,this._socketRequest("switchPeerRoom",{roomId:H,peerId:z,payload:K,token:ie});case 3:case"end":return pe.stop()}},re,this)})),function(re){return Ac.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Nc=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe;return m().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return z=W.roomId,H=W.connectionRoomId,K=W.peerId,ie=W.payload,pe=W.token,Ce.next=3,this._socketRequest("connectionSwitchPeerRoom",{roomId:z,connectionRoomId:H,peerId:K,payload:ie,token:pe});case 3:case"end":return Ce.stop()}},re,this)})),function(re){return Nc.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(Lp=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=W.roomId,H=W.message,K.next=3,this._socketRequest("connectionSendChatMessage",{roomId:z,message:H});case 3:case"end":return K.stop()}},re,this)})),function(re){return Lp.apply(this,arguments)})},{key:"connectionEndMeeting",value:(Mp=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=W.roomId,H.next=3,this._socketRequest("connectionCloseRoom",{roomId:z});case 3:case"end":return H.stop()}},re,this)})),function(re){return Mp.apply(this,arguments)})},{key:"pubsubPublish",value:(Dp=(0,o.A)(m().mark(function re(W,z,H,K){var ie,pe,Ce,Te,ht,Xe;return m().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(pt.prev=0,H!=null&&H.sendOnly){if(ie=H.sendOnly,pe=[],ie){Ce=ca(ie);try{for(Ce.s();!(Te=Ce.n()).done;)(ht=Te.value)&&pe.push(ht.toString())}catch(ft){Ce.e(ft)}finally{Ce.f()}}H.sendOnly=pe}return pt.next=4,this._socketRequest("pubsubPublish",{topic:W,message:z,options:H,payload:K});case 4:pt.next=10;break;case 6:pt.prev=6,pt.t0=pt.catch(0),(Xe=this._videosdkLogs)===null||Xe===void 0||Xe.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:pt.t0.message}}),$e.error("pubsubPublish() | failed: %o",pt.t0);case 10:case"end":return pt.stop()}},re,this,[[0,6]])})),function(re,W,z,H){return Dp.apply(this,arguments)})},{key:"pubsubSubscribe",value:(Ip=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubSubscribe",{topic:W});case 5:return z=K.sent,K.abrupt("return",z);case 9:K.prev=9,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("pubsubSubscribe() | failed: %o",K.t0);case 13:case"end":return K.stop()}},re,this,[[2,9]])})),function(re){return Ip.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ap=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubUnsubscribe",{topic:W});case 5:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(W),logType:"INFO"}),K.next=12;break;case 8:K.prev=8,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),$e.error("pubsubUnsubscribe() | failed: %o",K.t0);case 12:case"end":return K.stop()}},re,this,[[2,8]])})),function(re){return Ap.apply(this,arguments)})},{key:"closeRoom",value:(Np=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this._socketRequest("closeRoom",{});case 2:case"end":return W.stop()}},re,this)})),function(){return Np.apply(this,arguments)})},{key:"removePeer",value:(Op=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Removing peer ".concat(W),status:1}),W!=null){H.next=3;break}return H.abrupt("return");case 3:return H.next=5,this._socketRequest("removePeer",{peerId:W});case 5:case"end":return H.stop()}},re,this)})),function(re){return Op.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Pp=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($e.debug("getSendTransportRemoteStats()"),this._sendTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return W.stop()}},re,this)})),function(){return Pp.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Ju=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($e.debug("getRecvTransportRemoteStats()"),this._recvTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return W.stop()}},re,this)})),function(){return Ju.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Qu=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getAudioRemoteStats()"),W=this._micProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[W.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Qu.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Oc=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getVideoRemoteStats()"),W=this._webcamProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[W.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Oc.apply(this,arguments)})},{key:"getShareRemoteStats",value:(hs=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getVideoRemoteStats()"),W=this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[W.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return hs.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Ht=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(W=this._shareAudioProducer){z.next=3;break}return z.abrupt("return");case 3:return z.abrupt("return",this._latestStats[W.id]);case 4:case"end":return z.stop()}},re,this)})),function(){return Ht.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Yu=(0,o.A)(m().mark(function re(W){var z,H;return m().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if($e.debug("getConsumerRemoteStats()"),z=this._consumers.get(W)){K.next=4;break}return K.abrupt("return");case 4:return this._latestStats[W]&&(this._latestStats[W][0].currentSpatialLayer=z.currentSpatialLayer,this._latestStats[W][0].currentTemporalLayer=z.currentTemporalLayer,this._latestStats[W][0].preferredSpatialLayer=z.preferredSpatialLayer,this._latestStats[W][0].preferredTemporalLayer=z.preferredTemporalLayer),H=z.track.id.replace(/[{}]/g,""),K.abrupt("return",this._latestStats[H]);case 7:case"end":return K.stop()}},re,this)})),function(re){return Yu.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(ar=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getChatDataProducerRemoteStats()"),W=this._chatDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:W.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return ar.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(Eo=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getBotDataProducerRemoteStats()"),W=this._botDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:W.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return Eo.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Dt=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(W)){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:W}));case 5:case"end":return z.stop()}},re,this)})),function(re){return Dt.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Se=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($e.debug("getSendTransportLocalStats()"),this._sendTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._sendTransport.getStats());case 4:case"end":return W.stop()}},re,this)})),function(){return Se.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(ns=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($e.debug("getRecvTransportLocalStats()"),this._recvTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._recvTransport.getStats());case 4:case"end":return W.stop()}},re,this)})),function(){return ns.apply(this,arguments)})},{key:"getAudioLocalStats",value:(Zr=(0,o.A)(m().mark(function re(){return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($e.debug("getAudioLocalStats()"),this._micProducer){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._micProducer.getStats());case 4:case"end":return W.stop()}},re,this)})),function(){return Zr.apply(this,arguments)})},{key:"getVideoLocalStats",value:(pn=(0,o.A)(m().mark(function re(){var W;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($e.debug("getVideoLocalStats()"),W=this._webcamProducer||this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",W.getStats());case 5:case"end":return z.stop()}},re,this)})),function(){return pn.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Zt=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(z=this._consumers.get(W)){H.next=3;break}return H.abrupt("return");case 3:return H.abrupt("return",z.getStats());case 4:case"end":return H.stop()}},re,this)})),function(re){return Zt.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Tt=(0,o.A)(m().mark(function re(W){var z,H,K,ie;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return z=W.uplink,H=W.downlink,K=W.rtt,ie=W.secret,$e.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",z,H,K),pe.prev=2,pe.next=5,this._socketRequest("applyNetworkThrottle",{uplink:z,downlink:H,rtt:K,secret:ie});case 5:pe.next=11;break;case 7:pe.prev=7,pe.t0=pe.catch(2),$e.error("applyNetworkThrottle() | failed:%o",pe.t0),qe.dispatch(rr({type:"error",text:"Error applying network throttle: ".concat(pe.t0)}));case 11:case"end":return pe.stop()}},re,this,[[2,7]])})),function(re){return Tt.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(ot=(0,o.A)(m().mark(function re(W){var z,H,K;return m().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return z=W.silent,H=z!==void 0&&z,K=W.secret,$e.debug("resetNetworkThrottle()"),ie.prev=2,ie.next=5,this._socketRequest("resetNetworkThrottle",{secret:K});case 5:ie.next=10;break;case 7:ie.prev=7,ie.t0=ie.catch(2),H||($e.error("resetNetworkThrottle() | failed:%o",ie.t0),qe.dispatch(rr({type:"error",text:"Error resetting network throttle: ".concat(ie.t0)})));case 10:case"end":return ie.stop()}},re,this,[[2,7]])})),function(re){return ot.apply(this,arguments)})},{key:"createProducerTransport",value:(zt=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce,Te,ht,Xe,pt=this;return m().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:ie=W.id,pe=W.iceParameters,Ce=W.iceCandidates,Te=W.dtlsParameters,ht=W.sctpParameters,Xe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Send Transport",span:z||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:ie,iceParameters:pe,iceCandidates:Ce,dtlsParameters:Te,sctpParameters:ht,iceServers:this._iceServers}),this._sendTransport.on("connect",function(le,mt,st){var We,Ue=le.dtlsParameters;(We=pt._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Xe,status:1}),pt._socketRequest("connectWebRtcTransport",{transportId:pt._sendTransport.id,dtlsParameters:Ue}).then(function(){mt()}).catch(function(Fe){st(Fe)})}),this._sendTransport.on("produce",function(){var le=(0,o.A)(m().mark(function mt(st,We,Ue){var Fe,gt,Ye,vt,kt,At,Rt;return m().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return Fe=st.kind,gt=st.rtpParameters,Ye=st.appData,yt.prev=1,(vt=pt._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Xe,status:1}),yt.next=5,pt._socketRequest("produce",{transportId:pt._sendTransport.id,kind:Fe,rtpParameters:gt,appData:Ye});case 5:kt=yt.sent,At=kt.id,We({id:At}),yt.next=14;break;case 10:yt.prev=10,yt.t0=yt.catch(1),(Rt=pt._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:yt.t0.message}}),Ue(yt.t0);case 14:case"end":return yt.stop()}},mt,null,[[1,10]])}));return function(mt,st,We){return le.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var le=(0,o.A)(m().mark(function mt(st,We,Ue){var Fe,gt,Ye,vt,kt,At,Rt;return m().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return Fe=st.sctpStreamParameters,gt=st.label,Ye=st.protocol,vt=st.appData,yt.prev=1,yt.next=4,pt._socketRequest("produceData",{transportId:pt._sendTransport.id,sctpStreamParameters:Fe,label:gt,protocol:Ye,appData:vt});case 4:kt=yt.sent,At=kt.id,We({id:At}),yt.next=13;break;case 9:yt.prev=9,yt.t0=yt.catch(1),(Rt=pt._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:yt.t0.message}}),Ue(yt.t0);case 13:case"end":return yt.stop()}},mt,null,[[1,9]])}));return function(mt,st,We){return le.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var le=(0,o.A)(m().mark(function mt(st){var We,Ue,Fe,gt;return m().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.t0=Array,Ye.next=3,pt._sendTransport.getStats();case 3:Ye.t1=Ye.sent,(Ue=Ye.t0.from.call(Ye.t0,Ye.t1).filter(function(vt){var kt=(0,_.A)(vt,2)[1];return kt.type==="local-candidate"||kt.type==="remote-candidate"}).map(function(vt){return(0,_.A)(vt,2)[1]})).length>0&&((Fe=pt._videosdkLogs)===null||Fe===void 0||Fe.pushLogs({logText:'Send Trasnport State Change "'.concat(st,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(Ue)}})),st==="connected"&&pt.emitMeetingStateChange(vo),(We=pt._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(st),span:Xe,status:1}),st==="failed"&&((gt=pt._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),pt.restartIce()),pt._transportState=st;case 10:case"end":return Ye.stop()}},mt)}));return function(mt){return le.apply(this,arguments)}}()),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Xe,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return ft.stop()}},re,this)})),function(re,W){return zt.apply(this,arguments)})},{key:"createConsumerTransport",value:(He=(0,o.A)(m().mark(function re(W,z){var H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le=this;return m().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:ie=W.id,pe=W.iceParameters,Ce=W.iceCandidates,Te=W.dtlsParameters,ht=W.sctpParameters,Xe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Recieve Transport",span:z||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:ie,iceParameters:pe,iceCandidates:Ce,dtlsParameters:Te,sctpParameters:ht,iceServers:this._iceServers}),this._recvTransport.on("connect",function(st,We,Ue){var Fe,gt=st.dtlsParameters;(Fe=le._openTelemetry)===null||Fe===void 0||Fe.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Xe,status:1}),le._socketRequest("connectWebRtcTransport",{transportId:le._recvTransport.id,dtlsParameters:gt}).then(function(){We()}).catch(function(Ye){Ue(Ye)})}),this._recvTransport.on("connectionstatechange",function(){var st=(0,o.A)(m().mark(function We(Ue){var Fe,gt,Ye;return m().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.t0=Array,vt.next=3,le._recvTransport.getStats();case 3:vt.t1=vt.sent,(gt=vt.t0.from.call(vt.t0,vt.t1).filter(function(kt){var At=(0,_.A)(kt,2)[1];return At.type==="local-candidate"||At.type==="remote-candidate"}).map(function(kt){return(0,_.A)(kt,2)[1]})).length>0&&((Ye=le._videosdkLogs)===null||Ye===void 0||Ye.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ue,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(gt)}})),(Fe=le._openTelemetry)===null||Fe===void 0||Fe.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ue),span:Xe,status:1}),Ue==="failed"&&le.restartIce(),le._transportState=Ue;case 9:case"end":return vt.stop()}},We)}));return function(We){return st.apply(this,arguments)}}()),pt=0,(ft=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(st){try{var We=function(gt,Ye,vt){le._stats.consumerStats||(le._stats.consumerStats={});var kt=Ye.appData.peerId;le._stats.consumerStats[kt]||(le._stats.consumerStats[kt]={}),le._stats.consumerStats[kt][vt]||(le._stats.consumerStats[kt][vt]=[]),le._latestStats[Ye.track.id.replace(/[{}]/g,"")]=[gt],pt%5==0&&le._stats.consumerStats[kt][vt].push(gt)},Ue=function(gt){st[gt].forEach(function(Ye){var vt,kt=ca(le._consumers);try{for(kt.s();!(vt=kt.n()).done;){var At=(0,_.A)(vt.value,2),Rt=(At[0],At[1]);if(Rt.track.id.replace(/[{}]/g,"")===Ye.trackId){var yt=Rt.appData.share?Rt.kind==="audio"?"shareAudio":"share":Rt.kind;We(Ye,Rt,yt)}}}catch(Jt){kt.e(Jt)}finally{kt.f()}})};Ue("audio"),Ue("video"),pt++}catch(gt){var Fe;(Fe=le._videosdkLogs)===null||Fe===void 0||Fe.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:gt.message}}),console.log("CONSUMER CATCH",gt)}},ft.start(),this._recvTransport.observer.on("close",function(){ft.stop(),le._metrics.removeExistingProbe(ft)}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Xe,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return mt.stop()}},re,this)})),function(re,W){return He.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(re){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:re}),this._meetingConnectionState=re}},{key:"joinRoom",value:(lt=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt,Ye,vt,kt,At,Rt,yt,Jt,Mt;return m().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return $e.debug("joinRoom()"),Lt.prev=1,Ce=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Ut.pF({handlerName:this._handlerName}),Lt.next=6,this._socketRequest("getRouterRtpCapabilities");case 6:return Te=Lt.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Te.headerExtensions=(ht=Te.headerExtensions)===null||ht===void 0?void 0:ht.filter(function(kr){return kr.uri!="urn:3gpp:video-orientation"})):Te.headerExtensions=(Xe=Te.headerExtensions)===null||Xe===void 0?void 0:Xe.filter(function(kr){return kr.uri!="urn:3gpp:video-orientation"}),Lt.next=10,this._mediasoupDevice.load({routerRtpCapabilities:Te});case 10:if((z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Ce,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Te).toString()},message:"Router Capabilities Loaded"}),!this._produce){Lt.next=16;break}return Lt.next=14,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:pt=Lt.sent,this.createProducerTransport(pt,this._joinSpan);case 16:if(!this._consume){Lt.next=21;break}return Lt.next=19,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:ft=Lt.sent,this.createConsumerTransport(ft,this._joinSpan);case 21:return Lt.next=23,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.rtpCapabilities,sctpCapabilities:(K=this._mediasoupDevice)===null||K===void 0?void 0:K.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:le=Lt.sent,mt=le.peers,st=le.poll,We=le.messages,qe.dispatch(Vt("connected")),(ie=this._openTelemetry)===null||ie===void 0||ie.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:mt,poll:st,messages:We,baseUrl:this._baseUrl}),qe.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),qe.dispatch(rr({text:"You are in the room!",timeout:3e3})),Ue=ca(mt);try{for(Ue.s();!(Fe=Ue.n()).done;)gt=Fe.value,Ye=Vs(Xn(Xn({},gt),{},{consumers:[],dataConsumers:[]})),qe.dispatch(Ye),this._eventEmitter.emit(Ye.type,Ye.payload)}catch(kr){Ue.e(kr)}finally{Ue.f()}this._produce&&(qe.dispatch(mr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((vt=this._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(kr){kr.stop()})),kt=wa(),this._webcamEnabled&&(!kt||kt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((At=this._openTelemetry)===null||At===void 0||At.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(kr){kr.stop()}))),window.SHOW_INFO&&(Rt=qe.getState(),yt=Rt.me,qe.dispatch(nr(yt.id))),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Lt.next=46;break;case 39:Lt.prev=39,Lt.t0=Lt.catch(1),$e.error("joinRoom() failed:%o",Lt.t0),(Jt=this._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:Lt.t0.message}}),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(Lt.t0)}),qe.dispatch(rr({type:"error",text:"Could not join the room: ".concat(Lt.t0)})),this.close({sendLeft:!0});case 46:case"end":return Lt.stop()}},re,this,[[1,39]])})),function(){return lt.apply(this,arguments)})},{key:"switchingRoom",value:(tt=(0,o.A)(m().mark(function re(W){var z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We,Ue,Fe,gt;return m().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"switchingRoom() start",attributes:{"room.id":W,"peer.id":this._peerId,display_name:this._displayName}}),Ye.prev=1,ht=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({name:"switch room join request",parentSpan:H}),Ye.next=5,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(ie=this._mediasoupDevice)===null||ie===void 0?void 0:ie.rtpCapabilities,sctpCapabilities:(pe=this._mediasoupDevice)===null||pe===void 0?void 0:pe.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 5:Xe=Ye.sent,pt=Xe.peers,ft=Xe.poll,le=Xe.messages,(Ce=this._openTelemetry)===null||Ce===void 0||Ce.completeSpan({span:ht,status:1,message:"Join request successful in switched room"}),qe.dispatch(Vt("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:W,peers:pt,poll:ft,messages:le,baseUrl:this._baseUrl}),qe.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),qe.dispatch(rr({text:"You are in the room!",timeout:3e3})),mt=ca(pt);try{for(mt.s();!(st=mt.n()).done;)We=st.value,Ue=Vs(Xn(Xn({},We),{},{consumers:[],dataConsumers:[]})),qe.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload)}catch(vt){mt.e(vt)}finally{mt.f()}(Te=this._openTelemetry)===null||Te===void 0||Te.completeSpan({span:H,status:1,message:"Room switch completed successfully"}),Ye.next=26;break;case 19:Ye.prev=19,Ye.t0=Ye.catch(1),$e.error("joinRoom() failed:%o",Ye.t0),(Fe=this._videosdkLogs)===null||Fe===void 0||Fe.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:Ye.t0.message}}),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:H,status:2,message:"Room switch failed: ".concat(Ye.t0.message)}),qe.dispatch(rr({type:"error",text:"Could not join the switched room: ".concat(Ye.t0)})),this.close({sendLeft:!0});case 26:case"end":return Ye.stop()}},re,this,[[1,19]])})),function(re){return tt.apply(this,arguments)})},{key:"_updateMics",value:(ke=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We=arguments;return m().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=We.length>0&&We[0]!==void 0?We[0]:void 0,this._mics=new Map,$e.debug("_updateMics() |"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:z||null}),Ue.prev=4,Ue.next=7,navigator.mediaDevices.enumerateDevices();case 7:pe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Mic list",span:H,status:1,attributes:{systemDevice:pe?JSON.stringify(pe):"Device not found"}}),Ce=ca(pe);try{for(Ce.s();!(Te=Ce.n()).done;)(ht=Te.value).kind=="audioinput"&&this._mics.set(ht.deviceId,ht)}catch(Fe){Ce.e(Fe)}finally{Ce.f()}Xe=Array.from(this._mics.values()),pt=Xe.length,ft=this._mic.device?this._mic.device.deviceId:void 0,pt===0?this._mic.device=null:this._mics.has(ft)||(this._mic.device=Xe[0]),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:1,message:"Update Mic"}),Ue.next=30;break;case 18:if(Ue.prev=18,Ue.t0=Ue.catch(4),!(Ue.t0 instanceof TypeError)){Ue.next=30;break}if(Ue.t0.name!=="TypeError"){Ue.next=28;break}throw mt=lr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(mt),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(mt.message)}),new Error(mt.message);case 28:throw(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(Ue.t0.message)}),new Error(Ue.t0.message);case 30:case"end":return Ue.stop()}},re,this,[[4,18]])})),function(){return ke.apply(this,arguments)})},{key:"_updateWebcams",value:(fe=(0,o.A)(m().mark(function re(){var W,z,H,K,ie,pe,Ce,Te,ht,Xe,pt,ft,le,mt,st,We=arguments;return m().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=We.length>0&&We[0]!==void 0?We[0]:void 0,$e.debug("_updateWebcams()"),this._webcams=new Map,$e.debug("_updateWebcams() | calling enumerateDevices()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:z||null}),Ue.prev=5,Ue.next=8,navigator.mediaDevices.enumerateDevices();case 8:pe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Webcam list",span:H,status:1,attributes:{systemDevice:pe?JSON.stringify(pe):"Device not found"}}),Ce=ca(pe),Ue.prev=11,Ce.s();case 13:if((Te=Ce.n()).done){Ue.next=20;break}if((ht=Te.value).kind==="videoinput"){Ue.next=17;break}return Ue.abrupt("continue",18);case 17:this._webcams.set(ht.deviceId,ht);case 18:Ue.next=13;break;case 20:Ue.next=25;break;case 22:Ue.prev=22,Ue.t0=Ue.catch(11),Ce.e(Ue.t0);case 25:return Ue.prev=25,Ce.f(),Ue.finish(25);case 28:Xe=Array.from(this._webcams.values()),pt=Xe.length,(ft=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=ft),$e.debug("_updateWebcams() [webcams:%o]",Xe),pt===0?this._webcam.device=null:this._webcams.has(ft)||(this._webcam.device=Xe[this._defaultCameraIndex]),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:H,status:1,message:"Update Webcam"}),qe.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1}),Ue.next=50;break;case 38:if(Ue.prev=38,Ue.t1=Ue.catch(5),!(Ue.t1 instanceof TypeError)){Ue.next=50;break}if(Ue.t1.name!=="TypeError"){Ue.next=48;break}throw mt=lr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(mt),(le=this._openTelemetry)===null||le===void 0||le.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(mt.message)}),new Error(mt.message);case 48:throw(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(Ue.t1.message)}),new Error(Ue.t1.message);case 50:case"end":return Ue.stop()}},re,this,[[5,38],[11,22,25,28]])})),function(){return fe.apply(this,arguments)})},{key:"_getWebcamType",value:function(re){return/(back|rear)/i.test(re.label)?($e.debug("_getWebcamType() | it seems to be a back camera"),"back"):($e.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(Y=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!W.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("pauseConsumer",{consumerId:W.id});case 5:W.pause(),qe.dispatch(xa(W.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),$e.error("_pauseConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error pausing Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return Y.apply(this,arguments)})},{key:"_resumeConsumer",value:($=(0,o.A)(m().mark(function re(W){var z;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(W.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("resumeConsumer",{consumerId:W.id});case 5:W.resume(),qe.dispatch(uo(W.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),$e.error("_resumeConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),qe.dispatch(rr({type:"error",text:"Error resuming Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return $.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(F=(0,o.A)(m().mark(function re(){var W=this;return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._externalVideoStream){z.next=2;break}return z.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){z.next=5;break}return z.next=5,new Promise(function(H){return W._externalVideo.addEventListener("canplay",H)});case 5:if(!this._externalVideo.captureStream){z.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),z.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){z.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),z.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return z.abrupt("return",this._externalVideoStream);case 15:case"end":return z.stop()}},re,this)})),function(){return F.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(q=(0,o.A)(m().mark(function re(W){return m().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.e2eeManager){z.next=5;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(W,this._peerId),this.isE2EEEnabled=W,z.next=6;break;case 5:throw Error("e2ee not configured, please set e2ee settings within the room options");case 6:case"end":return z.stop()}},re,this)})),function(re){return q.apply(this,arguments)})},{key:"_emitError",value:function(re){this._eventEmitter.emit("ERROR",re)}}],[{key:"init",value:function(re){qe=re.store}}]);var q,F,$,Y,fe,ke,tt,lt,He,zt,ot,Tt,Zt,pn,Zr,ns,Se,Dt,Eo,ar,Yu,Ht,hs,Oc,Qu,Ju,Pp,Op,Np,Ap,Ip,Dp,Mp,Lp,Nc,Ac,Ic,Cl,Tl,Pl,Dc,Ol,Bi,Nl,Al,ko,Co,To,Fa,Fi,Po,Ui,Mc,Il,Dl,Ml,Oo,Ll,No,Xu,Lc,Zu,jc,jp,ed,Bp,Es,jl,td,Fp,Up,Ao,Bc,Fc,$i,Bl,Fl,rd,nd,sd,Uc,Ul,$l,Wl,Vl,ad,$p,id,od,Wp,Io,Vp,zp,Do,$c,Wc,Mo,Vc,Hp,zl,zc,Hl,Wi,cd,ql,qp,Kp,Hs,Gp,Yp,Kl,ld,mi,Hc,Qp,Jp}();function km(q){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,o.A)(m().mark(function q(F){var $,Y=this;return m().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(fe.prev=0,this.e2eeManager){fe.next=13;break}return fe.t0=Pc,fe.t1=F,fe.next=6,qu();case 6:fe.t2=fe.sent,fe.t3={keyProvider:fe.t1,worker:fe.t2},this.e2eeManager=new fe.t0(fe.t3),this.e2eeManager.on(ur.KS.ParticipantEncryptionStatusChanged,function(ke){Y.isE2EEEnabled=ke}),this.e2eeManager.on(ur.KS.E2EEStateChange,function(ke){Y._eventEmitter.emit("E2EE_STATE_CHANGE",ke)}),($=this.e2eeManager)===null||$===void 0||$.setup(this),this.toggleE2EEEnabled(!0);case 13:fe.next=19;break;case 15:throw fe.prev=15,fe.t4=fe.catch(0),console.error("Error setting up E2EE: ",fe.t4),new Error("Error setting up E2EE: "+fe.t4.message);case 19:case"end":return fe.stop()}},q,this,[[0,15]])}))).apply(this,arguments)}},2073:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.pad.AnsiX923={pad:function(_,f){var o=_.sigBytes,w=4*f,l=w-o%w,y=o+l-1;_.clamp(),_.words[y>>>2]|=l<<24-y%4*8,_.sigBytes+=l},unpad:function(_){var f=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=f}},g.pad.Ansix923)},2107:(p,u,i)=>{i.d(u,{kR:()=>_,nI:()=>g,wZ:()=>f});var g={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function _(o){return o===g.CONFERENCE||o===g.SEND_AND_RECV}function f(o){return o===g.VIEWER||o===g.SIGNALLING_ONLY}},2109:function(p,u,i){var g;(function(_,f){var o,w="user-agent",l="",y="function",d="undefined",m="object",S="string",x="browser",k="cpu",I="device",T="engine",C="os",E="result",c="name",b="type",R="vendor",P="version",O="architecture",N="major",M="model",L="console",A="mobile",j="tablet",G="smarttv",de="wearable",te="xr",J="embedded",ae="inapp",be="brands",xe="formFactors",se="fullVersionList",ze="platform",Ie="platformVersion",Ne="bitness",Ee="sec-ch-ua",Le=Ee+"-full-version-list",dt=Ee+"-arch",cr=Ee+"-"+Ne,gr=Ee+"-form-factors",Ot=Ee+"-"+A,xr=Ee+"-"+M,vr=Ee+"-"+ze,Bt=vr+"-version",Qr=[be,se,A,M,ze,Ie,O,xe,Ne],Nt="Amazon",Kt="Apple",Wr="ASUS",tn="BlackBerry",Nr="Google",Vr="Huawei",rn="Lenovo",It="Honor",nn="LG",Jr="Microsoft",Fr="Motorola",Ar="Nvidia",hn="OnePlus",Hr="OPPO",wn="Samsung",fn="Sharp",Tn="Sony",Sn="Xiaomi",Ft="Zebra",Pn="Chrome",Gn="Chromium",sn="Chromecast",er="Firefox",Ge="Opera",Me="Facebook",it="Sogou",je="Mobile ",ct=" Browser",tr="Windows",Ae=typeof _!==d,Gt=Ae&&_.navigator?_.navigator:f,jt=Gt&&Gt.userAgentData?Gt.userAgentData:f,hr=function(Et){for(var Xt={},Vt=0;Vt<Et.length;Vt++)Xt[Et[Vt].toUpperCase()]=Et[Vt];return Xt},ir=function(Et,Xt){if(typeof Et===m&&Et.length>0){for(var Vt in Et)if(Ct(Et[Vt])==Ct(Xt))return!0;return!1}return!!Je(Et)&&Ct(Xt).indexOf(Ct(Et))!==-1},Rr=function(Et,Xt){for(var Vt in Et)return/^(browser|cpu|device|engine|os)$/.test(Vt)||!!Xt&&Rr(Et[Vt])},Je=function(Et){return typeof Et===S},Wt=function(Et){if(!Et)return f;for(var Xt=[],Vt=Er(/\\?\"/g,Et).split(","),gn=0;gn<Vt.length;gn++)if(Vt[gn].indexOf(";")>-1){var nr=yr(Vt[gn]).split(";v=");Xt[gn]={brand:nr[0],version:nr[1]}}else Xt[gn]=yr(Vt[gn]);return Xt},Ct=function(Et){return Je(Et)?Et.toLowerCase():Et},Ut=function(Et){return Je(Et)?Er(/[^\d\.]/g,Et).split(".")[0]:f},Ir=function(Et){for(var Xt in Et){var Vt=Et[Xt];typeof Vt==m&&Vt.length==2?this[Vt[0]]=Vt[1]:this[Vt]=f}return this},Er=function(Et,Xt){return Je(Xt)?Xt.replace(Et,l):Xt},Mr=function(Et){return Er(/\\?\"/g,Et)},yr=function(Et,Xt){if(Je(Et))return Et=Er(/^\s\s*/,Et),typeof Xt===d?Et:Et.substring(0,500)},fr=function(Et,Xt){if(Et&&Xt)for(var Vt,gn,nr,mr,an,Sr,_r=0;_r<Xt.length&&!an;){var Xr=Xt[_r],ps=Xt[_r+1];for(Vt=gn=0;Vt<Xr.length&&!an&&Xr[Vt];)if(an=Xr[Vt++].exec(Et))for(nr=0;nr<ps.length;nr++)Sr=an[++gn],typeof(mr=ps[nr])===m&&mr.length>0?mr.length===2?typeof mr[1]==y?this[mr[0]]=mr[1].call(this,Sr):this[mr[0]]=mr[1]:mr.length===3?typeof mr[1]!==y||mr[1].exec&&mr[1].test?this[mr[0]]=Sr?Sr.replace(mr[1],mr[2]):f:this[mr[0]]=Sr?mr[1].call(this,Sr,mr[2]):f:mr.length===4&&(this[mr[0]]=Sr?mr[3].call(this,Sr.replace(mr[1],mr[2])):f):this[mr]=Sr||f;_r+=2}},zr=function(Et,Xt){for(var Vt in Xt)if(typeof Xt[Vt]===m&&Xt[Vt].length>0){for(var gn=0;gn<Xt[Vt].length;gn++)if(ir(Xt[Vt][gn],Et))return Vt==="?"?f:Vt}else if(ir(Xt[Vt],Et))return Vt==="?"?f:Vt;return Xt.hasOwnProperty("*")?Xt["*"]:Et},Wn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Yn={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":f},Ns={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[P,[c,je+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[P,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,P],[/opios[\/ ]+([\w\.]+)/i],[P,[c,Ge+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[P,[c,Ge+" GX"]],[/\bopr\/([\w\.]+)/i],[P,[c,Ge]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[P,[c,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[P,[c,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[c,P],[/quark(?:pc)?\/([-\w\.]+)/i],[P,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[P,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[P,[c,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[P,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[P,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[P,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[P,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[P,[c,"Smart "+rn+ct]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure"+ct],P],[/\bfocus\/([\w\.]+)/i],[P,[c,er+" Focus"]],[/\bopt\/([\w\.]+)/i],[P,[c,Ge+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[P,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[P,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[P,[c,Ge+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[P,[c,"MIUI"+ct]],[/fxios\/([\w\.-]+)/i],[P,[c,je+er]],[/\bqihoobrowser\/?([\w\.]*)/i],[P,[c,"360"]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],P],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+ct],P],[/samsungbrowser\/([\w\.]+)/i],[P,[c,wn+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[P,[c,it+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,it+" Mobile"],P],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[c,P],[/(lbbrowser|rekonq)/i],[c],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[P,c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,Me],P,[b,ae]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,P,[b,ae]],[/\bgsa\/([\w\.]+) .*safari\//i],[P,[c,"GSA"],[b,ae]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[P,[c,"TikTok"],[b,ae]],[/\[(linkedin)app\]/i],[c,[b,ae]],[/(chromium)[\/ ]([-\w\.]+)/i],[c,P],[/headlesschrome(?:\/([\w\.]+)| )/i],[P,[c,Pn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,Pn+" WebView"],P],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[P,[c,"Android"+ct]],[/chrome\/([\w\.]+) mobile/i],[P,[c,je+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,P],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[P,[c,je+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[c,je+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[P,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[P,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[c,P],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[c,je+er],P],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],P],[/(wolvic|librewolf)\/([\w\.]+)/i],[c,P],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[P,[c,er+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[c,[P,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[P,/[^\d\.]+./,l]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[O,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[O,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[O,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[O,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[O,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[O,/ower/,l,Ct]],[/ sun4\w[;\)]/i],[[O,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[O,Ct]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[M,[R,wn],[b,j]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[M,[R,wn],[b,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[M,[R,Kt],[b,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[M,[R,Kt],[b,j]],[/(macintosh);/i],[M,[R,Kt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[M,[R,fn],[b,A]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[M,[R,It],[b,j]],[/honor([-\w ]+)[;\)]/i],[M,[R,It],[b,A]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[M,[R,Vr],[b,j]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[M,[R,Vr],[b,A]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[M,/_/g," "],[R,Sn],[b,j]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[M,/_/g," "],[R,Sn],[b,A]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[M,[R,Hr],[b,A]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[M,[R,zr,{OnePlus:["304","403","203"],"*":Hr}],[b,j]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[M,[R,"BLU"],[b,A]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[M,[R,"Vivo"],[b,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[M,[R,"Realme"],[b,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[M,[R,Fr],[b,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[M,[R,Fr],[b,j]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[M,[R,nn],[b,j]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[M,[R,nn],[b,A]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[M,[R,rn],[b,j]],[/(nokia) (t[12][01])/i],[R,M,[b,j]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[M,/_/g," "],[b,A],[R,"Nokia"]],[/(pixel (c|tablet))\b/i],[M,[R,Nr],[b,j]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[M,[R,Nr],[b,A]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[M,[R,Tn],[b,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[M,"Xperia Tablet"],[R,Tn],[b,j]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[M,[R,hn],[b,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[M,[R,Nt],[b,j]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[M,/(.+)/g,"Fire Phone $1"],[R,Nt],[b,A]],[/(playbook);[-\w\),; ]+(rim)/i],[M,R,[b,j]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[M,[R,tn],[b,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[M,[R,Wr],[b,j]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[M,[R,Wr],[b,A]],[/(nexus 9)/i],[M,[R,"HTC"],[b,j]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[M,/_/g," "],[b,A]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[M,[R,"TCL"],[b,j]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[M,[R,"TCL"],[b,A]],[/(itel) ((\w+))/i],[[R,Ct],M,[b,zr,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[M,[R,"Acer"],[b,j]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[M,[R,"Meizu"],[b,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[M,[R,"Ulefone"],[b,A]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[M,[R,"Energizer"],[b,A]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[M,[R,"Cat"],[b,A]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[M,[R,"Smartfren"],[b,A]],[/droid.+; (a(?:015|06[35]|142p?))/i],[M,[R,"Nothing"],[b,A]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[M,[R,"Archos"],[b,j]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[M,[R,"Archos"],[b,A]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[R,M,[b,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[R,M,[b,A]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[R,M,[b,j]],[/(surface duo)/i],[M,[R,Jr],[b,j]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[M,[R,"Fairphone"],[b,A]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[M,[R,Ar],[b,j]],[/(sprint) (\w+)/i],[R,M,[b,A]],[/(kin\.[onetw]{3})/i],[[M,/\./g," "],[R,Jr],[b,A]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[M,[R,Ft],[b,j]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[M,[R,Ft],[b,A]],[/smart-tv.+(samsung)/i],[R,[b,G]],[/hbbtv.+maple;(\d+)/i],[[M,/^/,"SmartTV"],[R,wn],[b,G]],[/tcast.+(lg)e?. ([-\w]+)/i],[R,M,[b,G]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,nn],[b,G]],[/(apple) ?tv/i],[R,[M,Kt+" TV"],[b,G]],[/crkey.*devicetype\/chromecast/i],[[M,sn+" Third Generation"],[R,Nr],[b,G]],[/crkey.*devicetype\/([^/]*)/i],[[M,/^/,"Chromecast "],[R,Nr],[b,G]],[/fuchsia.*crkey/i],[[M,sn+" Nest Hub"],[R,Nr],[b,G]],[/crkey/i],[[M,sn],[R,Nr],[b,G]],[/(portaltv)/i],[M,[R,Me],[b,G]],[/droid.+aft(\w+)( bui|\))/i],[M,[R,Nt],[b,G]],[/(shield \w+ tv)/i],[M,[R,Ar],[b,G]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[M,[R,fn],[b,G]],[/(bravia[\w ]+)( bui|\))/i],[M,[R,Tn],[b,G]],[/(mi(tv|box)-?\w+) bui/i],[M,[R,Sn],[b,G]],[/Hbbtv.*(technisat) (.*);/i],[R,M,[b,G]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,yr],[M,yr],[b,G]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[M,[b,G]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[b,G]],[/(ouya)/i,/(nintendo) (\w+)/i],[R,M,[b,L]],[/droid.+; (shield)( bui|\))/i],[M,[R,Ar],[b,L]],[/(playstation \w+)/i],[M,[R,Tn],[b,L]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[M,[R,Jr],[b,L]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[M,[R,wn],[b,de]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[R,M,[b,de]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[M,[R,Hr],[b,de]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[M,[R,Kt],[b,de]],[/(opwwe\d{3})/i],[M,[R,hn],[b,de]],[/(moto 360)/i],[M,[R,Fr],[b,de]],[/(smartwatch 3)/i],[M,[R,Tn],[b,de]],[/(g watch r)/i],[M,[R,nn],[b,de]],[/droid.+; (wt63?0{2,3})\)/i],[M,[R,Ft],[b,de]],[/droid.+; (glass) \d/i],[M,[R,Nr],[b,te]],[/(pico) (4|neo3(?: link|pro)?)/i],[R,M,[b,te]],[/(quest( \d| pro)?s?).+vr/i],[M,[R,Me],[b,te]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[b,J]],[/(aeobc)\b/i],[M,[R,Nt],[b,J]],[/(homepod).+mac os/i],[M,[R,Kt],[b,J]],[/windows iot/i],[[b,J]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[M,[b,zr,{mobile:"Mobile",xr:"VR","*":j}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[b,j]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[b,A]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[M,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[P,[c,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[c,P],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[P,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,P],[/ladybird\//i],[[c,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[P,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,P],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[c,[P,zr,Wn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[P,zr,Wn],[c,tr]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[P,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"macOS"],[P,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[P,[c,sn+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[P,[c,sn+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[P,[c,sn+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[P,[c,sn+" Linux"]],[/crkey\/([\d\.]+)/i],[P,[c,sn]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[P,c],[/(ubuntu) ([\w\.]+) like android/i],[[c,/(.+)/,"$1 Touch"],P],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[c,P],[/\(bb(10);/i],[P,[c,tn]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[P,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[P,[c,er+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[P,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[P,[c,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,"Chrome OS"],P],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,P],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],P],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,P]]},As=(Ir.call((o={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[x,[c,P,N,b]],[k,[O]],[I,[b,M,R]],[T,[c,P]],[C,[c,P]]]),Ir.call(o.isIgnore,[[x,[P,N]],[T,[P]],[C,[P]]]),Ir.call(o.isIgnoreRgx,[[x,/ ?browser$/i],[C,/ ?os$/i]]),Ir.call(o.toString,[[x,[c,P]],[k,[O]],[I,[R,M]],[T,[c,P]],[C,[c,P]]]),o),Xs=function(Et,Xt){var Vt=As.init[Xt],gn=As.isIgnore[Xt]||0,nr=As.isIgnoreRgx[Xt]||0,mr=As.toString[Xt]||0;function an(){Ir.call(this,Vt)}return an.prototype.getItem=function(){return Et},an.prototype.withClientHints=function(){return jt?jt.getHighEntropyValues(Qr).then(function(Sr){return Et.setCH(new ia(Sr,!1)).parseCH().get()}):Et.parseCH().get()},an.prototype.withFeatureCheck=function(){return Et.detectFeature().get()},Xt!=E&&(an.prototype.is=function(Sr){var _r=!1;for(var Xr in this)if(this.hasOwnProperty(Xr)&&!ir(gn,Xr)&&Ct(nr?Er(nr,this[Xr]):this[Xr])==Ct(nr?Er(nr,Sr):Sr)){if(_r=!0,Sr!=d)break}else if(Sr==d&&_r){_r=!_r;break}return _r},an.prototype.toString=function(){var Sr=l;for(var _r in mr)typeof this[mr[_r]]!==d&&(Sr+=(Sr?" ":l)+this[mr[_r]]);return Sr||d}),jt||(an.prototype.then=function(Sr){var _r=this,Xr=function(){for(var xn in _r)_r.hasOwnProperty(xn)&&(this[xn]=_r[xn])};Xr.prototype={is:an.prototype.is,toString:an.prototype.toString};var ps=new Xr;return Sr(ps),ps}),new an};function ia(Et,Xt){if(Et=Et||{},Ir.call(this,Qr),Xt)Ir.call(this,[[be,Wt(Et[Ee])],[se,Wt(Et[Le])],[A,/\?1/.test(Et[Ot])],[M,Mr(Et[xr])],[ze,Mr(Et[vr])],[Ie,Mr(Et[Bt])],[O,Mr(Et[dt])],[xe,Wt(Et[gr])],[Ne,Mr(Et[cr])]]);else for(var Vt in Et)this.hasOwnProperty(Vt)&&typeof Et[Vt]!==d&&(this[Vt]=Et[Vt])}function Zs(Et,Xt,Vt,gn){return this.get=function(nr){return nr?this.data.hasOwnProperty(nr)?this.data[nr]:f:this.data},this.set=function(nr,mr){return this.data[nr]=mr,this},this.setCH=function(nr){return this.uaCH=nr,this},this.detectFeature=function(){if(Gt&&Gt.userAgent==this.ua)switch(this.itemType){case x:Gt.brave&&typeof Gt.brave.isBrave==y&&this.set(c,"Brave");break;case I:!this.get(b)&&jt&&jt[A]&&this.set(b,A),this.get(M)=="Macintosh"&&Gt&&typeof Gt.standalone!==d&&Gt.maxTouchPoints&&Gt.maxTouchPoints>2&&this.set(M,"iPad").set(b,j);break;case C:!this.get(c)&&jt&&jt[ze]&&this.set(c,jt[ze]);break;case E:var nr=this.data,mr=function(an){return nr[an].getItem().detectFeature().get()};this.set(x,mr(x)).set(k,mr(k)).set(I,mr(I)).set(T,mr(T)).set(C,mr(C))}return this},this.parseUA=function(){return this.itemType!=E&&fr.call(this.data,this.ua,this.rgxMap),this.itemType==x&&this.set(N,Ut(this.get(P))),this},this.parseCH=function(){var nr=this.uaCH,mr=this.rgxMap;switch(this.itemType){case x:case T:var an,Sr=nr[se]||nr[be];if(Sr)for(var _r in Sr){var Xr=Sr[_r].brand||Sr[_r],ps=Sr[_r].version;this.itemType!=x||/not.a.brand/i.test(Xr)||an&&(!/chrom/i.test(an)||Xr==Gn)||(Xr=zr(Xr,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(c,Xr).set(P,ps).set(N,Ut(ps)),an=Xr),this.itemType==T&&Xr==Gn&&this.set(P,ps)}break;case k:var xn=nr[O];xn&&(xn&&nr[Ne]=="64"&&(xn+="64"),fr.call(this.data,xn+";",mr));break;case I:if(nr[A]&&this.set(b,A),nr[M]&&(this.set(M,nr[M]),!this.get(b)||!this.get(R))){var On={};fr.call(On,"droid 9; "+nr[M]+")",mr),!this.get(b)&&On.type&&this.set(b,On.type),!this.get(R)&&On.vendor&&this.set(R,On.vendor)}if(nr[xe]){var Is;if(typeof nr[xe]!="string")for(var is=0;!Is&&is<nr[xe].length;)Is=zr(nr[xe][is++],Yn);else Is=zr(nr[xe],Yn);this.set(b,Is)}break;case C:var Sa=nr[ze];if(Sa){var Ds=nr[Ie];Sa==tr&&(Ds=parseInt(Ut(Ds),10)>=13?"11":"10"),this.set(c,Sa).set(P,Ds)}this.get(c)==tr&&nr[M]=="Xbox"&&this.set(c,"Xbox").set(P,f);break;case E:var Ja=this.data,Vs=function(hi){return Ja[hi].getItem().setCH(nr).parseCH().get()};this.set(x,Vs(x)).set(k,Vs(k)).set(I,Vs(I)).set(T,Vs(T)).set(C,Vs(C))}return this},Ir.call(this,[["itemType",Et],["ua",Xt],["uaCH",gn],["rgxMap",Vt],["data",Xs(this,Et)]]),this}function Qn(Et,Xt,Vt){if(typeof Et===m?(Rr(Et,!0)?(typeof Xt===m&&(Vt=Xt),Xt=Et):(Vt=Et,Xt=f),Et=f):typeof Et!==S||Rr(Xt,!0)||(Vt=Xt,Xt=f),Vt&&typeof Vt.append===y){var gn={};Vt.forEach(function(_r,Xr){gn[Xr]=_r}),Vt=gn}if(!(this instanceof Qn))return new Qn(Et,Xt,Vt).getResult();var nr=typeof Et===S?Et:Vt&&Vt[w]?Vt[w]:Gt&&Gt.userAgent?Gt.userAgent:l,mr=new ia(Vt,!0),an=Xt?function(_r,Xr){var ps={},xn=Xr;if(!Rr(Xr))for(var On in xn={},Xr)for(var Is in Xr[On])xn[Is]=Xr[On][Is].concat(xn[Is]?xn[Is]:[]);for(var is in _r)ps[is]=xn[is]&&xn[is].length%2==0?xn[is].concat(_r[is]):_r[is];return ps}(Ns,Xt):Ns,Sr=function(_r){return _r==E?function(){return new Zs(_r,nr,an,mr).set("ua",nr).set(x,this.getBrowser()).set(k,this.getCPU()).set(I,this.getDevice()).set(T,this.getEngine()).set(C,this.getOS()).get()}:function(){return new Zs(_r,nr,an[_r],mr).parseUA().get()}};return Ir.call(this,[["getBrowser",Sr(x)],["getCPU",Sr(k)],["getDevice",Sr(I)],["getEngine",Sr(T)],["getOS",Sr(C)],["getResult",Sr(E)],["getUA",function(){return nr}],["setUA",function(_r){return Je(_r)&&(nr=_r.length>500?yr(_r,500):_r),this}]]).setUA(nr),this}Qn.VERSION="2.0.3",Qn.BROWSER=hr([c,P,N,b]),Qn.CPU=hr([O]),Qn.DEVICE=hr([M,R,b,L,A,G,j,de,J]),Qn.ENGINE=Qn.OS=hr([c,P]),typeof u!==d?(p.exports&&(u=p.exports=Qn),u.UAParser=Qn):i.amdO?(g=(function(){return Qn}).call(u,i,u,p))===f||(p.exports=g):Ae&&(_.UAParser=Qn);var Jn=Ae&&(_.jQuery||_.Zepto);if(Jn&&!Jn.ua){var wa=new Qn;Jn.ua=wa.getResult(),Jn.ua.get=function(){return wa.getUA()},Jn.ua.set=function(Et){wa.setUA(Et);var Xt=wa.getResult();for(var Vt in Xt)Jn.ua[Vt]=Xt[Vt]}}})(typeof window=="object"?window:this)},2155:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.pad.ZeroPadding={pad:function(_,f){var o=4*f;_.clamp(),_.sigBytes+=o-(_.sigBytes%o||o)},unpad:function(_){var f=_.words,o=_.sigBytes-1;for(o=_.sigBytes-1;o>=0;o--)if(f[o>>>2]>>>24-o%4*8&255){_.sigBytes=o+1;break}}},g.pad.ZeroPadding)},2169:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.mode.CFB=function(){var _=g.lib.BlockCipherMode.extend();function f(o,w,l,y){var d,m=this._iv;m?(d=m.slice(0),this._iv=void 0):d=this._prevBlock,y.encryptBlock(d,0);for(var S=0;S<l;S++)o[w+S]^=d[S]}return _.Encryptor=_.extend({processBlock:function(o,w){var l=this._cipher,y=l.blockSize;f.call(this,o,w,y,l),this._prevBlock=o.slice(w,w+y)}}),_.Decryptor=_.extend({processBlock:function(o,w){var l=this._cipher,y=l.blockSize,d=o.slice(w,w+y);f.call(this,o,w,y,l),this._prevBlock=d}}),_}(),g.mode.CFB)},2183:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Chrome111=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(5938),y=i(4256),d=i(4893),m=i(521),S=i(1305),x=i(3303),k=new _.Logger("Chrome111"),I={OS:1024,MIS:1024};class T extends m.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new T}get name(){return"Chrome111"}close(){if(k.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const b=await c.createOffer();try{c.close()}catch{}const R=g.parse(b.sdp),P=w.extractRtpCapabilities({sdpObject:R});return y.addNackSupportForOpus(P),P}catch(b){try{c.close()}catch{}throw b}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:L,proprietaryConstraints:A,extendedRtpCapabilities:j}){this.assertNotClosed(),k.debug("run()"),this._direction=c,this._remoteSdp=new S.RemoteSdp({iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",j),video:o.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",j),video:o.getSendingRemoteRtpParameters("video",j)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},A),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),k.debug("updateIceServers()");const b=this._pc.getConfiguration();b.iceServers=c,this._pc.setConfiguration(b)}async restartIce(c){if(this.assertNotClosed(),k.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const b=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:b,codecOptions:R,codec:P,onRtpSender:O}){if(this.assertNotClosed(),this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),b&&b.length>1){let ae=1;for(const be of b){const xe=be.scalabilityMode?(0,x.parse)(be.scalabilityMode).temporalLayers:3;xe>ae&&(ae=xe)}b.forEach((be,xe)=>{be.rid=`r${xe}`,be.scalabilityMode=`L1T${ae}`})}const N=f.clone(this._sendingRtpParametersByKind[c.kind]);N.codecs=o.reduceCodecs(N.codecs,P);const M=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);M.codecs=o.reduceCodecs(M.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),A=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:b});O&&O(A.sender);const j=await this._pc.createOffer();let G=g.parse(j.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j);const de=A.mid;N.mid=de,G=g.parse(this._pc.localDescription.sdp);const te=G.media[L.idx];if(N.rtcp.cname=w.getCname({offerMediaObject:te}),b)if(b.length===1){const ae=l.getRtpEncodings({offerMediaObject:te});Object.assign(ae[0],b[0]),N.encodings=ae}else N.encodings=b;else N.encodings=l.getRtpEncodings({offerMediaObject:te});this._remoteSdp.send({offerMediaObject:te,reuseMid:L.reuseMid,offerRtpParameters:N,answerRtpParameters:M,codecOptions:R});const J={type:"answer",sdp:this._remoteSdp.getSdp()};return k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._mapMidTransceiver.set(de,A),{localId:de,rtpParameters:N,rtpSender:A.sender}}async stopSending(c){if(this.assertSendDirection(),k.debug("stopSending() [localId:%s]",c),this._closed)return;const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");if(b.sender.replaceTrack(null),this._pc.removeTrack(b.sender),this._remoteSdp.closeMediaSection(b.mid))try{b.stop()}catch{}const R=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("pauseSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="inactive",this._remoteSdp.pauseMediaSection(c);const R=await this._pc.createOffer();k.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("resumeSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="sendonly";const R=await this._pc.createOffer();k.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(c,b){this.assertNotClosed(),this.assertSendDirection(),b?k.debug("replaceTrack() [localId:%s, track.id:%s]",c,b.id):k.debug("replaceTrack() [localId:%s, no track]",c);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(b)}async setMaxSpatialLayer(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{M.active=L<=b}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{P.encodings[L]={...M,...b}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:b,maxRetransmits:R,label:P,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:b,maxRetransmits:R,protocol:O};k.debug("sendDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(P,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),A=g.parse(L.sdp),j=A.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const G={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const b=[],R=new Map;for(const M of c){const{trackId:L,kind:A,rtpParameters:j,streamId:G}=M;k.debug("receive() [trackId:%s, kind:%s]",L,A);const de=j.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:A,offerRtpParameters:j,streamId:G??j.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const M of c){const{trackId:L,onRtpReceiver:A}=M;if(A){const j=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===j);if(!G)throw new Error("transceiver not found");A(G.receiver)}}let O=await this._pc.createAnswer();const N=g.parse(O.sdp);for(const M of c){const{trackId:L,rtpParameters:A}=M,j=R.get(L),G=N.media.find(de=>String(de.mid)===j);w.applyCodecParameters({offerRtpParameters:A,answerMediaObject:G})}O={type:"answer",sdp:g.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const M of c){const{trackId:L}=M,A=R.get(L),j=this._pc.getTransceivers().find(G=>G.mid===A);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(A,j),b.push({localId:A,track:j.receiver.track,rtpReceiver:j.receiver})}return b}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const P of c){k.debug("stopReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of c)this._mapMidTransceiver.delete(P)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("pauseReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("resumeReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:b,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M}=c,L={negotiated:!0,id:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M,protocol:R};k.debug("receiveDataChannel() [options:%o]",L);const A=this._pc.createDataChannel(b,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const G=await this._pc.createAnswer();if(!this._transportReady){const de=g.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:A}}async setupTransport({localDtlsRole:c,localSdpObject:b}){b||(b=g.parse(this._pc.localDescription.sdp));const R=w.extractDtlsParameters({sdpObject:b});R.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((P,O)=>{this.safeEmit("@connect",{dtlsParameters:R},P,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Chrome111=T},2196:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:p=>{p.exports=function(u){var i,g,_="",f=(u=function(w){return w||(w={}),{length:w.length||8,numeric:typeof w.numeric!="boolean"||w.numeric,letters:typeof w.letters!="boolean"||w.letters,special:typeof w.special=="boolean"&&w.special,exclude:Array.isArray(w.exclude)?w.exclude:[]}}(u)).length,o=(u.exclude,function(w){var l="";w.numeric&&(l+="0123456789"),w.letters&&(l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),w.special&&(l+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var y=0;y<=w.exclude.length;y++)l=l.replace(w.exclude[y],"");return l}(u));for(i=1;i<=f;i++)_+=o.substring(g=Math.floor(Math.random()*o.length),g+1);return _}},2215:(p,u,i)=>{var g,_;(function(f){(_=typeof(g=f)=="function"?g.call(u,i,u,p):g)===void 0||(p.exports=_),p.exports=f()})(function(){function f(){for(var w=0,l={};w<arguments.length;w++){var y=arguments[w];for(var d in y)l[d]=y[d]}return l}function o(w){return w.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function w(l){function y(){}function d(S,x,k){if(typeof document<"u"){typeof(k=f({path:"/"},y.defaults,k)).expires=="number"&&(k.expires=new Date(1*new Date+864e5*k.expires)),k.expires=k.expires?k.expires.toUTCString():"";try{var I=JSON.stringify(x);/^[\{\[]/.test(I)&&(x=I)}catch{}x=l.write?l.write(x,S):encodeURIComponent(String(x)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),S=encodeURIComponent(String(S)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var T="";for(var C in k)k[C]&&(T+="; "+C,k[C]!==!0&&(T+="="+k[C].split(";")[0]));return document.cookie=S+"="+x+T}}function m(S,x){if(typeof document<"u"){for(var k={},I=document.cookie?document.cookie.split("; "):[],T=0;T<I.length;T++){var C=I[T].split("="),E=C.slice(1).join("=");x||E.charAt(0)!=='"'||(E=E.slice(1,-1));try{var c=o(C[0]);if(E=(l.read||l)(E,c)||o(E),x)try{E=JSON.parse(E)}catch{}if(k[c]=E,S===c)break}catch{}}return S?k[S]:k}}return y.set=d,y.get=function(S){return m(S,!1)},y.getJSON=function(S){return m(S,!0)},y.remove=function(S,x){d(S,"",f(x,{expires:-1}))},y.defaults={},y.withConverter=w,y}(function(){})})},2284:(p,u,i)=>{function g(_){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},g(_)}i.d(u,{A:()=>g})},2291:(p,u)=>{let i;Object.defineProperty(u,"__esModule",{value:!0});const g=new Uint8Array(16);u.default=function(){if(!i){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(g)}},2292:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Firefox120=void 0;const g=i(7363),_=i(2994),f=i(4893),o=i(1765),w=i(8046),l=i(5544),y=i(5938),d=i(521),m=i(1305),S=i(3303),x=new _.Logger("Firefox120"),k={OS:16,MIS:2048};class I extends d.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new I}get name(){return"Firefox120"}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const E=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const b=c.captureStream().getVideoTracks()[0];try{E.addTransceiver("audio",{direction:"sendrecv"}),E.addTransceiver(b,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const R=await E.createOffer();try{c.remove()}catch{}try{b.stop()}catch{}try{E.close()}catch{}const P=g.parse(R.sdp);return l.extractRtpCapabilities({sdpObject:P})}catch(R){try{c.remove()}catch{}try{b.stop()}catch{}try{E.close()}catch{}throw R}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:E,iceParameters:c,iceCandidates:b,dtlsParameters:R,sctpParameters:P,iceServers:O,iceTransportPolicy:N,additionalSettings:M,proprietaryConstraints:L,extendedRtpCapabilities:A}){this.assertNotClosed(),x.debug("run()"),this._direction=E,this._remoteSdp=new m.RemoteSdp({iceParameters:c,iceCandidates:b,dtlsParameters:R,sctpParameters:P}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",A),video:w.getSendingRtpParameters("video",A)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",A),video:w.getSendingRemoteRtpParameters("video",A)},this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",j=>{this.emit("@icecandidateerror",j)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(E){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(E){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(E),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const b={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:E,encodings:c,codecOptions:b,codec:R,onRtpSender:P}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",E.kind,E.id),c&&c.length>1&&c.forEach((J,ae)=>{J.rid=`r${ae}`});const O=o.clone(this._sendingRtpParametersByKind[E.kind]);O.codecs=w.reduceCodecs(O.codecs,R);const N=o.clone(this._sendingRemoteRtpParametersByKind[E.kind]);N.codecs=w.reduceCodecs(N.codecs,R);const M=this._pc.addTransceiver(E,{direction:"sendonly",streams:[this._sendStream],sendEncodings:c});P&&P(M.sender);const L=await this._pc.createOffer();let A=g.parse(L.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:A});const j=(0,S.parse)((c??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const G=M.mid;O.mid=G,A=g.parse(this._pc.localDescription.sdp);const de=A.media[A.media.length-1];if(O.rtcp.cname=l.getCname({offerMediaObject:de}),c)if(c.length===1){const J=y.getRtpEncodings({offerMediaObject:de});Object.assign(J[0],c[0]),O.encodings=J}else O.encodings=c;else O.encodings=y.getRtpEncodings({offerMediaObject:de});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const J of O.encodings)J.scalabilityMode?J.scalabilityMode=`L1T${j.temporalLayers}`:J.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:de,offerRtpParameters:O,answerRtpParameters:N,codecOptions:b});const te={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",te),await this._pc.setRemoteDescription(te),this._mapMidTransceiver.set(G,M),{localId:G,rtpParameters:O,rtpSender:M.sender}}async stopSending(E){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",E),this._closed)return;const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const b=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R),this._mapMidTransceiver.delete(E)}async pauseSending(E){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",E);const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(E);const b=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async resumeSending(E){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",E);const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(E);const b=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async replaceTrack(E,c){this.assertNotClosed(),this.assertSendDirection(),c?x.debug("replaceTrack() [localId:%s, track.id:%s]",E,c.id):x.debug("replaceTrack() [localId:%s, no track]",E);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated RTCRtpTransceiver not found");await b.sender.replaceTrack(c)}async setMaxSpatialLayer(E,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",E,c);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated transceiver not found");const R=b.sender.getParameters();R.encodings.forEach((N,M)=>{N.active=M<=c}),await b.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(E,R.encodings);const P=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const O={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(E,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",E,c);const b=this._mapMidTransceiver.get(E);if(!b)throw new Error("associated RTCRtpTransceiver not found");const R=b.sender.getParameters();R.encodings.forEach((N,M)=>{R.encodings[M]={...N,...c}}),await b.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(E,R.encodings);const P=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const O={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(E){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:E,maxPacketLifeTime:c,maxRetransmits:b,label:R,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:E,maxPacketLifeTime:c,maxRetransmits:b,protocol:P};x.debug("sendDataChannel() [options:%o]",O);const N=this._pc.createDataChannel(R,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),L=g.parse(M.sdp),A=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:A});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(E){this.assertNotClosed(),this.assertRecvDirection();const c=[],b=new Map;for(const N of E){const{trackId:M,kind:L,rtpParameters:A,streamId:j}=N;x.debug("receive() [trackId:%s, kind:%s]",M,L);const G=A.mid??String(this._mapMidTransceiver.size);b.set(M,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:A,streamId:j??A.rtcp.cname,trackId:M})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);for(const N of E){const{trackId:M,onRtpReceiver:L}=N;if(L){const A=b.get(M),j=this._pc.getTransceivers().find(G=>G.mid===A);if(!j)throw new Error("transceiver not found");L(j.receiver)}}let P=await this._pc.createAnswer();const O=g.parse(P.sdp);for(const N of E){const{trackId:M,rtpParameters:L}=N,A=b.get(M),j=O.media.find(G=>String(G.mid)===A);l.applyCodecParameters({offerRtpParameters:L,answerMediaObject:j}),P={type:"answer",sdp:g.write(O)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:O}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const N of E){const{trackId:M}=N,L=b.get(M),A=this._pc.getTransceivers().find(j=>j.mid===L);if(!A)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,A),c.push({localId:L,track:A.receiver.track,rtpReceiver:A.receiver})}return c}async stopReceiving(E){if(this.assertRecvDirection(),this._closed)return;for(const R of E){x.debug("stopReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b);for(const R of E)this._mapMidTransceiver.delete(R)}async pauseReceiving(E){this.assertNotClosed(),this.assertRecvDirection();for(const R of E){x.debug("pauseReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(R)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}async resumeReceiving(E){this.assertNotClosed(),this.assertRecvDirection();for(const R of E){x.debug("resumeReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(R)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const b=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b)}async getReceiverStats(E){this.assertRecvDirection();const c=this._mapMidTransceiver.get(E);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:E,label:c,protocol:b}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:R,ordered:P,maxPacketLifeTime:O,maxRetransmits:N}=E,M={negotiated:!0,id:R,ordered:P,maxPacketLifeTime:O,maxRetransmits:N,protocol:b};x.debug("receiveDataChannel() [options:%o]",M);const L=this._pc.createDataChannel(c,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const A={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",A),await this._pc.setRemoteDescription(A);const j=await this._pc.createAnswer();if(!this._transportReady){const G=g.parse(j.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:E,localSdpObject:c}){c||(c=g.parse(this._pc.localDescription.sdp));const b=l.extractDtlsParameters({sdpObject:c});b.role=E,this._remoteSdp.updateDtlsRole(E==="client"?"server":"client"),await new Promise((R,P)=>{this.safeEmit("@connect",{dtlsParameters:b},R,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Firefox120=I},2696:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib.StreamCipher,o=_.algo,w=[],l=[],y=[],d=o.RabbitLegacy=f.extend({_doReset:function(){var S=this._key.words,x=this.cfg.iv,k=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],I=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];this._b=0;for(var T=0;T<4;T++)m.call(this);for(T=0;T<8;T++)I[T]^=k[T+4&7];if(x){var C=x.words,E=C[0],c=C[1],b=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),R=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),P=b>>>16|4294901760&R,O=R<<16|65535&b;for(I[0]^=b,I[1]^=P,I[2]^=R,I[3]^=O,I[4]^=b,I[5]^=P,I[6]^=R,I[7]^=O,T=0;T<4;T++)m.call(this)}},_doProcessBlock:function(S,x){var k=this._X;m.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var I=0;I<4;I++)w[I]=16711935&(w[I]<<8|w[I]>>>24)|4278255360&(w[I]<<24|w[I]>>>8),S[x+I]^=w[I]},blockSize:4,ivSize:2});function m(){for(var S=this._X,x=this._C,k=0;k<8;k++)l[k]=x[k];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<l[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<l[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<l[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<l[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<l[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<l[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<l[6]>>>0?1:0)|0,this._b=x[7]>>>0<l[7]>>>0?1:0,k=0;k<8;k++){var I=S[k]+x[k],T=65535&I,C=I>>>16,E=((T*T>>>17)+T*C>>>15)+C*C,c=((4294901760&I)*I|0)+((65535&I)*I|0);y[k]=E^c}S[0]=y[0]+(y[7]<<16|y[7]>>>16)+(y[6]<<16|y[6]>>>16)|0,S[1]=y[1]+(y[0]<<8|y[0]>>>24)+y[7]|0,S[2]=y[2]+(y[1]<<16|y[1]>>>16)+(y[0]<<16|y[0]>>>16)|0,S[3]=y[3]+(y[2]<<8|y[2]>>>24)+y[1]|0,S[4]=y[4]+(y[3]<<16|y[3]>>>16)+(y[2]<<16|y[2]>>>16)|0,S[5]=y[5]+(y[4]<<8|y[4]>>>24)+y[3]|0,S[6]=y[6]+(y[5]<<16|y[5]>>>16)+(y[4]<<16|y[4]>>>16)|0,S[7]=y[7]+(y[6]<<8|y[6]>>>24)+y[5]|0}_.RabbitLegacy=f._createHelper(d)}(),g.RabbitLegacy)},2731:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FakeHandler=void 0;const g=i(5328),_=i(3953),f=i(2994),o=i(1765),w=i(8046),l=i(4893),y=i(521),d=new f.Logger("FakeHandler");class m extends _.EnhancedEventEmitter{constructor({id:I,ordered:T,maxPacketLifeTime:C,maxRetransmits:E,label:c,protocol:b}){super();ye(this,"id");ye(this,"ordered");ye(this,"maxPacketLifeTime");ye(this,"maxRetransmits");ye(this,"label");ye(this,"protocol");this.id=I,this.ordered=T,this.maxPacketLifeTime=C,this.maxRetransmits=E,this.label=c,this.protocol=b}close(){this.safeEmit("close"),this.emit("@close")}send(I){this.safeEmit("message",I)}addEventListener(I,T){this.on(I,T)}}class S extends y.HandlerInterface{constructor(I){super();ye(this,"_closed",!1);ye(this,"fakeParameters");ye(this,"_rtpParametersByKind");ye(this,"_cname",`CNAME-${o.generateRandomNumber()}`);ye(this,"_transportReady",!1);ye(this,"_nextLocalId",1);ye(this,"_tracks",new Map);ye(this,"_nextSctpStreamId",0);this.fakeParameters=I}static createFactory(I){return()=>new S(I)}get name(){return"FakeHandler"}close(){d.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(I){this.emit("@icegatheringstatechange",I)}setConnectionState(I){this.emit("@connectionstatechange",I)}async getNativeRtpCapabilities(){return d.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return d.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:I,iceParameters:T,iceCandidates:C,dtlsParameters:E,sctpParameters:c,iceServers:b,iceTransportPolicy:R,proprietaryConstraints:P,extendedRtpCapabilities:O}){this.assertNotClosed(),d.debug("run()"),this._rtpParametersByKind={audio:w.getSendingRtpParameters("audio",O),video:w.getSendingRtpParameters("video",O)}}async updateIceServers(I){this.assertNotClosed(),d.debug("updateIceServers()")}async restartIce(I){this.assertNotClosed(),d.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:I,encodings:T,codecOptions:C,codec:E}){this.assertNotClosed(),d.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const c=o.clone(this._rtpParametersByKind[I.kind]),b=c.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));c.mid=`mid-${o.generateRandomNumber()}`,T||(T=[{}]);for(const P of T)P.ssrc=o.generateRandomNumber(),b&&(P.rtx={ssrc:o.generateRandomNumber()});c.encodings=T,c.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const R=this._nextLocalId++;return this._tracks.set(R,I),{localId:String(R),rtpParameters:c}}async stopSending(I){if(d.debug("stopSending() [localId:%s]",I),!this._closed){if(!this._tracks.has(Number(I)))throw new Error("local track not found");this._tracks.delete(Number(I))}}async pauseSending(I){this.assertNotClosed()}async resumeSending(I){this.assertNotClosed()}async replaceTrack(I,T){this.assertNotClosed(),T?d.debug("replaceTrack() [localId:%s, track.id:%s]",I,T.id):d.debug("replaceTrack() [localId:%s, no track]",I),this._tracks.delete(Number(I)),this._tracks.set(Number(I),T)}async setMaxSpatialLayer(I,T){this.assertNotClosed(),d.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,T)}async setRtpEncodingParameters(I,T){this.assertNotClosed(),d.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,T)}async getSenderStats(I){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:I,maxPacketLifeTime:T,maxRetransmits:C,label:E,protocol:c}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),d.debug("sendDataChannel()"),{dataChannel:new m({id:this._nextSctpStreamId++,ordered:I,maxPacketLifeTime:T,maxRetransmits:C,label:E,protocol:c}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:I,maxPacketLifeTime:T,maxRetransmits:C}}}async receive(I){this.assertNotClosed();const T=[];for(const C of I){const{trackId:E,kind:c}=C;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),d.debug("receive() [trackId:%s, kind:%s]",E,c);const b=this._nextLocalId++,R=new g.FakeMediaStreamTrack({kind:c});this._tracks.set(b,R),T.push({localId:String(b),track:R})}return T}async stopReceiving(I){if(!this._closed)for(const T of I)d.debug("stopReceiving() [localId:%s]",T),this._tracks.delete(Number(T))}async pauseReceiving(I){this.assertNotClosed()}async resumeReceiving(I){this.assertNotClosed()}async getReceiverStats(I){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:I,label:T,protocol:C}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),d.debug("receiveDataChannel()"),{dataChannel:new m({id:I.streamId,ordered:I.ordered,maxPacketLifeTime:I.maxPacketLifeTime,maxRetransmits:I.maxRetransmits,label:T,protocol:C})}}async setupTransport({localDtlsRole:I,localSdpObject:T}){const C=o.clone(this.fakeParameters.generateLocalDtlsParameters());I&&(C.role=I),this.emit("@connectionstatechange","connecting"),await new Promise((E,c)=>this.emit("@connect",{dtlsParameters:C},E,c)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new l.InvalidStateError("method called in a closed handler")}}u.FakeHandler=S},2770:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(9746);u.default=function(_){if(!(0,g.default)(_))throw TypeError("Invalid UUID");return parseInt(_.slice(14,15),16)}},2829:(p,u)=>{function i(_,f,o,w){switch(_){case 0:return f&o^~f&w;case 1:case 3:return f^o^w;case 2:return f&o^f&w^o&w}}function g(_,f){return _<<f|_>>>32-f}Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(_){const f=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520],w=new Uint8Array(_.length+1);w.set(_),w[_.length]=128;const l=(_=w).length/4+2,y=Math.ceil(l/16),d=new Array(y);for(let m=0;m<y;++m){const S=new Uint32Array(16);for(let x=0;x<16;++x)S[x]=_[64*m+4*x]<<24|_[64*m+4*x+1]<<16|_[64*m+4*x+2]<<8|_[64*m+4*x+3];d[m]=S}d[y-1][14]=8*(_.length-1)/Math.pow(2,32),d[y-1][14]=Math.floor(d[y-1][14]),d[y-1][15]=8*(_.length-1)&4294967295;for(let m=0;m<y;++m){const S=new Uint32Array(80);for(let E=0;E<16;++E)S[E]=d[m][E];for(let E=16;E<80;++E)S[E]=g(S[E-3]^S[E-8]^S[E-14]^S[E-16],1);let x=o[0],k=o[1],I=o[2],T=o[3],C=o[4];for(let E=0;E<80;++E){const c=Math.floor(E/20),b=g(x,5)+i(c,k,I,T)+C+f[c]+S[E]>>>0;C=T,T=I,I=g(k,30)>>>0,k=x,x=b}o[0]=o[0]+x>>>0,o[1]=o[1]+k>>>0,o[2]=o[2]+I>>>0,o[3]=o[3]+T>>>0,o[4]=o[4]+C>>>0}return Uint8Array.of(o[0]>>24,o[0]>>16,o[0]>>8,o[0],o[1]>>24,o[1]>>16,o[1]>>8,o[1],o[2]>>24,o[2]>>16,o[2]>>8,o[2],o[3]>>24,o[3]>>16,o[3]>>8,o[3],o[4]>>24,o[4]>>16,o[4]>>8,o[4])}},2901:(p,u,i)=>{i.d(u,{A:()=>f});var g=i(816);function _(o,w){for(var l=0;l<w.length;l++){var y=w[l];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(o,(0,g.A)(y.key),y)}}function f(o,w,l){return w&&_(o.prototype,w),l&&_(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o}},2988:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=u.stringToBytes=void 0;const g=i(1797),_=i(6011);function f(o){o=unescape(encodeURIComponent(o));const w=new Uint8Array(o.length);for(let l=0;l<o.length;++l)w[l]=o.charCodeAt(l);return w}u.stringToBytes=f,u.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",u.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",u.default=function(o,w,l,y,d,m){const S=typeof l=="string"?f(l):l,x=typeof y=="string"?(0,g.default)(y):y;if(typeof y=="string"&&(y=(0,g.default)(y)),(y==null?void 0:y.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let k=new Uint8Array(16+S.length);if(k.set(x),k.set(S,x.length),k=w(k),k[6]=15&k[6]|o,k[8]=63&k[8]|128,d){m=m||0;for(let I=0;I<16;++I)d[m+I]=k[I];return d}return(0,_.unsafeStringify)(k)}},2994:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Logger=void 0;const g=i(7833),_="mediasoup-client";u.Logger=class{constructor(f){ye(this,"_debug");ye(this,"_warn");ye(this,"_error");f?(this._debug=(0,g.default)(`${_}:${f}`),this._warn=(0,g.default)(`${_}:WARN:${f}`),this._error=(0,g.default)(`${_}:ERROR:${f}`)):(this._debug=(0,g.default)(_),this._warn=(0,g.default)(`${_}:WARN`),this._error=(0,g.default)(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(p,u,i){var g;p.exports=(g=i(9021),function(_){var f=g,o=f.lib,w=o.WordArray,l=o.Hasher,y=f.algo,d=[],m=[];(function(){function k(E){for(var c=_.sqrt(E),b=2;b<=c;b++)if(!(E%b))return!1;return!0}function I(E){return 4294967296*(E-(0|E))|0}for(var T=2,C=0;C<64;)k(T)&&(C<8&&(d[C]=I(_.pow(T,.5))),m[C]=I(_.pow(T,.3333333333333333)),C++),T++})();var S=[],x=y.SHA256=l.extend({_doReset:function(){this._hash=new w.init(d.slice(0))},_doProcessBlock:function(k,I){for(var T=this._hash.words,C=T[0],E=T[1],c=T[2],b=T[3],R=T[4],P=T[5],O=T[6],N=T[7],M=0;M<64;M++){if(M<16)S[M]=0|k[I+M];else{var L=S[M-15],A=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,j=S[M-2],G=(j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10;S[M]=A+S[M-7]+G+S[M-16]}var de=C&E^C&c^E&c,te=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),J=N+((R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25))+(R&P^~R&O)+m[M]+S[M];N=O,O=P,P=R,R=b+J|0,b=c,c=E,E=C,C=J+(te+de)|0}T[0]=T[0]+C|0,T[1]=T[1]+E|0,T[2]=T[2]+c|0,T[3]=T[3]+b|0,T[4]=T[4]+R|0,T[5]=T[5]+P|0,T[6]=T[6]+O|0,T[7]=T[7]+N|0},_doFinalize:function(){var k=this._data,I=k.words,T=8*this._nDataBytes,C=8*k.sigBytes;return I[C>>>5]|=128<<24-C%32,I[14+(C+64>>>9<<4)]=_.floor(T/4294967296),I[15+(C+64>>>9<<4)]=T,k.sigBytes=4*I.length,this._process(),this._hash},clone:function(){var k=l.clone.call(this);return k._hash=this._hash.clone(),k}});f.SHA256=l._createHelper(x),f.HmacSHA256=l._createHmacHelper(x)}(Math),g.SHA256)},3029:(p,u,i)=>{function g(_,f){if(!(_ instanceof f))throw new TypeError("Cannot call a class as a function")}i.d(u,{A:()=>g})},3128:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib.BlockCipher,o=_.algo;const w=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],y=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function m(T,C){let E=C>>24&255,c=C>>16&255,b=C>>8&255,R=255&C,P=T.sbox[0][E]+T.sbox[1][c];return P^=T.sbox[2][b],P+=T.sbox[3][R],P}function S(T,C,E){let c,b=C,R=E;for(let P=0;P<w;++P)b^=T.pbox[P],R=m(T,b)^R,c=b,b=R,R=c;return c=b,b=R,R=c,R^=T.pbox[w],b^=T.pbox[w+1],{left:b,right:R}}function x(T,C,E){let c,b=C,R=E;for(let P=w+1;P>1;--P)b^=T.pbox[P],R=m(T,b)^R,c=b,b=R,R=c;return c=b,b=R,R=c,R^=T.pbox[1],b^=T.pbox[0],{left:b,right:R}}function k(T,C,E){for(let O=0;O<4;O++){T.sbox[O]=[];for(let N=0;N<256;N++)T.sbox[O][N]=y[O][N]}let c=0;for(let O=0;O<w+2;O++)T.pbox[O]=l[O]^C[c],c++,c>=E&&(c=0);let b=0,R=0,P=0;for(let O=0;O<w+2;O+=2)P=S(T,b,R),b=P.left,R=P.right,T.pbox[O]=b,T.pbox[O+1]=R;for(let O=0;O<4;O++)for(let N=0;N<256;N+=2)P=S(T,b,R),b=P.left,R=P.right,T.sbox[O][N]=b,T.sbox[O][N+1]=R;return!0}var I=o.Blowfish=f.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var T=this._keyPriorReset=this._key,C=T.words,E=T.sigBytes/4;k(d,C,E)}},encryptBlock:function(T,C){var E=S(d,T[C],T[C+1]);T[C]=E.left,T[C+1]=E.right},decryptBlock:function(T,C){var E=x(d,T[C],T[C+1]);T[C]=E.left,T[C+1]=E.right},blockSize:2,keySize:4,ivSize:2});_.Blowfish=f._createHelper(I)}(),g.Blowfish)},3145:(p,u,i)=>{function g(_,f){(f==null||f>_.length)&&(f=_.length);for(var o=0,w=Array(f);o<f;o++)w[o]=_[o];return w}i.d(u,{A:()=>g})},3200:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ProfileLevelId=u.Level=u.Profile=void 0,u.parseProfileLevelId=S,u.profileLevelIdToString=x,u.profileToString=function(C){switch(C){case _.ConstrainedBaseline:return"ConstrainedBaseline";case _.Baseline:return"Baseline";case _.Main:return"Main";case _.ConstrainedHigh:return"ConstrainedHigh";case _.High:return"High";case _.PredictiveHigh444:return"PredictiveHigh444";default:return void g.warn(`profileToString() | unrecognized profile ${C}`)}},u.levelToString=function(C){switch(C){case f.L1_b:return"1b";case f.L1:return"1";case f.L1_1:return"1.1";case f.L1_2:return"1.2";case f.L1_3:return"1.3";case f.L2:return"2";case f.L2_1:return"2.1";case f.L2_2:return"2.2";case f.L3:return"3";case f.L3_1:return"3.1";case f.L3_2:return"3.2";case f.L4:return"4";case f.L4_1:return"4.1";case f.L4_2:return"4.2";case f.L5:return"5";case f.L5_1:return"5.1";case f.L5_2:return"5.2";default:return void g.warn(`levelToString() | unrecognized level ${C}`)}},u.parseSdpProfileLevelId=k,u.isSameProfile=function(C={},E={}){const c=k(C),b=k(E);return!!(c&&b&&c.profile===b.profile)},u.isSameProfileAndLevel=function(C={},E={}){const c=k(C),b=k(E);return!!(c&&b&&c.profile===b.profile&&c.level==b.level)},u.generateProfileLevelIdStringForAnswer=function(C={},E={}){if(!C["profile-level-id"]&&!E["profile-level-id"])return void g.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const c=k(C),b=k(E);if(!c)throw new TypeError("invalid local_profile_level_id");if(!b)throw new TypeError("invalid remote_profile_level_id");if(c.profile!==b.profile)throw new TypeError("H264 Profile mismatch");const R=T(C)&&T(E),P=c.level,O=b.level,N=(L=P,A=O,function(j,G){return j===f.L1_b?G!==f.L1&&G!==f.L1_b:G===f.L1_b?j!==f.L1:j<G}(L,A)?L:A),M=R?P:N;var L,A;return g.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${c.profile}, level:${M}]`),x(new o(c.profile,M))},u.supportedLevel=function(C,E){for(let c=m.length-1;c>=0;--c){const b=m[c];if(256*b.max_macroblock_frame_size<=C&&b.max_macroblocks_per_second<=E*b.max_macroblock_frame_size)return g.debug(`supportedLevel() | result [max_frame_pixel_count:${C}, max_fps:${E}, level:${b.level}]`),b.level}return void g.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${C}, max_fps:${E}]`)};const g=new(i(3582)).Logger;var _,f;(function(C){C[C.ConstrainedBaseline=1]="ConstrainedBaseline",C[C.Baseline=2]="Baseline",C[C.Main=3]="Main",C[C.ConstrainedHigh=4]="ConstrainedHigh",C[C.High=5]="High",C[C.PredictiveHigh444=6]="PredictiveHigh444"})(_||(u.Profile=_={})),function(C){C[C.L1_b=0]="L1_b",C[C.L1=10]="L1",C[C.L1_1=11]="L1_1",C[C.L1_2=12]="L1_2",C[C.L1_3=13]="L1_3",C[C.L2=20]="L2",C[C.L2_1=21]="L2_1",C[C.L2_2=22]="L2_2",C[C.L3=30]="L3",C[C.L3_1=31]="L3_1",C[C.L3_2=32]="L3_2",C[C.L4=40]="L4",C[C.L4_1=41]="L4_1",C[C.L4_2=42]="L4_2",C[C.L5=50]="L5",C[C.L5_1=51]="L5_1",C[C.L5_2=52]="L5_2"}(f||(u.Level=f={}));class o{constructor(E,c){this.profile=E,this.level=c}}u.ProfileLevelId=o;const w=new o(_.ConstrainedBaseline,f.L3_1);class l{constructor(E){this.mask=~I("x",E),this.masked_value=I("1",E)}isMatch(E){return this.masked_value===(E&this.mask)}}class y{constructor(E,c,b){this.profile_idc=E,this.profile_iop=c,this.profile=b}}const d=[new y(66,new l("x1xx0000"),_.ConstrainedBaseline),new y(77,new l("1xxx0000"),_.ConstrainedBaseline),new y(88,new l("11xx0000"),_.ConstrainedBaseline),new y(66,new l("x0xx0000"),_.Baseline),new y(88,new l("10xx0000"),_.Baseline),new y(77,new l("0x0x0000"),_.Main),new y(100,new l("00000000"),_.High),new y(100,new l("00001100"),_.ConstrainedHigh),new y(244,new l("00000000"),_.PredictiveHigh444)],m=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:f.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:f.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:f.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:f.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:f.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:f.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:f.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:f.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:f.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:f.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:f.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:f.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:f.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:f.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:f.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:f.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:f.L5_2}];function S(C){if(typeof C!="string"||C.length!==6)return;const E=parseInt(C,16);if(E===0)return;const c=255&E,b=E>>8&255,R=E>>16&255;let P;switch(c){case f.L1_1:P=16&b?f.L1_b:f.L1_1;break;case f.L1:case f.L1_2:case f.L1_3:case f.L2:case f.L2_1:case f.L2_2:case f.L3:case f.L3_1:case f.L3_2:case f.L4:case f.L4_1:case f.L4_2:case f.L5:case f.L5_1:case f.L5_2:P=c;break;default:return void g.warn(`parseProfileLevelId() | unrecognized level_idc [str:${C}, level_idc:${c}]`)}for(const O of d)if(R===O.profile_idc&&O.profile_iop.isMatch(b))return g.debug(`parseProfileLevelId() | result [str:${C}, profile:${O.profile}, level:${P}]`),new o(O.profile,P);g.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${C}, profile_idc:${R}, profile_iop:${b}]`)}function x(C){if(C.level==f.L1_b)switch(C.profile){case _.ConstrainedBaseline:return"42f00b";case _.Baseline:return"42100b";case _.Main:return"4d100b";default:return void g.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${C.profile}`)}let E;switch(C.profile){case _.ConstrainedBaseline:E="42e0";break;case _.Baseline:E="4200";break;case _.Main:E="4d00";break;case _.ConstrainedHigh:E="640c";break;case _.High:E="6400";break;case _.PredictiveHigh444:E="f400";break;default:return void g.warn(`profileLevelIdToString() | unrecognized profile ${C.profile}`)}let c=C.level.toString(16);return c.length===1&&(c=`0${c}`),`${E}${c}`}function k(C={}){const E=C["profile-level-id"];return E?S(E):w}function I(C,E){return+(E[0]===C)<<7|+(E[1]===C)<<6|+(E[2]===C)<<5|+(E[3]===C)<<4|+(E[4]===C)<<3|+(E[5]===C)<<2|+(E[6]===C)<<1|+(E[7]===C)}function T(C={}){const E=C["level-asymmetry-allowed"];return E===!0||E===1||E==="1"}},3240:function(p,u,i){var g;p.exports=(g=i(9021),function(_){var f=g,o=f.lib,w=o.Base,l=o.WordArray,y=f.x64={};y.Word=w.extend({init:function(d,m){this.high=d,this.low=m}}),y.WordArray=w.extend({init:function(d,m){d=this.words=d||[],this.sigBytes=m!=_?m:8*d.length},toX32:function(){for(var d=this.words,m=d.length,S=[],x=0;x<m;x++){var k=d[x];S.push(k.high),S.push(k.low)}return l.create(S,this.sigBytes)},clone:function(){for(var d=w.clone.call(this),m=d.words=this.words.slice(0),S=m.length,x=0;x<S;x++)m[x]=m[x].clone();return d}})}(),g)},3303:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.parse=function(g){const _=i.exec(g??"");return _?{spatialLayers:Number(_[1]),temporalLayers:Number(_[2])}:{spatialLayers:1,temporalLayers:1}};const i=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default="00000000-0000-0000-0000-000000000000"},3471:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OfferMediaSection=u.AnswerMediaSection=u.MediaSection=void 0;const g=i(7363),_=i(1765);class f{constructor({iceParameters:l,iceCandidates:y,dtlsParameters:d,planB:m=!1}){ye(this,"_mediaObject");ye(this,"_planB");if(this._mediaObject={},this._planB=m,l&&this.setIceParameters(l),y){this._mediaObject.candidates=[];for(const S of y){const x={component:1};x.foundation=S.foundation,x.ip=S.address??S.ip,x.port=S.port,x.priority=S.priority,x.transport=S.protocol,x.type=S.type,S.tcpType&&(x.tcptype=S.tcpType),this._mediaObject.candidates.push(x)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}d&&this.setDtlsRole(d.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(l){this._mediaObject.iceUfrag=l.usernameFragment,this._mediaObject.icePwd=l.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}u.MediaSection=f,u.AnswerMediaSection=class extends f{constructor({iceParameters:w,iceCandidates:l,dtlsParameters:y,sctpParameters:d,plainRtpParameters:m,planB:S=!1,offerMediaObject:x,offerRtpParameters:k,answerRtpParameters:I,codecOptions:T}){switch(super({iceParameters:w,iceCandidates:l,dtlsParameters:y,planB:S}),this._mediaObject.mid=String(x.mid),this._mediaObject.type=x.type,this._mediaObject.protocol=x.protocol,m?(this._mediaObject.connection={ip:m.ip,version:m.ipVersion},this._mediaObject.port=m.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),x.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const C of I.codecs){const E={payload:C.payloadType,codec:o(C),rate:C.clockRate};C.channels>1&&(E.encoding=C.channels),this._mediaObject.rtp.push(E);const c=_.clone(C.parameters)??{};let b=_.clone(C.rtcpFeedback)??[];if(T){const{opusStereo:P,opusFec:O,opusDtx:N,opusMaxPlaybackRate:M,opusMaxAverageBitrate:L,opusPtime:A,opusNack:j,videoGoogleStartBitrate:G,videoGoogleMaxBitrate:de,videoGoogleMinBitrate:te}=T,J=k.codecs.find(ae=>ae.payloadType===C.payloadType);switch(C.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":P!==void 0&&(J.parameters["sprop-stereo"]=P?1:0,c.stereo=P?1:0),O!==void 0&&(J.parameters.useinbandfec=O?1:0,c.useinbandfec=O?1:0),N!==void 0&&(J.parameters.usedtx=N?1:0,c.usedtx=N?1:0),M!==void 0&&(c.maxplaybackrate=M),L!==void 0&&(c.maxaveragebitrate=L),A!==void 0&&(J.parameters.ptime=A,c.ptime=A),j||(J.rtcpFeedback=J.rtcpFeedback.filter(ae=>ae.type!=="nack"||ae.parameter),b=b.filter(ae=>ae.type!=="nack"||ae.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":G!==void 0&&(c["x-google-start-bitrate"]=G),de!==void 0&&(c["x-google-max-bitrate"]=de),te!==void 0&&(c["x-google-min-bitrate"]=te)}}const R={payload:C.payloadType,config:""};for(const P of Object.keys(c))R.config&&(R.config+=";"),R.config+=`${P}=${c[P]}`;R.config&&this._mediaObject.fmtp.push(R);for(const P of b)this._mediaObject.rtcpFb.push({payload:C.payloadType,type:P.type,subtype:P.parameter})}this._mediaObject.payloads=I.codecs.map(C=>C.payloadType).join(" "),this._mediaObject.ext=[];for(const C of I.headerExtensions)(x.ext??[]).some(E=>E.uri===C.uri)&&this._mediaObject.ext.push({uri:C.uri,value:C.id});if(x.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),x.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:x.simulcast.list1},this._mediaObject.rids=[];for(const C of x.rids??[])C.direction==="send"&&this._mediaObject.rids.push({id:C.id,direction:"recv"})}else if(x.simulcast_03){this._mediaObject.simulcast_03={value:x.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const C of x.rids??[])C.direction==="send"&&this._mediaObject.rids.push({id:C.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof x.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=d.port,this._mediaObject.maxMessageSize=d.maxMessageSize):x.sctpmap&&(this._mediaObject.payloads=d.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:d.port,maxMessageSize:d.maxMessageSize})}}setDtlsRole(w){switch(w){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(w){var m,S;if(!((m=this._mediaObject.simulcast)!=null&&m.list1))return;const l={};for(const x of w)x.rid&&(l[x.rid]=x);const y=this._mediaObject.simulcast.list1,d=g.parseSimulcastStreamList(y);for(const x of d)for(const k of x)k.paused=!((S=l[k.scid])!=null&&S.active);this._mediaObject.simulcast.list1=d.map(x=>x.map(k=>`${k.paused?"~":""}${k.scid}`).join(",")).join(";")}};function o(w){const l=new RegExp("^(audio|video)/(.+)","i").exec(w.mimeType);if(!l)throw new TypeError("invalid codec.mimeType");return l[2]}u.OfferMediaSection=class extends f{constructor({iceParameters:w,iceCandidates:l,dtlsParameters:y,sctpParameters:d,plainRtpParameters:m,planB:S=!1,mid:x,kind:k,offerRtpParameters:I,streamId:T,trackId:C,oldDataChannelSpec:E=!1}){var c;switch(super({iceParameters:w,iceCandidates:l,dtlsParameters:y,planB:S}),this._mediaObject.mid=String(x),this._mediaObject.type=k,m?(this._mediaObject.connection={ip:m.ip,version:m.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=m.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=d?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",k){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${T??"-"} ${C}`);for(const O of I.codecs){const N={payload:O.payloadType,codec:o(O),rate:O.clockRate};O.channels>1&&(N.encoding=O.channels),this._mediaObject.rtp.push(N);const M={payload:O.payloadType,config:""};for(const L of Object.keys(O.parameters))M.config&&(M.config+=";"),M.config+=`${L}=${O.parameters[L]}`;M.config&&this._mediaObject.fmtp.push(M);for(const L of O.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:O.payloadType,type:L.type,subtype:L.parameter})}this._mediaObject.payloads=I.codecs.map(O=>O.payloadType).join(" "),this._mediaObject.ext=[];for(const O of I.headerExtensions)this._mediaObject.ext.push({uri:O.uri,value:O.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const b=I.encodings[0],R=b.ssrc,P=(c=b.rtx)==null?void 0:c.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],I.rtcp.cname&&this._mediaObject.ssrcs.push({id:R,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:R,attribute:"msid",value:`${T??"-"} ${C}`}),P&&(I.rtcp.cname&&this._mediaObject.ssrcs.push({id:P,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:P,attribute:"msid",value:`${T??"-"} ${C}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${R} ${P}`}));break}case"application":E?(this._mediaObject.payloads=d.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:d.port,maxMessageSize:d.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=d.port,this._mediaObject.maxMessageSize=d.maxMessageSize)}}setDtlsRole(w){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:w,streamId:l,trackId:y}){var k;const d=w.encodings[0],m=d.ssrc,S=(k=d.rtx)==null?void 0:k.ssrc,x=this._mediaObject.payloads.split(" ");for(const I of w.codecs){if(x.includes(String(I.payloadType)))continue;const T={payload:I.payloadType,codec:o(I),rate:I.clockRate};I.channels>1&&(T.encoding=I.channels),this._mediaObject.rtp.push(T);const C={payload:I.payloadType,config:""};for(const E of Object.keys(I.parameters))C.config&&(C.config+=";"),C.config+=`${E}=${I.parameters[E]}`;C.config&&this._mediaObject.fmtp.push(C);for(const E of I.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:I.payloadType,type:E.type,subtype:E.parameter})}this._mediaObject.payloads+=` ${w.codecs.filter(I=>!this._mediaObject.payloads.includes(I.payloadType)).map(I=>I.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),w.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:w.rtcp.cname}),this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${l??"-"} ${y}`}),S&&(w.rtcp.cname&&this._mediaObject.ssrcs.push({id:S,attribute:"cname",value:w.rtcp.cname}),this._mediaObject.ssrcs.push({id:S,attribute:"msid",value:`${l??"-"} ${y}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${S}`}))}planBStopReceiving({offerRtpParameters:w}){var m;const l=w.encodings[0],y=l.ssrc,d=(m=l.rtx)==null?void 0:m.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(S=>S.id!==y&&S.id!==d),d&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(S=>S.ssrcs!==`${y} ${d}`))}}},3518:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Consumer=void 0;const g=i(2994),_=i(3953),f=i(4893),o=new g.Logger("Consumer");class w extends _.EnhancedEventEmitter{constructor({id:d,localId:m,producerId:S,rtpReceiver:x,track:k,rtpParameters:I,appData:T}){super();ye(this,"_id");ye(this,"_localId");ye(this,"_producerId");ye(this,"_closed",!1);ye(this,"_rtpReceiver");ye(this,"_track");ye(this,"_rtpParameters");ye(this,"_paused");ye(this,"_appData");ye(this,"_observer",new _.EnhancedEventEmitter);o.debug("constructor()"),this._id=d,this._localId=m,this._producerId=S,this._rtpReceiver=x,this._track=k,this._rtpParameters=I,this._paused=!k.enabled,this._appData=T??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(d){this._appData=d}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new f.InvalidStateError("closed");return new Promise((d,m)=>{this.safeEmit("@getstats",d,m)})}pause(){o.debug("pause()"),this._closed?o.error("pause() | Consumer closed"):this._paused?o.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):o.debug("resume() | Consumer is already resumed")}onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}u.Consumer=w},3582:function(p,u,i){var g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(u,"__esModule",{value:!0}),u.Logger=void 0;const _=g(i(7833)),f="h264-profile-level-id";u.Logger=class{constructor(o){o?(this._debug=(0,_.default)(`${f}:${o}`),this._warn=(0,_.default)(`${f}:WARN:${o}`),this._error=(0,_.default)(`${f}:ERROR:${o}`)):(this._debug=(0,_.default)(f),this._warn=(0,_.default)(`${f}:WARN`),this._error=(0,_.default)(`${f}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(p,u,i)=>{function g(_,f){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,w){return o.__proto__=w,o},g(_,f)}i.d(u,{A:()=>g})},3738:p=>{function u(i){return p.exports=u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p.exports.__esModule=!0,p.exports.default=p.exports,u(i)}p.exports=u,p.exports.__esModule=!0,p.exports.default=p.exports},3779:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0});const i=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);u.default={randomUUID:i}},3785:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.clone=function(i){return i===void 0?void 0:Number.isNaN(i)?NaN:typeof structuredClone=="function"?structuredClone(i):JSON.parse(JSON.stringify(i))}},3797:function(p,u,i){var g,_,f;p.exports=(f=i(9021),i(7165),f.mode.OFB=(g=f.lib.BlockCipherMode.extend(),_=g.Encryptor=g.extend({processBlock:function(o,w){var l=this._cipher,y=l.blockSize,d=this._iv,m=this._keystream;d&&(m=this._keystream=d.slice(0),this._iv=void 0),l.encryptBlock(m,0);for(var S=0;S<y;S++)o[w+S]^=m[S]}}),g.Decryptor=_,g),f.mode.OFB)},3804:(p,u,i)=>{var g=i(5602),_=/%[sdv%]/g,f=function(y){var d=1,m=arguments,S=m.length;return y.replace(_,function(x){if(d>=S)return x;var k=m[d];switch(d+=1,x){case"%%":return"%";case"%s":return String(k);case"%d":return Number(k);case"%v":return""}})},o=function(y,d,m){var S=[y+"="+(d.format instanceof Function?d.format(d.push?m:m[d.name]):d.format)];if(d.names)for(var x=0;x<d.names.length;x+=1){var k=d.names[x];d.name?S.push(m[d.name][k]):S.push(m[d.names[x]])}else S.push(m[d.name]);return f.apply(null,S)},w=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];p.exports=function(y,d){d=d||{},y.version==null&&(y.version=0),y.name==null&&(y.name=" "),y.media.forEach(function(k){k.payloads==null&&(k.payloads="")});var m=d.outerOrder||w,S=d.innerOrder||l,x=[];return m.forEach(function(k){g[k].forEach(function(I){I.name in y&&y[I.name]!=null?x.push(o(k,I,y)):I.push in y&&y[I.push]!=null&&y[I.push].forEach(function(T){x.push(o(k,I,T))})})}),y.media.forEach(function(k){x.push(o("m",g.m[0],k)),S.forEach(function(I){g[I].forEach(function(T){T.name in k&&k[T.name]!=null?x.push(o(I,T,k)):T.push in k&&k[T.push]!=null&&k[T.push].forEach(function(C){x.push(o(I,T,C))})})})}),x.join(`\r
`)+`\r
`}},3953:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.EnhancedEventEmitter=void 0;const g=i(9596),_=new(i(2994)).Logger("EnhancedEventEmitter");class f extends g.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(w,...l){return super.emit(w,...l)}safeEmit(w,...l){try{return super.emit(w,...l)}catch(y){_.error("safeEmit() | event listener threw an error [eventName:%s]:%o",w,y);try{super.emit("listenererror",w,y)}catch{}return!!super.listenerCount(w)}}on(w,l){return super.on(w,l),this}off(w,l){return super.off(w,l),this}addListener(w,l){return super.on(w,l),this}prependListener(w,l){return super.prependListener(w,l),this}once(w,l){return super.once(w,l),this}prependOnceListener(w,l){return super.prependOnceListener(w,l),this}removeListener(w,l){return super.off(w,l),this}removeAllListeners(w){return super.removeAllListeners(w),this}listenerCount(w){return super.listenerCount(w)}listeners(w){return super.listeners(w)}rawListeners(w){return super.rawListeners(w)}}u.EnhancedEventEmitter=f},3954:(p,u,i)=>{function g(_){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},g(_)}i.d(u,{A:()=>g})},4039:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ReactNativeUnifiedPlan=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(5938),y=i(4256),d=i(4893),m=i(521),S=i(1305),x=i(3303),k=new _.Logger("ReactNativeUnifiedPlan"),I={OS:1024,MIS:1024};class T extends m.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new T}get name(){return"ReactNativeUnifiedPlan"}close(){if(k.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const b=await c.createOffer();try{c.close()}catch{}const R=g.parse(b.sdp),P=w.extractRtpCapabilities({sdpObject:R});return y.addNackSupportForOpus(P),P}catch(b){try{c.close()}catch{}throw b}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:L,proprietaryConstraints:A,extendedRtpCapabilities:j}){this.assertNotClosed(),k.debug("run()"),this._direction=c,this._remoteSdp=new S.RemoteSdp({iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",j),video:o.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",j),video:o.getSendingRemoteRtpParameters("video",j)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},A),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),k.debug("updateIceServers()");const b=this._pc.getConfiguration();b.iceServers=c,this._pc.setConfiguration(b)}async restartIce(c){if(this.assertNotClosed(),k.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const b=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:b,codecOptions:R,codec:P,onRtpSender:O}){this.assertNotClosed(),this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),b&&b.length>1&&b.forEach((xe,se)=>{xe.rid=`r${se}`});const N=f.clone(this._sendingRtpParametersByKind[c.kind]);N.codecs=o.reduceCodecs(N.codecs,P);const M=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);M.codecs=o.reduceCodecs(M.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),A=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:b});O&&O(A.sender);let j,G=await this._pc.createOffer(),de=g.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});let te=!1;const J=(0,x.parse)((b??[{}])[0].scalabilityMode);b&&b.length===1&&J.spatialLayers>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(k.debug("send() | enabling legacy simulcast for VP9 SVC"),te=!0,de=g.parse(G.sdp),j=de.media[L.idx],l.addLegacySimulcast({offerMediaObject:j,numStreams:J.spatialLayers}),G={type:"offer",sdp:g.write(de)}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);let ae=A.mid??void 0;if(ae||k.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),N.mid=ae,de=g.parse(this._pc.localDescription.sdp),j=de.media[L.idx],N.rtcp.cname=w.getCname({offerMediaObject:j}),b)if(b.length===1){let xe=l.getRtpEncodings({offerMediaObject:j});Object.assign(xe[0],b[0]),te&&(xe=[xe[0]]),N.encodings=xe}else N.encodings=b;else N.encodings=l.getRtpEncodings({offerMediaObject:j});if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const xe of N.encodings)xe.scalabilityMode?xe.scalabilityMode=`L1T${J.temporalLayers}`:xe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:j,reuseMid:L.reuseMid,offerRtpParameters:N,answerRtpParameters:M,codecOptions:R});const be={type:"answer",sdp:this._remoteSdp.getSdp()};return k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",be),await this._pc.setRemoteDescription(be),ae||(ae=A.mid,N.mid=ae),this._mapMidTransceiver.set(ae,A),{localId:ae,rtpParameters:N,rtpSender:A.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;k.debug("stopSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");if(b.sender.replaceTrack(null),this._pc.removeTrack(b.sender),this._remoteSdp.closeMediaSection(b.mid))try{b.stop()}catch{}const R=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("pauseSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="inactive",this._remoteSdp.pauseMediaSection(c);const R=await this._pc.createOffer();k.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("resumeSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="sendonly";const R=await this._pc.createOffer();k.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(c,b){this.assertNotClosed(),this.assertSendDirection(),b?k.debug("replaceTrack() [localId:%s, track.id:%s]",c,b.id):k.debug("replaceTrack() [localId:%s, no track]",c);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(b)}async setMaxSpatialLayer(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{M.active=L<=b}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{P.encodings[L]={...M,...b}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:b,maxRetransmits:R,label:P,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:b,maxRetransmits:R,protocol:O};k.debug("sendDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(P,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),A=g.parse(L.sdp),j=A.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const G={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const b=[],R=new Map;for(const M of c){const{trackId:L,kind:A,rtpParameters:j,streamId:G}=M;k.debug("receive() [trackId:%s, kind:%s]",L,A);const de=j.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:A,offerRtpParameters:j,streamId:G??j.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const M of c){const{trackId:L,onRtpReceiver:A}=M;if(A){const j=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===j);if(!G)throw new Error("transceiver not found");A(G.receiver)}}let O=await this._pc.createAnswer();const N=g.parse(O.sdp);for(const M of c){const{trackId:L,rtpParameters:A}=M,j=R.get(L),G=N.media.find(de=>String(de.mid)===j);w.applyCodecParameters({offerRtpParameters:A,answerMediaObject:G})}O={type:"answer",sdp:g.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const M of c){const{trackId:L}=M,A=R.get(L),j=this._pc.getTransceivers().find(G=>G.mid===A);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(A,j),b.push({localId:A,track:j.receiver.track,rtpReceiver:j.receiver})}return b}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const P of c){k.debug("stopReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of c)this._mapMidTransceiver.delete(P)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("pauseReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("resumeReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:b,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M}=c,L={negotiated:!0,id:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M,protocol:R};k.debug("receiveDataChannel() [options:%o]",L);const A=this._pc.createDataChannel(b,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const G=await this._pc.createAnswer();if(!this._transportReady){const de=g.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:A}}async setupTransport({localDtlsRole:c,localSdpObject:b}){b||(b=g.parse(this._pc.localDescription.sdp));const R=w.extractDtlsParameters({sdpObject:b});R.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((P,O)=>{this.safeEmit("@connect",{dtlsParameters:R},P,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.ReactNativeUnifiedPlan=T},4160:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0})},4253:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AwaitQueueRemovedTaskError=u.AwaitQueueStoppedError=void 0;class i extends Error{constructor(f){super(f??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,i)}}u.AwaitQueueStoppedError=i;class g extends Error{constructor(f){super(f??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,g)}}u.AwaitQueueRemovedTaskError=g},4256:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.addNackSupportForOpus=function(i){var g;for(const _ of i.codecs??[])_.mimeType.toLowerCase()!=="audio/opus"&&_.mimeType.toLowerCase()!=="audio/multiopus"||(g=_.rtcpFeedback)!=null&&g.some(f=>f.type==="nack"&&!f.parameter)||(_.rtcpFeedback||(_.rtcpFeedback=[]),_.rtcpFeedback.push({type:"nack"}))}},4299:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.updateV7State=void 0;const g=i(2291),_=i(6011),f={};function o(l,y,d){return l.msecs??(l.msecs=-1/0),l.seq??(l.seq=0),y>l.msecs?(l.seq=d[6]<<23|d[7]<<16|d[8]<<8|d[9],l.msecs=y):(l.seq=l.seq+1|0,l.seq===0&&l.msecs++),l}function w(l,y,d,m,S=0){if(l.length<16)throw new Error("Random bytes length must be >= 16");if(m){if(S<0||S+16>m.length)throw new RangeError(`UUID byte range ${S}:${S+15} is out of buffer bounds`)}else m=new Uint8Array(16),S=0;return y??(y=Date.now()),d??(d=127*l[6]<<24|l[7]<<16|l[8]<<8|l[9]),m[S++]=y/1099511627776&255,m[S++]=y/4294967296&255,m[S++]=y/16777216&255,m[S++]=y/65536&255,m[S++]=y/256&255,m[S++]=255&y,m[S++]=112|d>>>28&15,m[S++]=d>>>20&255,m[S++]=128|d>>>14&63,m[S++]=d>>>6&255,m[S++]=d<<2&255|3&l[10],m[S++]=l[11],m[S++]=l[12],m[S++]=l[13],m[S++]=l[14],m[S++]=l[15],m}u.updateV7State=o,u.default=function(l,y,d){var S;let m;if(l)m=w(l.random??((S=l.rng)==null?void 0:S.call(l))??(0,g.default)(),l.msecs,l.seq,y,d);else{const x=Date.now(),k=(0,g.default)();o(f,x,k),m=w(k,f.msecs,f.seq,y,d)}return y??(0,_.unsafeStringify)(m)}},4467:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(816);function _(f,o,w){return(o=(0,g.A)(o))in f?Object.defineProperty(f,o,{value:w,enumerable:!0,configurable:!0,writable:!0}):f[o]=w,f}},4496:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getRtpEncodings=function({offerMediaObject:i,track:g}){const _=new Set;for(const w of i.ssrcs??[])if(w.attribute==="msid"&&w.value.split(" ")[1]===g.id){const l=w.id;_.add(l)}if(_.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${g.id}]`);const f=new Map;for(const w of i.ssrcGroups??[]){if(w.semantics!=="FID")continue;let[l,y]=w.ssrcs.split(/\s+/);l=Number(l),y=Number(y),_.has(l)&&(_.delete(l),_.delete(y),f.set(l,y))}for(const w of _)f.set(w,null);const o=[];for(const[w,l]of f){const y={ssrc:w};l&&(y.rtx={ssrc:l}),o.push(y)}return o},u.addLegacySimulcast=function({offerMediaObject:i,track:g,numStreams:_}){if(_<=1)throw new TypeError("numStreams must be greater than 1");let f,o,w;if(!(i.ssrcs??[]).find(S=>S.attribute!=="msid"?!1:S.value.split(" ")[1]===g.id&&(f=S.id,w=S.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${g.id}]`);(i.ssrcGroups??[]).some(S=>{if(S.semantics!=="FID")return!1;const x=S.ssrcs.split(/\s+/);return Number(x[0])===f&&(o=Number(x[1]),!0)});const l=i.ssrcs.find(S=>S.attribute==="cname"&&S.id===f);if(!l)throw new Error(`a=ssrc line with cname information not found [track.id:${g.id}]`);const y=l.value,d=[],m=[];for(let S=0;S<_;++S)d.push(f+S),o&&m.push(o+S);i.ssrcGroups=i.ssrcGroups??[],i.ssrcs=i.ssrcs??[],i.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(const S of d)i.ssrcs.push({id:S,attribute:"cname",value:y}),i.ssrcs.push({id:S,attribute:"msid",value:`${w} ${g.id}`});for(let S=0;S<m.length;++S){const x=d[S],k=m[S];i.ssrcs.push({id:k,attribute:"cname",value:y}),i.ssrcs.push({id:k,attribute:"msid",value:`${w} ${g.id}`}),i.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${k}`})}}},4557:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const g=i(2829),_=i(2988);var f=i(2988);function o(w,l,y,d){return(0,_.default)(80,g.default,w,l,y,d)}Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return f.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return f.URL}}),o.DNS=_.DNS,o.URL=_.URL,u.default=o},4633:(p,u,i)=>{var g=i(3738).default;function _(){p.exports=_=function(){return o},p.exports.__esModule=!0,p.exports.default=p.exports;var f,o={},w=Object.prototype,l=w.hasOwnProperty,y=typeof Symbol=="function"?Symbol:{},d=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",S=y.toStringTag||"@@toStringTag";function x(te,J,ae,be){return Object.defineProperty(te,J,{value:ae,enumerable:!be,configurable:!be,writable:!be})}try{x({},"")}catch{x=function(J,ae,be){return J[ae]=be}}function k(te,J,ae,be){var xe=J&&J.prototype instanceof C?J:C,se=Object.create(xe.prototype);return x(se,"_invoke",function(ze,Ie,Ne){var Ee=1;return function(Le,dt){if(Ee===3)throw Error("Generator is already running");if(Ee===4){if(Le==="throw")throw dt;return{value:f,done:!0}}for(Ne.method=Le,Ne.arg=dt;;){var cr=Ne.delegate;if(cr){var gr=L(cr,Ne);if(gr){if(gr===T)continue;return gr}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(Ee===1)throw Ee=4,Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);Ee=3;var Ot=I(ze,Ie,Ne);if(Ot.type==="normal"){if(Ee=Ne.done?4:2,Ot.arg===T)continue;return{value:Ot.arg,done:Ne.done}}Ot.type==="throw"&&(Ee=4,Ne.method="throw",Ne.arg=Ot.arg)}}}(te,ae,new G(be||[])),!0),se}function I(te,J,ae){try{return{type:"normal",arg:te.call(J,ae)}}catch(be){return{type:"throw",arg:be}}}o.wrap=k;var T={};function C(){}function E(){}function c(){}var b={};x(b,d,function(){return this});var R=Object.getPrototypeOf,P=R&&R(R(de([])));P&&P!==w&&l.call(P,d)&&(b=P);var O=c.prototype=C.prototype=Object.create(b);function N(te){["next","throw","return"].forEach(function(J){x(te,J,function(ae){return this._invoke(J,ae)})})}function M(te,J){function ae(xe,se,ze,Ie){var Ne=I(te[xe],te,se);if(Ne.type!=="throw"){var Ee=Ne.arg,Le=Ee.value;return Le&&g(Le)=="object"&&l.call(Le,"__await")?J.resolve(Le.__await).then(function(dt){ae("next",dt,ze,Ie)},function(dt){ae("throw",dt,ze,Ie)}):J.resolve(Le).then(function(dt){Ee.value=dt,ze(Ee)},function(dt){return ae("throw",dt,ze,Ie)})}Ie(Ne.arg)}var be;x(this,"_invoke",function(xe,se){function ze(){return new J(function(Ie,Ne){ae(xe,se,Ie,Ne)})}return be=be?be.then(ze,ze):ze()},!0)}function L(te,J){var ae=J.method,be=te.i[ae];if(be===f)return J.delegate=null,ae==="throw"&&te.i.return&&(J.method="return",J.arg=f,L(te,J),J.method==="throw")||ae!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+ae+"' method")),T;var xe=I(be,te.i,J.arg);if(xe.type==="throw")return J.method="throw",J.arg=xe.arg,J.delegate=null,T;var se=xe.arg;return se?se.done?(J[te.r]=se.value,J.next=te.n,J.method!=="return"&&(J.method="next",J.arg=f),J.delegate=null,T):se:(J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,T)}function A(te){this.tryEntries.push(te)}function j(te){var J=te[4]||{};J.type="normal",J.arg=f,te[4]=J}function G(te){this.tryEntries=[[-1]],te.forEach(A,this),this.reset(!0)}function de(te){if(te!=null){var J=te[d];if(J)return J.call(te);if(typeof te.next=="function")return te;if(!isNaN(te.length)){var ae=-1,be=function xe(){for(;++ae<te.length;)if(l.call(te,ae))return xe.value=te[ae],xe.done=!1,xe;return xe.value=f,xe.done=!0,xe};return be.next=be}}throw new TypeError(g(te)+" is not iterable")}return E.prototype=c,x(O,"constructor",c),x(c,"constructor",E),E.displayName=x(c,S,"GeneratorFunction"),o.isGeneratorFunction=function(te){var J=typeof te=="function"&&te.constructor;return!!J&&(J===E||(J.displayName||J.name)==="GeneratorFunction")},o.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,c):(te.__proto__=c,x(te,S,"GeneratorFunction")),te.prototype=Object.create(O),te},o.awrap=function(te){return{__await:te}},N(M.prototype),x(M.prototype,m,function(){return this}),o.AsyncIterator=M,o.async=function(te,J,ae,be,xe){xe===void 0&&(xe=Promise);var se=new M(k(te,J,ae,be),xe);return o.isGeneratorFunction(J)?se:se.next().then(function(ze){return ze.done?ze.value:se.next()})},N(O),x(O,S,"Generator"),x(O,d,function(){return this}),x(O,"toString",function(){return"[object Generator]"}),o.keys=function(te){var J=Object(te),ae=[];for(var be in J)ae.unshift(be);return function xe(){for(;ae.length;)if((be=ae.pop())in J)return xe.value=be,xe.done=!1,xe;return xe.done=!0,xe}},o.values=de,G.prototype={constructor:G,reset:function(te){if(this.prev=this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(j),!te)for(var J in this)J.charAt(0)==="t"&&l.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=f)},stop:function(){this.done=!0;var te=this.tryEntries[0][4];if(te.type==="throw")throw te.arg;return this.rval},dispatchException:function(te){if(this.done)throw te;var J=this;function ae(Ee){se.type="throw",se.arg=te,J.next=Ee}for(var be=J.tryEntries.length-1;be>=0;--be){var xe=this.tryEntries[be],se=xe[4],ze=this.prev,Ie=xe[1],Ne=xe[2];if(xe[0]===-1)return ae("end"),!1;if(!Ie&&!Ne)throw Error("try statement without catch or finally");if(xe[0]!=null&&xe[0]<=ze){if(ze<Ie)return this.method="next",this.arg=f,ae(Ie),!0;if(ze<Ne)return ae(Ne),!1}}},abrupt:function(te,J){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var be=this.tryEntries[ae];if(be[0]>-1&&be[0]<=this.prev&&this.prev<be[2]){var xe=be;break}}xe&&(te==="break"||te==="continue")&&xe[0]<=J&&J<=xe[2]&&(xe=null);var se=xe?xe[4]:{};return se.type=te,se.arg=J,xe?(this.method="next",this.next=xe[2],T):this.complete(se)},complete:function(te,J){if(te.type==="throw")throw te.arg;return te.type==="break"||te.type==="continue"?this.next=te.arg:te.type==="return"?(this.rval=this.arg=te.arg,this.method="return",this.next="end"):te.type==="normal"&&J&&(this.next=J),T},finish:function(te){for(var J=this.tryEntries.length-1;J>=0;--J){var ae=this.tryEntries[J];if(ae[2]===te)return this.complete(ae[4],ae[3]),j(ae),T}},catch:function(te){for(var J=this.tryEntries.length-1;J>=0;--J){var ae=this.tryEntries[J];if(ae[0]===te){var be=ae[4];if(be.type==="throw"){var xe=be.arg;j(ae)}return xe}}throw Error("illegal catch attempt")},delegateYield:function(te,J,ae){return this.delegate={i:de(te),r:J,n:ae},this.method==="next"&&(this.arg=f),T}},o}p.exports=_,p.exports.__esModule=!0,p.exports.default=p.exports},4636:function(p,u,i){var g;p.exports=(g=i(9021),function(_){var f=g,o=f.lib,w=o.WordArray,l=o.Hasher,y=f.algo,d=[];(function(){for(var T=0;T<64;T++)d[T]=4294967296*_.abs(_.sin(T+1))|0})();var m=y.MD5=l.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(T,C){for(var E=0;E<16;E++){var c=C+E,b=T[c];T[c]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8)}var R=this._hash.words,P=T[C+0],O=T[C+1],N=T[C+2],M=T[C+3],L=T[C+4],A=T[C+5],j=T[C+6],G=T[C+7],de=T[C+8],te=T[C+9],J=T[C+10],ae=T[C+11],be=T[C+12],xe=T[C+13],se=T[C+14],ze=T[C+15],Ie=R[0],Ne=R[1],Ee=R[2],Le=R[3];Ie=S(Ie,Ne,Ee,Le,P,7,d[0]),Le=S(Le,Ie,Ne,Ee,O,12,d[1]),Ee=S(Ee,Le,Ie,Ne,N,17,d[2]),Ne=S(Ne,Ee,Le,Ie,M,22,d[3]),Ie=S(Ie,Ne,Ee,Le,L,7,d[4]),Le=S(Le,Ie,Ne,Ee,A,12,d[5]),Ee=S(Ee,Le,Ie,Ne,j,17,d[6]),Ne=S(Ne,Ee,Le,Ie,G,22,d[7]),Ie=S(Ie,Ne,Ee,Le,de,7,d[8]),Le=S(Le,Ie,Ne,Ee,te,12,d[9]),Ee=S(Ee,Le,Ie,Ne,J,17,d[10]),Ne=S(Ne,Ee,Le,Ie,ae,22,d[11]),Ie=S(Ie,Ne,Ee,Le,be,7,d[12]),Le=S(Le,Ie,Ne,Ee,xe,12,d[13]),Ee=S(Ee,Le,Ie,Ne,se,17,d[14]),Ie=x(Ie,Ne=S(Ne,Ee,Le,Ie,ze,22,d[15]),Ee,Le,O,5,d[16]),Le=x(Le,Ie,Ne,Ee,j,9,d[17]),Ee=x(Ee,Le,Ie,Ne,ae,14,d[18]),Ne=x(Ne,Ee,Le,Ie,P,20,d[19]),Ie=x(Ie,Ne,Ee,Le,A,5,d[20]),Le=x(Le,Ie,Ne,Ee,J,9,d[21]),Ee=x(Ee,Le,Ie,Ne,ze,14,d[22]),Ne=x(Ne,Ee,Le,Ie,L,20,d[23]),Ie=x(Ie,Ne,Ee,Le,te,5,d[24]),Le=x(Le,Ie,Ne,Ee,se,9,d[25]),Ee=x(Ee,Le,Ie,Ne,M,14,d[26]),Ne=x(Ne,Ee,Le,Ie,de,20,d[27]),Ie=x(Ie,Ne,Ee,Le,xe,5,d[28]),Le=x(Le,Ie,Ne,Ee,N,9,d[29]),Ee=x(Ee,Le,Ie,Ne,G,14,d[30]),Ie=k(Ie,Ne=x(Ne,Ee,Le,Ie,be,20,d[31]),Ee,Le,A,4,d[32]),Le=k(Le,Ie,Ne,Ee,de,11,d[33]),Ee=k(Ee,Le,Ie,Ne,ae,16,d[34]),Ne=k(Ne,Ee,Le,Ie,se,23,d[35]),Ie=k(Ie,Ne,Ee,Le,O,4,d[36]),Le=k(Le,Ie,Ne,Ee,L,11,d[37]),Ee=k(Ee,Le,Ie,Ne,G,16,d[38]),Ne=k(Ne,Ee,Le,Ie,J,23,d[39]),Ie=k(Ie,Ne,Ee,Le,xe,4,d[40]),Le=k(Le,Ie,Ne,Ee,P,11,d[41]),Ee=k(Ee,Le,Ie,Ne,M,16,d[42]),Ne=k(Ne,Ee,Le,Ie,j,23,d[43]),Ie=k(Ie,Ne,Ee,Le,te,4,d[44]),Le=k(Le,Ie,Ne,Ee,be,11,d[45]),Ee=k(Ee,Le,Ie,Ne,ze,16,d[46]),Ie=I(Ie,Ne=k(Ne,Ee,Le,Ie,N,23,d[47]),Ee,Le,P,6,d[48]),Le=I(Le,Ie,Ne,Ee,G,10,d[49]),Ee=I(Ee,Le,Ie,Ne,se,15,d[50]),Ne=I(Ne,Ee,Le,Ie,A,21,d[51]),Ie=I(Ie,Ne,Ee,Le,be,6,d[52]),Le=I(Le,Ie,Ne,Ee,M,10,d[53]),Ee=I(Ee,Le,Ie,Ne,J,15,d[54]),Ne=I(Ne,Ee,Le,Ie,O,21,d[55]),Ie=I(Ie,Ne,Ee,Le,de,6,d[56]),Le=I(Le,Ie,Ne,Ee,ze,10,d[57]),Ee=I(Ee,Le,Ie,Ne,j,15,d[58]),Ne=I(Ne,Ee,Le,Ie,xe,21,d[59]),Ie=I(Ie,Ne,Ee,Le,L,6,d[60]),Le=I(Le,Ie,Ne,Ee,ae,10,d[61]),Ee=I(Ee,Le,Ie,Ne,N,15,d[62]),Ne=I(Ne,Ee,Le,Ie,te,21,d[63]),R[0]=R[0]+Ie|0,R[1]=R[1]+Ne|0,R[2]=R[2]+Ee|0,R[3]=R[3]+Le|0},_doFinalize:function(){var T=this._data,C=T.words,E=8*this._nDataBytes,c=8*T.sigBytes;C[c>>>5]|=128<<24-c%32;var b=_.floor(E/4294967296),R=E;C[15+(c+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),C[14+(c+64>>>9<<4)]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),T.sigBytes=4*(C.length+1),this._process();for(var P=this._hash,O=P.words,N=0;N<4;N++){var M=O[N];O[N]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8)}return P},clone:function(){var T=l.clone.call(this);return T._hash=this._hash.clone(),T}});function S(T,C,E,c,b,R,P){var O=T+(C&E|~C&c)+b+P;return(O<<R|O>>>32-R)+C}function x(T,C,E,c,b,R,P){var O=T+(C&c|E&~c)+b+P;return(O<<R|O>>>32-R)+C}function k(T,C,E,c,b,R,P){var O=T+(C^E^c)+b+P;return(O<<R|O>>>32-R)+C}function I(T,C,E,c,b,R,P){var O=T+(E^(C|~c))+b+P;return(O<<R|O>>>32-R)+C}f.MD5=l._createHelper(m),f.HmacMD5=l._createHmacHelper(m)}(Math),g.MD5)},4725:function(p,u,i){var g;p.exports=(g=i(9021),function(){var _=g,f=_.lib.WordArray;function o(w,l,y){for(var d=[],m=0,S=0;S<l;S++)if(S%4){var x=y[w.charCodeAt(S-1)]<<S%4*2|y[w.charCodeAt(S)]>>>6-S%4*2;d[m>>>2]|=x<<24-m%4*8,m++}return f.create(d,m)}_.enc.Base64url={stringify:function(w,l){l===void 0&&(l=!0);var y=w.words,d=w.sigBytes,m=l?this._safe_map:this._map;w.clamp();for(var S=[],x=0;x<d;x+=3)for(var k=(y[x>>>2]>>>24-x%4*8&255)<<16|(y[x+1>>>2]>>>24-(x+1)%4*8&255)<<8|y[x+2>>>2]>>>24-(x+2)%4*8&255,I=0;I<4&&x+.75*I<d;I++)S.push(m.charAt(k>>>6*(3-I)&63));var T=m.charAt(64);if(T)for(;S.length%4;)S.push(T);return S.join("")},parse:function(w,l){l===void 0&&(l=!0);var y=w.length,d=l?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var S=0;S<d.length;S++)m[d.charCodeAt(S)]=S}var x=d.charAt(64);if(x){var k=w.indexOf(x);k!==-1&&(y=k)}return o(w,y,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),g.enc.Base64url)},4756:(p,u,i)=>{var g=i(4633)();p.exports=g;try{regeneratorRuntime=g}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}},4893:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.InvalidStateError=u.UnsupportedError=void 0;class i extends Error{constructor(f){super(f),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,i):this.stack=new Error(f).stack}}u.UnsupportedError=i;class g extends Error{constructor(f){super(f),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,g):this.stack=new Error(f).stack}}u.InvalidStateError=g},4905:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.pad.Iso10126={pad:function(_,f){var o=4*f,w=o-_.sigBytes%o;_.concat(g.lib.WordArray.random(w-1)).concat(g.lib.WordArray.create([w<<24],1))},unpad:function(_){var f=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=f}},g.pad.Iso10126)},4973:(p,u,i)=>{i.d(u,{Zu:()=>w,lp:()=>o});var g=i(467),_=i(4756),f=i.n(_),o=(i(9027),function(){var l=(0,g.A)(f().mark(function y(d){return f().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var x=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return x?new Promise(function(k,I){x.call(navigator,S,k,I)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),m.next=4,navigator.mediaDevices.getUserMedia(d);case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},y)}));return function(y){return l.apply(this,arguments)}}()),w=function(){var l=(0,g.A)(f().mark(function y(d){return f().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(S){var x=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return x?new Promise(function(k,I){x.call(navigator,S,k,I)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),m.next=4,navigator.mediaDevices.getDisplayMedia(d);case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},y)}));return function(y){return l.apply(this,arguments)}}()},5020:(p,u,i)=>{var g=function(l){return String(Number(l))===l?Number(l):l},_=function(l,y,d){var m=l.name&&l.names;l.push&&!y[l.push]?y[l.push]=[]:m&&!y[l.name]&&(y[l.name]={});var S=l.push?{}:m?y[l.name]:y;(function(x,k,I,T){if(T&&!I)k[T]=g(x[1]);else for(var C=0;C<I.length;C+=1)x[C+1]!=null&&(k[I[C]]=g(x[C+1]))})(d.match(l.reg),S,l.names,l.name),l.push&&y[l.push].push(S)},f=i(5602),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);u.parse=function(l){var y={},d=[],m=y;return l.split(/(\r\n|\r|\n)/).filter(o).forEach(function(S){var x=S[0],k=S.slice(2);x==="m"&&(d.push({rtp:[],fmtp:[]}),m=d[d.length-1]);for(var I=0;I<(f[x]||[]).length;I+=1){var T=f[x][I];if(T.reg.test(k))return _(T,m,k)}}),y.media=d,y};var w=function(l,y){var d=y.split(/=(.+)/,2);return d.length===2?l[d[0]]=g(d[1]):d.length===1&&y.length>1&&(l[d[0]]=void 0),l};u.parseParams=function(l){return l.split(/;\s?/).reduce(w,{})},u.parseFmtpConfig=u.parseParams,u.parsePayloads=function(l){return l.toString().split(" ").map(Number)},u.parseRemoteCandidates=function(l){for(var y=[],d=l.split(" ").map(g),m=0;m<d.length;m+=3)y.push({component:d[m],ip:d[m+1],port:d[m+2]});return y},u.parseImageAttributes=function(l){return l.split(" ").map(function(y){return y.substring(1,y.length-1).split(",").reduce(w,{})})},u.parseSimulcastStreamList=function(l){return l.split(";").map(function(y){return y.split(",").map(function(d){var m,S=!1;return d[0]!=="~"?m=g(d):(m=g(d.substring(1,d.length)),S=!0),{scid:m,paused:S}})})}},5071:(p,u,i)=>{i.d(u,{V:()=>g});var g={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5248:(p,u,i)=>{i(1765)},5328:(p,u,i)=>{var w,l,y,d,m,S,x,k,I,T,C,E,c,b,R,P;Object.defineProperty(u,"__esModule",{value:!0}),u.FakeMediaStreamTrack=void 0;const g=i(182),_=i(5862),f=i(3785),O=class O extends _.FakeEventTarget{constructor({kind:L,id:A,label:j,contentHint:G,enabled:de,muted:te,readyState:J,capabilities:ae,constraints:be,settings:xe,data:se}){super();Ls(this,w);Ls(this,l);Ls(this,y);Ls(this,d);Ls(this,m);Ls(this,S);Ls(this,x);Ls(this,k);Ls(this,I);Ls(this,T);Ls(this,C);Ls(this,E,null);Ls(this,c,null);Ls(this,b,null);Ls(this,R,null);Ls(this,P,null);Bn(this,w,A??(0,g.v4)()),Bn(this,l,L),Bn(this,y,j??""),Bn(this,x,G??""),Bn(this,m,de??!0),Bn(this,S,te??!1),Bn(this,d,J??"live"),Bn(this,k,ae??{}),Bn(this,I,be??{}),Bn(this,T,xe??{}),Bn(this,C,se??{})}get id(){return Pr(this,w)}get kind(){return Pr(this,l)}get label(){return Pr(this,y)}get contentHint(){return Pr(this,x)}set contentHint(L){Bn(this,x,L)}get enabled(){return Pr(this,m)}set enabled(L){const A=Pr(this,m)!==L;Bn(this,m,L),A&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return Pr(this,S)}get readyState(){return Pr(this,d)}get data(){return Pr(this,C)}set data(L){Bn(this,C,L)}get onmute(){return Pr(this,E)}set onmute(L){Pr(this,E)&&this.removeEventListener("mute",Pr(this,E)),Bn(this,E,L),L&&this.addEventListener("mute",L)}get onunmute(){return Pr(this,c)}set onunmute(L){Pr(this,c)&&this.removeEventListener("unmute",Pr(this,c)),Bn(this,c,L),L&&this.addEventListener("unmute",L)}get onended(){return Pr(this,b)}set onended(L){Pr(this,b)&&this.removeEventListener("ended",Pr(this,b)),Bn(this,b,L),L&&this.addEventListener("ended",L)}get onenabledchange(){return Pr(this,R)}set onenabledchange(L){Pr(this,R)&&this.removeEventListener("enabledchange",Pr(this,R)),Bn(this,R,L),L&&this.addEventListener("enabledchange",L)}get onstopped(){return Pr(this,P)}set onstopped(L){Pr(this,P)&&this.removeEventListener("stopped",Pr(this,P)),Bn(this,P,L),L&&this.addEventListener("stopped",L)}addEventListener(L,A,j){super.addEventListener(L,A,j)}removeEventListener(L,A){super.removeEventListener(L,A)}stop(){Pr(this,d)!=="ended"&&(Bn(this,d,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:L,data:A}={}){return new O({id:L??(0,g.v4)(),kind:Pr(this,l),label:Pr(this,y),contentHint:Pr(this,x),enabled:Pr(this,m),muted:Pr(this,S),readyState:Pr(this,d),capabilities:(0,f.clone)(Pr(this,k)),constraints:(0,f.clone)(Pr(this,I)),settings:(0,f.clone)(Pr(this,T)),data:A??(0,f.clone)(Pr(this,C))})}getCapabilities(){return Pr(this,k)}getConstraints(){return Pr(this,I)}async applyConstraints(L={}){return Bn(this,I,L),Promise.resolve()}getSettings(){return Pr(this,T)}remoteStop(){Pr(this,d)!=="ended"&&(Bn(this,d,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){Pr(this,S)||(Bn(this,S,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){Pr(this,S)&&(Bn(this,S,!1),this.dispatchEvent(new Event("unmute")))}};w=new WeakMap,l=new WeakMap,y=new WeakMap,d=new WeakMap,m=new WeakMap,S=new WeakMap,x=new WeakMap,k=new WeakMap,I=new WeakMap,T=new WeakMap,C=new WeakMap,E=new WeakMap,c=new WeakMap,b=new WeakMap,R=new WeakMap,P=new WeakMap;let o=O;u.FakeMediaStreamTrack=o},5370:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0})},5414:p=>{p.exports=(()=>{var u={43:function(f,o,w){var l,y;(function(){l=function(){var d=function(){},m="undefined",S=typeof window!==m&&typeof window.navigator!==m&&/Trident\/|MSIE /.test(window.navigator.userAgent),x=["trace","debug","info","warn","error"];function k(O,N){var M=O[N];if(typeof M.bind=="function")return M.bind(O);try{return Function.prototype.bind.call(M,O)}catch{return function(){return Function.prototype.apply.apply(M,[O,arguments])}}}function I(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(O,N){for(var M=0;M<x.length;M++){var L=x[M];this[L]=M<O?d:this.methodFactory(L,O,N)}this.log=this.debug}function C(O,N,M){return function(){typeof console!==m&&(T.call(this,N,M),this[O].apply(this,arguments))}}function E(O,N,M){return function(L){return L==="debug"&&(L="log"),typeof console!==m&&(L==="trace"&&S?I:console[L]!==void 0?k(console,L):console.log!==void 0?k(console,"log"):d)}(O)||C.apply(this,arguments)}function c(O,N,M){var L,A=this,j="loglevel";function G(){var te;if(typeof window!==m&&j){try{te=window.localStorage[j]}catch{}if(typeof te===m)try{var J=window.document.cookie,ae=J.indexOf(encodeURIComponent(j)+"=");ae!==-1&&(te=/^([^;]+)/.exec(J.slice(ae))[1])}catch{}return A.levels[te]===void 0&&(te=void 0),te}}typeof O=="string"?j+=":"+O:typeof O=="symbol"&&(j=void 0),A.name=O,A.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},A.methodFactory=M||E,A.getLevel=function(){return L},A.setLevel=function(te,J){if(typeof te=="string"&&A.levels[te.toUpperCase()]!==void 0&&(te=A.levels[te.toUpperCase()]),!(typeof te=="number"&&te>=0&&te<=A.levels.SILENT))throw"log.setLevel() called with invalid level: "+te;if(L=te,J!==!1&&function(ae){var be=(x[ae]||"silent").toUpperCase();if(typeof window!==m&&j){try{return void(window.localStorage[j]=be)}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+be+";"}catch{}}}(te),T.call(A,te,O),typeof console===m&&te<A.levels.SILENT)return"No console available for logging"},A.setDefaultLevel=function(te){G()||A.setLevel(te,!1)},A.enableAll=function(te){A.setLevel(A.levels.TRACE,te)},A.disableAll=function(te){A.setLevel(A.levels.SILENT,te)};var de=G();de==null&&(de=N??"WARN"),A.setLevel(de,!1)}var b=new c,R={};b.getLogger=function(O){if(typeof O!="symbol"&&typeof O!="string"||O==="")throw new TypeError("You must supply a name when creating a logger.");var N=R[O];return N||(N=R[O]=new c(O,b.getLevel(),b.methodFactory)),N};var P=typeof window!==m?window.log:void 0;return b.noConflict=function(){return typeof window!==m&&window.log===b&&(window.log=P),b},b.getLoggers=function(){return R},b.default=b,b},(y=l.call(o,w,o,f))===void 0||(f.exports=y)})()}},i={};function g(f){var o=i[f];if(o!==void 0)return o.exports;var w=i[f]={exports:{}};return u[f].call(w.exports,w,w.exports,g),w.exports}g.d=(f,o)=>{for(var w in o)g.o(o,w)&&!g.o(f,w)&&Object.defineProperty(f,w,{enumerable:!0,get:o[w]})},g.o=(f,o)=>Object.prototype.hasOwnProperty.call(f,o),g.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var _={};return(()=>{g.r(_),g.d(_,{VideoSDKMetrics:()=>er});const f="inbound",o="outbound",w={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:f},l={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:o},y={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:f},d={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:o},m="inbound-rtp",S="bytesReceived",x="bytesSent",k="clockRate",I="codecId",T="currentRoundTripTime",C="roundTripTime",E="fractionLost",c="frameHeight",b="frameWidth",R="qualityLimitationReason",P="qualityLimitationDurations",O="qualityLimitationResolutionChanges",N="id",M="jitter",L="kind",A="mimeType",j="packetsLost",G="packetsReceived",de="packetsSent",te="responsesReceived",J="ssrc",ae="selected",be="timestamp",xe="totalRoundTripTime",se="roundTripTimeMeasurements",ze="type",Ie="framesDecoded",Ne="framesEncoded",Ee="totalDecodeTime",Le="totalEncodeTime",dt="pliCount",cr="nackCount",gr="trackId",Ot="trackIdentifier",xr="mediaSourceId",vr="audio",Bt="video",Qr={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Nt="audio",Kt="video",Wr="network",tn="data";var Nr=g(43);const Vr=()=>`${new Date().toISOString()} | metrics`,rn=(Ge,Me,it)=>`${Ge} | ${Me} | ${it}`;Nr.setDefaultLevel(Nr.levels.TRACE);const It=(Ge,Me,it)=>{it?Nr.debug(rn(Vr(),Ge,Me),it):Nr.debug(rn(Vr(),Ge,Me))},nn=(Ge,Me)=>{Nr.warn(rn(Vr(),Ge,Me))},Jr=(Ge,Me)=>{Nr.error(rn(Vr(),Ge,Me))},Fr="extractor   ",Ar=(Ge,Me,it)=>{if(!Me)return null;const je={};let ct=Me[vr][Ge];ct||(ct=it===f?{...w}:{...l}),je[vr]=ct;let tr=Me[Bt][Ge];return tr||(tr=it===f?{...y}:{...d}),je[Bt]=tr,je},hn=(Ge,Me,it,je)=>{let ct=!1;const tr=je[Me].total_rtt_ms_out,Ae=je[Me].total_rtt_measure_out,Gt=it?it[Me].total_rtt_ms_out:0,jt=it?it[Me].total_rtt_measure_out:0,hr={rtt:null,totalRTT:tr,totalRTTMeasurements:Ae};if(Ge[be]===je[Me].timestamp_out||!Object.prototype.hasOwnProperty.call(Ge,C)||Object.prototype.hasOwnProperty.call(Ge,se)&&(ct=!0,Number(Ge[se])===0||Number(Ge[se])-jt===Ae))return hr;const ir=1e3*Number(Ge[C]);let Rr=tr+ir,Je=Ae+1;return ct&&(Rr=1e3*Number(Ge[xe])-Gt,Je=Number(Ge[se])-jt),{rtt:ir,totalRTT:Rr,totalRTTMeasurements:Je}},Hr=(Ge,Me,it)=>Ge[be]===it[Me].timestamp_out?null:Object.prototype.hasOwnProperty.call(Ge,M)?1e3*(Number(Ge[M])||0):null,wn=(Ge,Me,it,je)=>{if(!Object.prototype.hasOwnProperty.call(Ge,de)||!Object.prototype.hasOwnProperty.call(Ge,x))return{packetsSent:it[Me].total_packets_out,packetsLost:it[Me].total_packets_lost_out,bytesSent:it[Me].total_KBytes_out};const ct=Number(Ge[de])||0-(je?je[Me].total_packets_out:0),tr=ct-it[Me].total_packets_out,Ae=Number(Ge[x])/1024-(je?je[Me].total_KBytes_out:0),Gt=Ae-it[Me].total_KBytes_out,jt=Ge[be]||Date.now(),hr=je?je.timestamp:null;let ir=it.timestamp;!ir&&hr&&(ir=hr);const Rr=ir?jt-ir:0;return{packetsSent:ct,deltaPacketsSent:tr,KBytesSent:Ae,deltaKBytesSent:Gt,kbsSent:Rr>0?.008*Gt*1024/Rr*1e3:0}},fn=(Ge,Me,it,je)=>{let ct=it[Me].total_packets_lost_out,tr=0,Ae=0;return Object.prototype.hasOwnProperty.call(Ge,j)&&(ct=Number(Ge[j])||0-(je?je[Me].total_packets_lost_out:0),tr=ct-it[Me].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Ge,E)&&(Ae=Number(100*Ge[E])),{packetsLost:ct,deltaPacketsLost:tr,fractionLost:Ae}},Tn=(Ge,Me,it,je)=>{if(!Object.prototype.hasOwnProperty.call(Ge,G)||!Object.prototype.hasOwnProperty.call(Ge,j)||!Object.prototype.hasOwnProperty.call(Ge,S))return{percent_packets_lost:it[Me].percent_packets_lost_in,packetsReceived:it[Me].total_packets_in,packetsLost:it[Me].total_packets_lost_in,bytesReceived:it[Me].total_KBytes_in};const ct=(Number(Ge[G])||0)-(je?je[Me].total_packets_in:0),tr=(Number(Ge[j])||0)-(je?je[Me].total_packets_lost_in:0),Ae=tr-it[Me].total_packets_lost_in,Gt=ct-it[Me].total_packets_in,jt=ct!==it[Me].total_packets_in?100*Ae/(Ae+Gt):0,hr=Number(Ge[S])/1024-(je?je[Me].total_KBytes_in:0),ir=hr-it[Me].total_KBytes_in,Rr=Ge[be]||Date.now(),Je=je?je.timestamp:null;let Wt=it.timestamp;!Wt&&Je&&(Wt=Je);const Ct=Wt?Rr-Wt:0;return{percentPacketsLost:jt,packetsReceived:ct,deltaPacketsReceived:Gt,packetsLost:tr,deltaPacketsLost:Ae,KBytesReceived:hr,deltaKBytesReceived:ir,kbsReceived:Ct>0?.008*ir*1024/Ct*1e3:0}},Sn=Ge=>Ge.candidateType!=="relay"?"":Ge.relayProtocol||"",Ft=Ge=>Object.prototype.hasOwnProperty.call(Ge,c)&&Object.prototype.hasOwnProperty.call(Ge,b)?{width:Ge[b]||null,height:Ge[c]||null,framerate:Ge.framesPerSecond}:{width:null,height:null,framerate:null};class Pn{constructor(Me,it){this._callbacks={onStatsCollected:null},this._id=`collector-${it}`,this._moduleName=this._id,this._probeId=it,this._config=Me,this._state="idle",this._statsReports=[]}registerCallback(Me,it,je){Me in this._callbacks?(this._callbacks[Me]={callback:it,context:je},It(this._moduleName,`registered callback '${Me}'`)):Jr(this._moduleName,`can't register callback for '${Me}' - not found`)}unregisterCallback(Me){Me in this._callbacks?(this._callbacks[Me]=null,delete this._callbacks[Me],It(this._moduleName,`unregistered callback '${Me}'`)):Jr(this._moduleName,`can't unregister callback for '${Me}' - not found`)}analyze(Me,it){const je=(tr=>{const Ae={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(tr){const Gt={...tr,audio:{},video:{},data:{...tr.data},network:{...tr.network}};return Object.keys(tr.audio).forEach(jt=>{Gt.audio[jt]={...tr.audio[jt]}}),Object.keys(tr.video).forEach(jt=>{Gt.video[jt]={...tr.video[jt]}}),Gt}return{...Ae,audio:{},video:{},data:{...Ae.data},network:{...Ae.network}}})(it);je.name=this._config.name,je.meetingId=this._config.meetingId,je.peerId=this._config.peerId,je.count=it?it.count+1:1;let ct=null;return Me.forEach(tr=>{!ct&&tr.timestamp&&(ct=tr.timestamp),((Ae,Gt,jt,hr)=>{if(!Ae)return[];switch(Ae[ze]){case"candidate-pair":let ir=!1;if(Ae.nominated&&Ae.state==="succeeded"&&(ir=!0,It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae),ae in Ae&&!Ae[ae]&&(ir=!1)),ir){Ae.localCandidateId,Ae.remoteCandidateId;const Je=((Ct,Ut,Ir)=>{const Er=(Ct[S]||0)/1024-0,Mr=(Ct[x]||0)/1024-0,yr=Ct[be]||Date.now(),fr=Er-Ut.data.total_KBytes_in,zr=Mr-Ut.data.total_KBytes_out;let Wn=Ut.timestamp;const Yn=Wn?yr-Wn:0;return{total_KBytes_received:Er,total_KBytes_sent:Mr,delta_KBytes_received:fr,delta_KBytes_sent:zr,kbs_speed_received:Yn>0?.008*fr*1024/Yn*1e3:0,kbs_speed_sent:Yn>0?.008*zr*1024/Yn*1e3:0}})(Ae,Gt),Wt=((Ct=>{Ct.availableIncomingBitrate,Ct.availableOutgoingBitrate})(Ae),((Ct,Ut,Ir,Er)=>{if(!Object.prototype.hasOwnProperty.call(Ct,T))return{rtt:null,totalRTT:Er[Ut].total_rtt_connectivity_ms,totalRTTMeasurements:Er[Ut].total_rtt_connectivity_measure};const Mr=1e3*Number(Ct[T]);let yr=Er[Ut].total_rtt_connectivity_ms+Mr,fr=Er[Ut].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Ct,xe)&&(yr=1e3*Number(Ct[xe])-0),Object.prototype.hasOwnProperty.call(Ct,te)&&(fr=Number(Ct[te])-0),{rtt:Mr,totalRTT:yr,totalRTTMeasurements:fr}})(Ae,"data",hr,Gt));return[{type:tn,value:{total_KBytes_in:Je.total_KBytes_received}},{type:tn,value:{total_KBytes_out:Je.total_KBytes_sent}},{type:tn,value:{delta_KBytes_in:Je.delta_KBytes_received}},{type:tn,value:{delta_KBytes_out:Je.delta_KBytes_sent}},{type:tn,value:{delta_kbs_in:Je.kbs_speed_received}},{type:tn,value:{delta_kbs_out:Je.kbs_speed_sent}},{type:tn,value:{delta_rtt_connectivity_ms:Wt.rtt}}]}break;case"local-candidate":if(Ae[N]===Gt.network.local_candidate_id)return[{type:Wr,value:{infrastructure:Ae.networkType}},{type:Wr,value:{local_candidate_protocol:Ae.protocol||""}},{type:Wr,value:{local_candidate_relay_protocol:Sn(Ae)}}];break;case m:{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=Ae[J],Wt=Ar(Je,Gt,f);Wt&&(Wt.timestamp=Gt.timestamp);const Ct=Ar(Je,hr,f);if(Ct&&(Ct.timestamp=hr.timestamp),Ae[L]===vr){const Ut=Tn(Ae,vr,Wt,Ct),Ir=Hr(Ae,vr,Wt),Er=Ae[I]||"",Mr=((yr,fr,zr)=>{const Wn=Number(yr.concealmentEvents)||0,Yn=Wn-(zr[fr].total_concealment_events||0),Ns=Number(yr.insertedSamplesForDeceleration)||0,As=Ns-(zr[fr].total_inserted_samples_for_decelaration||0),Xs=Number(yr.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Wn,deltaConcealmentEvents:Yn,totalInsertedSamplesForDecelaration:Ns,deltaInsertedSamplesForDecelaration:As,totalRemovedSamplesForAccelaration:Xs,deltaRemovedSampleForAccelaration:Xs-(zr[fr].total_removed_samples_for_accelaration||0)}})(Ae,vr,Wt);return[{ssrc:Je,type:Nt,value:{codec_id_in:Er}},{ssrc:Je,type:Nt,value:{total_packets_in:Ut.packetsReceived}},{ssrc:Je,type:Nt,value:{delta_packets_in:Ut.deltaPacketsReceived}},{ssrc:Je,type:Nt,value:{total_packets_lost_in:Ut.packetsLost}},{ssrc:Je,type:Nt,value:{delta_packets_lost_in:Ut.deltaPacketsLost}},{ssrc:Je,type:Nt,value:{percent_packets_lost_in:Ut.percentPacketsLost}},{ssrc:Je,type:Nt,value:{total_KBytes_in:Ut.KBytesReceived}},{ssrc:Je,type:Nt,value:{delta_KBytes_in:Ut.deltaKBytesReceived}},{ssrc:Je,type:Nt,value:{delta_kbs_in:Ut.kbsReceived}},{ssrc:Je,type:Nt,value:{delta_jitter_ms_in:Ir}},{ssrc:Je,type:Nt,value:{total_concealment_events:Mr.totalConcealmentEvents}},{ssrc:Je,type:Nt,value:{delta_concealment_events:Mr.deltaConcealmentEvents}},{ssrc:Je,type:Nt,value:{total_inserted_samples_for_decelaration:Mr.totalInsertedSamplesForDecelaration}},{ssrc:Je,type:Nt,value:{delta_inserted_samples_for_decelaration:Mr.deltaInsertedSamplesForDecelaration}},{ssrc:Je,type:Nt,value:{total_removed_samples_for_accelaration:Mr.totalRemovedSamplesForAccelaration}},{ssrc:Je,type:Nt,value:{delta_removed_samples_for_accelaration:Mr.deltaRemovedSampleForAccelaration}},{ssrc:Je,type:Nt,value:{track_in:Ae[gr]}},{ssrc:Je,type:Nt,value:{track_id_in:Ae[Ot]}},{ssrc:Je,type:Nt,value:{media_source_id:Ae[xr]}}]}if(Ae[L]===Bt){((yr,fr)=>{if(!Object.prototype.hasOwnProperty.call(yr,Ie)||!Object.prototype.hasOwnProperty.call(yr,Ee))return{delta_ms_decode_frame:fr[Bt].delta_ms_decode_frame_in,frames_decoded:fr[Bt].total_frames_decoded_in,total_decode_time:fr[Bt].total_time_decoded_in};yr[Ie],yr[Ee],fr[Bt].total_time_decoded_in,fr[Bt].total_frames_decoded_in})(Ae,Wt);const Ut=Tn(Ae,Bt,Wt,Ct),Ir=Hr(Ae,Bt,Wt),Er=(Ae.decoderImplementation,Ae[I]||null),Mr=Ft(Ae);return((yr,fr,zr)=>{if(!Object.prototype.hasOwnProperty.call(yr,dt)||!Object.prototype.hasOwnProperty.call(yr,cr))return{pliCount:fr.total_pli_sent_in,nackCount:fr.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};yr[dt],zr&&zr[Bt].total_pli_sent_in,yr[cr],zr&&zr[Bt].total_nack_sent_in,fr[Bt].total_pli_sent_in,fr[Bt].total_nack_sent_in})(Ae,Wt,Ct),[{ssrc:Je,type:Kt,value:{codec_id_in:Er}},{ssrc:Je,type:Kt,value:{total_packets_in:Ut.packetsReceived}},{ssrc:Je,type:Kt,value:{delta_packets_in:Ut.deltaPacketsReceived}},{ssrc:Je,type:Kt,value:{total_packets_lost_in:Ut.packetsLost}},{ssrc:Je,type:Kt,value:{delta_packets_lost_in:Ut.deltaPacketsLost}},{ssrc:Je,type:Kt,value:{percent_packets_lost_in:Ut.percentPacketsLost}},{ssrc:Je,type:Kt,value:{total_KBytes_in:Ut.KBytesReceived}},{ssrc:Je,type:Kt,value:{delta_KBytes_in:Ut.deltaKBytesReceived}},{ssrc:Je,type:Kt,value:{delta_kbs_in:Ut.kbsReceived}},{ssrc:Je,type:Kt,value:{delta_jitter_ms_in:Ir}},{ssrc:Je,type:Kt,value:{size_in:Mr}},{ssrc:Je,type:Kt,value:{track_in:Ae[gr]}},{ssrc:Je,type:Kt,value:{track_id_in:Ae[Ot]}},{ssrc:Je,type:Kt,value:{media_source_id:Ae[xr]}},{ssrc:Je,type:Kt,value:{pause_count:Ae.pauseCount}},{ssrc:Je,type:Kt,value:{total_pauses_duration:Ae.totalPausesDuration}},{ssrc:Je,type:Kt,value:{freeze_count:Ae.freezeCount}},{ssrc:Je,type:Kt,value:{total_freezes_duration:Ae.totalFreezesDuration}}]}break}case"outbound-rtp":{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=Ae[J],Wt=Ar(Je,Gt,o);Wt&&(Wt.timestamp=Gt.timestamp);const Ct=Ar(Je,hr,o);if(Ct&&(Ct.timestamp=hr.timestamp),Ae[L]===vr){const Ut=Ae[I]||null,Ir=wn(Ae,vr,Wt,Ct);return[{ssrc:Je,type:Nt,value:{codec_id_out:Ut}},{ssrc:Je,type:Nt,value:{total_packets_out:Ir.packetsSent}},{ssrc:Je,type:Nt,value:{delta_packets_out:Ir.deltaPacketsSent}},{ssrc:Je,type:Nt,value:{total_KBytes_out:Ir.KBytesSent}},{type:Nt,value:{delta_KBytes_out:Ir.deltaKBytesSent}},{ssrc:Je,type:Nt,value:{delta_kbs_out:Ir.kbsSent}},{ssrc:Je,type:Nt,value:{track_out:Ae[gr]}},{ssrc:Je,type:Nt,value:{track_id_out:Ae[Ot]}},{ssrc:Je,type:Nt,value:{media_source_id:Ae[xr]}}]}if(Ae[L]===Bt){Ae.encoderImplementation;const Ut=Ae[I]||null,Ir=(((yr,fr)=>{if(!Object.prototype.hasOwnProperty.call(yr,Ne)||!Object.prototype.hasOwnProperty.call(yr,Le))return{delta_ms_encode_frame:fr[Bt].delta_ms_encode_frame_out,frames_encoded:fr[Bt].total_frames_encoded_out,total_encode_time:fr[Bt].total_time_encoded_out};yr[Ne],yr[Le],fr[Bt].total_time_encoded_out,fr[Bt].total_frames_encoded_out})(Ae,Wt),Ft(Ae)),Er=(yr=>{const fr=Object.prototype.hasOwnProperty.call(yr,R)?yr[R]:null,zr=Object.prototype.hasOwnProperty.call(yr,O)?yr[O]:null,Wn=Object.prototype.hasOwnProperty.call(yr,P)?yr[P]:null;return Wn&&Object.keys(Wn).forEach(Yn=>{Wn[Yn]>1e3&&(Wn[Yn]=Number(Wn[Yn]/1e3))}),{reason:fr,durations:Wn,resolutionChanges:zr}})(Ae),Mr=(((yr,fr,zr)=>{if(!Object.prototype.hasOwnProperty.call(yr,dt)||!Object.prototype.hasOwnProperty.call(yr,cr))return{pliCount:fr.total_pli_received_out,nackCount:fr.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};yr[dt],zr&&zr[Bt].total_pli_received_out,yr[cr],zr&&zr[Bt].total_nack_received_out,fr[Bt].total_pli_received_out,fr[Bt].total_nack_received_out})(Ae,Wt,Ct),wn(Ae,Bt,Wt,Ct));return[{ssrc:Je,type:Kt,value:{codec_id_out:Ut}},{ssrc:Je,type:Kt,value:{total_packets_out:Mr.packetsSent}},{ssrc:Je,type:Kt,value:{delta_packets_out:Mr.deltaPacketsSent}},{ssrc:Je,type:Kt,value:{total_KBytes_out:Mr.KBytesSent}},{ssrc:Je,type:Kt,value:{delta_KBytes_out:Mr.deltaKBytesSent}},{ssrc:Je,type:Kt,value:{delta_kbs_out:Mr.kbsSent}},{ssrc:Je,type:Kt,value:{size_out:Ir}},{ssrc:Je,type:Kt,value:{limitation_out:Er}},{ssrc:Je,type:Kt,value:{track_out:Ae[gr]}},{ssrc:Je,type:Kt,value:{track_id_out:Ae[Ot]}},{ssrc:Je,type:Kt,value:{media_source_id:Ae[xr]}}]}break}case"media-source":{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=[];return Object.keys(Gt[vr]).forEach(Wt=>{const Ct=Gt[vr][Wt];if(Ct.media_source_id===Ae[N]){var Ut=Ae[Ot];Je.push({ssrc:Ct.ssrc,type:Nt,value:{track_id_out:Ut}})}}),Object.keys(Gt[Bt]).forEach(Wt=>{const Ct=Gt[Bt][Wt];if(Ct.media_source_id===Ae[N]){var Ut=Ae[Ot];Je.push({ssrc:Ct.ssrc,type:Kt,value:{track_id_out:Ut}})}}),Je}case"track":{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=[];return Object.keys(Gt[vr]).forEach(Wt=>{const Ct=Gt[vr][Wt];if(Ct.track_in===Ae[N]||Ct.track_out===Ae[N]){It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);var Ut=Ae[Ot];Ae[N]===Ct.track_in?Je.push({ssrc:Ct.ssrc,type:Nt,value:{track_id_in:Ut}}):Je.push({ssrc:Ct.ssrc,type:Nt,value:{track_id_out:Ut}})}}),Object.keys(Gt[Bt]).forEach(Wt=>{const Ct=Gt[Bt][Wt];if(Ct.track_in===Ae[N]||Ct.track_out===Ae[N]){It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);var Ut=Ae[Ot];Ae[N]===Ct.track_in?Je.push({ssrc:Ct.ssrc,type:Kt,value:{track_id_in:Ut}}):Je.push({ssrc:Ct.ssrc,type:Kt,value:{track_id_out:Ut}})}}),Je}case"codec":const Rr=[];return Object.keys(Gt[vr]).forEach(Je=>{const Wt=Gt[vr][Je];if(Wt.codec_id_in===Ae[N]||Wt.codec_id_out===Ae[N]){It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Ct=(Ut=>({channels:Ut.channels||null,clock_rate:Ut[k]||null,mime_type:Ut[A]||null,sdp_fmtp_line:Ut.sdpFmtpLine||null}))(Ae);Ae[N]===Wt.codec_id_in?Rr.push({ssrc:Wt.ssrc,type:Nt,value:{codec_in:Ct}}):Rr.push({ssrc:Wt.ssrc,type:Nt,value:{codec_out:Ct}})}}),Object.keys(Gt[Bt]).forEach(Je=>{const Wt=Gt[Bt][Je];if(Wt.codec_id_in===Ae[N]||Wt.codec_id_out===Ae[N]){It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Ct=(Ut=>({clock_rate:Ut[k]||null,mime_type:Ut[A]||null}))(Ae);Ae[N]===Wt.codec_id_in?Rr.push({ssrc:Wt.ssrc,type:Kt,value:{codec_in:Ct}}):Rr.push({ssrc:Wt.ssrc,type:Kt,value:{codec_out:Ct}})}}),Rr;case"remote-inbound-rtp":{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=Ae[J],Wt=Ar(Je,Gt,o),Ct=Ar(Je,hr,o);if(Ae[L]===vr){const Ut=hn(Ae,vr,Ct,Wt),Ir=Hr(Ae,vr,Wt),Er=fn(Ae,vr,Wt,Ct);return[{ssrc:Je,type:Nt,value:{delta_rtt_ms_out:Ut.rtt}},{ssrc:Je,type:Nt,value:{delta_jitter_ms_out:Ir}},{ssrc:Je,type:Nt,value:{timestamp_out:Ae[be]}},{ssrc:Je,type:Nt,value:{total_packets_lost_out:Er.packetsLost}},{ssrc:Je,type:Nt,value:{delta_packets_lost_out:Er.deltaPacketsLost}},{ssrc:Je,type:Nt,value:{percent_packets_lost_out:Er.fractionLost}}]}if(Ae[L]===Bt){const Ut=hn(Ae,Bt,Ct,Wt),Ir=Hr(Ae,Bt,Wt),Er=fn(Ae,Bt,Wt,Ct);return[{ssrc:Je,type:Kt,value:{delta_rtt_ms_out:Ut.rtt}},{ssrc:Je,type:Kt,value:{delta_jitter_ms_out:Ir}},{ssrc:Je,type:Kt,value:{timestamp_out:Ae[be]}},{ssrc:Je,type:Kt,value:{total_packets_lost_out:Er.packetsLost}},{ssrc:Je,type:Kt,value:{delta_packets_lost_out:Er.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{It(Fr,`analyze() - got stats ${Ae[ze]} for ${jt}`,Ae);const Je=Ae[J],Wt=Ar(Je,Gt,o),Ct=Ar(Je,hr,o);if(Ae[L]===vr){const Ut=hn(Ae,vr,Ct,Wt);return[{ssrc:Je,type:Nt,value:{delta_rtt_ms_in:Ut.rtt}},{ssrc:Je,type:Nt,value:{timestamp_in:Ae[be]}}]}break}}return[]})(tr,je,je.name,null).forEach(Ae=>{if(Ae.value&&Ae.type)if(Ae.ssrc){let hr=je[Ae.type][Ae.ssrc];hr||(Gt=Ae.type,jt=tr.type,hr=Gt===vr?jt===m?{...w}:{...l}:jt===m?{...y}:{...d},hr.ssrc=Ae.ssrc,je[Ae.type][Ae.ssrc]=hr),Object.keys(Ae.value).forEach(ir=>{Ae.value[ir]!==void 0&&(hr[ir]=Ae.value[ir])})}else Object.keys(Ae.value).forEach(hr=>{Ae.value[hr]!==void 0&&(je[Ae.type][hr]=Ae.value[hr])});var Gt,jt})}),je.timestamp=ct,je}async collectStats(){try{const Me=await this._config.monitoringObject.getStats(),it=this.analyze(Me,this._statsReports.slice().pop()||null);return this._statsReports.push(it),this.fireOnStatsCollected(it),Me}catch(Me){return Jr(this._moduleName,`got error ${Me}`),null}}fireOnStatsCollected(Me){if(this._callbacks.onStatsCollected){const it={};it.meetingId=Me.meetingId,it.peerId=Me.peerId,it.name=Me.name,it.audio=[],it.video=[],Object.values(Me.audio).forEach(je=>{const ct={};if(ct.network=Qr[Me.network.infrastructure],ct.timestamp=Me.timestamp,je.direction==f){ct.codec=je.codec_in.mime_type,ct.jitter=je.delta_jitter_ms_in,ct.bitrate=je.delta_kbs_in,ct.packetsLost=je.delta_packets_lost_in,ct.rtt=Me.data.delta_rtt_connectivity_ms||0,ct.totalPackets=je.delta_packets_in,ct.concealmentEvents=je.delta_concealment_events,ct.removedSampleForAccelaration=je.delta_removed_samples_for_accelaration,ct.insertedSamplesForDecelaration=je.delta_inserted_samples_for_decelaration;const tr=JSON.stringify(je.track_id_in).replace(/[{}"]/g,"");ct.trackId=tr}else je.direction==o&&(ct.codec=je.codec_out.mime_type,ct.jitter=je.delta_jitter_ms_out,ct.bitrate=je.delta_kbs_out,ct.packetsLost=je.delta_packets_lost_out,ct.rtt=Me.data.delta_rtt_connectivity_ms||0,ct.totalPackets=je.delta_packets_out,ct.trackId=je.track_id_out);it.audio.push(ct)}),Object.values(Me.video).forEach(je=>{const ct={};if(ct.network=Qr[Me.network.infrastructure],ct.timestamp=Me.timestamp,je.direction==f){ct.codec=je.codec_in.mime_type,ct.jitter=je.delta_jitter_ms_in,ct.bitrate=je.delta_kbs_in,ct.packetsLost=je.delta_packets_lost_in,ct.rtt=Me.data.delta_rtt_connectivity_ms||0,ct.totalPackets=je.delta_packets_in,ct.size=je.size_in,ct.pauseCount=je.pause_count,ct.totalPausesDuration=je.total_pauses_duration,ct.freezeCount=je.freeze_count,ct.totalFreezesDuration=je.total_freezes_duration;const tr=JSON.stringify(je.track_id_in).replace(/[{}"]/g,"");ct.trackId=tr}else je.direction==o&&(ct.codec=je.codec_out.mime_type,ct.jitter=je.delta_jitter_ms_out,ct.bitrate=je.delta_kbs_out,ct.packetsLost=je.delta_packets_lost_out,ct.rtt=Me.data.delta_rtt_connectivity_ms||0,ct.totalPackets=je.delta_packets_out,ct.limitation=je.limitation_out,ct.size=je.size_out,ct.trackId=je.track_id_out);it.video.push(ct)}),this._callbacks.onStatsCollected.callback(it)}}}class Gn{constructor(Me){this._id=Me.name&&Me.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Me,this._collector=new Pn(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?nn("Probe already started."):(It(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{It(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),It(this._moduleName,"Probe Stopped")):nn("Probe not running, Please start first.")}set onStatsCollected(Me){Me?this._collector.registerCallback("onStatsCollected",Me):this._collector.unregisterCallback("onStatsCollected")}}const sn={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class er{constructor(Me){var it;this._config={defaultConfig:sn,...Me},this._probes=[],it=this._config.verbose||!1,Nr.setLevel(it?Nr.levels.TRACE:Nr.levels.INFO),It("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Me,it){if(!Me)throw new Error("undefined monitoring object");const je={monitoringObject:Me,...it,...this._config},ct=new Gn(je);return this._probes.push(ct),ct}removeExistingProbe(Me){if(!Me)throw new Error("undefined probe");Me.stop(),this._probes=this._probes.filter(it=>Me.id!==it.id)}getProbe(Me){for(let it of this.probes)if(it.id==Me)return it}startAllProbes(){this._probes.forEach((Me,it)=>{Me.start()})}stopAllProbes(){this._probes.forEach(Me=>Me.stop())}}})(),_})()},5458:(p,u,i)=>{i.d(u,{A:()=>f});var g=i(3145),_=i(7800);function f(o){return function(w){if(Array.isArray(w))return(0,g.A)(w)}(o)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(o)||(0,_.A)(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(p,u,i){var g,_,f,o,w,l,y,d;p.exports=(d=i(9021),_=(g=d).lib,f=_.WordArray,o=_.Hasher,w=g.algo,l=[],y=w.SHA1=o.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,S){for(var x=this._hash.words,k=x[0],I=x[1],T=x[2],C=x[3],E=x[4],c=0;c<80;c++){if(c<16)l[c]=0|m[S+c];else{var b=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=b<<1|b>>>31}var R=(k<<5|k>>>27)+E+l[c];R+=c<20?1518500249+(I&T|~I&C):c<40?1859775393+(I^T^C):c<60?(I&T|I&C|T&C)-1894007588:(I^T^C)-899497514,E=C,C=T,T=I<<30|I>>>2,I=k,k=R}x[0]=x[0]+k|0,x[1]=x[1]+I|0,x[2]=x[2]+T|0,x[3]=x[3]+C|0,x[4]=x[4]+E|0},_doFinalize:function(){var m=this._data,S=m.words,x=8*this._nDataBytes,k=8*m.sigBytes;return S[k>>>5]|=128<<24-k%32,S[14+(k+64>>>9<<4)]=Math.floor(x/4294967296),S[15+(k+64>>>9<<4)]=x,m.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m}}),g.SHA1=o._createHelper(y),g.HmacSHA1=o._createHmacHelper(y),d.SHA1)},5501:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(3662);function _(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(o&&o.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),o&&(0,g.A)(f,o)}},5503:function(p,u,i){var g;p.exports=(g=i(9021),function(){var _=g,f=_.lib.WordArray,o=_.enc;function w(l){return l<<8&4278255360|l>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(l){for(var y=l.words,d=l.sigBytes,m=[],S=0;S<d;S+=2){var x=y[S>>>2]>>>16-S%4*8&65535;m.push(String.fromCharCode(x))}return m.join("")},parse:function(l){for(var y=l.length,d=[],m=0;m<y;m++)d[m>>>1]|=l.charCodeAt(m)<<16-m%2*16;return f.create(d,2*y)}},o.Utf16LE={stringify:function(l){for(var y=l.words,d=l.sigBytes,m=[],S=0;S<d;S+=2){var x=w(y[S>>>2]>>>16-S%4*8&65535);m.push(String.fromCharCode(x))}return m.join("")},parse:function(l){for(var y=l.length,d=[],m=0;m<y;m++)d[m>>>1]|=w(l.charCodeAt(m)<<16-m%2*16);return f.create(d,2*y)}}}(),g.enc.Utf16)},5535:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Chrome70=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(5938),y=i(521),d=i(1305),m=i(3303),S=new _.Logger("Chrome70"),x={OS:1024,MIS:1024};class k extends y.HandlerInterface{constructor(){super();ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new k}get name(){return"Chrome70"}close(){if(S.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{C.addTransceiver("audio"),C.addTransceiver("video");const E=await C.createOffer();try{C.close()}catch{}const c=g.parse(E.sdp);return w.extractRtpCapabilities({sdpObject:c})}catch(E){try{C.close()}catch{}throw E}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R,iceServers:P,iceTransportPolicy:O,additionalSettings:N,proprietaryConstraints:M,extendedRtpCapabilities:L}){S.debug("run()"),this._direction=C,this._remoteSdp=new d.RemoteSdp({iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",L),video:o.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",L),video:o.getSendingRemoteRtpParameters("video",L)},b.role&&b.role!=="auto"&&(this._forcedLocalDtlsRole=b.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",A=>{this.emit("@icecandidateerror",A)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){S.debug("updateIceServers()");const E=this._pc.getConfiguration();E.iceServers=C,this._pc.setConfiguration(E)}async restartIce(C){if(S.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const E=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",E),await this._pc.setLocalDescription(E);const c={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:E,codecOptions:c,codec:b}){this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",C.kind,C.id);const R=f.clone(this._sendingRtpParametersByKind[C.kind]);R.codecs=o.reduceCodecs(R.codecs,b);const P=f.clone(this._sendingRemoteRtpParametersByKind[C.kind]);P.codecs=o.reduceCodecs(P.codecs,b);const O=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(C,{direction:"sendonly",streams:[this._sendStream]});let M,L=await this._pc.createOffer(),A=g.parse(L.sdp);A.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),E&&E.length>1&&(S.debug("send() | enabling legacy simulcast"),A=g.parse(L.sdp),M=A.media[O.idx],l.addLegacySimulcast({offerMediaObject:M,numStreams:E.length}),L={type:"offer",sdp:g.write(A)});let j=!1;const G=(0,m.parse)((E??[{}])[0].scalabilityMode);if(E&&E.length===1&&G.spatialLayers>1&&R.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(S.debug("send() | enabling legacy simulcast for VP9 SVC"),j=!0,A=g.parse(L.sdp),M=A.media[O.idx],l.addLegacySimulcast({offerMediaObject:M,numStreams:G.spatialLayers}),L={type:"offer",sdp:g.write(A)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),E){S.debug("send() | applying given encodings");const J=N.sender.getParameters();for(let ae=0;ae<(J.encodings??[]).length;++ae){const be=J.encodings[ae],xe=E[ae];if(!xe)break;J.encodings[ae]=Object.assign(be,xe)}await N.sender.setParameters(J)}const de=N.mid;if(R.mid=de,A=g.parse(this._pc.localDescription.sdp),M=A.media[O.idx],R.rtcp.cname=w.getCname({offerMediaObject:M}),R.encodings=l.getRtpEncodings({offerMediaObject:M}),E)for(let J=0;J<R.encodings.length;++J)E[J]&&Object.assign(R.encodings[J],E[J]);if(j&&(R.encodings=[R.encodings[0]]),R.encodings.length>1&&(R.codecs[0].mimeType.toLowerCase()==="video/vp8"||R.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const J of R.encodings)J.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:M,reuseMid:O.reuseMid,offerRtpParameters:R,answerRtpParameters:P,codecOptions:c});const te={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",te),await this._pc.setRemoteDescription(te),this._mapMidTransceiver.set(de,N),{localId:de,rtpParameters:R,rtpSender:N.sender}}async stopSending(C){this.assertSendDirection(),S.debug("stopSending() [localId:%s]",C);const E=this._mapMidTransceiver.get(C);if(!E)throw new Error("associated RTCRtpTransceiver not found");if(E.sender.replaceTrack(null),this._pc.removeTrack(E.sender),this._remoteSdp.closeMediaSection(E.mid))try{E.stop()}catch{}const c=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const b={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.delete(C)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,E){this.assertSendDirection(),E?S.debug("replaceTrack() [localId:%s, track.id:%s]",C,E.id):S.debug("replaceTrack() [localId:%s, no track]",C);const c=this._mapMidTransceiver.get(C);if(!c)throw new Error("associated RTCRtpTransceiver not found");await c.sender.replaceTrack(E)}async setMaxSpatialLayer(C,E){this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,E);const c=this._mapMidTransceiver.get(C);if(!c)throw new Error("associated RTCRtpTransceiver not found");const b=c.sender.getParameters();b.encodings.forEach((O,N)=>{O.active=N<=E}),await c.sender.setParameters(b),this._remoteSdp.muxMediaSectionSimulcast(C,b.encodings);const R=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(C,E){this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,E);const c=this._mapMidTransceiver.get(C);if(!c)throw new Error("associated RTCRtpTransceiver not found");const b=c.sender.getParameters();b.encodings.forEach((O,N)=>{b.encodings[N]={...O,...E}}),await c.sender.setParameters(b),this._remoteSdp.muxMediaSectionSimulcast(C,b.encodings);const R=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(C){this.assertSendDirection();const E=this._mapMidTransceiver.get(C);if(!E)throw new Error("associated RTCRtpTransceiver not found");return E.sender.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:E,maxRetransmits:c,label:b,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:E,maxRetransmitTime:E,maxRetransmits:c,protocol:R};S.debug("sendDataChannel() [options:%o]",P);const O=this._pc.createDataChannel(b,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),M=g.parse(N.sdp),L=M.media.find(j=>j.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const E=[],c=new Map;for(const O of C){const{trackId:N,kind:M,rtpParameters:L,streamId:A}=O;S.debug("receive() [trackId:%s, kind:%s]",N,M);const j=L.mid??String(this._mapMidTransceiver.size);c.set(N,j),this._remoteSdp.receive({mid:j,kind:M,offerRtpParameters:L,streamId:A??L.rtcp.cname,trackId:N})}const b={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);let R=await this._pc.createAnswer();const P=g.parse(R.sdp);for(const O of C){const{trackId:N,rtpParameters:M}=O,L=c.get(N),A=P.media.find(j=>String(j.mid)===L);w.applyCodecParameters({offerRtpParameters:M,answerMediaObject:A})}R={type:"answer",sdp:g.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const O of C){const{trackId:N}=O,M=c.get(N),L=this._pc.getTransceivers().find(A=>A.mid===M);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,L),E.push({localId:M,track:L.receiver.track,rtpReceiver:L.receiver})}return E}async stopReceiving(C){this.assertRecvDirection();for(const b of C){S.debug("stopReceiving() [localId:%s]",b);const R=this._mapMidTransceiver.get(b);if(!R)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(R.mid)}const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const b of C)this._mapMidTransceiver.delete(b)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){this.assertRecvDirection();const E=this._mapMidTransceiver.get(C);if(!E)throw new Error("associated RTCRtpTransceiver not found");return E.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:C,label:E,protocol:c}){this.assertRecvDirection();const{streamId:b,ordered:R,maxPacketLifeTime:P,maxRetransmits:O}=C,N={negotiated:!0,id:b,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:O,protocol:c};S.debug("receiveDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(E,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const A=await this._pc.createAnswer();if(!this._transportReady){const j=g.parse(A.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setLocalDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:C,localSdpObject:E}){E||(E=g.parse(this._pc.localDescription.sdp));const c=w.extractDtlsParameters({sdpObject:E});c.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((b,R)=>{this.safeEmit("@connect",{dtlsParameters:c},b,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Chrome70=k},5544:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.extractRtpCapabilities=function({sdpObject:_}){const f=new Map,o=[];let w=!1,l=!1;for(const y of _.media){const d=y.type;switch(d){case"audio":if(w)continue;w=!0;break;case"video":if(l)continue;l=!0;break;default:continue}for(const m of y.rtp){const S={kind:d,mimeType:`${d}/${m.codec}`,preferredPayloadType:m.payload,clockRate:m.rate,channels:m.encoding,parameters:{},rtcpFeedback:[]};f.set(S.preferredPayloadType,S)}for(const m of y.fmtp??[]){const S=g.parseParams(m.config),x=f.get(m.payload);x&&(S!=null&&S.hasOwnProperty("profile-level-id")&&(S["profile-level-id"]=String(S["profile-level-id"])),x.parameters=S)}for(const m of y.rtcpFb??[]){const S={type:m.type,parameter:m.subtype};if(S.parameter||delete S.parameter,m.payload!=="*"){const x=f.get(m.payload);if(!x)continue;x.rtcpFeedback.push(S)}else for(const x of f.values())x.kind!==d||/.+\/rtx$/i.test(x.mimeType)||x.rtcpFeedback.push(S)}for(const m of y.ext??[]){if(m["encrypt-uri"])continue;const S={kind:d,uri:m.uri,preferredId:m.value};o.push(S)}}return{codecs:Array.from(f.values()),headerExtensions:o}},u.extractDtlsParameters=function({sdpObject:_}){let f,o=_.setup,w=_.fingerprint;if(!o||!w){const l=(_.media??[]).find(y=>y.port!==0);l&&(o??(o=l.setup),w??(w=l.fingerprint))}if(!o)throw new Error("no a=setup found at SDP session or media level");if(!w)throw new Error("no a=fingerprint found at SDP session or media level");switch(o){case"active":f="client";break;case"passive":f="server";break;case"actpass":f="auto"}return{role:f,fingerprints:[{algorithm:w.type,value:w.hash}]}},u.getCname=function({offerMediaObject:_}){const f=(_.ssrcs??[]).find(o=>o.attribute==="cname");return f?f.value:""},u.applyCodecParameters=function({offerRtpParameters:_,answerMediaObject:f}){for(const o of _.codecs){const w=o.mimeType.toLowerCase();if(w!=="audio/opus"||!(f.rtp??[]).find(d=>d.payload===o.payloadType))continue;f.fmtp=f.fmtp??[];let l=f.fmtp.find(d=>d.payload===o.payloadType);l||(l={payload:o.payloadType,config:""},f.fmtp.push(l));const y=g.parseParams(l.config);switch(w){case"audio/opus":{const d=o.parameters["sprop-stereo"];d!==void 0&&(y.stereo=Number(d)?1:0);break}}l.config="";for(const d of Object.keys(y))l.config&&(l.config+=";"),l.config+=`${d}=${y[d]}`}};const g=i(7363)},5601:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Transport=void 0;const g=i(8876),_=i(2994),f=i(3953),o=i(4893),w=i(1765),l=i(8046),y=i(9792),d=i(3518),m=i(7504),S=i(9166),x=new _.Logger("Transport");class k{constructor(C){ye(this,"consumerOptions");ye(this,"promise");ye(this,"resolve");ye(this,"reject");this.consumerOptions=C,this.promise=new Promise((E,c)=>{this.resolve=E,this.reject=c})}}class I extends f.EnhancedEventEmitter{constructor({direction:E,id:c,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:L,proprietaryConstraints:A,appData:j,handlerFactory:G,extendedRtpCapabilities:de,canProduceByKind:te}){super();ye(this,"_id");ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_extendedRtpCapabilities");ye(this,"_canProduceByKind");ye(this,"_maxSctpMessageSize");ye(this,"_handler");ye(this,"_iceGatheringState","new");ye(this,"_connectionState","new");ye(this,"_appData");ye(this,"_producers",new Map);ye(this,"_consumers",new Map);ye(this,"_dataProducers",new Map);ye(this,"_dataConsumers",new Map);ye(this,"_probatorConsumerCreated",!1);ye(this,"_awaitQueue",new g.AwaitQueue);ye(this,"_pendingConsumerTasks",[]);ye(this,"_consumerCreationInProgress",!1);ye(this,"_pendingPauseConsumers",new Map);ye(this,"_consumerPauseInProgress",!1);ye(this,"_pendingResumeConsumers",new Map);ye(this,"_consumerResumeInProgress",!1);ye(this,"_pendingCloseConsumers",new Map);ye(this,"_consumerCloseInProgress",!1);ye(this,"_observer",new f.EnhancedEventEmitter);x.debug("constructor() [id:%s, direction:%s]",c,E),this._id=c,this._direction=E,this._extendedRtpCapabilities=de,this._canProduceByKind=te,this._maxSctpMessageSize=O?O.maxMessageSize:null;const J=w.clone(L)??{};delete J.iceServers,delete J.iceTransportPolicy,delete J.bundlePolicy,delete J.rtcpMuxPolicy,delete J.sdpSemantics,this._handler=G(),this._handler.run({direction:E,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:J,proprietaryConstraints:A,extendedRtpCapabilities:de}),this._appData=j??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(E){this._appData=E}get observer(){return this._observer}close(){if(!this._closed){x.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const E of this._producers.values())E.transportClosed();this._producers.clear();for(const E of this._consumers.values())E.transportClosed();this._consumers.clear();for(const E of this._dataProducers.values())E.transportClosed();this._dataProducers.clear();for(const E of this._dataConsumers.values())E.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new o.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:E}){if(x.debug("restartIce()"),this._closed)throw new o.InvalidStateError("closed");if(!E)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(E),"transport.restartIce()")}async updateIceServers({iceServers:E}={}){if(x.debug("updateIceServers()"),this._closed)throw new o.InvalidStateError("closed");if(!Array.isArray(E))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(E),"transport.updateIceServers()")}async produce({track:E,encodings:c,codecOptions:b,codec:R,stopTracks:P=!0,disableTrackOnPause:O=!0,zeroRtpOnPause:N=!1,onRtpSender:M,appData:L={}}={}){if(x.debug("produce() [track:%o]",E),this._closed)throw new o.InvalidStateError("closed");if(!E)throw new TypeError("missing track");if(this._direction!=="send")throw new o.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[E.kind])throw new o.UnsupportedError(`cannot produce ${E.kind}`);if(E.readyState==="ended")throw new o.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let A;if(c&&!Array.isArray(c))throw TypeError("encodings must be an array");c&&c.length===0?A=void 0:c&&(A=c.map(te=>{const J={active:!0};return te.active===!1&&(J.active=!1),typeof te.dtx=="boolean"&&(J.dtx=te.dtx),typeof te.scalabilityMode=="string"&&(J.scalabilityMode=te.scalabilityMode),typeof te.scaleResolutionDownBy=="number"&&(J.scaleResolutionDownBy=te.scaleResolutionDownBy),typeof te.maxBitrate=="number"&&(J.maxBitrate=te.maxBitrate),typeof te.maxFramerate=="number"&&(J.maxFramerate=te.maxFramerate),typeof te.adaptivePtime=="boolean"&&(J.adaptivePtime=te.adaptivePtime),typeof te.priority=="string"&&(J.priority=te.priority),typeof te.networkPriority=="string"&&(J.networkPriority=te.networkPriority),J}));const{localId:j,rtpParameters:G,rtpSender:de}=await this._handler.send({track:E,encodings:A,codecOptions:b,codec:R,onRtpSender:M});try{l.validateRtpParameters(G);const{id:te}=await new Promise((ae,be)=>{this.safeEmit("produce",{kind:E.kind,rtpParameters:G,appData:L},ae,be)}),J=new y.Producer({id:te,localId:j,rtpSender:de,track:E,rtpParameters:G,stopTracks:P,disableTrackOnPause:O,zeroRtpOnPause:N,appData:L});return this._producers.set(J.id,J),this.handleProducer(J),this._observer.safeEmit("newproducer",J),J}catch(te){throw this._handler.stopSending(j).catch(()=>{}),te}},"transport.produce()").catch(A=>{if(P)try{E.stop()}catch{}throw A})}async consume({id:E,producerId:c,kind:b,rtpParameters:R,streamId:P,onRtpReceiver:O,appData:N={}}){if(x.debug("consume()"),this._closed)throw new o.InvalidStateError("closed");if(this._direction!=="recv")throw new o.UnsupportedError("not a receiving Transport");if(typeof E!="string")throw new TypeError("missing id");if(typeof c!="string")throw new TypeError("missing producerId");if(b!=="audio"&&b!=="video")throw new TypeError(`invalid kind '${b}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object");const M=w.clone(R);if(!l.canReceive(M,this._extendedRtpCapabilities))throw new o.UnsupportedError("cannot consume this Producer");const L=new k({id:E,producerId:c,kind:b,rtpParameters:M,streamId:P,onRtpReceiver:O,appData:N});return this._pendingConsumerTasks.push(L),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),L.promise}async produceData({ordered:E=!0,maxPacketLifeTime:c,maxRetransmits:b,label:R="",protocol:P="",appData:O={}}={}){if(x.debug("produceData()"),this._closed)throw new o.InvalidStateError("closed");if(this._direction!=="send")throw new o.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new o.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(O&&typeof O!="object")throw new TypeError("if given, appData must be an object");return(c||b)&&(E=!1),this._awaitQueue.push(async()=>{const{dataChannel:N,sctpStreamParameters:M}=await this._handler.sendDataChannel({ordered:E,maxPacketLifeTime:c,maxRetransmits:b,label:R,protocol:P});l.validateSctpStreamParameters(M);const{id:L}=await new Promise((j,G)=>{this.safeEmit("producedata",{sctpStreamParameters:M,label:R,protocol:P,appData:O},j,G)}),A=new m.DataProducer({id:L,dataChannel:N,sctpStreamParameters:M,appData:O});return this._dataProducers.set(A.id,A),this.handleDataProducer(A),this._observer.safeEmit("newdataproducer",A),A},"transport.produceData()")}async consumeData({id:E,dataProducerId:c,sctpStreamParameters:b,label:R="",protocol:P="",appData:O={}}){if(x.debug("consumeData()"),this._closed)throw new o.InvalidStateError("closed");if(this._direction!=="recv")throw new o.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new o.UnsupportedError("SCTP not enabled by remote Transport");if(typeof E!="string")throw new TypeError("missing id");if(typeof c!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(O&&typeof O!="object")throw new TypeError("if given, appData must be an object");const N=w.clone(b);return l.validateSctpStreamParameters(N),this._awaitQueue.push(async()=>{const{dataChannel:M}=await this._handler.receiveDataChannel({sctpStreamParameters:N,label:R,protocol:P}),L=new S.DataConsumer({id:E,dataProducerId:c,dataChannel:M,sctpStreamParameters:N,appData:O});return this._dataConsumers.set(L.id,L),this.handleDataConsumer(L),this._observer.safeEmit("newdataconsumer",L),L},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void x.debug("createPendingConsumers() | there is no Consumer to be created");const E=[...this._pendingConsumerTasks];let c;this._pendingConsumerTasks=[];const b=[];for(const R of E){const{id:P,kind:O,rtpParameters:N,streamId:M,onRtpReceiver:L}=R.consumerOptions;b.push({trackId:P,kind:O,rtpParameters:N,streamId:M,onRtpReceiver:L})}try{const R=await this._handler.receive(b);for(let P=0;P<R.length;++P){const O=E[P],N=R[P],{id:M,producerId:L,kind:A,rtpParameters:j,appData:G}=O.consumerOptions,{localId:de,rtpReceiver:te,track:J}=N,ae=new d.Consumer({id:M,localId:de,producerId:L,rtpReceiver:te,track:J,rtpParameters:j,appData:G});this._consumers.set(ae.id,ae),this.handleConsumer(ae),this._probatorConsumerCreated||c||A!=="video"||(c=ae),this._observer.safeEmit("newconsumer",ae),O.resolve(ae)}}catch(R){for(const P of E)P.reject(R)}if(c)try{const R=l.generateProbatorRtpParameters(c.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:R}]),x.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(R){x.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",R)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void x.debug("pausePendingConsumers() | there is no Consumer to be paused");const E=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const c=E.map(b=>b.localId);await this._handler.pauseReceiving(c)}catch(c){x.error("pausePendingConsumers() | failed to pause Consumers:",c)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void x.debug("resumePendingConsumers() | there is no Consumer to be resumed");const E=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const c=E.map(b=>b.localId);await this._handler.resumeReceiving(c)}catch(c){x.error("resumePendingConsumers() | failed to resume Consumers:",c)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void x.debug("closePendingConsumers() | there is no Consumer to be closed");const E=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(E.map(c=>c.localId))}catch(c){x.error("closePendingConsumers() | failed to close Consumers:",c)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const E=this._handler;E.on("@connect",({dtlsParameters:c},b,R)=>{this._closed?R(new o.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:c},b,R)}),E.on("@icegatheringstatechange",c=>{c!==this._iceGatheringState&&(x.debug("ICE gathering state changed to %s",c),this._iceGatheringState=c,this._closed||this.safeEmit("icegatheringstatechange",c))}),E.on("@icecandidateerror",c=>{x.warn(`ICE candidate error [url:${c.url}, localAddress:${c.address}, localPort:${c.port}]: ${c.errorCode} "${c.errorText}"`),this.safeEmit("icecandidateerror",c)}),E.on("@connectionstatechange",c=>{c!==this._connectionState&&(x.debug("connection state changed to %s",c),this._connectionState=c,this._closed||this.safeEmit("connectionstatechange",c))})}handleProducer(E){E.on("@close",()=>{this._producers.delete(E.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(E.localId),"producer @close event").catch(c=>x.warn("producer.close() failed:%o",c))}),E.on("@pause",(c,b)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(E.localId),"producer @pause event").then(c).catch(b)}),E.on("@resume",(c,b)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(E.localId),"producer @resume event").then(c).catch(b)}),E.on("@replacetrack",(c,b,R)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(E.localId,c),"producer @replacetrack event").then(b).catch(R)}),E.on("@setmaxspatiallayer",(c,b,R)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(E.localId,c),"producer @setmaxspatiallayer event").then(b).catch(R)}),E.on("@setrtpencodingparameters",(c,b,R)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(E.localId,c),"producer @setrtpencodingparameters event").then(b).catch(R)}),E.on("@getstats",(c,b)=>{if(this._closed)return b(new o.InvalidStateError("closed"));this._handler.getSenderStats(E.localId).then(c).catch(b)})}handleConsumer(E){E.on("@close",()=>{this._consumers.delete(E.id),this._pendingPauseConsumers.delete(E.id),this._pendingResumeConsumers.delete(E.id),this._closed||(this._pendingCloseConsumers.set(E.id,E),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),E.on("@pause",()=>{this._pendingResumeConsumers.has(E.id)&&this._pendingResumeConsumers.delete(E.id),this._pendingPauseConsumers.set(E.id,E),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),E.on("@resume",()=>{this._pendingPauseConsumers.has(E.id)&&this._pendingPauseConsumers.delete(E.id),this._pendingResumeConsumers.set(E.id,E),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),E.on("@getstats",(c,b)=>{if(this._closed)return b(new o.InvalidStateError("closed"));this._handler.getReceiverStats(E.localId).then(c).catch(b)})}handleDataProducer(E){E.on("@close",()=>{this._dataProducers.delete(E.id)})}handleDataConsumer(E){E.on("@close",()=>{this._dataConsumers.delete(E.id)})}}u.Transport=I},5602:p=>{var u=p.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(i){return i.encoding?"rtpmap:%d %s/%s/%s":i.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(i){return i.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(i){return i.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(i){return"extmap:%d"+(i.direction?"/%s":"%v")+(i["encrypt-uri"]?" %s":"%v")+" %s"+(i.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(i){return i.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(i){var g="candidate:%s %d %s %d %s %d typ %s";return g+=i.raddr!=null?" raddr %s rport %d":"%v%v",g+=i.tcptype!=null?" tcptype %s":"%v",i.generation!=null&&(g+=" generation %d"),g+=i["network-id"]!=null?" network-id %d":"%v",g+=i["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(i){var g="ssrc:%d";return i.attribute!=null&&(g+=" %s",i.value!=null&&(g+=":%s")),g}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(i){return i.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(i){return i.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(i){return"imageattr:%s %s %s"+(i.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(i){return"simulcast:%s %s"+(i.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(i){return"ts-refclk:%s"+(i.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(i){var g="mediaclk:";return g+=i.id!=null?"id=%s %s":"%v%s",g+=i.mediaClockValue!=null?"=%s":"",g+=i.rateNumerator!=null?" rate=%s":"",g+=i.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(u).forEach(function(i){u[i].forEach(function(g){g.reg||(g.reg=/(.*)/),g.format||(g.format="%s")})})},5765:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Safari12=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(5938),y=i(4256),d=i(4893),m=i(521),S=i(1305),x=i(3303),k=new _.Logger("Safari12"),I={OS:1024,MIS:1024};class T extends m.HandlerInterface{constructor(){super();ye(this,"_closed",!1);ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_mapMidTransceiver",new Map);ye(this,"_sendStream",new MediaStream);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new T}get name(){return"Safari12"}close(){if(k.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const b=await c.createOffer();try{c.close()}catch{}const R=g.parse(b.sdp),P=w.extractRtpCapabilities({sdpObject:R});return y.addNackSupportForOpus(P),P}catch(b){try{c.close()}catch{}throw b}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O,iceServers:N,iceTransportPolicy:M,additionalSettings:L,proprietaryConstraints:A,extendedRtpCapabilities:j}){this.assertNotClosed(),k.debug("run()"),this._direction=c,this._remoteSdp=new S.RemoteSdp({iceParameters:b,iceCandidates:R,dtlsParameters:P,sctpParameters:O}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",j),video:o.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",j),video:o.getSendingRemoteRtpParameters("video",j)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},A),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),k.debug("updateIceServers()");const b=this._pc.getConfiguration();b.iceServers=c,this._pc.setConfiguration(b)}async restartIce(c){if(this.assertNotClosed(),k.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const b=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const R={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:b,codecOptions:R,codec:P,onRtpSender:O}){this.assertNotClosed(),this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",c.kind,c.id);const N=f.clone(this._sendingRtpParametersByKind[c.kind]);N.codecs=o.reduceCodecs(N.codecs,P);const M=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);M.codecs=o.reduceCodecs(M.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),A=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream]});O&&O(A.sender);let j,G=await this._pc.createOffer(),de=g.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});const te=(0,x.parse)((b??[{}])[0].scalabilityMode);b&&b.length>1&&(k.debug("send() | enabling legacy simulcast"),de=g.parse(G.sdp),j=de.media[L.idx],l.addLegacySimulcast({offerMediaObject:j,numStreams:b.length}),G={type:"offer",sdp:g.write(de)}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);const J=A.mid;if(N.mid=J,de=g.parse(this._pc.localDescription.sdp),j=de.media[L.idx],N.rtcp.cname=w.getCname({offerMediaObject:j}),N.encodings=l.getRtpEncodings({offerMediaObject:j}),b)for(let be=0;be<N.encodings.length;++be)b[be]&&Object.assign(N.encodings[be],b[be]);if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const be of N.encodings)be.scalabilityMode?be.scalabilityMode=`L1T${te.temporalLayers}`:be.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:j,reuseMid:L.reuseMid,offerRtpParameters:N,answerRtpParameters:M,codecOptions:R});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(J,A),{localId:J,rtpParameters:N,rtpSender:A.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;k.debug("stopSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");if(b.sender.replaceTrack(null),this._pc.removeTrack(b.sender),this._remoteSdp.closeMediaSection(b.mid))try{b.stop()}catch{}const R=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("pauseSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="inactive",this._remoteSdp.pauseMediaSection(c);const R=await this._pc.createOffer();k.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),k.debug("resumeSending() [localId:%s]",c);const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");b.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const R=await this._pc.createOffer();k.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(c,b){this.assertNotClosed(),this.assertSendDirection(),b?k.debug("replaceTrack() [localId:%s, track.id:%s]",c,b.id):k.debug("replaceTrack() [localId:%s, no track]",c);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(b)}async setMaxSpatialLayer(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{M.active=L<=b}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,b){this.assertNotClosed(),this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,b);const R=this._mapMidTransceiver.get(c);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((M,L)=>{P.encodings[L]={...M,...b}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(c,P.encodings);const O=await this._pc.createOffer();k.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:b,maxRetransmits:R,label:P,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:b,maxRetransmits:R,protocol:O};k.debug("sendDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(P,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),A=g.parse(L.sdp),j=A.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const G={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const b=[],R=new Map;for(const M of c){const{trackId:L,kind:A,rtpParameters:j,streamId:G}=M;k.debug("receive() [trackId:%s, kind:%s]",L,A);const de=j.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:A,offerRtpParameters:j,streamId:G??j.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const M of c){const{trackId:L,onRtpReceiver:A}=M;if(A){const j=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===j);if(!G)throw new Error("transceiver not found");A(G.receiver)}}let O=await this._pc.createAnswer();const N=g.parse(O.sdp);for(const M of c){const{trackId:L,rtpParameters:A}=M,j=R.get(L),G=N.media.find(de=>String(de.mid)===j);w.applyCodecParameters({offerRtpParameters:A,answerMediaObject:G})}O={type:"answer",sdp:g.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const M of c){const{trackId:L}=M,A=R.get(L),j=this._pc.getTransceivers().find(G=>G.mid===A);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(A,j),b.push({localId:A,track:j.receiver.track,rtpReceiver:j.receiver})}return b}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const P of c){k.debug("stopReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of c)this._mapMidTransceiver.delete(P)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("pauseReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const P of c){k.debug("resumeReceiving() [localId:%s]",P);const O=this._mapMidTransceiver.get(P);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const b={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const R=await this._pc.createAnswer();k.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const b=this._mapMidTransceiver.get(c);if(!b)throw new Error("associated RTCRtpTransceiver not found");return b.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:b,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M}=c,L={negotiated:!0,id:P,ordered:O,maxPacketLifeTime:N,maxRetransmits:M,protocol:R};k.debug("receiveDataChannel() [options:%o]",L);const A=this._pc.createDataChannel(b,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const G=await this._pc.createAnswer();if(!this._transportReady){const de=g.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:A}}async setupTransport({localDtlsRole:c,localSdpObject:b}){b||(b=g.parse(this._pc.localDescription.sdp));const R=w.extractDtlsParameters({sdpObject:b});R.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((P,O)=>{this.safeEmit("@connect",{dtlsParameters:R},P,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Safari12=T},5862:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FakeEventTarget=void 0,u.FakeEventTarget=class{constructor(){ye(this,"listeners",{})}addEventListener(i,g,_={}){var f;g&&((f=this.listeners)[i]??(f[i]=[]),this.listeners[i].push({callback:g,once:_.once===!0}))}removeEventListener(i,g){this.listeners[i]&&(this.listeners[i]=this.listeners[i].filter(_=>_.callback!==g))}dispatchEvent(i){if(!i||typeof i.type!="string")throw new Error("invalid event object");const g=this.listeners[i.type];if(!g)return!0;for(const _ of[...g]){try{_.callback.call(this,i)}catch(f){setTimeout(()=>{throw f},0)}_.once&&this.removeEventListener(i.type,_.callback)}return!i.defaultPrevented}}},5938:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getRtpEncodings=function({offerMediaObject:i}){const g=new Set;for(const o of i.ssrcs??[]){const w=o.id;g.add(w)}if(g.size===0)throw new Error("no a=ssrc lines found");const _=new Map;for(const o of i.ssrcGroups??[]){if(o.semantics!=="FID")continue;let[w,l]=o.ssrcs.split(/\s+/);w=Number(w),l=Number(l),g.has(w)&&(g.delete(w),g.delete(l),_.set(w,l))}for(const o of g)_.set(o,null);const f=[];for(const[o,w]of _){const l={ssrc:o};w&&(l.rtx={ssrc:w}),f.push(l)}return f},u.addLegacySimulcast=function({offerMediaObject:i,numStreams:g}){if(g<=1)throw new TypeError("numStreams must be greater than 1");const _=(i.ssrcs??[]).find(x=>x.attribute==="msid");if(!_)throw new Error("a=ssrc line with msid information not found");const[f,o]=_.value.split(" "),w=Number(_.id);let l;(i.ssrcGroups??[]).some(x=>{if(x.semantics!=="FID")return!1;const k=x.ssrcs.split(/\s+/);return Number(k[0])===w&&(l=Number(k[1]),!0)});const y=i.ssrcs.find(x=>x.attribute==="cname");if(!y)throw new Error("a=ssrc line with cname information not found");const d=y.value,m=[],S=[];for(let x=0;x<g;++x)m.push(w+x),l&&S.push(l+x);i.ssrcGroups=[],i.ssrcs=[],i.ssrcGroups.push({semantics:"SIM",ssrcs:m.join(" ")});for(const x of m)i.ssrcs.push({id:x,attribute:"cname",value:d}),i.ssrcs.push({id:x,attribute:"msid",value:`${f} ${o}`});for(let x=0;x<S.length;++x){const k=m[x],I=S[x];i.ssrcs.push({id:I,attribute:"cname",value:d}),i.ssrcs.push({id:I,attribute:"msid",value:`${f} ${o}`}),i.ssrcGroups.push({semantics:"FID",ssrcs:`${k} ${I}`})}}},5953:function(p,u,i){var g;p.exports=(g=i(9021),i(3240),function(_){var f=g,o=f.lib,w=o.WordArray,l=o.Hasher,y=f.x64.Word,d=f.algo,m=[],S=[],x=[];(function(){for(var T=1,C=0,E=0;E<24;E++){m[T+5*C]=(E+1)*(E+2)/2%64;var c=(2*T+3*C)%5;T=C%5,C=c}for(T=0;T<5;T++)for(C=0;C<5;C++)S[T+5*C]=C+(2*T+3*C)%5*5;for(var b=1,R=0;R<24;R++){for(var P=0,O=0,N=0;N<7;N++){if(1&b){var M=(1<<N)-1;M<32?O^=1<<M:P^=1<<M-32}128&b?b=b<<1^113:b<<=1}x[R]=y.create(P,O)}})();var k=[];(function(){for(var T=0;T<25;T++)k[T]=y.create()})();var I=d.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],C=0;C<25;C++)T[C]=new y.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,C){for(var E=this._state,c=this.blockSize/2,b=0;b<c;b++){var R=T[C+2*b],P=T[C+2*b+1];R=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),P=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),(Ee=E[b]).high^=P,Ee.low^=R}for(var O=0;O<24;O++){for(var N=0;N<5;N++){for(var M=0,L=0,A=0;A<5;A++)M^=(Ee=E[N+5*A]).high,L^=Ee.low;var j=k[N];j.high=M,j.low=L}for(N=0;N<5;N++){var G=k[(N+4)%5],de=k[(N+1)%5],te=de.high,J=de.low;for(M=G.high^(te<<1|J>>>31),L=G.low^(J<<1|te>>>31),A=0;A<5;A++)(Ee=E[N+5*A]).high^=M,Ee.low^=L}for(var ae=1;ae<25;ae++){var be=(Ee=E[ae]).high,xe=Ee.low,se=m[ae];se<32?(M=be<<se|xe>>>32-se,L=xe<<se|be>>>32-se):(M=xe<<se-32|be>>>64-se,L=be<<se-32|xe>>>64-se);var ze=k[S[ae]];ze.high=M,ze.low=L}var Ie=k[0],Ne=E[0];for(Ie.high=Ne.high,Ie.low=Ne.low,N=0;N<5;N++)for(A=0;A<5;A++){var Ee=E[ae=N+5*A],Le=k[ae],dt=k[(N+1)%5+5*A],cr=k[(N+2)%5+5*A];Ee.high=Le.high^~dt.high&cr.high,Ee.low=Le.low^~dt.low&cr.low}Ee=E[0];var gr=x[O];Ee.high^=gr.high,Ee.low^=gr.low}},_doFinalize:function(){var T=this._data,C=T.words,E=(this._nDataBytes,8*T.sigBytes),c=32*this.blockSize;C[E>>>5]|=1<<24-E%32,C[(_.ceil((E+1)/c)*c>>>5)-1]|=128,T.sigBytes=4*C.length,this._process();for(var b=this._state,R=this.cfg.outputLength/8,P=R/8,O=[],N=0;N<P;N++){var M=b[N],L=M.high,A=M.low;L=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),A=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),O.push(A),O.push(L)}return new w.init(O,R)},clone:function(){for(var T=l.clone.call(this),C=T._state=this._state.slice(0),E=0;E<25;E++)C[E]=C[E].clone();return T}});f.SHA3=l._createHelper(I),f.HmacSHA3=l._createHmacHelper(I)}(Math),g.SHA3)},6004:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Device=void 0,u.detectDevice=O;const g=i(2109),_=i(2994),f=i(3953),o=i(4893),w=i(1765),l=i(8046),y=i(5601),d=i(2183),m=i(11),S=i(5535),x=i(8155),k=i(7402),I=i(2292),T=i(1767),C=i(5765),E=i(9676),c=i(8633),b=i(4039),R=i(9352),P=new _.Logger("Device");function O(N){var M,L,A,j;if(!N&&typeof navigator=="object"&&navigator.product==="ReactNative")return P.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void P.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(P.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(P.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(N||typeof navigator=="object"&&typeof navigator.userAgent=="string"){N??(N=navigator.userAgent);const G=new g.UAParser(N);P.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",N,G.getResult());const de=G.getBrowser(),te=(M=de.name)==null?void 0:M.toLowerCase(),J=parseInt(de.major??"0"),ae=G.getEngine(),be=(L=ae.name)==null?void 0:L.toLowerCase(),xe=G.getOS(),se=(A=xe.name)==null?void 0:A.toLowerCase(),ze=parseFloat(xe.version??"0"),Ie=G.getDevice(),Ne=(j=Ie.model)==null?void 0:j.toLowerCase(),Ee=se==="ios"||Ne==="ipad",Le=te&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(te),dt=te&&["firefox","mobile firefox","mobile focus"].includes(te),cr=te&&["safari","mobile safari"].includes(te),gr=te&&["edge"].includes(te);if((Le||gr)&&!Ee&&J>=111)return"Chrome111";if(Le&&!Ee&&J>=74||gr&&!Ee&&J>=88)return"Chrome74";if(Le&&!Ee&&J>=70)return"Chrome70";if(Le&&!Ee&&J>=67)return"Chrome67";if(Le&&!Ee&&J>=55)return"Chrome55";if(dt&&!Ee&&J>=120)return"Firefox120";if(dt&&!Ee&&J>=60)return"Firefox60";if(dt&&Ee&&ze>=14.3||cr&&J>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(cr&&J>=11)return"Safari11";if(gr&&!Ee&&J>=11&&J<=18)return"Edge11";if(be==="webkit"&&Ee&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(be==="blink"){const Ot=N.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Ot){const xr=Number(Ot[1]);return xr>=111?"Chrome111":xr>=74?"Chrome74":xr>=70?"Chrome70":xr>=67?"Chrome67":"Chrome55"}return"Chrome111"}P.warn("detectDevice() | browser not supported [name:%s, version:%s]",te,J)}else P.warn("detectDevice() | unknown device")}u.Device=class{constructor({handlerName:N,handlerFactory:M}={}){ye(this,"_handlerFactory");ye(this,"_handlerName");ye(this,"_loaded",!1);ye(this,"_extendedRtpCapabilities");ye(this,"_recvRtpCapabilities");ye(this,"_canProduceByKind");ye(this,"_sctpCapabilities");ye(this,"_observer",new f.EnhancedEventEmitter);if(P.debug("constructor()"),N&&M)throw new TypeError("just one of handlerName or handlerInterface can be given");if(M)this._handlerFactory=M;else{if(N)P.debug("constructor() | handler given: %s",N);else{if(!(N=O()))throw new o.UnsupportedError("device not supported");P.debug("constructor() | detected handler: %s",N)}switch(N){case"Chrome111":this._handlerFactory=d.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=m.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=S.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=x.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=k.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=I.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=T.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=C.Safari12.createFactory();break;case"Safari11":this._handlerFactory=E.Safari11.createFactory();break;case"Edge11":this._handlerFactory=c.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=b.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=R.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${N}"`)}}const L=this._handlerFactory();this._handlerName=L.name,L.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new o.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new o.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:N}){let M;P.debug("load() [routerRtpCapabilities:%o]",N);try{if(this._loaded)throw new o.InvalidStateError("already loaded");const L=w.clone(N);l.validateRtpCapabilities(L),M=this._handlerFactory();const A=await M.getNativeRtpCapabilities();P.debug("load() | got native RTP capabilities:%o",A);const j=w.clone(A);l.validateRtpCapabilities(j),this._extendedRtpCapabilities=l.getExtendedRtpCapabilities(j,L),P.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=l.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=l.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=l.getRecvRtpCapabilities(this._extendedRtpCapabilities),l.validateRtpCapabilities(this._recvRtpCapabilities),P.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await M.getNativeSctpCapabilities(),P.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),l.validateSctpCapabilities(this._sctpCapabilities),P.debug("load() succeeded"),this._loaded=!0,M.close()}catch(L){throw M&&M.close(),L}}canProduce(N){if(!this._loaded)throw new o.InvalidStateError("not loaded");if(N!=="audio"&&N!=="video")throw new TypeError(`invalid kind "${N}"`);return this._canProduceByKind[N]}createSendTransport({id:N,iceParameters:M,iceCandidates:L,dtlsParameters:A,sctpParameters:j,iceServers:G,iceTransportPolicy:de,additionalSettings:te,proprietaryConstraints:J,appData:ae}){return P.debug("createSendTransport()"),this.createTransport({direction:"send",id:N,iceParameters:M,iceCandidates:L,dtlsParameters:A,sctpParameters:j,iceServers:G,iceTransportPolicy:de,additionalSettings:te,proprietaryConstraints:J,appData:ae})}createRecvTransport({id:N,iceParameters:M,iceCandidates:L,dtlsParameters:A,sctpParameters:j,iceServers:G,iceTransportPolicy:de,additionalSettings:te,proprietaryConstraints:J,appData:ae}){return P.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:N,iceParameters:M,iceCandidates:L,dtlsParameters:A,sctpParameters:j,iceServers:G,iceTransportPolicy:de,additionalSettings:te,proprietaryConstraints:J,appData:ae})}createTransport({direction:N,id:M,iceParameters:L,iceCandidates:A,dtlsParameters:j,sctpParameters:G,iceServers:de,iceTransportPolicy:te,additionalSettings:J,proprietaryConstraints:ae,appData:be}){if(!this._loaded)throw new o.InvalidStateError("not loaded");if(typeof M!="string")throw new TypeError("missing id");if(typeof L!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(A))throw new TypeError("missing iceCandidates");if(typeof j!="object")throw new TypeError("missing dtlsParameters");if(G&&typeof G!="object")throw new TypeError("wrong sctpParameters");if(be&&typeof be!="object")throw new TypeError("if given, appData must be an object");const xe=new y.Transport({direction:N,id:M,iceParameters:L,iceCandidates:A,dtlsParameters:j,sctpParameters:G,iceServers:de,iceTransportPolicy:te,additionalSettings:J,proprietaryConstraints:ae,appData:be,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",xe),xe}}},6011:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.unsafeStringify=void 0;const g=i(9746),_=[];for(let o=0;o<256;++o)_.push((o+256).toString(16).slice(1));function f(o,w=0){return(_[o[w+0]]+_[o[w+1]]+_[o[w+2]]+_[o[w+3]]+"-"+_[o[w+4]]+_[o[w+5]]+"-"+_[o[w+6]]+_[o[w+7]]+"-"+_[o[w+8]]+_[o[w+9]]+"-"+_[o[w+10]]+_[o[w+11]]+_[o[w+12]]+_[o[w+13]]+_[o[w+14]]+_[o[w+15]]).toLowerCase()}u.unsafeStringify=f,u.default=function(o,w=0){const l=f(o,w);if(!(0,g.default)(l))throw TypeError("Stringified UUID is invalid");return l}},6298:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib.StreamCipher,o=_.algo,w=[],l=[],y=[],d=o.Rabbit=f.extend({_doReset:function(){for(var S=this._key.words,x=this.cfg.iv,k=0;k<4;k++)S[k]=16711935&(S[k]<<8|S[k]>>>24)|4278255360&(S[k]<<24|S[k]>>>8);var I=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],T=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];for(this._b=0,k=0;k<4;k++)m.call(this);for(k=0;k<8;k++)T[k]^=I[k+4&7];if(x){var C=x.words,E=C[0],c=C[1],b=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),R=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),P=b>>>16|4294901760&R,O=R<<16|65535&b;for(T[0]^=b,T[1]^=P,T[2]^=R,T[3]^=O,T[4]^=b,T[5]^=P,T[6]^=R,T[7]^=O,k=0;k<4;k++)m.call(this)}},_doProcessBlock:function(S,x){var k=this._X;m.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var I=0;I<4;I++)w[I]=16711935&(w[I]<<8|w[I]>>>24)|4278255360&(w[I]<<24|w[I]>>>8),S[x+I]^=w[I]},blockSize:4,ivSize:2});function m(){for(var S=this._X,x=this._C,k=0;k<8;k++)l[k]=x[k];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<l[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<l[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<l[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<l[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<l[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<l[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<l[6]>>>0?1:0)|0,this._b=x[7]>>>0<l[7]>>>0?1:0,k=0;k<8;k++){var I=S[k]+x[k],T=65535&I,C=I>>>16,E=((T*T>>>17)+T*C>>>15)+C*C,c=((4294901760&I)*I|0)+((65535&I)*I|0);y[k]=E^c}S[0]=y[0]+(y[7]<<16|y[7]>>>16)+(y[6]<<16|y[6]>>>16)|0,S[1]=y[1]+(y[0]<<8|y[0]>>>24)+y[7]|0,S[2]=y[2]+(y[1]<<16|y[1]>>>16)+(y[0]<<16|y[0]>>>16)|0,S[3]=y[3]+(y[2]<<8|y[2]>>>24)+y[1]|0,S[4]=y[4]+(y[3]<<16|y[3]>>>16)+(y[2]<<16|y[2]>>>16)|0,S[5]=y[5]+(y[4]<<8|y[4]>>>24)+y[3]|0,S[6]=y[6]+(y[5]<<16|y[5]>>>16)+(y[4]<<16|y[4]>>>16)|0,S[7]=y[7]+(y[6]<<8|y[6]>>>24)+y[5]|0}_.Rabbit=f._createHelper(d)}(),g.Rabbit)},6308:function(p,u,i){var g,_,f,o,w,l;p.exports=(l=i(9021),i(3009),_=(g=l).lib.WordArray,f=g.algo,o=f.SHA256,w=f.SHA224=o.extend({_doReset:function(){this._hash=new _.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var y=o._doFinalize.call(this);return y.sigBytes-=4,y}}),g.SHA224=o._createHelper(w),g.HmacSHA224=o._createHmacHelper(w),l.SHA224)},6356:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(6011),_=i(1425),f=i(6568);u.default=function(o,w,l){o??(o={}),l??(l=0);let y=(0,_.default)({...o,_v6:!0},new Uint8Array(16));if(y=(0,f.default)(y),w){for(let d=0;d<16;d++)w[l+d]=y[d];return w}return(0,g.unsafeStringify)(y)}},6372:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.mode.CTRGladman=function(){var _=g.lib.BlockCipherMode.extend();function f(l){if(255&~(l>>24))l+=16777216;else{var y=l>>16&255,d=l>>8&255,m=255&l;y===255?(y=0,d===255?(d=0,m===255?m=0:++m):++d):++y,l=0,l+=y<<16,l+=d<<8,l+=m}return l}function o(l){return(l[0]=f(l[0]))===0&&(l[1]=f(l[1])),l}var w=_.Encryptor=_.extend({processBlock:function(l,y){var d=this._cipher,m=d.blockSize,S=this._iv,x=this._counter;S&&(x=this._counter=S.slice(0),this._iv=void 0),o(x);var k=x.slice(0);d.encryptBlock(k,0);for(var I=0;I<m;I++)l[y+I]^=k[I]}});return _.Decryptor=w,_}(),g.mode.CTRGladman)},6440:function(p,u,i){var g;p.exports=(g=i(9021),function(){if(typeof ArrayBuffer=="function"){var _=g.lib.WordArray,f=_.init,o=_.init=function(w){if(w instanceof ArrayBuffer&&(w=new Uint8Array(w)),(w instanceof Int8Array||typeof Uint8ClampedArray<"u"&&w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array)&&(w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength)),w instanceof Uint8Array){for(var l=w.byteLength,y=[],d=0;d<l;d++)y[d>>>2]|=w[d]<<24-d%4*8;f.call(this,y,l)}else f.apply(this,arguments)};o.prototype=_}}(),g.lib.WordArray)},6568:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(1797),_=i(6011);u.default=function(f){const o=function(w){return Uint8Array.of((15&w[6])<<4|w[7]>>4&15,(15&w[7])<<4|(240&w[4])>>4,(15&w[4])<<4|(240&w[5])>>4,(15&w[5])<<4|(240&w[0])>>4,(15&w[0])<<4|(240&w[1])>>4,(15&w[1])<<4|(240&w[2])>>4,96|15&w[2],w[3],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}(typeof f=="string"?(0,g.default)(f):f);return typeof f=="string"?(0,_.unsafeStringify)(o):o}},6585:p=>{var u=1e3,i=60*u,g=60*i,_=24*g,f=7*_,o=365.25*_;function w(l,y,d,m){var S=y>=1.5*d;return Math.round(l/d)+" "+m+(S?"s":"")}p.exports=function(l,y){y=y||{};var d=typeof l;if(d==="string"&&l.length>0)return function(m){if(!((m=String(m)).length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(S){var x=parseFloat(S[1]);switch((S[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return x*o;case"weeks":case"week":case"w":return x*f;case"days":case"day":case"d":return x*_;case"hours":case"hour":case"hrs":case"hr":case"h":return x*g;case"minutes":case"minute":case"mins":case"min":case"m":return x*i;case"seconds":case"second":case"secs":case"sec":case"s":return x*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}(l);if(d==="number"&&isFinite(l))return y.long?function(m){var S=Math.abs(m);return S>=_?w(m,S,_,"day"):S>=g?w(m,S,g,"hour"):S>=i?w(m,S,i,"minute"):S>=u?w(m,S,u,"second"):m+" ms"}(l):function(m){var S=Math.abs(m);return S>=_?Math.round(m/_)+"d":S>=g?Math.round(m/g)+"h":S>=i?Math.round(m/i)+"m":S>=u?Math.round(m/u)+"s":m+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}},6697:(p,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(p,u,i)=>{i.d(u,{KS:()=>_,fo:()=>g});var g=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),_=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(p){p.exports=function(u){var i={};function g(_){if(i[_])return i[_].exports;var f=i[_]={i:_,l:!1,exports:{}};return u[_].call(f.exports,f,f.exports,g),f.l=!0,f.exports}return g.m=u,g.c=i,g.d=function(_,f,o){g.o(_,f)||Object.defineProperty(_,f,{enumerable:!0,get:o})},g.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},g.t=function(_,f){if(1&f&&(_=g(_)),8&f||4&f&&typeof _=="object"&&_&&_.__esModule)return _;var o=Object.create(null);if(g.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:_}),2&f&&typeof _!="string")for(var w in _)g.d(o,w,(function(l){return _[l]}).bind(null,w));return o},g.n=function(_){var f=_&&_.__esModule?function(){return _.default}:function(){return _};return g.d(f,"a",f),f},g.o=function(_,f){return Object.prototype.hasOwnProperty.call(_,f)},g.p="",g(g.s=90)}({17:function(u,i,g){i.__esModule=!0,i.default=void 0;var _=g(18),f=function(){function o(){}return o.getFirstMatch=function(w,l){var y=l.match(w);return y&&y.length>0&&y[1]||""},o.getSecondMatch=function(w,l){var y=l.match(w);return y&&y.length>1&&y[2]||""},o.matchAndReturnConst=function(w,l,y){if(w.test(l))return y},o.getWindowsVersionName=function(w){switch(w){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(w){var l=w.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(l.push(0),l[0]===10)switch(l[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(w){var l=w.split(".").splice(0,2).map(function(y){return parseInt(y,10)||0});if(l.push(0),!(l[0]===1&&l[1]<5))return l[0]===1&&l[1]<6?"Cupcake":l[0]===1&&l[1]>=6?"Donut":l[0]===2&&l[1]<2?"Eclair":l[0]===2&&l[1]===2?"Froyo":l[0]===2&&l[1]>2?"Gingerbread":l[0]===3?"Honeycomb":l[0]===4&&l[1]<1?"Ice Cream Sandwich":l[0]===4&&l[1]<4?"Jelly Bean":l[0]===4&&l[1]>=4?"KitKat":l[0]===5?"Lollipop":l[0]===6?"Marshmallow":l[0]===7?"Nougat":l[0]===8?"Oreo":l[0]===9?"Pie":void 0},o.getVersionPrecision=function(w){return w.split(".").length},o.compareVersions=function(w,l,y){y===void 0&&(y=!1);var d=o.getVersionPrecision(w),m=o.getVersionPrecision(l),S=Math.max(d,m),x=0,k=o.map([w,l],function(I){var T=S-o.getVersionPrecision(I),C=I+new Array(T+1).join(".0");return o.map(C.split("."),function(E){return new Array(20-E.length).join("0")+E}).reverse()});for(y&&(x=S-Math.min(d,m)),S-=1;S>=x;){if(k[0][S]>k[1][S])return 1;if(k[0][S]===k[1][S]){if(S===x)return 0;S-=1}else if(k[0][S]<k[1][S])return-1}},o.map=function(w,l){var y,d=[];if(Array.prototype.map)return Array.prototype.map.call(w,l);for(y=0;y<w.length;y+=1)d.push(l(w[y]));return d},o.find=function(w,l){var y,d;if(Array.prototype.find)return Array.prototype.find.call(w,l);for(y=0,d=w.length;y<d;y+=1){var m=w[y];if(l(m,y))return m}},o.assign=function(w){for(var l,y,d=w,m=arguments.length,S=new Array(m>1?m-1:0),x=1;x<m;x++)S[x-1]=arguments[x];if(Object.assign)return Object.assign.apply(Object,[w].concat(S));var k=function(){var I=S[l];typeof I=="object"&&I!==null&&Object.keys(I).forEach(function(T){d[T]=I[T]})};for(l=0,y=S.length;l<y;l+=1)k();return w},o.getBrowserAlias=function(w){return _.BROWSER_ALIASES_MAP[w]},o.getBrowserTypeByAlias=function(w){return _.BROWSER_MAP[w]||""},o}();i.default=f,u.exports=i.default},18:function(u,i,g){i.__esModule=!0,i.ENGINE_MAP=i.OS_MAP=i.PLATFORMS_MAP=i.BROWSER_MAP=i.BROWSER_ALIASES_MAP=void 0,i.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},i.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},i.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},i.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},i.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(u,i,g){i.__esModule=!0,i.default=void 0;var _,f=(_=g(91))&&_.__esModule?_:{default:_},o=g(18);function w(y,d){for(var m=0;m<d.length;m++){var S=d[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}var l=function(){function y(){}var d,m,S;return y.getParser=function(x,k){if(k===void 0&&(k=!1),typeof x!="string")throw new Error("UserAgent should be a string");return new f.default(x,k)},y.parse=function(x){return new f.default(x).getResult()},d=y,S=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(m=null)&&w(d.prototype,m),S&&w(d,S),y}();i.default=l,u.exports=i.default},91:function(u,i,g){i.__esModule=!0,i.default=void 0;var _=y(g(92)),f=y(g(93)),o=y(g(94)),w=y(g(95)),l=y(g(17));function y(m){return m&&m.__esModule?m:{default:m}}var d=function(){function m(x,k){if(k===void 0&&(k=!1),x==null||x==="")throw new Error("UserAgent parameter can't be empty");this._ua=x,this.parsedResult={},k!==!0&&this.parse()}var S=m.prototype;return S.getUA=function(){return this._ua},S.test=function(x){return x.test(this._ua)},S.parseBrowser=function(){var x=this;this.parsedResult.browser={};var k=l.default.find(_.default,function(I){if(typeof I.test=="function")return I.test(x);if(I.test instanceof Array)return I.test.some(function(T){return x.test(T)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.browser=k.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(x){return x?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var x=this;this.parsedResult.os={};var k=l.default.find(f.default,function(I){if(typeof I.test=="function")return I.test(x);if(I.test instanceof Array)return I.test.some(function(T){return x.test(T)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.os=k.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(x){var k=this.getOS().name;return x?String(k).toLowerCase()||"":k||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(x){x===void 0&&(x=!1);var k=this.getPlatform().type;return x?String(k).toLowerCase()||"":k||""},S.parsePlatform=function(){var x=this;this.parsedResult.platform={};var k=l.default.find(o.default,function(I){if(typeof I.test=="function")return I.test(x);if(I.test instanceof Array)return I.test.some(function(T){return x.test(T)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.platform=k.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(x){return x?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var x=this;this.parsedResult.engine={};var k=l.default.find(w.default,function(I){if(typeof I.test=="function")return I.test(x);if(I.test instanceof Array)return I.test.some(function(T){return x.test(T)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.engine=k.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return l.default.assign({},this.parsedResult)},S.satisfies=function(x){var k=this,I={},T=0,C={},E=0;if(Object.keys(x).forEach(function(L){var A=x[L];typeof A=="string"?(C[L]=A,E+=1):typeof A=="object"&&(I[L]=A,T+=1)}),T>0){var c=Object.keys(I),b=l.default.find(c,function(L){return k.isOS(L)});if(b){var R=this.satisfies(I[b]);if(R!==void 0)return R}var P=l.default.find(c,function(L){return k.isPlatform(L)});if(P){var O=this.satisfies(I[P]);if(O!==void 0)return O}}if(E>0){var N=Object.keys(C),M=l.default.find(N,function(L){return k.isBrowser(L,!0)});if(M!==void 0)return this.compareVersion(C[M])}},S.isBrowser=function(x,k){k===void 0&&(k=!1);var I=this.getBrowserName().toLowerCase(),T=x.toLowerCase(),C=l.default.getBrowserTypeByAlias(T);return k&&C&&(T=C.toLowerCase()),T===I},S.compareVersion=function(x){var k=[0],I=x,T=!1,C=this.getBrowserVersion();if(typeof C=="string")return x[0]===">"||x[0]==="<"?(I=x.substr(1),x[1]==="="?(T=!0,I=x.substr(2)):k=[],x[0]===">"?k.push(1):k.push(-1)):x[0]==="="?I=x.substr(1):x[0]==="~"&&(T=!0,I=x.substr(1)),k.indexOf(l.default.compareVersions(C,I,T))>-1},S.isOS=function(x){return this.getOSName(!0)===String(x).toLowerCase()},S.isPlatform=function(x){return this.getPlatformType(!0)===String(x).toLowerCase()},S.isEngine=function(x){return this.getEngineName(!0)===String(x).toLowerCase()},S.is=function(x,k){return k===void 0&&(k=!1),this.isBrowser(x,k)||this.isOS(x)||this.isPlatform(x)},S.some=function(x){var k=this;return x===void 0&&(x=[]),x.some(function(I){return k.is(I)})},m}();i.default=d,u.exports=i.default},92:function(u,i,g){i.__esModule=!0,i.default=void 0;var _,f=(_=g(17))&&_.__esModule?_:{default:_},o=/version\/(\d+(\.?_?\d+)+)/i,w=[{test:[/googlebot/i],describe:function(l){var y={name:"Googlebot"},d=f.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/opera/i],describe:function(l){var y={name:"Opera"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/opr\/|opios/i],describe:function(l){var y={name:"Opera"},d=f.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/SamsungBrowser/i],describe:function(l){var y={name:"Samsung Internet for Android"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/Whale/i],describe:function(l){var y={name:"NAVER Whale Browser"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/MZBrowser/i],describe:function(l){var y={name:"MZ Browser"},d=f.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/focus/i],describe:function(l){var y={name:"Focus"},d=f.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/swing/i],describe:function(l){var y={name:"Swing"},d=f.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/coast/i],describe:function(l){var y={name:"Opera Coast"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(l){var y={name:"Opera Touch"},d=f.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/yabrowser/i],describe:function(l){var y={name:"Yandex Browser"},d=f.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/ucbrowser/i],describe:function(l){var y={name:"UC Browser"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/Maxthon|mxios/i],describe:function(l){var y={name:"Maxthon"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/epiphany/i],describe:function(l){var y={name:"Epiphany"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/puffin/i],describe:function(l){var y={name:"Puffin"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/sleipnir/i],describe:function(l){var y={name:"Sleipnir"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/k-meleon/i],describe:function(l){var y={name:"K-Meleon"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/micromessenger/i],describe:function(l){var y={name:"WeChat"},d=f.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/qqbrowser/i],describe:function(l){var y={name:/qqbrowserlite/i.test(l)?"QQ Browser Lite":"QQ Browser"},d=f.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/msie|trident/i],describe:function(l){var y={name:"Internet Explorer"},d=f.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/\sedg\//i],describe:function(l){var y={name:"Microsoft Edge"},d=f.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/edg([ea]|ios)/i],describe:function(l){var y={name:"Microsoft Edge"},d=f.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/vivaldi/i],describe:function(l){var y={name:"Vivaldi"},d=f.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/seamonkey/i],describe:function(l){var y={name:"SeaMonkey"},d=f.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/sailfish/i],describe:function(l){var y={name:"Sailfish"},d=f.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,l);return d&&(y.version=d),y}},{test:[/silk/i],describe:function(l){var y={name:"Amazon Silk"},d=f.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/phantom/i],describe:function(l){var y={name:"PhantomJS"},d=f.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/slimerjs/i],describe:function(l){var y={name:"SlimerJS"},d=f.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var y={name:"BlackBerry"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var y={name:"WebOS Browser"},d=f.default.getFirstMatch(o,l)||f.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/bada/i],describe:function(l){var y={name:"Bada"},d=f.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/tizen/i],describe:function(l){var y={name:"Tizen"},d=f.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/qupzilla/i],describe:function(l){var y={name:"QupZilla"},d=f.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/firefox|iceweasel|fxios/i],describe:function(l){var y={name:"Firefox"},d=f.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/electron/i],describe:function(l){var y={name:"Electron"},d=f.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/MiuiBrowser/i],describe:function(l){var y={name:"Miui"},d=f.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/chromium/i],describe:function(l){var y={name:"Chromium"},d=f.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,l)||f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/chrome|crios|crmo/i],describe:function(l){var y={name:"Chrome"},d=f.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/GSA/i],describe:function(l){var y={name:"Google Search"},d=f.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:function(l){var y=!l.test(/like android/i),d=l.test(/android/i);return y&&d},describe:function(l){var y={name:"Android Browser"},d=f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/playstation 4/i],describe:function(l){var y={name:"PlayStation 4"},d=f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/safari|applewebkit/i],describe:function(l){var y={name:"Safari"},d=f.default.getFirstMatch(o,l);return d&&(y.version=d),y}},{test:[/.*/i],describe:function(l){var y=l.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:f.default.getFirstMatch(y,l),version:f.default.getSecondMatch(y,l)}}}];i.default=w,u.exports=i.default},93:function(u,i,g){i.__esModule=!0,i.default=void 0;var _,f=(_=g(17))&&_.__esModule?_:{default:_},o=g(18),w=[{test:[/Roku\/DVP/],describe:function(l){var y=f.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,l);return{name:o.OS_MAP.Roku,version:y}}},{test:[/windows phone/i],describe:function(l){var y=f.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,l);return{name:o.OS_MAP.WindowsPhone,version:y}}},{test:[/windows /i],describe:function(l){var y=f.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,l),d=f.default.getWindowsVersionName(y);return{name:o.OS_MAP.Windows,version:y,versionName:d}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(l){var y={name:o.OS_MAP.iOS},d=f.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,l);return d&&(y.version=d),y}},{test:[/macintosh/i],describe:function(l){var y=f.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,l).replace(/[_\s]/g,"."),d=f.default.getMacOSVersionName(y),m={name:o.OS_MAP.MacOS,version:y};return d&&(m.versionName=d),m}},{test:[/(ipod|iphone|ipad)/i],describe:function(l){var y=f.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,l).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:y}}},{test:function(l){var y=!l.test(/like android/i),d=l.test(/android/i);return y&&d},describe:function(l){var y=f.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,l),d=f.default.getAndroidVersionName(y),m={name:o.OS_MAP.Android,version:y};return d&&(m.versionName=d),m}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var y=f.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,l),d={name:o.OS_MAP.WebOS};return y&&y.length&&(d.version=y),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var y=f.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,l)||f.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,l)||f.default.getFirstMatch(/\bbb(\d+)/i,l);return{name:o.OS_MAP.BlackBerry,version:y}}},{test:[/bada/i],describe:function(l){var y=f.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,l);return{name:o.OS_MAP.Bada,version:y}}},{test:[/tizen/i],describe:function(l){var y=f.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,l);return{name:o.OS_MAP.Tizen,version:y}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(l){var y=f.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,l);return{name:o.OS_MAP.PlayStation4,version:y}}}];i.default=w,u.exports=i.default},94:function(u,i,g){i.__esModule=!0,i.default=void 0;var _,f=(_=g(17))&&_.__esModule?_:{default:_},o=g(18),w=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(l){var y=f.default.getFirstMatch(/(can-l01)/i,l)&&"Nova",d={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return y&&(d.model=y),d}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(l){var y=l.test(/ipod|iphone/i),d=l.test(/like (ipod|iphone)/i);return y&&!d},describe:function(l){var y=f.default.getFirstMatch(/(ipod|iphone)/i,l);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:y}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(l){return l.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(l){var y=Number(String(l.getOSVersion()).split(".")[0]);return l.getOSName(!0)==="android"&&y>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(l){return l.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(l){return l.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(l){return l.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];i.default=w,u.exports=i.default},95:function(u,i,g){i.__esModule=!0,i.default=void 0;var _,f=(_=g(17))&&_.__esModule?_:{default:_},o=g(18),w=[{test:function(l){return l.getBrowserName(!0)==="microsoft edge"},describe:function(l){if(/\sedg\//i.test(l))return{name:o.ENGINE_MAP.Blink};var y=f.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,l);return{name:o.ENGINE_MAP.EdgeHTML,version:y}}},{test:[/trident/i],describe:function(l){var y={name:o.ENGINE_MAP.Trident},d=f.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:function(l){return l.test(/presto/i)},describe:function(l){var y={name:o.ENGINE_MAP.Presto},d=f.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:function(l){var y=l.test(/gecko/i),d=l.test(/like gecko/i);return y&&!d},describe:function(l){var y={name:o.ENGINE_MAP.Gecko},d=f.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(l){var y={name:o.ENGINE_MAP.WebKit},d=f.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,l);return d&&(y.version=d),y}}];i.default=w,u.exports=i.default}})},6939:function(p,u,i){var g,_,f;p.exports=(f=i(9021),i(7165),f.mode.CTR=(g=f.lib.BlockCipherMode.extend(),_=g.Encryptor=g.extend({processBlock:function(o,w){var l=this._cipher,y=l.blockSize,d=this._iv,m=this._counter;d&&(m=this._counter=d.slice(0),this._iv=void 0);var S=m.slice(0);l.encryptBlock(S,0),m[y-1]=m[y-1]+1|0;for(var x=0;x<y;x++)o[w+x]^=S[x]}}),g.Decryptor=_,g),f.mode.CTR)},7007:p=>{var u,i=typeof Reflect=="object"?Reflect:null,g=i&&typeof i.apply=="function"?i.apply:function(T,C,E){return Function.prototype.apply.call(T,C,E)};u=i&&typeof i.ownKeys=="function"?i.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var _=Number.isNaN||function(T){return T!=T};function f(){f.init.call(this)}p.exports=f,p.exports.once=function(T,C){return new Promise(function(E,c){function b(P){T.removeListener(C,R),c(P)}function R(){typeof T.removeListener=="function"&&T.removeListener("error",b),E([].slice.call(arguments))}I(T,C,R,{once:!0}),C!=="error"&&function(P,O,N){typeof P.on=="function"&&I(P,"error",O,N)}(T,b,{once:!0})})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var o=10;function w(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function l(T){return T._maxListeners===void 0?f.defaultMaxListeners:T._maxListeners}function y(T,C,E,c){var b,R,P,O;if(w(E),(R=T._events)===void 0?(R=T._events=Object.create(null),T._eventsCount=0):(R.newListener!==void 0&&(T.emit("newListener",C,E.listener?E.listener:E),R=T._events),P=R[C]),P===void 0)P=R[C]=E,++T._eventsCount;else if(typeof P=="function"?P=R[C]=c?[E,P]:[P,E]:c?P.unshift(E):P.push(E),(b=l(T))>0&&P.length>b&&!P.warned){P.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=T,N.type=C,N.count=P.length,O=N,console&&console.warn&&console.warn(O)}return T}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(T,C,E){var c={fired:!1,wrapFn:void 0,target:T,type:C,listener:E},b=d.bind(c);return b.listener=E,c.wrapFn=b,b}function S(T,C,E){var c=T._events;if(c===void 0)return[];var b=c[C];return b===void 0?[]:typeof b=="function"?E?[b.listener||b]:[b]:E?function(R){for(var P=new Array(R.length),O=0;O<P.length;++O)P[O]=R[O].listener||R[O];return P}(b):k(b,b.length)}function x(T){var C=this._events;if(C!==void 0){var E=C[T];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}function k(T,C){for(var E=new Array(C),c=0;c<C;++c)E[c]=T[c];return E}function I(T,C,E,c){if(typeof T.on=="function")c.once?T.once(C,E):T.on(C,E);else{if(typeof T.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(C,function b(R){c.once&&T.removeEventListener(C,b),E(R)})}}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||_(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),f.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||_(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},f.prototype.getMaxListeners=function(){return l(this)},f.prototype.emit=function(T){for(var C=[],E=1;E<arguments.length;E++)C.push(arguments[E]);var c=T==="error",b=this._events;if(b!==void 0)c=c&&b.error===void 0;else if(!c)return!1;if(c){var R;if(C.length>0&&(R=C[0]),R instanceof Error)throw R;var P=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw P.context=R,P}var O=b[T];if(O===void 0)return!1;if(typeof O=="function")g(O,this,C);else{var N=O.length,M=k(O,N);for(E=0;E<N;++E)g(M[E],this,C)}return!0},f.prototype.addListener=function(T,C){return y(this,T,C,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(T,C){return y(this,T,C,!0)},f.prototype.once=function(T,C){return w(C),this.on(T,m(this,T,C)),this},f.prototype.prependOnceListener=function(T,C){return w(C),this.prependListener(T,m(this,T,C)),this},f.prototype.removeListener=function(T,C){var E,c,b,R,P;if(w(C),(c=this._events)===void 0)return this;if((E=c[T])===void 0)return this;if(E===C||E.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete c[T],c.removeListener&&this.emit("removeListener",T,E.listener||C));else if(typeof E!="function"){for(b=-1,R=E.length-1;R>=0;R--)if(E[R]===C||E[R].listener===C){P=E[R].listener,b=R;break}if(b<0)return this;b===0?E.shift():function(O,N){for(;N+1<O.length;N++)O[N]=O[N+1];O.pop()}(E,b),E.length===1&&(c[T]=E[0]),c.removeListener!==void 0&&this.emit("removeListener",T,P||C)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(T){var C,E,c;if((E=this._events)===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[T]),this;if(arguments.length===0){var b,R=Object.keys(E);for(c=0;c<R.length;++c)(b=R[c])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=E[T])=="function")this.removeListener(T,C);else if(C!==void 0)for(c=C.length-1;c>=0;c--)this.removeListener(T,C[c]);return this},f.prototype.listeners=function(T){return S(this,T,!0)},f.prototype.rawListeners=function(T){return S(this,T,!1)},f.listenerCount=function(T,C){return typeof T.listenerCount=="function"?T.listenerCount(C):x.call(T,C)},f.prototype.listenerCount=x,f.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]}},7080:(p,u,i)=>{i.d(u,{q:()=>_,s:()=>g});var g={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},_={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(p,u,i){var g;p.exports=(g=i(9021),i(9506),void(g.lib.Cipher||function(_){var f=g,o=f.lib,w=o.Base,l=o.WordArray,y=o.BufferedBlockAlgorithm,d=f.enc,m=(d.Utf8,d.Base64),S=f.algo.EvpKDF,x=o.Cipher=y.extend({cfg:w.extend(),createEncryptor:function(O,N){return this.create(this._ENC_XFORM_MODE,O,N)},createDecryptor:function(O,N){return this.create(this._DEC_XFORM_MODE,O,N)},init:function(O,N,M){this.cfg=this.cfg.extend(M),this._xformMode=O,this._key=N,this.reset()},reset:function(){y.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){return O&&this._append(O),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function O(N){return typeof N=="string"?P:b}return function(N){return{encrypt:function(M,L,A){return O(L).encrypt(N,M,L,A)},decrypt:function(M,L,A){return O(L).decrypt(N,M,L,A)}}}}()}),k=(o.StreamCipher=x.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f.mode={}),I=o.BlockCipherMode=w.extend({createEncryptor:function(O,N){return this.Encryptor.create(O,N)},createDecryptor:function(O,N){return this.Decryptor.create(O,N)},init:function(O,N){this._cipher=O,this._iv=N}}),T=k.CBC=function(){var O=I.extend();function N(M,L,A){var j,G=this._iv;G?(j=G,this._iv=_):j=this._prevBlock;for(var de=0;de<A;de++)M[L+de]^=j[de]}return O.Encryptor=O.extend({processBlock:function(M,L){var A=this._cipher,j=A.blockSize;N.call(this,M,L,j),A.encryptBlock(M,L),this._prevBlock=M.slice(L,L+j)}}),O.Decryptor=O.extend({processBlock:function(M,L){var A=this._cipher,j=A.blockSize,G=M.slice(L,L+j);A.decryptBlock(M,L),N.call(this,M,L,j),this._prevBlock=G}}),O}(),C=(f.pad={}).Pkcs7={pad:function(O,N){for(var M=4*N,L=M-O.sigBytes%M,A=L<<24|L<<16|L<<8|L,j=[],G=0;G<L;G+=4)j.push(A);var de=l.create(j,L);O.concat(de)},unpad:function(O){var N=255&O.words[O.sigBytes-1>>>2];O.sigBytes-=N}},E=(o.BlockCipher=x.extend({cfg:x.cfg.extend({mode:T,padding:C}),reset:function(){var O;x.reset.call(this);var N=this.cfg,M=N.iv,L=N.mode;this._xformMode==this._ENC_XFORM_MODE?O=L.createEncryptor:(O=L.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==O?this._mode.init(this,M&&M.words):(this._mode=O.call(L,this,M&&M.words),this._mode.__creator=O)},_doProcessBlock:function(O,N){this._mode.processBlock(O,N)},_doFinalize:function(){var O,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),O=this._process(!0)):(O=this._process(!0),N.unpad(O)),O},blockSize:4}),o.CipherParams=w.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}})),c=(f.format={}).OpenSSL={stringify:function(O){var N=O.ciphertext,M=O.salt;return(M?l.create([1398893684,1701076831]).concat(M).concat(N):N).toString(m)},parse:function(O){var N,M=m.parse(O),L=M.words;return L[0]==1398893684&&L[1]==1701076831&&(N=l.create(L.slice(2,4)),L.splice(0,4),M.sigBytes-=16),E.create({ciphertext:M,salt:N})}},b=o.SerializableCipher=w.extend({cfg:w.extend({format:c}),encrypt:function(O,N,M,L){L=this.cfg.extend(L);var A=O.createEncryptor(M,L),j=A.finalize(N),G=A.cfg;return E.create({ciphertext:j,key:M,iv:G.iv,algorithm:O,mode:G.mode,padding:G.padding,blockSize:O.blockSize,formatter:L.format})},decrypt:function(O,N,M,L){return L=this.cfg.extend(L),N=this._parse(N,L.format),O.createDecryptor(M,L).finalize(N.ciphertext)},_parse:function(O,N){return typeof O=="string"?N.parse(O,this):O}}),R=(f.kdf={}).OpenSSL={execute:function(O,N,M,L,A){if(L||(L=l.random(8)),A)j=S.create({keySize:N+M,hasher:A}).compute(O,L);else var j=S.create({keySize:N+M}).compute(O,L);var G=l.create(j.words.slice(N),4*M);return j.sigBytes=4*N,E.create({key:j,iv:G,salt:L})}},P=o.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:R}),encrypt:function(O,N,M,L){var A=(L=this.cfg.extend(L)).kdf.execute(M,O.keySize,O.ivSize,L.salt,L.hasher);L.iv=A.iv;var j=b.encrypt.call(this,O,N,A.key,L);return j.mixIn(A),j},decrypt:function(O,N,M,L){L=this.cfg.extend(L),N=this._parse(N,L.format);var A=L.kdf.execute(M,O.keySize,O.ivSize,N.salt,L.hasher);return L.iv=A.iv,b.decrypt.call(this,O,N,A.key,L)}})}()))},7193:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib.StreamCipher,o=_.algo,w=o.RC4=f.extend({_doReset:function(){for(var d=this._key,m=d.words,S=d.sigBytes,x=this._S=[],k=0;k<256;k++)x[k]=k;k=0;for(var I=0;k<256;k++){var T=k%S,C=m[T>>>2]>>>24-T%4*8&255;I=(I+x[k]+C)%256;var E=x[k];x[k]=x[I],x[I]=E}this._i=this._j=0},_doProcessBlock:function(d,m){d[m]^=l.call(this)},keySize:8,ivSize:0});function l(){for(var d=this._S,m=this._i,S=this._j,x=0,k=0;k<4;k++){S=(S+d[m=(m+1)%256])%256;var I=d[m];d[m]=d[S],d[S]=I,x|=d[(d[m]+d[S])%256]<<24-8*k}return this._i=m,this._j=S,x}_.RC4=f._createHelper(w);var y=o.RC4Drop=w.extend({cfg:w.cfg.extend({drop:192}),_doReset:function(){w._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)l.call(this)}});_.RC4Drop=f._createHelper(y)}(),g.RC4)},7363:(p,u,i)=>{var g=i(5020),_=i(3804),f=i(5602);u.grammar=f,u.write=_,u.parse=g.parse,u.parseParams=g.parseParams,u.parseFmtpConfig=g.parseFmtpConfig,u.parsePayloads=g.parsePayloads,u.parseRemoteCandidates=g.parseRemoteCandidates,u.parseImageAttributes=g.parseImageAttributes,u.parseSimulcastStreamList=g.parseSimulcastStreamList},7402:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Chrome55=void 0;const g=i(7363),_=i(2994),f=i(4893),o=i(1765),w=i(8046),l=i(5544),y=i(4496),d=i(521),m=i(1305),S=new _.Logger("Chrome55"),x={OS:1024,MIS:1024};class k extends d.HandlerInterface{constructor(){super();ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_sendStream",new MediaStream);ye(this,"_mapSendLocalIdTrack",new Map);ye(this,"_nextSendLocalId",0);ye(this,"_mapRecvLocalIdInfo",new Map);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new k}get name(){return"Chrome55"}close(){if(S.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const E=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const c=g.parse(E.sdp);return l.extractRtpCapabilities({sdpObject:c})}catch(E){try{C.close()}catch{}throw E}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R,iceServers:P,iceTransportPolicy:O,additionalSettings:N,proprietaryConstraints:M,extendedRtpCapabilities:L}){S.debug("run()"),this._direction=C,this._remoteSdp=new m.RemoteSdp({iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",L),video:w.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",L),video:w.getSendingRemoteRtpParameters("video",L)},b.role&&b.role!=="auto"&&(this._forcedLocalDtlsRole=b.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",A=>{this.emit("@icecandidateerror",A)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){S.debug("updateIceServers()");const E=this._pc.getConfiguration();E.iceServers=C,this._pc.setConfiguration(E)}async restartIce(C){if(S.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const E=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",E),await this._pc.setLocalDescription(E);const c={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:E,codecOptions:c,codec:b}){this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),b&&S.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let R,P=await this._pc.createOffer(),O=g.parse(P.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=o.clone(this._sendingRtpParametersByKind[C.kind]);N.codecs=w.reduceCodecs(N.codecs);const M=o.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(M.codecs=w.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),C.kind==="video"&&E&&E.length>1&&(S.debug("send() | enabling simulcast"),O=g.parse(P.sdp),R=O.media.find(j=>j.type==="video"),y.addLegacySimulcast({offerMediaObject:R,track:C,numStreams:E.length}),P={type:"offer",sdp:g.write(O)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),O=g.parse(this._pc.localDescription.sdp),R=O.media.find(j=>j.type===C.kind),N.rtcp.cname=l.getCname({offerMediaObject:R}),N.encodings=y.getRtpEncodings({offerMediaObject:R,track:C}),E)for(let j=0;j<N.encodings.length;++j)E[j]&&Object.assign(N.encodings[j],E[j]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const j of N.encodings)j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:R,offerRtpParameters:N,answerRtpParameters:M,codecOptions:c});const L={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const A=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(A,C),{localId:A,rtpParameters:N}}async stopSending(C){this.assertSendDirection(),S.debug("stopSending() [localId:%s]",C);const E=this._mapSendLocalIdTrack.get(C);if(!E)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(E),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(R){if(this._sendStream.getTracks().length===0)return void S.warn("stopSending() | ignoring expected error due no sending tracks: %s",R.toString());throw R}if(this._pc.signalingState==="stable")return;const b={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,E){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,E){throw new f.UnsupportedError(" not implemented")}async setRtpEncodingParameters(C,E){throw new f.UnsupportedError("not supported")}async getSenderStats(C){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:E,maxRetransmits:c,label:b,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:E,maxRetransmitTime:E,maxRetransmits:c,protocol:R};S.debug("sendDataChannel() [options:%o]",P);const O=this._pc.createDataChannel(b,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),M=g.parse(N.sdp),L=M.media.find(j=>j.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const E=[];for(const P of C){const{trackId:O,kind:N,rtpParameters:M,streamId:L}=P;S.debug("receive() [trackId:%s, kind:%s]",O,N);const A=N;this._remoteSdp.receive({mid:A,kind:N,offerRtpParameters:M,streamId:L??M.rtcp.cname,trackId:O})}const c={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);let b=await this._pc.createAnswer();const R=g.parse(b.sdp);for(const P of C){const{kind:O,rtpParameters:N}=P,M=O,L=R.media.find(A=>String(A.mid)===M);l.applyCodecParameters({offerRtpParameters:N,answerMediaObject:L})}b={type:"answer",sdp:g.write(R)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:R}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",b),await this._pc.setLocalDescription(b);for(const P of C){const{kind:O,trackId:N,rtpParameters:M}=P,L=O,A=N,j=P.streamId??M.rtcp.cname,G=this._pc.getRemoteStreams().find(de=>de.id===j).getTrackById(A);if(!G)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(A,{mid:L,rtpParameters:M}),E.push({localId:A,track:G})}return E}async stopReceiving(C){this.assertRecvDirection();for(const b of C){S.debug("stopReceiving() [localId:%s]",b);const{mid:R,rtpParameters:P}=this._mapRecvLocalIdInfo.get(b)??{};this._mapRecvLocalIdInfo.delete(b),this._remoteSdp.planBStopReceiving({mid:R,offerRtpParameters:P})}const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:E,protocol:c}){this.assertRecvDirection();const{streamId:b,ordered:R,maxPacketLifeTime:P,maxRetransmits:O}=C,N={negotiated:!0,id:b,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:O,protocol:c};S.debug("receiveDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(E,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const A=await this._pc.createAnswer();if(!this._transportReady){const j=g.parse(A.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setLocalDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:C,localSdpObject:E}){E||(E=g.parse(this._pc.localDescription.sdp));const c=l.extractDtlsParameters({sdpObject:E});c.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((b,R)=>{this.safeEmit("@connect",{dtlsParameters:c},b,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Chrome55=k},7504:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DataProducer=void 0;const g=i(2994),_=i(3953),f=i(4893),o=new g.Logger("DataProducer");class w extends _.EnhancedEventEmitter{constructor({id:d,dataChannel:m,sctpStreamParameters:S,appData:x}){super();ye(this,"_id");ye(this,"_dataChannel");ye(this,"_closed",!1);ye(this,"_sctpStreamParameters");ye(this,"_appData");ye(this,"_observer",new _.EnhancedEventEmitter);o.debug("constructor()"),this._id=d,this._dataChannel=m,this._sctpStreamParameters=S,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(d){this._dataChannel.bufferedAmountLowThreshold=d}get appData(){return this._appData}set appData(d){this._appData=d}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(d){if(o.debug("send()"),this._closed)throw new f.InvalidStateError("closed");this._dataChannel.send(d)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(o.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",d=>{if(this._closed)return;let{error:m}=d;m||(m=new Error("unknown DataChannel error")),m.errorDetail==="sctp-failure"?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",m.sctpCauseCode,m.message):o.error('DataChannel "error" event: %o',m),this.safeEmit("error",m)}),this._dataChannel.addEventListener("close",()=>{this._closed||(o.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||o.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}u.DataProducer=w},7628:function(p,u,i){var g;p.exports=(g=i(9021),i(754),i(4636),i(9506),i(7165),function(){var _=g,f=_.lib,o=f.WordArray,w=f.BlockCipher,l=_.algo,y=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],S=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=l.DES=w.extend({_doReset:function(){for(var E=this._key.words,c=[],b=0;b<56;b++){var R=y[b]-1;c[b]=E[R>>>5]>>>31-R%32&1}for(var P=this._subKeys=[],O=0;O<16;O++){var N=P[O]=[],M=m[O];for(b=0;b<24;b++)N[b/6|0]|=c[(d[b]-1+M)%28]<<31-b%6,N[4+(b/6|0)]|=c[28+(d[b+24]-1+M)%28]<<31-b%6;for(N[0]=N[0]<<1|N[0]>>>31,b=1;b<7;b++)N[b]=N[b]>>>4*(b-1)+3;N[7]=N[7]<<5|N[7]>>>27}var L=this._invSubKeys=[];for(b=0;b<16;b++)L[b]=P[15-b]},encryptBlock:function(E,c){this._doCryptBlock(E,c,this._subKeys)},decryptBlock:function(E,c){this._doCryptBlock(E,c,this._invSubKeys)},_doCryptBlock:function(E,c,b){this._lBlock=E[c],this._rBlock=E[c+1],I.call(this,4,252645135),I.call(this,16,65535),T.call(this,2,858993459),T.call(this,8,16711935),I.call(this,1,1431655765);for(var R=0;R<16;R++){for(var P=b[R],O=this._lBlock,N=this._rBlock,M=0,L=0;L<8;L++)M|=S[L][((N^P[L])&x[L])>>>0];this._lBlock=N,this._rBlock=O^M}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,I.call(this,1,1431655765),T.call(this,8,16711935),T.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),E[c]=this._lBlock,E[c+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function I(E,c){var b=(this._lBlock>>>E^this._rBlock)&c;this._rBlock^=b,this._lBlock^=b<<E}function T(E,c){var b=(this._rBlock>>>E^this._lBlock)&c;this._lBlock^=b,this._rBlock^=b<<E}_.DES=w._createHelper(k);var C=l.TripleDES=w.extend({_doReset:function(){var E=this._key.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var c=E.slice(0,2),b=E.length<4?E.slice(0,2):E.slice(2,4),R=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=k.createEncryptor(o.create(c)),this._des2=k.createEncryptor(o.create(b)),this._des3=k.createEncryptor(o.create(R))},encryptBlock:function(E,c){this._des1.encryptBlock(E,c),this._des2.decryptBlock(E,c),this._des3.encryptBlock(E,c)},decryptBlock:function(E,c){this._des3.decryptBlock(E,c),this._des2.encryptBlock(E,c),this._des1.decryptBlock(E,c)},keySize:6,ivSize:2,blockSize:2});_.TripleDES=w._createHelper(C)}(),g.TripleDES)},7654:(p,u,i)=>{var g="__lodash_hash_undefined__",_="[object Function]",f="[object GeneratorFunction]",o=/^\[object .+?Constructor\]$/,w=typeof i.g=="object"&&i.g&&i.g.Object===Object&&i.g,l=typeof self=="object"&&self&&self.Object===Object&&self,y=w||l||Function("return this")(),d,m=Array.prototype,S=Function.prototype,x=Object.prototype,k=y["__core-js_shared__"],I=(d=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",T=S.toString,C=x.hasOwnProperty,E=x.toString,c=RegExp("^"+T.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=m.splice,R=G(y,"Map"),P=G(Object,"create");function O(J){var ae=-1,be=J?J.length:0;for(this.clear();++ae<be;){var xe=J[ae];this.set(xe[0],xe[1])}}function N(J){var ae=-1,be=J?J.length:0;for(this.clear();++ae<be;){var xe=J[ae];this.set(xe[0],xe[1])}}function M(J){var ae=-1,be=J?J.length:0;for(this.clear();++ae<be;){var xe=J[ae];this.set(xe[0],xe[1])}}function L(J,ae){for(var be,xe,se=J.length;se--;)if((be=J[se][0])===(xe=ae)||be!=be&&xe!=xe)return se;return-1}function A(J){if(!te(J)||(ae=J,I&&I in ae))return!1;var ae,be=function(xe){var se=te(xe)?E.call(xe):"";return se==_||se==f}(J)||function(xe){var se=!1;if(xe!=null&&typeof xe.toString!="function")try{se=!!(xe+"")}catch{}return se}(J)?c:o;return be.test(function(xe){if(xe!=null){try{return T.call(xe)}catch{}try{return xe+""}catch{}}return""}(J))}function j(J,ae){var be,xe,se=J.__data__;return((xe=typeof(be=ae))=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?be!=="__proto__":be===null)?se[typeof ae=="string"?"string":"hash"]:se.map}function G(J,ae){var be=function(xe,se){return xe==null?void 0:xe[se]}(J,ae);return A(be)?be:void 0}function de(J,ae){if(typeof J!="function"||ae&&typeof ae!="function")throw new TypeError("Expected a function");var be=function(){var xe=arguments,se=ae?ae.apply(this,xe):xe[0],ze=be.cache;if(ze.has(se))return ze.get(se);var Ie=J.apply(this,xe);return be.cache=ze.set(se,Ie),Ie};return be.cache=new(de.Cache||M),be}function te(J){var ae=typeof J;return!!J&&(ae=="object"||ae=="function")}O.prototype.clear=function(){this.__data__=P?P(null):{}},O.prototype.delete=function(J){return this.has(J)&&delete this.__data__[J]},O.prototype.get=function(J){var ae=this.__data__;if(P){var be=ae[J];return be===g?void 0:be}return C.call(ae,J)?ae[J]:void 0},O.prototype.has=function(J){var ae=this.__data__;return P?ae[J]!==void 0:C.call(ae,J)},O.prototype.set=function(J,ae){return this.__data__[J]=P&&ae===void 0?g:ae,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(J){var ae=this.__data__,be=L(ae,J);return!(be<0)&&(be==ae.length-1?ae.pop():b.call(ae,be,1),!0)},N.prototype.get=function(J){var ae=this.__data__,be=L(ae,J);return be<0?void 0:ae[be][1]},N.prototype.has=function(J){return L(this.__data__,J)>-1},N.prototype.set=function(J,ae){var be=this.__data__,xe=L(be,J);return xe<0?be.push([J,ae]):be[xe][1]=ae,this},M.prototype.clear=function(){this.__data__={hash:new O,map:new(R||N),string:new O}},M.prototype.delete=function(J){return j(this,J).delete(J)},M.prototype.get=function(J){return j(this,J).get(J)},M.prototype.has=function(J){return j(this,J).has(J)},M.prototype.set=function(J,ae){return j(this,J).set(J,ae),this},de.Cache=M,p.exports=de},7800:(p,u,i)=>{i.d(u,{A:()=>_});var g=i(3145);function _(f,o){if(f){if(typeof f=="string")return(0,g.A)(f,o);var w={}.toString.call(f).slice(8,-1);return w==="Object"&&f.constructor&&(w=f.constructor.name),w==="Map"||w==="Set"?Array.from(f):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?(0,g.A)(f,o):void 0}}},7833:(p,u,i)=>{u.formatArgs=function(_){if(_[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+_[0]+(this.useColors?"%c ":" ")+"+"+p.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;_.splice(1,0,f,"color: inherit");let o=0,w=0;_[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(o++,l==="%c"&&(w=o))}),_.splice(w,0,f)},u.save=function(_){try{_?u.storage.setItem("debug",_):u.storage.removeItem("debug")}catch{}},u.load=function(){let _;try{_=u.storage.getItem("debug")||u.storage.getItem("DEBUG")}catch{}return!_&&typeof process<"u"&&"env"in process&&(_=r.DEBUG),_},u.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let _;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(_=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(_[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},u.storage=function(){try{return localStorage}catch{}}(),u.destroy=(()=>{let _=!1;return()=>{_||(_=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],u.log=console.debug||console.log||(()=>{}),p.exports=i(736)(u);const{formatters:g}=p.exports;g.j=function(_){try{return JSON.stringify(_)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}},8046:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.validateRtpCapabilities=function(c){if(typeof c!="object")throw new TypeError("caps is not an object");if(c.codecs&&!Array.isArray(c.codecs))throw new TypeError("caps.codecs is not an array");c.codecs||(c.codecs=[]);for(const b of c.codecs)y(b);if(c.headerExtensions&&!Array.isArray(c.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");c.headerExtensions||(c.headerExtensions=[]);for(const b of c.headerExtensions)m(b)},u.validateRtpParameters=l,u.validateSctpStreamParameters=function(c){if(typeof c!="object")throw new TypeError("params is not an object");if(typeof c.streamId!="number")throw new TypeError("missing params.streamId");let b=!1;if(typeof c.ordered=="boolean"?b=!0:c.ordered=!0,c.maxPacketLifeTime&&typeof c.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(c.maxRetransmits&&typeof c.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(c.maxPacketLifeTime&&c.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(b&&c.ordered&&(c.maxPacketLifeTime||c.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(b||!c.maxPacketLifeTime&&!c.maxRetransmits||(c.ordered=!1),c.label&&typeof c.label!="string")throw new TypeError("invalid params.label");if(c.protocol&&typeof c.protocol!="string")throw new TypeError("invalid params.protocol")},u.validateSctpCapabilities=function(c){if(typeof c!="object")throw new TypeError("caps is not an object");if(!c.numStreams||typeof c.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(b){if(typeof b!="object")throw new TypeError("numStreams is not an object");if(typeof b.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof b.MIS!="number")throw new TypeError("missing numStreams.MIS")})(c.numStreams)},u.getExtendedRtpCapabilities=function(c,b){const R={codecs:[],headerExtensions:[]};for(const P of b.codecs??[]){if(I(P))continue;const O=(c.codecs??[]).find(M=>T(M,P,{strict:!0,modify:!0}));if(!O)continue;const N={mimeType:O.mimeType,kind:O.kind,clockRate:O.clockRate,channels:O.channels,localPayloadType:O.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:P.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:O.parameters,remoteParameters:P.parameters,rtcpFeedback:E(O,P)};R.codecs.push(N)}for(const P of R.codecs){const O=c.codecs.find(M=>I(M)&&M.parameters.apt===P.localPayloadType),N=b.codecs.find(M=>I(M)&&M.parameters.apt===P.remotePayloadType);O&&N&&(P.localRtxPayloadType=O.preferredPayloadType,P.remoteRtxPayloadType=N.preferredPayloadType)}for(const P of b.headerExtensions){const O=c.headerExtensions.find(M=>C(M,P));if(!O)continue;const N={kind:P.kind,uri:P.uri,sendId:O.preferredId,recvId:P.preferredId,encrypt:O.preferredEncrypt,direction:"sendrecv"};switch(P.direction){case"sendrecv":N.direction="sendrecv";break;case"recvonly":N.direction="sendonly";break;case"sendonly":N.direction="recvonly";break;case"inactive":N.direction="inactive"}R.headerExtensions.push(N)}return R},u.getRecvRtpCapabilities=function(c){const b={codecs:[],headerExtensions:[]};for(const R of c.codecs){const P={mimeType:R.mimeType,kind:R.kind,preferredPayloadType:R.remotePayloadType,clockRate:R.clockRate,channels:R.channels,parameters:R.localParameters,rtcpFeedback:R.rtcpFeedback};if(b.codecs.push(P),!R.remoteRtxPayloadType)continue;const O={mimeType:`${R.kind}/rtx`,kind:R.kind,preferredPayloadType:R.remoteRtxPayloadType,clockRate:R.clockRate,parameters:{apt:R.remotePayloadType},rtcpFeedback:[]};b.codecs.push(O)}for(const R of c.headerExtensions){if(R.direction!=="sendrecv"&&R.direction!=="recvonly")continue;const P={kind:R.kind,uri:R.uri,preferredId:R.recvId,preferredEncrypt:R.encrypt,direction:R.direction};b.headerExtensions.push(P)}return b},u.getSendingRtpParameters=function(c,b){const R={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of b.codecs){if(P.kind!==c)continue;const O={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.localParameters,rtcpFeedback:P.rtcpFeedback};if(R.codecs.push(O),P.localRtxPayloadType){const N={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};R.codecs.push(N)}}for(const P of b.headerExtensions){if(P.kind&&P.kind!==c||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const O={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};R.headerExtensions.push(O)}return R},u.getSendingRemoteRtpParameters=function(c,b){const R={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of b.codecs){if(P.kind!==c)continue;const O={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.remoteParameters,rtcpFeedback:P.rtcpFeedback};if(R.codecs.push(O),P.localRtxPayloadType){const N={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};R.codecs.push(N)}}for(const P of b.headerExtensions){if(P.kind&&P.kind!==c||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const O={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};R.headerExtensions.push(O)}if(R.headerExtensions.some(P=>P.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(O=>O.type!=="goog-remb");else if(R.headerExtensions.some(P=>P.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(O=>O.type!=="transport-cc");else for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(O=>O.type!=="transport-cc"&&O.type!=="goog-remb");return R},u.reduceCodecs=function(c,b){const R=[];if(b){for(let P=0;P<c.length;++P)if(T(c[P],b,{strict:!0})){R.push(c[P]),I(c[P+1])&&R.push(c[P+1]);break}if(R.length===0)throw new TypeError("no matching codec found")}else R.push(c[0]),I(c[1])&&R.push(c[1]);return R},u.generateProbatorRtpParameters=function(c){l(c=_.clone(c));const b={mid:f,codecs:[],headerExtensions:[],encodings:[{ssrc:o}],rtcp:{cname:"probator"}};return b.codecs.push(c.codecs[0]),b.codecs[0].payloadType=w,b.headerExtensions=c.headerExtensions,b},u.canSend=function(c,b){return b.codecs.some(R=>R.kind===c)},u.canReceive=function(c,b){if(l(c),c.codecs.length===0)return!1;const R=c.codecs[0];return b.codecs.some(P=>P.remotePayloadType===R.payloadType)};const g=i(3200),_=i(1765),f="probator",o=1234,w=127;function l(c){if(typeof c!="object")throw new TypeError("params is not an object");if(c.mid&&typeof c.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(c.codecs))throw new TypeError("missing params.codecs");for(const b of c.codecs)S(b);if(c.headerExtensions&&!Array.isArray(c.headerExtensions))throw new TypeError("params.headerExtensions is not an array");c.headerExtensions||(c.headerExtensions=[]);for(const b of c.headerExtensions)x(b);if(c.encodings&&!Array.isArray(c.encodings))throw new TypeError("params.encodings is not an array");c.encodings||(c.encodings=[]);for(const b of c.encodings)k(b);if(c.rtcp&&typeof c.rtcp!="object")throw new TypeError("params.rtcp is not an object");c.rtcp||(c.rtcp={}),function(b){if(typeof b!="object")throw new TypeError("rtcp is not an object");if(b.cname&&typeof b.cname!="string")throw new TypeError("invalid rtcp.cname");b.reducedSize&&typeof b.reducedSize=="boolean"||(b.reducedSize=!0)}(c.rtcp)}function y(c){const b=new RegExp("^(audio|video)/(.+)","i");if(typeof c!="object")throw new TypeError("codec is not an object");if(!c.mimeType||typeof c.mimeType!="string")throw new TypeError("missing codec.mimeType");const R=b.exec(c.mimeType);if(!R)throw new TypeError("invalid codec.mimeType");if(c.kind=R[1].toLowerCase(),c.preferredPayloadType&&typeof c.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof c.clockRate!="number")throw new TypeError("missing codec.clockRate");c.kind==="audio"?typeof c.channels!="number"&&(c.channels=1):delete c.channels,c.parameters&&typeof c.parameters=="object"||(c.parameters={});for(const P of Object.keys(c.parameters)){let O=c.parameters[P];if(O===void 0&&(c.parameters[P]="",O=""),typeof O!="string"&&typeof O!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${O}]`);if(P==="apt"&&typeof O!="number")throw new TypeError("invalid codec apt parameter")}c.rtcpFeedback&&Array.isArray(c.rtcpFeedback)||(c.rtcpFeedback=[]);for(const P of c.rtcpFeedback)d(P)}function d(c){if(typeof c!="object")throw new TypeError("fb is not an object");if(!c.type||typeof c.type!="string")throw new TypeError("missing fb.type");c.parameter&&typeof c.parameter=="string"||(c.parameter="")}function m(c){if(typeof c!="object")throw new TypeError("ext is not an object");if(c.kind!=="audio"&&c.kind!=="video")throw new TypeError("invalid ext.kind");if(!c.uri||typeof c.uri!="string")throw new TypeError("missing ext.uri");if(typeof c.preferredId!="number")throw new TypeError("missing ext.preferredId");if(c.preferredEncrypt&&typeof c.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(c.preferredEncrypt||(c.preferredEncrypt=!1),c.direction&&typeof c.direction!="string")throw new TypeError("invalid ext.direction");c.direction||(c.direction="sendrecv")}function S(c){const b=new RegExp("^(audio|video)/(.+)","i");if(typeof c!="object")throw new TypeError("codec is not an object");if(!c.mimeType||typeof c.mimeType!="string")throw new TypeError("missing codec.mimeType");const R=b.exec(c.mimeType);if(!R)throw new TypeError("invalid codec.mimeType");if(typeof c.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof c.clockRate!="number")throw new TypeError("missing codec.clockRate");R[1].toLowerCase()==="audio"?typeof c.channels!="number"&&(c.channels=1):delete c.channels,c.parameters&&typeof c.parameters=="object"||(c.parameters={});for(const P of Object.keys(c.parameters)){let O=c.parameters[P];if(O===void 0&&(c.parameters[P]="",O=""),typeof O!="string"&&typeof O!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${O}]`);if(P==="apt"&&typeof O!="number")throw new TypeError("invalid codec apt parameter")}c.rtcpFeedback&&Array.isArray(c.rtcpFeedback)||(c.rtcpFeedback=[]);for(const P of c.rtcpFeedback)d(P)}function x(c){if(typeof c!="object")throw new TypeError("ext is not an object");if(!c.uri||typeof c.uri!="string")throw new TypeError("missing ext.uri");if(typeof c.id!="number")throw new TypeError("missing ext.id");if(c.encrypt&&typeof c.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");c.encrypt||(c.encrypt=!1),c.parameters&&typeof c.parameters=="object"||(c.parameters={});for(const b of Object.keys(c.parameters)){let R=c.parameters[b];if(R===void 0&&(c.parameters[b]="",R=""),typeof R!="string"&&typeof R!="number")throw new TypeError("invalid header extension parameter")}}function k(c){if(typeof c!="object")throw new TypeError("encoding is not an object");if(c.ssrc&&typeof c.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(c.rid&&typeof c.rid!="string")throw new TypeError("invalid encoding.rid");if(c.rtx&&typeof c.rtx!="object")throw new TypeError("invalid encoding.rtx");if(c.rtx&&typeof c.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(c.dtx&&typeof c.dtx=="boolean"||(c.dtx=!1),c.scalabilityMode&&typeof c.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function I(c){return!!c&&/.+\/rtx$/i.test(c.mimeType)}function T(c,b,{strict:R=!1,modify:P=!1}={}){const O=c.mimeType.toLowerCase();if(O!==b.mimeType.toLowerCase()||c.clockRate!==b.clockRate||c.channels!==b.channels)return!1;switch(O){case"video/h264":if(R){if((c.parameters["packetization-mode"]??0)!==(b.parameters["packetization-mode"]??0)||!g.isSameProfile(c.parameters,b.parameters))return!1;let N;try{N=g.generateProfileLevelIdStringForAnswer(c.parameters,b.parameters)}catch{return!1}P&&(N?(c.parameters["profile-level-id"]=N,b.parameters["profile-level-id"]=N):(delete c.parameters["profile-level-id"],delete b.parameters["profile-level-id"]))}break;case"video/vp9":if(R&&(c.parameters["profile-id"]??0)!==(b.parameters["profile-id"]??0))return!1}return!0}function C(c,b){return(!c.kind||!b.kind||c.kind===b.kind)&&c.uri===b.uri}function E(c,b){const R=[];for(const P of c.rtcpFeedback??[]){const O=(b.rtcpFeedback??[]).find(N=>N.type===P.type&&(N.parameter===P.parameter||!N.parameter&&!P.parameter));O&&R.push(O)}return R}},8056:function(p,u,i){var g;p.exports=(g=i(9021),function(){var _=g,f=_.lib,o=f.WordArray,w=f.Hasher,l=_.algo,y=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=o.create([0,1518500249,1859775393,2400959708,2840853838]),k=o.create([1352829926,1548603684,1836072691,2053994217,0]),I=l.RIPEMD160=w.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,O){for(var N=0;N<16;N++){var M=O+N,L=P[M];P[M]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8)}var A,j,G,de,te,J,ae,be,xe,se,ze,Ie=this._hash.words,Ne=x.words,Ee=k.words,Le=y.words,dt=d.words,cr=m.words,gr=S.words;for(J=A=Ie[0],ae=j=Ie[1],be=G=Ie[2],xe=de=Ie[3],se=te=Ie[4],N=0;N<80;N+=1)ze=A+P[O+Le[N]]|0,ze+=N<16?T(j,G,de)+Ne[0]:N<32?C(j,G,de)+Ne[1]:N<48?E(j,G,de)+Ne[2]:N<64?c(j,G,de)+Ne[3]:b(j,G,de)+Ne[4],ze=(ze=R(ze|=0,cr[N]))+te|0,A=te,te=de,de=R(G,10),G=j,j=ze,ze=J+P[O+dt[N]]|0,ze+=N<16?b(ae,be,xe)+Ee[0]:N<32?c(ae,be,xe)+Ee[1]:N<48?E(ae,be,xe)+Ee[2]:N<64?C(ae,be,xe)+Ee[3]:T(ae,be,xe)+Ee[4],ze=(ze=R(ze|=0,gr[N]))+se|0,J=se,se=xe,xe=R(be,10),be=ae,ae=ze;ze=Ie[1]+G+xe|0,Ie[1]=Ie[2]+de+se|0,Ie[2]=Ie[3]+te+J|0,Ie[3]=Ie[4]+A+ae|0,Ie[4]=Ie[0]+j+be|0,Ie[0]=ze},_doFinalize:function(){var P=this._data,O=P.words,N=8*this._nDataBytes,M=8*P.sigBytes;O[M>>>5]|=128<<24-M%32,O[14+(M+64>>>9<<4)]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),P.sigBytes=4*(O.length+1),this._process();for(var L=this._hash,A=L.words,j=0;j<5;j++){var G=A[j];A[j]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}return L},clone:function(){var P=w.clone.call(this);return P._hash=this._hash.clone(),P}});function T(P,O,N){return P^O^N}function C(P,O,N){return P&O|~P&N}function E(P,O,N){return(P|~O)^N}function c(P,O,N){return P&N|O&~N}function b(P,O,N){return P^(O|~N)}function R(P,O){return P<<O|P>>>32-O}_.RIPEMD160=w._createHelper(I),_.HmacRIPEMD160=w._createHmacHelper(I)}(),g.RIPEMD160)},8057:function(p,u,i){var g=this&&this.__createBinding||(Object.create?function(f,o,w,l){l===void 0&&(l=w);var y=Object.getOwnPropertyDescriptor(o,w);y&&!("get"in y?!o.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return o[w]}}),Object.defineProperty(f,l,y)}:function(f,o,w,l){l===void 0&&(l=w),f[l]=o[w]}),_=this&&this.__exportStar||function(f,o){for(var w in f)w==="default"||Object.prototype.hasOwnProperty.call(o,w)||g(o,f,w)};Object.defineProperty(u,"__esModule",{value:!0}),_(i(6004),u),_(i(5601),u),_(i(9792),u),_(i(3518),u),_(i(7504),u),_(i(9166),u),_(i(5370),u),_(i(4160),u),_(i(521),u),_(i(4893),u)},8124:function(p,u,i){var g;p.exports=(g=i(9021),i(7165),g.pad.NoPadding={pad:function(){},unpad:function(){}},g.pad.NoPadding)},8155:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Chrome67=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(4496),y=i(521),d=i(1305),m=new _.Logger("Chrome67"),S={OS:1024,MIS:1024};class x extends y.HandlerInterface{constructor(){super();ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_sendStream",new MediaStream);ye(this,"_mapSendLocalIdRtpSender",new Map);ye(this,"_nextSendLocalId",0);ye(this,"_mapRecvLocalIdInfo",new Map);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new x}get name(){return"Chrome67"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await T.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{T.close()}catch{}const E=g.parse(C.sdp);return w.extractRtpCapabilities({sdpObject:E})}catch(C){try{T.close()}catch{}throw C}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:T,iceParameters:C,iceCandidates:E,dtlsParameters:c,sctpParameters:b,iceServers:R,iceTransportPolicy:P,additionalSettings:O,proprietaryConstraints:N,extendedRtpCapabilities:M}){m.debug("run()"),this._direction=T,this._remoteSdp=new d.RemoteSdp({iceParameters:C,iceCandidates:E,dtlsParameters:c,sctpParameters:b,planB:!0}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",M),video:o.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",M),video:o.getSendingRemoteRtpParameters("video",M)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:R??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...O},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){m.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=T,this._pc.setConfiguration(C)}async restartIce(T){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const E={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const E=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",E),await this._pc.setLocalDescription(E)}}async getTransportStats(){return this._pc.getStats()}async send({track:T,encodings:C,codecOptions:E,codec:c}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),c&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(T),this._pc.addTrack(T,this._sendStream);let b,R=await this._pc.createOffer(),P=g.parse(R.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const O=f.clone(this._sendingRtpParametersByKind[T.kind]);O.codecs=o.reduceCodecs(O.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[T.kind]);if(N.codecs=o.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),T.kind==="video"&&C&&C.length>1&&(m.debug("send() | enabling simulcast"),P=g.parse(R.sdp),b=P.media.find(j=>j.type==="video"),l.addLegacySimulcast({offerMediaObject:b,track:T,numStreams:C.length}),R={type:"offer",sdp:g.write(P)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R),P=g.parse(this._pc.localDescription.sdp),b=P.media.find(j=>j.type===T.kind),O.rtcp.cname=w.getCname({offerMediaObject:b}),O.encodings=l.getRtpEncodings({offerMediaObject:b,track:T}),C)for(let j=0;j<O.encodings.length;++j)C[j]&&Object.assign(O.encodings[j],C[j]);if(O.encodings.length>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const j of O.encodings)j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:b,offerRtpParameters:O,answerRtpParameters:N,codecOptions:E});const M={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const A=this._pc.getSenders().find(j=>j.track===T);return this._mapSendLocalIdRtpSender.set(L,A),{localId:L,rtpParameters:O,rtpSender:A}}async stopSending(T){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",T);const C=this._mapSendLocalIdRtpSender.get(T);if(!C)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(C),C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(T);const E=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",E);try{await this._pc.setLocalDescription(E)}catch(b){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",b.toString());throw b}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,C){this.assertSendDirection(),C?m.debug("replaceTrack() [localId:%s, track.id:%s]",T,C.id):m.debug("replaceTrack() [localId:%s, no track]",T);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.track;await E.replaceTrack(C),c&&this._sendStream.removeTrack(c),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(T,C){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,C);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.getParameters();c.encodings.forEach((b,R)=>{b.active=R<=C}),await E.setParameters(c)}async setRtpEncodingParameters(T,C){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,C);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.getParameters();c.encodings.forEach((b,R)=>{c.encodings[R]={...b,...C}}),await E.setParameters(c)}async getSenderStats(T){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(T);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:C,maxRetransmits:E,label:c,protocol:b}){this.assertSendDirection();const R={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:C,maxRetransmitTime:C,maxRetransmits:E,protocol:b};m.debug("sendDataChannel() [options:%o]",R);const P=this._pc.createDataChannel(c,R);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),N=g.parse(O.sdp),M=N.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const L={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:R.id,ordered:R.ordered,maxPacketLifeTime:R.maxPacketLifeTime,maxRetransmits:R.maxRetransmits}}}async receive(T){this.assertRecvDirection();const C=[];for(const R of T){const{trackId:P,kind:O,rtpParameters:N,streamId:M}=R;m.debug("receive() [trackId:%s, kind:%s]",P,O);const L=O;this._remoteSdp.receive({mid:L,kind:O,offerRtpParameters:N,streamId:M??N.rtcp.cname,trackId:P})}const E={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);let c=await this._pc.createAnswer();const b=g.parse(c.sdp);for(const R of T){const{kind:P,rtpParameters:O}=R,N=P,M=b.media.find(L=>String(L.mid)===N);w.applyCodecParameters({offerRtpParameters:O,answerMediaObject:M})}c={type:"answer",sdp:g.write(b)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:b}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const R of T){const{kind:P,trackId:O,rtpParameters:N}=R,M=O,L=P,A=this._pc.getReceivers().find(j=>j.track&&j.track.id===M);if(!A)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(M,{mid:L,rtpParameters:N,rtpReceiver:A}),C.push({localId:M,track:A.track,rtpReceiver:A})}return C}async stopReceiving(T){this.assertRecvDirection();for(const c of T){m.debug("stopReceiving() [localId:%s]",c);const{mid:b,rtpParameters:R}=this._mapRecvLocalIdInfo.get(c)??{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:b,offerRtpParameters:R})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const E=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",E),await this._pc.setLocalDescription(E)}async pauseReceiving(T){}async resumeReceiving(T){}async getReceiverStats(T){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(T)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:C,protocol:E}){this.assertRecvDirection();const{streamId:c,ordered:b,maxPacketLifeTime:R,maxRetransmits:P}=T,O={negotiated:!0,id:c,ordered:b,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:P,protocol:E};m.debug("receiveDataChannel() [options:%o]",O);const N=this._pc.createDataChannel(C,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const L=await this._pc.createAnswer();if(!this._transportReady){const A=g.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:T,localSdpObject:C}){C||(C=g.parse(this._pc.localDescription.sdp));const E=w.extractDtlsParameters({sdpObject:C});E.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((c,b)=>{this.safeEmit("@connect",{dtlsParameters:E},c,b)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Chrome67=x},8274:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Logger=void 0;const g=i(7833),_="awaitqueue";u.Logger=class{constructor(f){ye(this,"_debug");ye(this,"_warn");ye(this,"_error");f?(this._debug=g(`${_}:${f}`),this._warn=g(`${_}:WARN:${f}`),this._error=g(`${_}:ERROR:${f}`)):(this._debug=g(_),this._warn=g(`${_}:WARN`),this._error=g(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(p,u,i)=>{i.d(u,{Ag:()=>o,Wm:()=>w,sn:()=>l,tr:()=>d});var g=i(467),_=i(4756),f=i.n(_);i(1806);function o(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||w()}function w(){return window.RTCRtpScriptTransform!==void 0}function l(S){return y.apply(this,arguments)}function y(){return(y=(0,g.A)(f().mark(function S(x){var k,I;return f().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return k=new TextEncoder,T.next=3,crypto.subtle.importKey("raw",k.encode(x),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 3:return I=T.sent,T.abrupt("return",I);case 5:case"end":return T.stop()}},S)}))).apply(this,arguments)}function d(S){return m.apply(this,arguments)}function m(){return(m=(0,g.A)(f().mark(function S(x){var k;return f().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,crypto.subtle.importKey("raw",x,"HKDF",!1,["deriveBits","deriveKey"]);case 2:return k=I.sent,I.abrupt("return",k);case 4:case"end":return I.stop()}},S)}))).apply(this,arguments)}},8286:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(3779),_=i(2291),f=i(6011);u.default=function(o,w,l){var d;if(g.default.randomUUID&&!w&&!o)return g.default.randomUUID();const y=(o=o||{}).random??((d=o.rng)==null?void 0:d.call(o))??(0,_.default)();if(y.length<16)throw new Error("Random bytes length must be >= 16");if(y[6]=15&y[6]|64,y[8]=63&y[8]|128,w){if((l=l||0)<0||l+16>w.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);for(let m=0;m<16;++m)w[l+m]=y[m];return w}return(0,f.unsafeStringify)(y)}},8454:function(p,u,i){var g,_;p.exports=(_=i(9021),i(7165),_.mode.ECB=((g=_.lib.BlockCipherMode.extend()).Encryptor=g.extend({processBlock:function(f,o){this._cipher.encryptBlock(f,o)}}),g.Decryptor=g.extend({processBlock:function(f,o){this._cipher.decryptBlock(f,o)}}),g),_.mode.ECB)},8624:(p,u,i)=>{i.r(u),i.d(u,{DOMException:()=>R,Headers:()=>d,Request:()=>C,Response:()=>c,fetch:()=>P});var g=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||i.g!==void 0&&i.g||{},_={searchParams:"URLSearchParams"in g,iterable:"Symbol"in g&&"iterator"in Symbol,blob:"FileReader"in g&&"Blob"in g&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in g,arrayBuffer:"ArrayBuffer"in g};if(_.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(O){return O&&f.indexOf(Object.prototype.toString.call(O))>-1};function w(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(O)||O==="")throw new TypeError('Invalid character in header field name: "'+O+'"');return O.toLowerCase()}function l(O){return typeof O!="string"&&(O=String(O)),O}function y(O){var N={next:function(){var M=O.shift();return{done:M===void 0,value:M}}};return _.iterable&&(N[Symbol.iterator]=function(){return N}),N}function d(O){this.map={},O instanceof d?O.forEach(function(N,M){this.append(M,N)},this):Array.isArray(O)?O.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(N){this.append(N,O[N])},this)}function m(O){if(!O._noBody)return O.bodyUsed?Promise.reject(new TypeError("Already read")):void(O.bodyUsed=!0)}function S(O){return new Promise(function(N,M){O.onload=function(){N(O.result)},O.onerror=function(){M(O.error)}})}function x(O){var N=new FileReader,M=S(N);return N.readAsArrayBuffer(O),M}function k(O){if(O.slice)return O.slice(0);var N=new Uint8Array(O.byteLength);return N.set(new Uint8Array(O)),N.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(O){var N;this.bodyUsed=this.bodyUsed,this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:_.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:_.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():_.arrayBuffer&&_.blob&&(N=O)&&DataView.prototype.isPrototypeOf(N)?(this._bodyArrayBuffer=k(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||o(O))?this._bodyArrayBuffer=k(O):this._bodyText=O=Object.prototype.toString.call(O):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var O=m(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var O=m(this);return O||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(_.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")},this.text=function(){var O,N,M,L,A,j=m(this);if(j)return j;if(this._bodyBlob)return O=this._bodyBlob,N=new FileReader,M=S(N),L=/charset=([A-Za-z0-9_-]+)/.exec(O.type),A=L?L[1]:"utf-8",N.readAsText(O,A),M;if(this._bodyArrayBuffer)return Promise.resolve(function(G){for(var de=new Uint8Array(G),te=new Array(de.length),J=0;J<de.length;J++)te[J]=String.fromCharCode(de[J]);return te.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(O,N){O=w(O),N=l(N);var M=this.map[O];this.map[O]=M?M+", "+N:N},d.prototype.delete=function(O){delete this.map[w(O)]},d.prototype.get=function(O){return O=w(O),this.has(O)?this.map[O]:null},d.prototype.has=function(O){return this.map.hasOwnProperty(w(O))},d.prototype.set=function(O,N){this.map[w(O)]=l(N)},d.prototype.forEach=function(O,N){for(var M in this.map)this.map.hasOwnProperty(M)&&O.call(N,this.map[M],M,this)},d.prototype.keys=function(){var O=[];return this.forEach(function(N,M){O.push(M)}),y(O)},d.prototype.values=function(){var O=[];return this.forEach(function(N){O.push(N)}),y(O)},d.prototype.entries=function(){var O=[];return this.forEach(function(N,M){O.push([M,N])}),y(O)},_.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(O,N){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var M,L,A=(N=N||{}).body;if(O instanceof C){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,N.headers||(this.headers=new d(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,A||O._bodyInit==null||(A=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=N.credentials||this.credentials||"same-origin",!N.headers&&this.headers||(this.headers=new d(N.headers)),this.method=(M=N.method||this.method||"GET",L=M.toUpperCase(),T.indexOf(L)>-1?L:M),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in g)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&A)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(A),!(this.method!=="GET"&&this.method!=="HEAD"||N.cache!=="no-store"&&N.cache!=="no-cache")){var j=/([?&])_=[^&]*/;j.test(this.url)?this.url=this.url.replace(j,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function E(O){var N=new FormData;return O.trim().split("&").forEach(function(M){if(M){var L=M.split("="),A=L.shift().replace(/\+/g," "),j=L.join("=").replace(/\+/g," ");N.append(decodeURIComponent(A),decodeURIComponent(j))}}),N}function c(O,N){if(!(this instanceof c))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new d(N.headers),this.url=N.url||"",this._initBody(O)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},I.call(C.prototype),I.call(c.prototype),c.prototype.clone=function(){return new c(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},c.error=function(){var O=new c(null,{status:200,statusText:""});return O.ok=!1,O.status=0,O.type="error",O};var b=[301,302,303,307,308];c.redirect=function(O,N){if(b.indexOf(N)===-1)throw new RangeError("Invalid status code");return new c(null,{status:N,headers:{location:O}})};var R=g.DOMException;try{new R}catch{(R=function(N,M){this.message=N,this.name=M;var L=Error(N);this.stack=L.stack}).prototype=Object.create(Error.prototype),R.prototype.constructor=R}function P(O,N){return new Promise(function(M,L){var A=new C(O,N);if(A.signal&&A.signal.aborted)return L(new R("Aborted","AbortError"));var j=new XMLHttpRequest;function G(){j.abort()}if(j.onload=function(){var te,J,ae={statusText:j.statusText,headers:(te=j.getAllResponseHeaders()||"",J=new d,te.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(xe){return xe.indexOf(`
`)===0?xe.substr(1,xe.length):xe}).forEach(function(xe){var se=xe.split(":"),ze=se.shift().trim();if(ze){var Ie=se.join(":").trim();try{J.append(ze,Ie)}catch(Ne){console.warn("Response "+Ne.message)}}}),J)};A.url.indexOf("file://")===0&&(j.status<200||j.status>599)?ae.status=200:ae.status=j.status,ae.url="responseURL"in j?j.responseURL:ae.headers.get("X-Request-URL");var be="response"in j?j.response:j.responseText;setTimeout(function(){M(new c(be,ae))},0)},j.onerror=function(){setTimeout(function(){L(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){L(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){L(new R("Aborted","AbortError"))},0)},j.open(A.method,function(te){try{return te===""&&g.location.href?g.location.href:te}catch{return te}}(A.url),!0),A.credentials==="include"?j.withCredentials=!0:A.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(_.blob?j.responseType="blob":_.arrayBuffer&&(j.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof d||g.Headers&&N.headers instanceof g.Headers)){var de=[];Object.getOwnPropertyNames(N.headers).forEach(function(te){de.push(w(te)),j.setRequestHeader(te,l(N.headers[te]))}),A.headers.forEach(function(te,J){de.indexOf(J)===-1&&j.setRequestHeader(J,te)})}else A.headers.forEach(function(te,J){j.setRequestHeader(J,te)});A.signal&&(A.signal.addEventListener("abort",G),j.onreadystatechange=function(){j.readyState===4&&A.signal.removeEventListener("abort",G)}),j.send(A._bodyInit===void 0?null:A._bodyInit)})}P.polyfill=!0,g.fetch||(g.fetch=P,g.Headers=d,g.Request=C,g.Response=c)},8633:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Edge11=void 0;const g=i(2994),_=i(4893),f=i(1765),o=i(8046),w=i(8751),l=i(521),y=new g.Logger("Edge11");class d extends l.HandlerInterface{constructor(){super();ye(this,"_sendingRtpParametersByKind");ye(this,"_remoteIceParameters");ye(this,"_remoteIceCandidates");ye(this,"_remoteDtlsParameters");ye(this,"_iceGatherer");ye(this,"_iceTransport");ye(this,"_dtlsTransport");ye(this,"_rtpSenders",new Map);ye(this,"_rtpReceivers",new Map);ye(this,"_nextSendLocalId",0);ye(this,"_cname");ye(this,"_transportReady",!1)}static createFactory(){return()=>new d}get name(){return"Edge11"}close(){y.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const x of this._rtpSenders.values())try{x.stop()}catch{}for(const x of this._rtpReceivers.values())try{x.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return y.debug("getNativeRtpCapabilities()"),w.getCapabilities()}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:x,iceParameters:k,iceCandidates:I,dtlsParameters:T,sctpParameters:C,iceServers:E,iceTransportPolicy:c,additionalSettings:b,proprietaryConstraints:R,extendedRtpCapabilities:P}){y.debug("run()"),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",P),video:o.getSendingRtpParameters("video",P)},this._remoteIceParameters=k,this._remoteIceCandidates=I,this._remoteDtlsParameters=T,this._cname=`CNAME-${f.generateRandomNumber()}`,this.setIceGatherer({iceServers:E,iceTransportPolicy:c}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(x){throw new _.UnsupportedError("not supported")}async restartIce(x){if(y.debug("restartIce()"),this._remoteIceParameters=x,this._transportReady){y.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,x,"controlling");for(const k of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(k);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:x,encodings:k,codecOptions:I,codec:T}){y.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),y.debug("send() | calling new RTCRtpSender()");const C=new RTCRtpSender(x,this._dtlsTransport),E=f.clone(this._sendingRtpParametersByKind[x.kind]);E.codecs=o.reduceCodecs(E.codecs,T);const c=E.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));k||(k=[{}]);for(const P of k)P.ssrc=f.generateRandomNumber(),c&&(P.rtx={ssrc:f.generateRandomNumber()});E.encodings=k,E.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const b=w.mangleRtpParameters(E);y.debug("send() | calling rtpSender.send() [params:%o]",b),await C.send(b);const R=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(R,C),{localId:R,rtpParameters:E,rtpSender:C}}async stopSending(x){y.debug("stopSending() [localId:%s]",x);const k=this._rtpSenders.get(x);if(!k)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(x);try{y.debug("stopSending() | calling rtpSender.stop()"),k.stop()}catch(I){throw y.warn("stopSending() | rtpSender.stop() failed:%o",I),I}}async pauseSending(x){}async resumeSending(x){}async replaceTrack(x,k){k?y.debug("replaceTrack() [localId:%s, track.id:%s]",x,k.id):y.debug("replaceTrack() [localId:%s, no track]",x);const I=this._rtpSenders.get(x);if(!I)throw new Error("RTCRtpSender not found");I.setTrack(k)}async setMaxSpatialLayer(x,k){y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,k);const I=this._rtpSenders.get(x);if(!I)throw new Error("RTCRtpSender not found");const T=I.getParameters();T.encodings.forEach((C,E)=>{C.active=E<=k}),await I.setParameters(T)}async setRtpEncodingParameters(x,k){y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,k);const I=this._rtpSenders.get(x);if(!I)throw new Error("RTCRtpSender not found");const T=I.getParameters();T.encodings.forEach((C,E)=>{T.encodings[E]={...C,...k}}),await I.setParameters(T)}async getSenderStats(x){const k=this._rtpSenders.get(x);if(!k)throw new Error("RTCRtpSender not found");return k.getStats()}async sendDataChannel(x){throw new _.UnsupportedError("not implemented")}async receive(x){const k=[];for(const I of x){const{trackId:T,kind:C}=I;y.debug("receive() [trackId:%s, kind:%s]",T,C)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const I of x){const{trackId:T,kind:C,rtpParameters:E}=I;y.debug("receive() | calling new RTCRtpReceiver()");const c=new RTCRtpReceiver(this._dtlsTransport,C);c.addEventListener("error",P=>{y.error('rtpReceiver "error" event [event:%o]',P)});const b=w.mangleRtpParameters(E);y.debug("receive() | calling rtpReceiver.receive() [params:%o]",b),await c.receive(b);const R=T;this._rtpReceivers.set(R,c),k.push({localId:R,track:c.track,rtpReceiver:c})}return k}async stopReceiving(x){for(const k of x){y.debug("stopReceiving() [localId:%s]",k);const I=this._rtpReceivers.get(k);if(!I)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(k);try{y.debug("stopReceiving() | calling rtpReceiver.stop()"),I.stop()}catch(T){y.warn("stopReceiving() | rtpReceiver.stop() failed:%o",T)}}}async pauseReceiving(x){}async resumeReceiving(x){}async getReceiverStats(x){const k=this._rtpReceivers.get(x);if(!k)throw new Error("RTCRtpReceiver not found");return k.getStats()}async receiveDataChannel(x){throw new _.UnsupportedError("not implemented")}setIceGatherer({iceServers:x,iceTransportPolicy:k}){const I=new RTCIceGatherer({iceServers:x??[],gatherPolicy:k??"all"});I.addEventListener("error",T=>{y.error('iceGatherer "error" event [event:%o]',T)});try{I.gather()}catch(T){y.debug("setIceGatherer() | iceGatherer.gather() failed: %s",T.toString())}this._iceGatherer=I}setIceTransport(){const x=new RTCIceTransport(this._iceGatherer);x.addEventListener("statechange",()=>{switch(x.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),x.addEventListener("icestatechange",()=>{switch(x.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),x.addEventListener("candidatepairchange",k=>{y.debug('iceTransport "candidatepairchange" event [pair:%o]',k.pair)}),this._iceTransport=x}setDtlsTransport(){const x=new RTCDtlsTransport(this._iceTransport);x.addEventListener("statechange",()=>{y.debug('dtlsTransport "statechange" event [state:%s]',x.state)}),x.addEventListener("dtlsstatechange",()=>{y.debug('dtlsTransport "dtlsstatechange" event [state:%s]',x.state),x.state==="closed"&&this.emit("@connectionstatechange","closed")}),x.addEventListener("error",k=>{y.error('dtlsTransport "error" event [event:%o]',k)}),this._dtlsTransport=x}async setupTransport({localDtlsRole:x}){y.debug("setupTransport()");const k=this._dtlsTransport.getLocalParameters();k.role=x,await new Promise((I,T)=>{this.safeEmit("@connect",{dtlsParameters:k},I,T)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const I of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(I);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(I=>I.algorithm==="sha-256"||I.algorithm==="sha-384"||I.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}u.Edge11=d},8751:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getCapabilities=function(){const _=RTCRtpReceiver.getCapabilities(),f=g.clone(_);for(const o of f.codecs??[]){if(o.channels=o.numChannels,delete o.numChannels,o.mimeType=o.mimeType??`${o.kind}/${o.name}`,o.parameters){const w=o.parameters;w.apt&&(w.apt=Number(w.apt)),w["packetization-mode"]&&(w["packetization-mode"]=Number(w["packetization-mode"]))}for(const w of o.rtcpFeedback??[])w.parameter||(w.parameter="")}return f},u.mangleRtpParameters=function(_){const f=g.clone(_);f.mid&&(f.muxId=f.mid,delete f.mid);for(const o of f.codecs)o.channels&&(o.numChannels=o.channels,delete o.channels),o.mimeType&&!o.name&&(o.name=o.mimeType.split("/")[1]),delete o.mimeType;return f};const g=i(1765)},8876:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AwaitQueueRemovedTaskError=u.AwaitQueueStoppedError=u.AwaitQueue=void 0;var g=i(9275);Object.defineProperty(u,"AwaitQueue",{enumerable:!0,get:function(){return g.AwaitQueue}});var _=i(4253);Object.defineProperty(u,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return _.AwaitQueueStoppedError}}),Object.defineProperty(u,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return _.AwaitQueueRemovedTaskError}})},9021:function(p,u,i){var g;p.exports=(g=g||function(_,f){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&i.g!==void 0&&i.g.crypto&&(o=i.g.crypto),!o)try{o=i(477)}catch{}var w=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function c(){}return function(b){var R;return c.prototype=b,R=new c,c.prototype=null,R}}(),y={},d=y.lib={},m=d.Base={extend:function(c){var b=l(this);return c&&b.mixIn(c),b.hasOwnProperty("init")&&this.init!==b.init||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}},S=d.WordArray=m.extend({init:function(c,b){c=this.words=c||[],this.sigBytes=b!=f?b:4*c.length},toString:function(c){return(c||k).stringify(this)},concat:function(c){var b=this.words,R=c.words,P=this.sigBytes,O=c.sigBytes;if(this.clamp(),P%4)for(var N=0;N<O;N++){var M=R[N>>>2]>>>24-N%4*8&255;b[P+N>>>2]|=M<<24-(P+N)%4*8}else for(var L=0;L<O;L+=4)b[P+L>>>2]=R[L>>>2];return this.sigBytes+=O,this},clamp:function(){var c=this.words,b=this.sigBytes;c[b>>>2]&=4294967295<<32-b%4*8,c.length=_.ceil(b/4)},clone:function(){var c=m.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var b=[],R=0;R<c;R+=4)b.push(w());return new S.init(b,c)}}),x=y.enc={},k=x.Hex={stringify:function(c){for(var b=c.words,R=c.sigBytes,P=[],O=0;O<R;O++){var N=b[O>>>2]>>>24-O%4*8&255;P.push((N>>>4).toString(16)),P.push((15&N).toString(16))}return P.join("")},parse:function(c){for(var b=c.length,R=[],P=0;P<b;P+=2)R[P>>>3]|=parseInt(c.substr(P,2),16)<<24-P%8*4;return new S.init(R,b/2)}},I=x.Latin1={stringify:function(c){for(var b=c.words,R=c.sigBytes,P=[],O=0;O<R;O++){var N=b[O>>>2]>>>24-O%4*8&255;P.push(String.fromCharCode(N))}return P.join("")},parse:function(c){for(var b=c.length,R=[],P=0;P<b;P++)R[P>>>2]|=(255&c.charCodeAt(P))<<24-P%4*8;return new S.init(R,b)}},T=x.Utf8={stringify:function(c){try{return decodeURIComponent(escape(I.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return I.parse(unescape(encodeURIComponent(c)))}},C=d.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(c){typeof c=="string"&&(c=T.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var b,R=this._data,P=R.words,O=R.sigBytes,N=this.blockSize,M=O/(4*N),L=(M=c?_.ceil(M):_.max((0|M)-this._minBufferSize,0))*N,A=_.min(4*L,O);if(L){for(var j=0;j<L;j+=N)this._doProcessBlock(P,j);b=P.splice(0,L),R.sigBytes-=A}return new S.init(b,A)},clone:function(){var c=m.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),E=(d.Hasher=C.extend({cfg:m.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(b,R){return new c.init(R).finalize(b)}},_createHmacHelper:function(c){return function(b,R){return new E.HMAC.init(c,R).finalize(b)}}}),y.algo={});return y}(Math),g)},9027:(p,u,i)=>{i.d(u,{$:()=>g});var g={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DataConsumer=void 0;const g=i(2994),_=i(3953),f=new g.Logger("DataConsumer");class o extends _.EnhancedEventEmitter{constructor({id:y,dataProducerId:d,dataChannel:m,sctpStreamParameters:S,appData:x}){super();ye(this,"_id");ye(this,"_dataProducerId");ye(this,"_dataChannel");ye(this,"_closed",!1);ye(this,"_sctpStreamParameters");ye(this,"_appData");ye(this,"_observer",new _.EnhancedEventEmitter);f.debug("constructor()"),this._id=y,this._dataProducerId=d,this._dataChannel=m,this._sctpStreamParameters=S,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(y){this._dataChannel.binaryType=y}get appData(){return this._appData}set appData(y){this._appData=y}get observer(){return this._observer}close(){this._closed||(f.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(f.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(f.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",y=>{if(this._closed)return;let{error:d}=y;d||(d=new Error("unknown DataChannel error")),d.errorDetail==="sctp-failure"?f.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",d.sctpCauseCode,d.message):f.error('DataChannel "error" event: %o',d),this.safeEmit("error",d)}),this._dataChannel.addEventListener("close",()=>{this._closed||(f.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",y=>{this._closed||this.safeEmit("message",y.data)})}}u.DataConsumer=o},9275:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AwaitQueue=void 0;const g=i(8274),_=i(4253),f=new g.Logger("AwaitQueue");u.AwaitQueue=class{constructor(){ye(this,"pendingTasks",new Map);ye(this,"nextTaskId",0);ye(this,"stopping",!1);f.debug("constructor()")}get size(){return this.pendingTasks.size}async push(o,w){if(w=w??o.name,f.debug(`push() [name:${w}]`),typeof o!="function")throw new TypeError("given task is not a function");if(w)try{Object.defineProperty(o,"name",{value:w})}catch{}return new Promise((l,y)=>{const d={id:this.nextTaskId++,task:o,name:w,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:m=>{if(d.completed)return;d.completed=!0,this.pendingTasks.delete(d.id),f.debug(`resolving task [name:${d.name}]`),l(m);const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)},reject:m=>{if(!d.completed&&(d.completed=!0,this.pendingTasks.delete(d.id),f.debug(`rejecting task [name:${d.name}]: %s`,String(m)),y(m),!this.stopping)){const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)}}};this.pendingTasks.set(d.id,d),this.pendingTasks.size===1&&this.execute(d)})}stop(){f.debug("stop()"),this.stopping=!0;for(const o of this.pendingTasks.values())f.debug(`stop() | stopping task [name:${o.name}]`),o.reject(new _.AwaitQueueStoppedError);this.stopping=!1}remove(o){f.debug(`remove() [taskIdx:${o}]`);const w=Array.from(this.pendingTasks.values())[o];w?w.reject(new _.AwaitQueueRemovedTaskError):f.debug(`stop() | no task with given idx [taskIdx:${o}]`)}dump(){const o=Date.now();let w=0;return Array.from(this.pendingTasks.values()).map(l=>({idx:w++,task:l.task,name:l.name,enqueuedTime:l.executedAt?l.executedAt-l.enqueuedAt:o-l.enqueuedAt,executionTime:l.executedAt?o-l.executedAt:0}))}async execute(o){if(f.debug(`execute() [name:${o.name}]`),o.executedAt)throw new Error("task already being executed");o.executedAt=Date.now();try{const w=await o.task();o.resolve(w)}catch(w){o.reject(w)}}}},9352:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ReactNative=void 0;const g=i(7363),_=i(2994),f=i(4893),o=i(1765),w=i(8046),l=i(5544),y=i(4496),d=i(521),m=i(1305),S=new _.Logger("ReactNative"),x={OS:1024,MIS:1024};class k extends d.HandlerInterface{constructor(){super();ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_sendStream",new MediaStream);ye(this,"_mapSendLocalIdTrack",new Map);ye(this,"_nextSendLocalId",0);ye(this,"_mapRecvLocalIdInfo",new Map);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new k}get name(){return"ReactNative"}close(){if(S.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const E=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const c=g.parse(E.sdp);return l.extractRtpCapabilities({sdpObject:c})}catch(E){try{C.close()}catch{}throw E}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R,iceServers:P,iceTransportPolicy:O,additionalSettings:N,proprietaryConstraints:M,extendedRtpCapabilities:L}){S.debug("run()"),this._direction=C,this._remoteSdp=new m.RemoteSdp({iceParameters:E,iceCandidates:c,dtlsParameters:b,sctpParameters:R,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",L),video:w.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",L),video:w.getSendingRemoteRtpParameters("video",L)},b.role&&b.role!=="auto"&&(this._forcedLocalDtlsRole=b.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",A=>{this.emit("@icecandidateerror",A)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){S.debug("updateIceServers()");const E=this._pc.getConfiguration();E.iceServers=C,this._pc.setConfiguration(E)}async restartIce(C){if(S.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const E=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",E),await this._pc.setLocalDescription(E);const c={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:E,codecOptions:c,codec:b}){this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),b&&S.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let R,P=await this._pc.createOffer(),O=g.parse(P.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=o.clone(this._sendingRtpParametersByKind[C.kind]);N.codecs=w.reduceCodecs(N.codecs);const M=o.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(M.codecs=w.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),C.kind==="video"&&E&&E.length>1&&(S.debug("send() | enabling simulcast"),O=g.parse(P.sdp),R=O.media.find(j=>j.type==="video"),y.addLegacySimulcast({offerMediaObject:R,track:C,numStreams:E.length}),P={type:"offer",sdp:g.write(O)}),S.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),O=g.parse(this._pc.localDescription.sdp),R=O.media.find(j=>j.type===C.kind),N.rtcp.cname=l.getCname({offerMediaObject:R}),N.encodings=y.getRtpEncodings({offerMediaObject:R,track:C}),E)for(let j=0;j<N.encodings.length;++j)E[j]&&Object.assign(N.encodings[j],E[j]);if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const j of N.encodings)j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:R,offerRtpParameters:N,answerRtpParameters:M,codecOptions:c});const L={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const A=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(A,C),{localId:A,rtpParameters:N}}async stopSending(C){this.assertSendDirection(),S.debug("stopSending() [localId:%s]",C);const E=this._mapSendLocalIdTrack.get(C);if(!E)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(E),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(R){if(this._sendStream.getTracks().length===0)return void S.warn("stopSending() | ignoring expected error due no sending tracks: %s",R.toString());throw R}if(this._pc.signalingState==="stable")return;const b={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,E){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,E){throw new f.UnsupportedError("not implemented")}async setRtpEncodingParameters(C,E){throw new f.UnsupportedError("not implemented")}async getSenderStats(C){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:E,maxRetransmits:c,label:b,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:E,maxRetransmitTime:E,maxRetransmits:c,protocol:R};S.debug("sendDataChannel() [options:%o]",P);const O=this._pc.createDataChannel(b,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),M=g.parse(N.sdp),L=M.media.find(j=>j.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const A={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const E=[],c=new Map;for(const O of C){const{trackId:N,kind:M,rtpParameters:L}=O;S.debug("receive() [trackId:%s, kind:%s]",N,M);const A=M;let j=O.streamId??L.rtcp.cname;S.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),j+=`-hack-${o.generateRandomNumber()}`,c.set(N,j),this._remoteSdp.receive({mid:A,kind:M,offerRtpParameters:L,streamId:j,trackId:N})}const b={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);let R=await this._pc.createAnswer();const P=g.parse(R.sdp);for(const O of C){const{kind:N,rtpParameters:M}=O,L=N,A=P.media.find(j=>String(j.mid)===L);l.applyCodecParameters({offerRtpParameters:M,answerMediaObject:A})}R={type:"answer",sdp:g.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const O of C){const{kind:N,trackId:M,rtpParameters:L}=O,A=M,j=N,G=c.get(M),de=this._pc.getRemoteStreams().find(te=>te.id===G).getTrackById(A);if(!de)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(A,{mid:j,rtpParameters:L}),E.push({localId:A,track:de})}return E}async stopReceiving(C){this.assertRecvDirection();for(const b of C){S.debug("stopReceiving() [localId:%s]",b);const{mid:R,rtpParameters:P}=this._mapRecvLocalIdInfo.get(b)??{};this._mapRecvLocalIdInfo.delete(b),this._remoteSdp.planBStopReceiving({mid:R,offerRtpParameters:P})}const E={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);const c=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:E,protocol:c}){this.assertRecvDirection();const{streamId:b,ordered:R,maxPacketLifeTime:P,maxRetransmits:O}=C,N={negotiated:!0,id:b,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:O,protocol:c};S.debug("receiveDataChannel() [options:%o]",N);const M=this._pc.createDataChannel(E,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const A=await this._pc.createAnswer();if(!this._transportReady){const j=g.parse(A.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setLocalDescription(A),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:C,localSdpObject:E}){E||(E=g.parse(this._pc.localDescription.sdp));const c=l.extractDtlsParameters({sdpObject:E});c.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((b,R)=>{this.safeEmit("@connect",{dtlsParameters:c},b,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.ReactNative=k},9506:function(p,u,i){var g,_,f,o,w,l,y,d;p.exports=(d=i(9021),i(5471),i(1025),_=(g=d).lib,f=_.Base,o=_.WordArray,w=g.algo,l=w.MD5,y=w.EvpKDF=f.extend({cfg:f.extend({keySize:4,hasher:l,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,S){for(var x,k=this.cfg,I=k.hasher.create(),T=o.create(),C=T.words,E=k.keySize,c=k.iterations;C.length<E;){x&&I.update(x),x=I.update(m).finalize(S),I.reset();for(var b=1;b<c;b++)x=I.finalize(x),I.reset();T.concat(x)}return T.sigBytes=4*E,T}}),g.EvpKDF=function(m,S,x){return y.create(x).compute(m,S)},d.EvpKDF)},9557:function(p,u,i){var g,_,f,o,w,l,y,d;p.exports=(d=i(9021),i(3240),i(1380),_=(g=d).x64,f=_.Word,o=_.WordArray,w=g.algo,l=w.SHA512,y=w.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new f.init(3418070365,3238371032),new f.init(1654270250,914150663),new f.init(2438529370,812702999),new f.init(355462360,4144912697),new f.init(1731405415,4290775857),new f.init(2394180231,1750603025),new f.init(3675008525,1694076839),new f.init(1203062813,3204075428)])},_doFinalize:function(){var m=l._doFinalize.call(this);return m.sigBytes-=16,m}}),g.SHA384=l._createHelper(y),g.HmacSHA384=l._createHmacHelper(y),d.SHA384)},9596:p=>{var u,i=typeof Reflect=="object"?Reflect:null,g=i&&typeof i.apply=="function"?i.apply:function(T,C,E){return Function.prototype.apply.call(T,C,E)};u=i&&typeof i.ownKeys=="function"?i.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var _=Number.isNaN||function(T){return T!=T};function f(){f.init.call(this)}p.exports=f,p.exports.once=function(T,C){return new Promise(function(E,c){function b(P){T.removeListener(C,R),c(P)}function R(){typeof T.removeListener=="function"&&T.removeListener("error",b),E([].slice.call(arguments))}I(T,C,R,{once:!0}),C!=="error"&&function(P,O,N){typeof P.on=="function"&&I(P,"error",O,N)}(T,b,{once:!0})})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var o=10;function w(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function l(T){return T._maxListeners===void 0?f.defaultMaxListeners:T._maxListeners}function y(T,C,E,c){var b,R,P,O;if(w(E),(R=T._events)===void 0?(R=T._events=Object.create(null),T._eventsCount=0):(R.newListener!==void 0&&(T.emit("newListener",C,E.listener?E.listener:E),R=T._events),P=R[C]),P===void 0)P=R[C]=E,++T._eventsCount;else if(typeof P=="function"?P=R[C]=c?[E,P]:[P,E]:c?P.unshift(E):P.push(E),(b=l(T))>0&&P.length>b&&!P.warned){P.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=T,N.type=C,N.count=P.length,O=N,console&&console.warn&&console.warn(O)}return T}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(T,C,E){var c={fired:!1,wrapFn:void 0,target:T,type:C,listener:E},b=d.bind(c);return b.listener=E,c.wrapFn=b,b}function S(T,C,E){var c=T._events;if(c===void 0)return[];var b=c[C];return b===void 0?[]:typeof b=="function"?E?[b.listener||b]:[b]:E?function(R){for(var P=new Array(R.length),O=0;O<P.length;++O)P[O]=R[O].listener||R[O];return P}(b):k(b,b.length)}function x(T){var C=this._events;if(C!==void 0){var E=C[T];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}function k(T,C){for(var E=new Array(C),c=0;c<C;++c)E[c]=T[c];return E}function I(T,C,E,c){if(typeof T.on=="function")c.once?T.once(C,E):T.on(C,E);else{if(typeof T.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(C,function b(R){c.once&&T.removeEventListener(C,b),E(R)})}}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||_(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),f.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||_(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},f.prototype.getMaxListeners=function(){return l(this)},f.prototype.emit=function(T){for(var C=[],E=1;E<arguments.length;E++)C.push(arguments[E]);var c=T==="error",b=this._events;if(b!==void 0)c=c&&b.error===void 0;else if(!c)return!1;if(c){var R;if(C.length>0&&(R=C[0]),R instanceof Error)throw R;var P=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw P.context=R,P}var O=b[T];if(O===void 0)return!1;if(typeof O=="function")g(O,this,C);else{var N=O.length,M=k(O,N);for(E=0;E<N;++E)g(M[E],this,C)}return!0},f.prototype.addListener=function(T,C){return y(this,T,C,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(T,C){return y(this,T,C,!0)},f.prototype.once=function(T,C){return w(C),this.on(T,m(this,T,C)),this},f.prototype.prependOnceListener=function(T,C){return w(C),this.prependListener(T,m(this,T,C)),this},f.prototype.removeListener=function(T,C){var E,c,b,R,P;if(w(C),(c=this._events)===void 0)return this;if((E=c[T])===void 0)return this;if(E===C||E.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete c[T],c.removeListener&&this.emit("removeListener",T,E.listener||C));else if(typeof E!="function"){for(b=-1,R=E.length-1;R>=0;R--)if(E[R]===C||E[R].listener===C){P=E[R].listener,b=R;break}if(b<0)return this;b===0?E.shift():function(O,N){for(;N+1<O.length;N++)O[N]=O[N+1];O.pop()}(E,b),E.length===1&&(c[T]=E[0]),c.removeListener!==void 0&&this.emit("removeListener",T,P||C)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(T){var C,E,c;if((E=this._events)===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[T]),this;if(arguments.length===0){var b,R=Object.keys(E);for(c=0;c<R.length;++c)(b=R[c])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=E[T])=="function")this.removeListener(T,C);else if(C!==void 0)for(c=C.length-1;c>=0;c--)this.removeListener(T,C[c]);return this},f.prototype.listeners=function(T){return S(this,T,!0)},f.prototype.rawListeners=function(T){return S(this,T,!1)},f.listenerCount=function(T,C){return typeof T.listenerCount=="function"?T.listenerCount(C):x.call(T,C)},f.prototype.listenerCount=x,f.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]}},9633:(p,u,i)=>{i.d(u,{l:()=>C});var g=i(467),_=i(3029),f=i(2901),o=i(388),w=i(3954),l=i(5501),y=i(4756),d=i.n(y),m=i(7007),S=i(1806),x=i(6746),k=i(8278);function I(E,c,b){return c=(0,w.A)(c),(0,o.A)(E,T()?Reflect.construct(c,b||[],(0,w.A)(E).constructor):c.apply(E,b))}function T(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!E})()}var C=function(E){function c(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,_.A)(this,c),I(this,c,[Object.assign(Object.assign({},R),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,l.A)(c,E),(0,f.A)(c,[{key:"setSharedKey",value:(b=(0,g.A)(d().mark(function R(P){var O;return d().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(typeof P!="string"){N.next=6;break}return N.next=3,(0,k.sn)(P);case 3:N.t0=N.sent,N.next=9;break;case 6:return N.next=8,(0,k.tr)(P);case 8:N.t0=N.sent;case 9:O=N.t0,this.onSetEncryptionKey(O);case 11:case"end":return N.stop()}},R,this)})),function(R){return b.apply(this,arguments)})}]);var b}(function(E){function c(){var b,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,_.A)(this,c),(b=I(this,c)).onKeyRatcheted=function(P,O){console.debug("key ratcheted event received",{material:P,keyIndex:O})},b.keyInfoMap=new Map,b.options=Object.assign(Object.assign({},S.T4),R),b.on(x.fo.KeyRatcheted,b.onKeyRatcheted),b}return(0,l.A)(c,E),(0,f.A)(c,[{key:"onSetEncryptionKey",value:function(b,R,P){var O={key:b,participantIdentity:R,keyIndex:P};if(!this.options.sharedKey&&!R)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(R??"shared","-").concat(P??0),O),this.emit(x.fo.SetKey,O)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(b,R){this.emit(x.fo.RatchetRequest,b,R)}}])}(m.EventEmitter))},9676:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Safari11=void 0;const g=i(7363),_=i(2994),f=i(1765),o=i(8046),w=i(5544),l=i(4496),y=i(521),d=i(1305),m=new _.Logger("Safari11"),S={OS:1024,MIS:1024};class x extends y.HandlerInterface{constructor(){super();ye(this,"_direction");ye(this,"_remoteSdp");ye(this,"_sendingRtpParametersByKind");ye(this,"_sendingRemoteRtpParametersByKind");ye(this,"_forcedLocalDtlsRole");ye(this,"_pc");ye(this,"_sendStream",new MediaStream);ye(this,"_mapSendLocalIdRtpSender",new Map);ye(this,"_nextSendLocalId",0);ye(this,"_mapRecvLocalIdInfo",new Map);ye(this,"_hasDataChannelMediaSection",!1);ye(this,"_nextSendSctpStreamId",0);ye(this,"_transportReady",!1)}static createFactory(){return()=>new x}get name(){return"Safari11"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await T.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{T.close()}catch{}const E=g.parse(C.sdp);return w.extractRtpCapabilities({sdpObject:E})}catch(C){try{T.close()}catch{}throw C}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:T,iceParameters:C,iceCandidates:E,dtlsParameters:c,sctpParameters:b,iceServers:R,iceTransportPolicy:P,additionalSettings:O,proprietaryConstraints:N,extendedRtpCapabilities:M}){m.debug("run()"),this._direction=T,this._remoteSdp=new d.RemoteSdp({iceParameters:C,iceCandidates:E,dtlsParameters:c,sctpParameters:b,planB:!0}),this._sendingRtpParametersByKind={audio:o.getSendingRtpParameters("audio",M),video:o.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:o.getSendingRemoteRtpParameters("audio",M),video:o.getSendingRemoteRtpParameters("video",M)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:R??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...O},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){m.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=T,this._pc.setConfiguration(C)}async restartIce(T){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const E={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const E=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",E),await this._pc.setLocalDescription(E)}}async getTransportStats(){return this._pc.getStats()}async send({track:T,encodings:C,codecOptions:E,codec:c}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),c&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(T),this._pc.addTrack(T,this._sendStream);let b,R=await this._pc.createOffer(),P=g.parse(R.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const O=f.clone(this._sendingRtpParametersByKind[T.kind]);O.codecs=o.reduceCodecs(O.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[T.kind]);if(N.codecs=o.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),T.kind==="video"&&C&&C.length>1&&(m.debug("send() | enabling simulcast"),P=g.parse(R.sdp),b=P.media.find(j=>j.type==="video"),l.addLegacySimulcast({offerMediaObject:b,track:T,numStreams:C.length}),R={type:"offer",sdp:g.write(P)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R),P=g.parse(this._pc.localDescription.sdp),b=P.media.find(j=>j.type===T.kind),O.rtcp.cname=w.getCname({offerMediaObject:b}),O.encodings=l.getRtpEncodings({offerMediaObject:b,track:T}),C)for(let j=0;j<O.encodings.length;++j)C[j]&&Object.assign(O.encodings[j],C[j]);if(O.encodings.length>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const j of O.encodings)j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:b,offerRtpParameters:O,answerRtpParameters:N,codecOptions:E});const M={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const A=this._pc.getSenders().find(j=>j.track===T);return this._mapSendLocalIdRtpSender.set(L,A),{localId:L,rtpParameters:O,rtpSender:A}}async stopSending(T){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(T);if(!C)throw new Error("associated RTCRtpSender not found");C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(T);const E=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",E);try{await this._pc.setLocalDescription(E)}catch(b){if(this._sendStream.getTracks().length===0)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",b.toString());throw b}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,C){this.assertSendDirection(),C?m.debug("replaceTrack() [localId:%s, track.id:%s]",T,C.id):m.debug("replaceTrack() [localId:%s, no track]",T);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.track;await E.replaceTrack(C),c&&this._sendStream.removeTrack(c),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(T,C){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,C);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.getParameters();c.encodings.forEach((b,R)=>{b.active=R<=C}),await E.setParameters(c)}async setRtpEncodingParameters(T,C){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,C);const E=this._mapSendLocalIdRtpSender.get(T);if(!E)throw new Error("associated RTCRtpSender not found");const c=E.getParameters();c.encodings.forEach((b,R)=>{c.encodings[R]={...b,...C}}),await E.setParameters(c)}async getSenderStats(T){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(T);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:C,maxRetransmits:E,label:c,protocol:b}){this.assertSendDirection();const R={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:C,maxRetransmits:E,protocol:b};m.debug("sendDataChannel() [options:%o]",R);const P=this._pc.createDataChannel(c,R);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),N=g.parse(O.sdp),M=N.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const L={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:R.id,ordered:R.ordered,maxPacketLifeTime:R.maxPacketLifeTime,maxRetransmits:R.maxRetransmits}}}async receive(T){this.assertRecvDirection();const C=[];for(const R of T){const{trackId:P,kind:O,rtpParameters:N,streamId:M}=R;m.debug("receive() [trackId:%s, kind:%s]",P,O);const L=O;this._remoteSdp.receive({mid:L,kind:O,offerRtpParameters:N,streamId:M??N.rtcp.cname,trackId:P})}const E={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",E),await this._pc.setRemoteDescription(E);let c=await this._pc.createAnswer();const b=g.parse(c.sdp);for(const R of T){const{kind:P,rtpParameters:O}=R,N=P,M=b.media.find(L=>String(L.mid)===N);w.applyCodecParameters({offerRtpParameters:O,answerMediaObject:M})}c={type:"answer",sdp:g.write(b)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:b}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const R of T){const{kind:P,trackId:O,rtpParameters:N}=R,M=P,L=O,A=this._pc.getReceivers().find(j=>j.track&&j.track.id===L);if(!A)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(L,{mid:M,rtpParameters:N,rtpReceiver:A}),C.push({localId:L,track:A.track,rtpReceiver:A})}return C}async stopReceiving(T){this.assertRecvDirection();for(const c of T){m.debug("stopReceiving() [localId:%s]",c);const{mid:b,rtpParameters:R}=this._mapRecvLocalIdInfo.get(c)??{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:b,offerRtpParameters:R})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const E=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",E),await this._pc.setLocalDescription(E)}async getReceiverStats(T){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(T)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async pauseReceiving(T){}async resumeReceiving(T){}async receiveDataChannel({sctpStreamParameters:T,label:C,protocol:E}){this.assertRecvDirection();const{streamId:c,ordered:b,maxPacketLifeTime:R,maxRetransmits:P}=T,O={negotiated:!0,id:c,ordered:b,maxPacketLifeTime:R,maxRetransmits:P,protocol:E};m.debug("receiveDataChannel() [options:%o]",O);const N=this._pc.createDataChannel(C,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const L=await this._pc.createAnswer();if(!this._transportReady){const A=g.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:A})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:T,localSdpObject:C}){C||(C=g.parse(this._pc.localDescription.sdp));const E=w.extractDtlsParameters({sdpObject:C});E.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((c,b)=>{this.safeEmit("@connect",{dtlsParameters:E},c,b)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}u.Safari11=x},9746:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});const g=i(6697);u.default=function(_){return typeof _=="string"&&g.default.test(_)}},9792:(p,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Producer=void 0;const g=i(2994),_=i(3953),f=i(4893),o=new g.Logger("Producer");class w extends _.EnhancedEventEmitter{constructor({id:d,localId:m,rtpSender:S,track:x,rtpParameters:k,stopTracks:I,disableTrackOnPause:T,zeroRtpOnPause:C,appData:E}){super();ye(this,"_id");ye(this,"_localId");ye(this,"_closed",!1);ye(this,"_rtpSender");ye(this,"_track");ye(this,"_kind");ye(this,"_rtpParameters");ye(this,"_paused");ye(this,"_maxSpatialLayer");ye(this,"_stopTracks");ye(this,"_disableTrackOnPause");ye(this,"_zeroRtpOnPause");ye(this,"_appData");ye(this,"_observer",new _.EnhancedEventEmitter);o.debug("constructor()"),this._id=d,this._localId=m,this._rtpSender=S,this._track=x,this._kind=x.kind,this._rtpParameters=k,this._paused=!!T&&!x.enabled,this._maxSpatialLayer=void 0,this._stopTracks=I,this._disableTrackOnPause=T,this._zeroRtpOnPause=C,this._appData=E??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(d){this._appData=d}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new f.InvalidStateError("closed");return new Promise((d,m)=>{this.safeEmit("@getstats",d,m)})}pause(){o.debug("pause()"),this._closed?o.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((d,m)=>{this.safeEmit("@pause",d,m)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((d,m)=>{this.safeEmit("@resume",d,m)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:d}){if(o.debug("replaceTrack() [track:%o]",d),this._closed){if(d&&this._stopTracks)try{d.stop()}catch{}throw new f.InvalidStateError("closed")}if(d&&d.readyState==="ended")throw new f.InvalidStateError("track ended");d!==this._track?(await new Promise((m,S)=>{this.safeEmit("@replacetrack",d,m,S)}),this.destroyTrack(),this._track=d,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):o.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(d){if(this._closed)throw new f.InvalidStateError("closed");if(this._kind!=="video")throw new f.UnsupportedError("not a video Producer");if(typeof d!="number")throw new TypeError("invalid spatialLayer");d!==this._maxSpatialLayer&&(await new Promise((m,S)=>{this.safeEmit("@setmaxspatiallayer",d,m,S)}).catch(()=>{}),this._maxSpatialLayer=d)}async setRtpEncodingParameters(d){if(this._closed)throw new f.InvalidStateError("closed");if(typeof d!="object")throw new TypeError("invalid params");await new Promise((m,S)=>{this.safeEmit("@setrtpencodingparameters",d,m,S)})}onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}u.Producer=w}},s={};function a(p){var u=s[p];if(u!==void 0)return u.exports;var i=s[p]={exports:{}};return n[p].call(i.exports,i,i.exports,a),i.exports}a.amdO={},a.n=p=>{var u=p&&p.__esModule?()=>p.default:()=>p;return a.d(u,{a:u}),u},a.d=(p,u)=>{for(var i in u)a.o(u,i)&&!a.o(p,i)&&Object.defineProperty(p,i,{enumerable:!0,get:u[i]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(p,u)=>Object.prototype.hasOwnProperty.call(p,u),a.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var h={};return(()=>{a.r(h),a.d(h,{CameraDeviceInfo:()=>qu,DeviceInfo:()=>Pc,ExternalE2EEKeyProvider:()=>Xa.l,MicrophoneDeviceInfo:()=>kl,VideoSDK:()=>fs,ZujoSDK:()=>da});var p=a(2284),u=a(467),i=a(3029),g=a(2901),_=a(4467),f=a(4756),o=a.n(f),w=a(6880),l=a.n(w);function y(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function d(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?y(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):y(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}function m(B){return"Minified Redux error #"+B+"; visit https://redux.js.org/Errors?code="+B+" for the full message or use the non-minified dev environment for full errors. "}var S=typeof Symbol=="function"&&Symbol.observable||"@@observable",x=function(){return Math.random().toString(36).substring(7).split("").join(".")},k={INIT:"@@redux/INIT"+x(),REPLACE:"@@redux/REPLACE"+x(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+x()}};function I(B){if(typeof B!="object"||B===null)return!1;for(var U=B;Object.getPrototypeOf(U)!==null;)U=Object.getPrototypeOf(U);return Object.getPrototypeOf(B)===U}function T(B,U,V){var Z;if(typeof U=="function"&&typeof V=="function"||typeof V=="function"&&typeof arguments[3]=="function")throw new Error(m(0));if(typeof U=="function"&&V===void 0&&(V=U,U=void 0),V!==void 0){if(typeof V!="function")throw new Error(m(1));return V(T)(B,U)}if(typeof B!="function")throw new Error(m(2));var ce=B,ne=U,he=[],ge=he,ve=!1;function Re(){ge===he&&(ge=he.slice())}function Pe(){if(ve)throw new Error(m(3));return ne}function oe(me){if(typeof me!="function")throw new Error(m(4));if(ve)throw new Error(m(5));var Q=!0;return Re(),ge.push(me),function(){if(Q){if(ve)throw new Error(m(6));Q=!1,Re();var X=ge.indexOf(me);ge.splice(X,1),he=null}}}function _e(me){if(!I(me))throw new Error(m(7));if(me.type===void 0)throw new Error(m(8));if(ve)throw new Error(m(9));try{ve=!0,ne=ce(ne,me)}finally{ve=!1}for(var Q=he=ge,X=0;X<Q.length;X++)(0,Q[X])();return me}return _e({type:k.INIT}),(Z={dispatch:_e,subscribe:oe,getState:Pe,replaceReducer:function(me){if(typeof me!="function")throw new Error(m(10));ce=me,_e({type:k.REPLACE})}})[S]=function(){var me,Q=oe;return(me={subscribe:function(X){if(typeof X!="object"||X===null)throw new Error(m(11));function ue(){X.next&&X.next(Pe())}return ue(),{unsubscribe:Q(ue)}}})[S]=function(){return this},me},Z}function C(){for(var B=arguments.length,U=new Array(B),V=0;V<B;V++)U[V]=arguments[V];return U.length===0?function(Z){return Z}:U.length===1?U[0]:U.reduce(function(Z,ce){return function(){return Z(ce.apply(void 0,arguments))}})}function E(){for(var B=arguments.length,U=new Array(B),V=0;V<B;V++)U[V]=arguments[V];return function(Z){return function(){var ce=Z.apply(void 0,arguments),ne=function(){throw new Error(m(15))},he={getState:ce.getState,dispatch:function(){return ne.apply(void 0,arguments)}},ge=U.map(function(ve){return ve(he)});return ne=C.apply(void 0,ge)(ce.dispatch),d(d({},ce),{},{dispatch:ne})}}}function c(B){return function(U){var V=U.dispatch,Z=U.getState;return function(ce){return function(ne){return typeof ne=="function"?ne(V,Z,B):ce(ne)}}}}var b=c();b.withExtraArgument=c;const R=b;var P=a(2211),O=a.n(P);function N(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function M(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?N(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):N(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var L={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const A=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_URL":var V=U.payload.url;return M(M({},B),{},{url:V});case"SET_ROOM_STATE":var Z=U.payload.state;return M(M({},B),{},Z==="connected"?{state:Z}:{state:Z,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var ce=U.payload.peerId;return M(M({},B),{},{activeSpeakerId:ce});case"SET_ROOM_STATS_PEER_ID":var ne=U.payload.peerId;return B.statsPeerId===ne?M(M({},B),{},{statsPeerId:null}):M(M({},B),{},{statsPeerId:ne});case"SET_FACE_DETECTION":var he=U.payload;return M(M({},B),{},{faceDetection:he});case"REMOVE_PEER":var ge=U.payload.peerId,ve=M({},B);return ge&&ge===B.activeSpeakerId&&(ve.activeSpeakerId=null),ge&&ge===B.statsPeerId&&(ve.statsPeerId=null),ve;default:return B}};function j(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function G(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?j(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):j(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var de={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const te=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?G(G({},B),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):B;case"SET_ME":var V=U.payload,Z=V.peerId,ce=V.displayName,ne=V.displayNameSet,he=V.device;return G(G({},B),{},{id:Z,displayName:ce,displayNameSet:ne,device:he});case"SET_MEDIA_CAPABILITIES":var ge=U.payload,ve=ge.canSendMic,Re=ge.canSendWebcam;return G(G({},B),{},{canSendMic:ve,canSendWebcam:Re});case"SET_CAN_CHANGE_WEBCAM":var Pe=U.payload;return G(G({},B),{},{canChangeWebcam:Pe});case"SET_WEBCAM_IN_PROGRESS":var oe=U.payload.flag;return G(G({},B),{},{webcamInProgress:oe});case"SET_SHARE_IN_PROGRESS":var _e=U.payload.flag;return G(G({},B),{},{shareInProgress:_e});case"SET_DISPLAY_NAME":var me=U.payload.displayName;return me||(me=B.displayName),G(G({},B),{},{displayName:me,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var Q=U.payload.enabled;return G(G({},B),{},{audioOnly:Q});case"SET_AUDIO_ONLY_IN_PROGRESS":var X=U.payload.flag;return G(G({},B),{},{audioOnlyInProgress:X});case"SET_AUDIO_MUTED_STATE":var ue=U.payload.enabled;return G(G({},B),{},{audioMuted:ue});case"SET_RESTART_ICE_IN_PROGRESS":var Oe=U.payload.flag;return G(G({},B),{},{restartIceInProgress:Oe});default:return B}};function J(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function ae(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?J(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):J(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var be={};const xe=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:B;case"ADD_PRODUCER":var V=U.payload.producer;return ae(ae({},B),{},(0,_.A)({},V.id,V));case"REMOVE_PRODUCER":var Z=U.payload.producerId,ce=ae({},B);return delete ce[Z],ce;case"SET_PRODUCER_PAUSED":var ne=U.payload.producerId,he=ae(ae({},B[ne]),{},{paused:!0});return ae(ae({},B),{},(0,_.A)({},ne,he));case"SET_PRODUCER_RESUMED":var ge=U.payload.producerId,ve=ae(ae({},B[ge]),{},{paused:!1});return ae(ae({},B),{},(0,_.A)({},ge,ve));case"SET_PRODUCER_TRACK":var Re=U.payload,Pe=Re.producerId,oe=Re.track,_e=ae(ae({},B[Pe]),{},{track:oe});return ae(ae({},B),{},(0,_.A)({},Pe,_e));case"SET_PRODUCER_SCORE":var me=U.payload,Q=me.producerId,X=me.score,ue=B[Q];if(!ue)return B;var Oe=ae(ae({},ue),{},{score:X});return ae(ae({},B),{},(0,_.A)({},Q,Oe));default:return B}};function se(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function ze(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?se(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):se(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var Ie={};const Ne=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:B;case"ADD_DATA_PRODUCER":var V=U.payload.dataProducer;return ze(ze({},B),{},(0,_.A)({},V.id,V));case"REMOVE_DATA_PRODUCER":var Z=U.payload.dataProducerId,ce=ze({},B);return delete ce[Z],ce;default:return B}};var Ee=a(5458);function Le(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function dt(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?Le(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):Le(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var cr={};function gr(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function Ot(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?gr(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):gr(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var xr={};function vr(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function Bt(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?vr(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):vr(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}var Qr={},Nt=[];const Kt=function(B){for(var U=Object.keys(B),V={},Z=0;Z<U.length;Z++){var ce=U[Z];typeof B[ce]=="function"&&(V[ce]=B[ce])}var ne,he=Object.keys(V);try{(function(ge){Object.keys(ge).forEach(function(ve){var Re=ge[ve];if(Re(void 0,{type:k.INIT})===void 0)throw new Error(m(12));if(Re(void 0,{type:k.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(m(13))})})(V)}catch(ge){ne=ge}return function(ge,ve){if(ge===void 0&&(ge={}),ne)throw ne;for(var Re=!1,Pe={},oe=0;oe<he.length;oe++){var _e=he[oe],me=V[_e],Q=ge[_e],X=me(Q,ve);if(X===void 0)throw ve&&ve.type,new Error(m(14));Pe[_e]=X,Re=Re||X!==Q}return(Re=Re||he.length!==Object.keys(ge).length)?Pe:ge}}({room:A,me:te,producers:xe,dataProducers:Ne,peers:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cr,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:B;case"ADD_PEER":var V=U.payload.peer;return dt(dt({},B),{},(0,_.A)({},V.id,V));case"REMOVE_PEER":var Z=U.payload.peerId,ce=dt({},B);return delete ce[Z],ce;case"SET_PEER_DISPLAY_NAME":var ne=U.payload,he=ne.displayName,ge=B[ne.peerId];if(!ge)throw new Error("no Peer found");var ve=dt(dt({},ge),{},{displayName:he});return dt(dt({},B),{},(0,_.A)({},ve.id,ve));case"ADD_CONSUMER":var Re=U.payload,Pe=Re.consumer,oe=B[Re.peerId];if(!oe)return dt({},B);var _e=[].concat((0,Ee.A)(oe.consumers),[Pe.id]),me=dt(dt({},oe),{},{consumers:_e});return dt(dt({},B),{},(0,_.A)({},me.id,me));case"REMOVE_CONSUMER":var Q=U.payload,X=Q.consumerId,ue=B[Q.peerId];if(!ue)return B;var Oe=ue.consumers.indexOf(X);if(Oe===-1)return dt({},B);var De=ue.consumers.slice();De.splice(Oe,1);var bt=dt(dt({},ue),{},{consumers:De});return dt(dt({},B),{},(0,_.A)({},bt.id,bt));case"ADD_DATA_CONSUMER":var ut=U.payload,Ze=ut.dataConsumer,qt=ut.peerId;if(!qt)return B;var Be=B[qt];if(!Be)return dt({},B);var we=[].concat((0,Ee.A)(Be.dataConsumers),[Ze.id]),Qe=dt(dt({},Be),{},{dataConsumers:we});return dt(dt({},B),{},(0,_.A)({},Qe.id,Qe));case"REMOVE_DATA_CONSUMER":var Ve=U.payload,$t=Ve.dataConsumerId,dr=Ve.peerId;if(!dr)return B;var Pt=B[dr];if(!Pt)return B;var Ur=Pt.dataConsumers.indexOf($t);if(Ur===-1)return dt({},B);var yn=Pt.dataConsumers.slice();yn.splice(Ur,1);var Gr=dt(dt({},Pt),{},{dataConsumers:yn});return dt(dt({},B),{},(0,_.A)({},Gr.id,Gr));default:return B}},consumers:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xr,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:B;case"ADD_CONSUMER":var V=U.payload.consumer;return Ot(Ot({},B),{},(0,_.A)({},V.id,V));case"REMOVE_CONSUMER":var Z=U.payload.consumerId,ce=Ot({},B);return delete ce[Z],ce;case"SET_CONSUMER_PAUSED":var ne,he=U.payload,ge=he.consumerId,ve=he.originator,Re=B[ge];return ne=Ot(Ot({},Re),{},ve==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),Ot(Ot({},B),{},(0,_.A)({},ge,ne));case"SET_CONSUMER_RESUMED":var Pe,oe=U.payload,_e=oe.consumerId,me=oe.originator,Q=B[_e];return Pe=Ot(Ot({},Q),{},me==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),Ot(Ot({},B),{},(0,_.A)({},_e,Pe));case"SET_CONSUMER_CURRENT_LAYERS":var X=U.payload,ue=X.consumerId,Oe=X.spatialLayer,De=X.temporalLayer,bt=Ot(Ot({},B[ue]),{},{currentSpatialLayer:Oe,currentTemporalLayer:De});return Ot(Ot({},B),{},(0,_.A)({},ue,bt));case"SET_CONSUMER_PREFERRED_LAYERS":var ut=U.payload,Ze=ut.consumerId,qt=ut.spatialLayer,Be=ut.temporalLayer,we=Ot(Ot({},B[Ze]),{},{preferredSpatialLayer:qt,preferredTemporalLayer:Be});return Ot(Ot({},B),{},(0,_.A)({},Ze,we));case"SET_CONSUMER_PRIORITY":var Qe=U.payload,Ve=Qe.consumerId,$t=Qe.priority,dr=Ot(Ot({},B[Ve]),{},{priority:$t});return Ot(Ot({},B),{},(0,_.A)({},Ve,dr));case"SET_CONSUMER_TRACK":var Pt=U.payload,Ur=Pt.consumerId,yn=Pt.track,Gr=Ot(Ot({},B[Ur]),{},{track:yn});return Ot(Ot({},B),{},(0,_.A)({},Ur,Gr));case"SET_CONSUMER_SCORE":var bs=U.payload,en=bs.consumerId,ms=bs.score,Lo=B[en];if(!Lo)return B;var qc=Ot(Ot({},Lo),{},{score:ms});return Ot(Ot({},B),{},(0,_.A)({},en,qc));default:return B}},dataConsumers:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qr,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:B;case"ADD_DATA_CONSUMER":var V=U.payload.dataConsumer;return Bt(Bt({},B),{},(0,_.A)({},V.id,V));case"REMOVE_DATA_CONSUMER":var Z=U.payload.dataConsumerId,ce=Bt({},B);return delete ce[Z],ce;default:return B}},notifications:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"ADD_NOTIFICATION":var V=U.payload.notification;return[].concat((0,Ee.A)(B),[V]);case"REMOVE_NOTIFICATION":var Z=U.payload.notificationId;return B.filter(function(ce){return ce.id!==Z});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return B}}});var Wr=a(1919),tn=a(7007),Nr=a(296),Vr=(a(1919).default,(0,g.A)(function B(){(0,i.A)(this,B),this.roomClient=null})),rn=new(function(){function B(){(0,i.A)(this,B),B.instance||(B.instance=new Vr)}return(0,g.A)(B,[{key:"getInstance",value:function(){return B.instance}}])}());Object.freeze(rn);var It=rn.getInstance(),nn=function(){return(0,g.A)(function B(U){(0,i.A)(this,B),(0,_.A)(this,"pausedBy",void 0),this.id=U.id,this.kind=U.track.kind,this.codec=U.codec,this.track=U.track,this.producerOrConsumer=U.instance,U.appData&&U.appData.share===!0&&U.track.kind==="video"&&(this.kind="share"),U.appData&&U.appData.share===!0&&U.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=U.rtpSender,this.rtpReceiver=U.rtpReceiver},[{key:"pause",value:function(){It.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){It.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}])}(),Jr=a(1803);function Fr(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function Ar(B,U){var V=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!V){if(Array.isArray(B)||(V=function(ve,Re){if(ve){if(typeof ve=="string")return hn(ve,Re);var Pe={}.toString.call(ve).slice(8,-1);return Pe==="Object"&&ve.constructor&&(Pe=ve.constructor.name),Pe==="Map"||Pe==="Set"?Array.from(ve):Pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pe)?hn(ve,Re):void 0}}(B))||U){V&&(B=V);var Z=0,ce=function(){};return{s:ce,n:function(){return Z>=B.length?{done:!0}:{done:!1,value:B[Z++]}},e:function(ve){throw ve},f:ce}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,he=!0,ge=!1;return{s:function(){V=V.call(B)},n:function(){var ve=V.next();return he=ve.done,ve},e:function(ve){ge=!0,ne=ve},f:function(){try{he||V.return==null||V.return()}finally{if(ge)throw ne}}}}function hn(B,U){(U==null||U>B.length)&&(U=B.length);for(var V=0,Z=Array(U);V<U;V++)Z[V]=B[V];return Z}var Hr="stream-enabled",wn="stream-disabled",fn="media-status-changed",Tn="video-quality-changed",Sn="stream-paused",Ft="stream-resumed",Pn="producer-added",Gn="producer-removed",sn="consumer-added",er="consumer-removed",Ge="e2ee-state-change",Me=function(){return(0,g.A)(function ne(he){var ge=this;(0,i.A)(this,ne),(0,_.A)(this,"captureImage",(0,u.A)(o().mark(function ve(){var Re,Pe,oe,_e,me,Q,X,ue,Oe=arguments;return o().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:Pe=(Re=Oe.length>0&&Oe[0]!==void 0?Oe[0]:{}).height,oe=Re.width,De.prev=1,_e=(0,Ee.A)(ge.streams.values()),me=Ar(_e),De.prev=4,X=o().mark(function bt(){var ut,Ze,qt,Be,we;return o().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if((ut=Q.value).kind!="video"){Qe.next=19;break}return Qe.prev=2,(Ze=new MediaStream).addTrack(ut.track),(qt=document.createElement("video")).srcObject=Ze,qt.playsInline=!0,(Be=document.createElement("canvas")).id="canvasId",Qe.next=12,new Promise(function(Ve,$t){qt.addEventListener("loadeddata",(0,u.A)(o().mark(function dr(){var Pt,Ur,yn,Gr,bs,en;return o().wrap(function(ms){for(;;)switch(ms.prev=ms.next){case 0:return Pt=qt.videoWidth,Ur=qt.videoHeight,yn=16/9,Pe==null&&oe==null&&(Pe=Ur,oe=Pt),Pe==null&&Pe==null||(Pe<=0||Pe>Ur)&&(Pe=Ur),oe==null&&oe==null||(oe<=0||oe>Pt)&&(oe=Pt),Pe==null&&(Pe=oe/yn),oe==null&&(oe=Pe*yn),Be.width=oe,Be.height=Pe,ms.prev=9,ms.next=12,qt.play();case 12:document.body.appendChild(qt),Gr=(Be.width-Pt*yn)/2,bs=(Be.height-Ur*yn)/2,Be.getContext("2d").clearRect(0,0,Gr/2,bs/2),Be.getContext("2d").drawImage(qt,0,0),en=Be.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(Be),document.body.removeChild(Be),document.body.removeChild(qt),Ve(en),ms.next=28;break;case 24:ms.prev=24,ms.t0=ms.catch(9),$t(ms.t0),console.log("error in video",ms.t0);case 28:case"end":return ms.stop()}},dr,null,[[9,24]])})))});case 12:return we=Qe.sent,Qe.abrupt("return",{v:we});case 16:Qe.prev=16,Qe.t0=Qe.catch(2),console.error("err on image capture",Qe.t0);case 19:case"end":return Qe.stop()}},bt,null,[[2,16]])}),me.s();case 7:if((Q=me.n()).done){De.next=14;break}return De.delegateYield(X(),"t0",9);case 9:if(!(ue=De.t0)){De.next=12;break}return De.abrupt("return",ue.v);case 12:De.next=7;break;case 14:De.next=19;break;case 16:De.prev=16,De.t1=De.catch(4),me.e(De.t1);case 19:return De.prev=19,me.f(),De.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:De.prev=25,De.t2=De.catch(1),console.error("Error in captureImage::",De.t2),It.roomClient._videosdkLogs&&It.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:De.t2.message}});case 29:case"end":return De.stop()}},ve,null,[[1,25],[4,16,19,22]])}))),this.id=he.id,this.displayName=he.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=he.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=he.mode,this.metaData=he.metaData,this.eventEmitter=new tn.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(ne){ne.cam!=null&&(this.pinState.cam=ne.cam),ne.share!=null&&(this.pinState.share=ne.share)}},{key:"remove",value:function(){It.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){It.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){It.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){It.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){It.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(ne){if(ne){this.streams.set(ne.id,ne),ne.kind!=="video"||this.local||It.roomClient.setConsumerQuality(ne.id,this.quality);var he=new MediaStream;he.addTrack(ne.track);try{if(["video","share"].includes(ne.kind)){var ge=this.participantVideoElements.get(ne.kind);if(ge){var ve={display:"block",objectFit:ne.kind==="share"?"contain":"cover",width:"100%"};Object.assign(ge.style,ve),ge.srcObject=he,ge.play().catch(function(Pe){console.error("Failed to play ".concat(ne.kind," stream:"),Pe)}),(ne.kind==="share"||ne.kind==="video"&&this.videoVisible)&&ne.resume()}}if((ne.kind==="audio"||ne.kind==="shareAudio")&&!this.local){var Re=this.participantAudioElements.get(ne.kind);Re&&(Re.srcObject=he,Re.play().catch(function(Pe){console.error("Failed to play ".concat(ne.kind," audio:"),Pe)}))}this.eventEmitter.emit(Hr,ne),ne.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Pe){console.error("Error in addStream:",Pe)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(ne){this.streams.set(ne.id,ne),this.eventEmitter.emit(Hr,ne)}},{key:"deleteStream",value:function(ne){var he=this.streams.get(ne);if(he!=null){this.streams.delete(ne);var ge={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[he.kind];if(ge){var ve=ge.collection.get(ge.type);ve&&(ve.style.display="none")}return this.eventEmitter.emit(wn,he),he}}},{key:"streamResumed",value:function(ne){this.streams.get(ne)}},{key:"streamPaused",value:function(ne){this.streams.get(ne)}},{key:"updateParticipantMediaState",value:function(ne,he){ne=="audio"?this.micOn=he:ne=="video"&&(this.webcamOn=he),this.eventEmitter.emit(fn,{peerId:this.id,kind:ne,newStatus:he})}},{key:"handleParticipantPause",value:function(ne){if(ne!=null&&ne.consumerId){var he=this.streams.get(ne.consumerId);he?he.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(Sn,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleParticipantResume",value:function(ne){if(ne!=null&&ne.consumerId){var he=this.streams.get(ne.consumerId);he?he.pausedBy=void 0:console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(Ft,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleE2EEStateChange",value:function(ne){ne==null||delete ne.peerId,this.eventEmitter.emit(Ge,ne)}},{key:"videoQualityChanged",value:function(ne,he){this.eventEmitter.emit(Tn,{peerId:this.id,prevQuality:ne,currentQuality:he})}},{key:"setQuality",value:function(ne){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var he=document.querySelector("#f-".concat(this.id));he&&this.resizeObserver.unobserve(he)}this.quality=ne,(0,Ee.A)(this.streams.entries()).forEach(function(ge){var ve=ge[1];ve.kind==="video"&&It.roomClient.setConsumerQuality(ve.id,ne)})}}},{key:"setScreenShareQuality",value:function(ne){this.local||(this.screenShareQuality=ne,this.streams.forEach(function(he){he.kind==="share"&&It.roomClient.setConsumerScreenShareQuality(he.id,ne)}))}},{key:"setViewPort",value:function(ne,he){(0,Ee.A)(this.streams.entries()).forEach(function(ge){var ve=ge[1];ve.kind==="video"&&It.roomClient.setViewPort(ve.producerOrConsumer,ne,he)})}},{key:"pin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}It.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}It.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(ce=(0,u.A)(o().mark(function ne(he){var ge,ve,Re;return o().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return ge=he.meetingId,ve=he.payload,Re=he.token,Pe.next=3,It.roomClient.switchPeerRoom({peerId:this.id,roomId:ge,payload:ve,token:Re});case 3:case"end":return Pe.stop()}},ne,this)})),function(ne){return ce.apply(this,arguments)})},{key:"getVideoStats",value:(Z=(0,u.A)(o().mark(function ne(){var he,ge,ve,Re,Pe;return o().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!this.local){oe.next=6;break}return oe.next=3,It.roomClient.getVideoRemoteStats();case 3:return oe.abrupt("return",oe.sent);case 6:he=(0,Ee.A)(this.streams.entries()),ge=Ar(he),oe.prev=8,ge.s();case 10:if((ve=ge.n()).done){oe.next=18;break}if(Re=(0,Nr.A)(ve.value,2),Pe=Re[0],Re[1].kind!="video"){oe.next=16;break}return oe.next=15,It.roomClient.getConsumerRemoteStats(Pe);case 15:return oe.abrupt("return",oe.sent);case 16:oe.next=10;break;case 18:oe.next=23;break;case 20:oe.prev=20,oe.t0=oe.catch(8),ge.e(oe.t0);case 23:return oe.prev=23,ge.f(),oe.finish(23);case 26:case"end":return oe.stop()}},ne,this,[[8,20,23,26]])})),function(){return Z.apply(this,arguments)})},{key:"getShareStats",value:(V=(0,u.A)(o().mark(function ne(){var he,ge,ve,Re,Pe;return o().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!this.local){oe.next=6;break}return oe.next=3,It.roomClient.getShareRemoteStats();case 3:return oe.abrupt("return",oe.sent);case 6:he=(0,Ee.A)(this.streams.entries()),ge=Ar(he),oe.prev=8,ge.s();case 10:if((ve=ge.n()).done){oe.next=18;break}if(Re=(0,Nr.A)(ve.value,2),Pe=Re[0],Re[1].kind!="share"){oe.next=16;break}return oe.next=15,It.roomClient.getConsumerRemoteStats(Pe);case 15:return oe.abrupt("return",oe.sent);case 16:oe.next=10;break;case 18:oe.next=23;break;case 20:oe.prev=20,oe.t0=oe.catch(8),ge.e(oe.t0);case 23:return oe.prev=23,ge.f(),oe.finish(23);case 26:case"end":return oe.stop()}},ne,this,[[8,20,23,26]])})),function(){return V.apply(this,arguments)})},{key:"getShareAudioStats",value:(U=(0,u.A)(o().mark(function ne(){var he,ge,ve,Re,Pe;return o().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!this.local){oe.next=6;break}return oe.next=3,It.roomClient.getShareAudioRemoteStats();case 3:return oe.abrupt("return",oe.sent);case 6:he=(0,Ee.A)(this.streams.entries()),ge=Ar(he),oe.prev=8,ge.s();case 10:if((ve=ge.n()).done){oe.next=18;break}if(Re=(0,Nr.A)(ve.value,2),Pe=Re[0],Re[1].kind!="shareAudio"){oe.next=16;break}return oe.next=15,It.roomClient.getConsumerRemoteStats(Pe);case 15:return oe.abrupt("return",oe.sent);case 16:oe.next=10;break;case 18:oe.next=23;break;case 20:oe.prev=20,oe.t0=oe.catch(8),ge.e(oe.t0);case 23:return oe.prev=23,ge.f(),oe.finish(23);case 26:case"end":return oe.stop()}},ne,this,[[8,20,23,26]])})),function(){return U.apply(this,arguments)})},{key:"getAudioStats",value:(B=(0,u.A)(o().mark(function ne(){var he,ge,ve,Re,Pe;return o().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(this.micOn){oe.next=2;break}return oe.abrupt("return",[]);case 2:if(!this.local){oe.next=8;break}return oe.next=5,It.roomClient.getAudioRemoteStats();case 5:return oe.abrupt("return",oe.sent);case 8:he=(0,Ee.A)(this.streams.entries()),ge=Ar(he),oe.prev=10,ge.s();case 12:if((ve=ge.n()).done){oe.next=20;break}if(Re=(0,Nr.A)(ve.value,2),Pe=Re[0],Re[1].kind!="audio"){oe.next=18;break}return oe.next=17,It.roomClient.getConsumerRemoteStats(Pe);case 17:return oe.abrupt("return",oe.sent);case 18:oe.next=12;break;case 20:oe.next=25;break;case 22:oe.prev=22,oe.t0=oe.catch(10),ge.e(oe.t0);case 25:return oe.prev=25,ge.f(),oe.finish(25);case 28:case"end":return oe.stop()}},ne,this,[[10,22,25,28]])})),function(){return B.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){It.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){It.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){It.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){It.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(ne){for(var he,ge=this,ve=ne.type,Re=ve===void 0?"video":ve,Pe=ne.maxQuality,oe=Pe===void 0?"auto":Pe,_e=ne.videostyle,me=_e===void 0?{}:_e,Q=ne.containerStyle,X=Q===void 0?{}:Q,ue=0,Oe=(0,Ee.A)(this.streams.values());ue<Oe.length;ue++){var De=Oe[ue];De.kind==Re&&(he=new MediaStream).addTrack(De.track)}if(this.participantVideoElements.get(Re)){if(he){var bt=this.participantVideoElements.get(Re);bt&&(bt.srcObject=he,bt.play().catch(function(Qe){return console.error("videoElem.play() failed",Qe)}))}return this.participantVideoElements.get(Re)}try{var ut=document.createElement("div");ut.classList.add("video-container","participant-video-".concat(this.id)),ut.setAttribute("id","f-".concat(this.id).concat(Re==="share"?"-share":"")),ut.style.setProperty("position","relative"),Object.assign(ut.style,X);var Ze=document.createElement("video");if(Ze.setAttribute("id","v-".concat(this.id).concat(Re==="share"?"-share":"")),Ze.setAttribute("playsinline",""),Ze.setAttribute("webkit-playsinline",""),Ze.setAttribute("x5-playsinline",""),Ze.playsinline=!0,Ze.muted=!0,Ze.autoplay=!0,Ze.onerror=function(Qe){console.log(Qe,"participant video error")},Object.assign(Ze.style,function(Qe){for(var Ve=1;Ve<arguments.length;Ve++){var $t=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?Fr(Object($t),!0).forEach(function(dr){(0,_.A)(Qe,dr,$t[dr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors($t)):Fr(Object($t)).forEach(function(dr){Object.defineProperty(Qe,dr,Object.getOwnPropertyDescriptor($t,dr))})}return Qe}({width:"100%",height:"100%",objectFit:Re==="share"?"contain":"cover"},me)),he&&(Ze.srcObject=he,Ze.play().then(function(Qe){console.log("videoElem.play() success",Qe)}).catch(function(Qe){return console.error("videoElem.play() failed",Qe)})),ut.appendChild(Ze),this.participantVideoElements.set(Re,Ze),this.videoVisible=!1,!this.local&&Re==="video"){var qt=(0,Jr.sg)(function(Qe){if(Qe.length!=0)if(Qe[Qe.length-1].intersectionRatio>0){ge.videoVisible=!0;for(var Ve=0,$t=(0,Ee.A)(ge.streams.values());Ve<$t.length;Ve++){var dr=$t[Ve];dr.kind=="video"&&dr.pausedBy!=="SUB_MANAGER"&&dr.paused&&dr.resume()}}else{ge.videoVisible=!1;for(var Pt=0,Ur=(0,Ee.A)(ge.streams.values());Pt<Ur.length;Pt++){var yn=Ur[Pt];yn.kind=="video"&&yn.pause()}}},500);if(new IntersectionObserver(qt,{root:null,rootMargin:"0px",threshold:0}).observe(ut),oe=="auto"&&Re==="video"){var Be=(0,Jr.sg)(function(Qe){var Ve=Qe[0].contentRect,$t=Ve.width,dr=Ve.height;$t>0&&dr>0&&(ge.height=dr,ge.width=$t,ge.setViewPort($t,dr))},500),we=new ResizeObserver(Be);we.observe(ut),this.resizeObserver=we}}return Re!=="video"||oe==="auto"||this.local||this.setQuality(oe),ut}catch(Qe){console.log("Render video Exception",Qe)}}},{key:"renderAudio",value:function(ne){var he=ne.type,ge=he===void 0?"audio":he;if(this.local)return null;try{if(this.participantAudioElements.get(ge)){var ve=this.participantAudioElements.get(ge),Re=this.getAudioStream(ge);return Re&&ve&&(ve.srcObject=Re,ve.play().catch(function(_e){return console.error("Failed to play existing audio:",_e)})),ve}var Pe=document.createElement("audio");Pe.setAttribute("id","a-".concat(this.id,"-").concat(ge)),Pe.autoplay=!1,Pe.playsInline=!0,Pe.controls=!1,Pe.style.display="none",Pe.onerror=function(_e){return console.log("Audio element error:",_e)};var oe=this.getAudioStream(ge);return oe&&(Pe.srcObject=oe,Pe.play().catch(function(_e){return console.error("Failed to play new audio:",_e)})),this.participantAudioElements.set(ge,Pe),Pe}catch(_e){return console.error("Render audio exception:",_e),null}}},{key:"getAudioStream",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",he=(0,Ee.A)(this.streams.values()).find(function(ve){return ve.kind===ne});if(he){var ge=new MediaStream;return ge.addTrack(he.track),he.resume(),ge}return null}},{key:"addProducer",value:function(ne){this.eventEmitter.emit(Pn,ne)}},{key:"removeProducer",value:function(ne){this.eventEmitter.emit(Gn,ne)}},{key:"addConsumer",value:function(ne){this.eventEmitter.emit(sn,ne)}},{key:"removeConsumer",value:function(ne){this.eventEmitter.emit(er,ne)}},{key:"on",value:function(ne,he){switch(ne){case Hr:case wn:case fn:case Tn:case Sn:case Ft:case Pn:case Gn:case sn:case er:case Ge:this.eventEmitter.on(ne,he);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(ne,he){switch(ne){case Hr:case wn:case fn:case Tn:case Sn:case Ft:case Pn:case Gn:case sn:case er:case Ge:this.eventEmitter.off(ne,he);break;default:throw new Error("Invalid event type from participant off")}}}]);var B,U,V,Z,ce}(),it=a(388),je=a(3954),ct=a(5501),tr={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},Ae=a(2107);function Gt(){try{var B=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gt=function(){return!!B})()}function jt(B,U,V){hr(B,U),U.set(B,V)}function hr(B,U){if(U.has(B))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ir(B,U){return B.get(Je(B,U))}function Rr(B,U,V){return B.set(Je(B,U),V),V}function Je(B,U,V){if(typeof B=="function"?B===U:B.has(U))return arguments.length<3?U:V;throw new TypeError("Private element is not present on this object")}var Wt="stream-enabled",Ct="stream-disabled",Ut="character-joined",Ir="character-left",Er="media-status-changed",Mr="video-quality-changed",yr="character-state-changed",fr="character-message",zr="user-message",Wn="data",Yn="error",Ns=new WeakMap,As=new WeakMap,Xs=new WeakMap,ia=new WeakMap,Zs=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,wa=new WeakSet,Et=function(B){function U(ve){var Re,Pe,oe,_e;return(0,i.A)(this,U),Pe=this,oe=U,_e=[{id:ve.id,displayName:ve.displayName,mode:Ae.nI.SEND_AND_RECV,metaData:ve.metaData}],oe=(0,je.A)(oe),function(me,Q){hr(me,Q),Q.add(me)}(Re=(0,it.A)(Pe,Gt()?Reflect.construct(oe,_e||[],(0,je.A)(Pe).constructor):oe.apply(Pe,_e)),wa),jt(Re,Ns,void 0),jt(Re,As,void 0),jt(Re,Xs,void 0),jt(Re,ia,void 0),jt(Re,Zs,void 0),jt(Re,Qn,void 0),jt(Re,Jn,void 0),(0,_.A)(Re,"captureImage",(0,u.A)(o().mark(function me(){var Q,X=arguments;return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:throw(Q=X.length>0&&X[0]!==void 0?X[0]:{}).height,Q.width,new Error("captureImage method is not supported on character");case 2:case"end":return ue.stop()}},me)}))),Rr(Zs,Re,ve.interactionId||null),Re.id=ve.id||null,Rr(Ns,Re,ve.characterRole),Rr(As,Re,ve.characterMode),Rr(Xs,Re,ve.knowledgeBases||[]),Re.displayName=ve.displayName,Rr(ia,Re,ve.language),Rr(Qn,Re,ve.state||tr.CHARACTER_LISTENING),Rr(Jn,Re,ve.roomClient),Re}return(0,ct.A)(U,B),(0,g.A)(U,[{key:"join",value:(ge=(0,u.A)(o().mark(function ve(){var Re;return o().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,ir(Jn,this).joinCharacter({interactionId:ir(Zs,this),characterId:this.id,characterRole:ir(Ns,this),displayName:this.displayName,characterMode:ir(As,this),knowledgeBases:ir(Xs,this),language:ir(ia,this),metaData:this.metaData});case 2:(Re=Pe.sent)&&(this.id=Re.characterId,this.displayName=Re.displayName,Rr(As,this,Re.characterMode),Rr(Ns,this,Re.characterRole),Rr(Zs,this,Re.interactionId),Rr(Xs,this,Re.knowledgeBases),Rr(ia,this,Re.language),ir(Jn,this)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return Pe.stop()}},ve,this)})),function(){return ge.apply(this,arguments)})},{key:"leave",value:(he=(0,u.A)(o().mark(function ve(){return o().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,ir(Jn,this).removeCharacter();case 2:case"end":return Re.stop()}},ve,this)})),function(){return he.apply(this,arguments)})},{key:"remove",value:(ne=(0,u.A)(o().mark(function ve(){return o().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Re.stop()}},ve)})),function(){return ne.apply(this,arguments)})},{key:"sendMessage",value:(ce=(0,u.A)(o().mark(function ve(Re){return o().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,ir(Jn,this).sendCharacterMessage({interactionId:ir(Zs,this),text:Re});case 2:case"end":return Pe.stop()}},ve,this)})),function(ve){return ce.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(ve){Object.keys(tr).includes(ve.status)&&(Je(wa,this,Xt).call(this,ve.status),this.eventEmitter.emit(yr,ve))}},{key:"handleCharacterMessage",value:function(ve){this.eventEmitter.emit(fr,ve)}},{key:"interrupt",value:(Z=(0,u.A)(o().mark(function ve(){return o().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,ir(Jn,this).interruptCharacter({interactionId:ir(Zs,this)});case 2:case"end":return Re.stop()}},ve,this)})),function(){return Z.apply(this,arguments)})},{key:"handleUserMessage",value:function(ve){this.eventEmitter.emit(zr,ve)}},{key:"handleCharacterData",value:function(ve){var Re=ve.topic,Pe=ve.data;this.eventEmitter.emit(Wn,Re,Pe)}},{key:"handleCharacterError",value:function(ve){var Re=ve.data;this.eventEmitter.listenerCount(Yn)>0&&this.eventEmitter.emit(Yn,Re)}},{key:"enableMic",value:function(){ir(Jn,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){ir(Jn,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){ir(Jn,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){ir(Jn,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(ve){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(V=(0,u.A)(o().mark(function ve(Re){return o().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:throw Re.meetingId,Re.payload,Re.token,new Error("switchTo method is not supported on character");case 2:case"end":return Pe.stop()}},ve)})),function(ve){return V.apply(this,arguments)})},{key:"pin",value:function(ve){throw new Error("pin method is not supported on character")}},{key:"on",value:function(ve,Re){switch(ve){case Wt:case Ct:case Ut:case Ir:case Er:case Mr:case yr:case fr:case zr:case Wn:case Yn:this.eventEmitter.on(ve,Re);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(ve,Re){switch(ve){case Wt:case Ct:case Ut:case Ir:case Er:case Mr:case yr:case fr:case zr:case Wn:case Yn:this.eventEmitter.off(ve,Re);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return ir(Qn,this)}},{key:"knowledgeBases",get:function(){return ir(Xs,this)}},{key:"characterMode",get:function(){return ir(As,this)}},{key:"characterRole",get:function(){return ir(Ns,this)}},{key:"interactionId",get:function(){return ir(Zs,this)}},{key:"language",get:function(){return ir(ia,this)}}]);var V,Z,ce,ne,he,ge}(Me);function Xt(B){Rr(Qn,this,B)}function Vt(B,U,V){(function(Z,ce){if(ce.has(Z))throw new TypeError("Cannot initialize the same private elements twice on an object")})(B,U),U.set(B,V)}function gn(B,U,V){if(typeof B=="function"?B===U:B.has(U))return arguments.length<3?U:V;throw new TypeError("Private element is not present on this object")}var nr=new WeakMap,mr=function(){return(0,g.A)(function U(V,Z){var ce,ne,he,ge=V.id,ve=V.displayName;(0,i.A)(this,U),Vt(this,nr,void 0),this.id=ge,this.displayName=ve,ne=this,he=Z,(ce=nr).set(gn(ce,ne),he)},[{key:"switchTo",value:(B=(0,u.A)(o().mark(function U(V){var Z,ce,ne;return o().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return Z=V.meetingId,ce=V.payload,ne=V.token,he.next=3,It.roomClient.connectionSwitchPeerRoom({roomId:Z,connectionRoomId:(ge=nr,ve=this,ge.get(gn(ge,ve))),payload:ce,peerId:this.id,token:ne});case 3:case"end":return he.stop()}var ge,ve},U,this)})),function(U){return B.apply(this,arguments)})}]);var B}(),an="participant-joined",Sr="participant-left",_r="chat-message",Xr=function(){return(0,g.A)(function U(V,Z){var ce=this;(0,i.A)(this,U),this.eventEmitter=new tn.EventEmitter,this.id=V,this.participants=new Map,Z.forEach(function(ne){ce.participants.set(ne.id,new mr(ne,ce.id))})},[{key:"participantJoin",value:function(U){var V=new mr(U,this.id);this.participants.set(U.id,V),this.eventEmitter.emit(an,V)}},{key:"participantLeft",value:function(U){this.participants.delete(U),this.eventEmitter.emit(Sr,U)}},{key:"sendChatMessage",value:function(U){It.roomClient.connectionSendChatMessage({roomId:this.id,message:U})}},{key:"sendChatMessageEvent",value:function(U){var V=U.participantId,Z=U.message;this.eventEmitter.emit(_r,{participantId:V,message:Z})}},{key:"end",value:(B=(0,u.A)(o().mark(function U(){return o().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,It.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return V.stop()}},U,this)})),function(){return B.apply(this,arguments)})},{key:"on",value:function(U,V){switch(U){case an:case Sr:case _r:this.eventEmitter.on(U,V);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(U,V){switch(U){case an:case Sr:case _r:this.eventEmitter.off(U,V);break;default:throw new Error("Invalid event type")}}}]);var B}(),ps=function(){return(0,g.A)(function B(U){var V=U.roomId,Z=U.peers,ce=U.payload;(0,i.A)(this,B),this.id=V,this.payload=ce,this.meeting=new Xr(V,Z)},[{key:"close",value:function(){It.roomClient.closeConnection(this.id)}}])}();function xn(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function On(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?xn(Object(V),!0).forEach(function(Z){(0,_.A)(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):xn(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}function Is(B,U){if(U.has(B))throw new TypeError("Cannot initialize the same private elements twice on an object")}function is(B,U){return B.get(Sa(B,U))}function Sa(B,U,V){if(typeof B=="function"?B===U:B.has(U))return arguments.length<3?U:V;throw new TypeError("Private element is not present on this object")}var Ds="error",Ja="meeting-joined",Vs="meeting-left",hi="participant-mode-changed",Ii="participant-joined",co="participant-left",lo="speaker-changed",xa="presenter-changed",uo="main-participant-changed",vc="chat-message",yc="entry-requested",po="entry-responded",ho="recording-state-changed",_c="recording-started",fo="recording-stopped",rr="livestream-state-changed",mo="livestream-started",go="livestream-stopped",Ma="hls-state-changed",lr="hls-started",bc="hls-stopped",vo="whiteboard-started",wc="whiteboard-stopped",Sc="video-state-changed",xc="video-seeked",xs="mic-requested",Rc="webcam-requested",yo="stream-enabled",oa="stream-disabled",Di="pin-state-changed",La="connection-open",_o="connection-close",bo="switch-meeting",Ec="meeting-state-changed",wo="paused-all-streams",Mi="resumed-all-streams",kc="transcription-state-changed",Cc="transcription-text",Li="character-joined",ja="character-left",ji="media-relay-started",So="media-relay-stopped",xo="media-relay-error",fi="media-relay-request-response",St="media-relay-request-received",ee=new WeakMap,at=new WeakSet,sr=function(){return(0,g.A)(function Q(X,ue,Oe){var De,bt,ut,Ze,qt,Be=this;(0,i.A)(this,Q),Is(De=this,bt=at),bt.add(De),function(we,Qe,Ve){Is(we,Qe),Qe.set(we,Ve)}(this,ee,void 0),(0,_.A)(this,"pubSub",{publish:(qt=(0,u.A)(o().mark(function we(Qe,Ve,$t,dr){return o().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(dr==null){Pt.next=3;break}if((0,p.A)(dr)=="object"){Pt.next=3;break}throw new Error('"payload" can only be object.');case 3:return Pt.next=5,Be.roomClient.pubsubPublish(Qe,Ve,$t,dr);case 5:case"end":return Pt.stop()}},we)})),function(we,Qe,Ve,$t){return qt.apply(this,arguments)}),subscribe:(Ze=(0,u.A)(o().mark(function we(Qe,Ve){var $t;return o().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(!is(ee,Be).listeners(Qe).includes(Ve)){dr.next=2;break}return dr.abrupt("return");case 2:return dr.next=4,Be.roomClient.pubsubSubscribe(Qe);case 4:return $t=dr.sent,is(ee,Be).on(Qe,Ve),dr.abrupt("return",$t);case 7:case"end":return dr.stop()}},we)})),function(we,Qe){return Ze.apply(this,arguments)}),unsubscribe:(ut=(0,u.A)(o().mark(function we(Qe,Ve){return o().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:if(is(ee,Be).off(Qe,Ve),is(ee,Be).listeners(Qe).length!=0){$t.next=4;break}return $t.next=4,Be.roomClient.pubsubUnsubscribe(Qe);case 4:case"end":return $t.stop()}},we)})),function(we,Qe){return ut.apply(this,arguments)})}),(0,_.A)(this,"uploadBase64File",function(){var we=(0,u.A)(o().mark(function Qe(Ve){var $t,dr,Pt,Ur,yn,Gr,bs;return o().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:if($t=Ve.base64Data,dr=Ve.token,Pt=Ve.fileName,en.prev=1,$t&&dr&&Pt){en.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Ur="https://".concat(Be.baseUrl,"/base64-upload?roomId=").concat(Be.id),yn={fileName:Pt,base64Data:$t},en.next=8,fetch(Ur,{method:"POST",body:JSON.stringify(yn),headers:{"Content-Type":"application/json",Authorization:dr}});case 8:return Gr=en.sent,en.next=11,Gr.json();case 11:return bs=en.sent,en.abrupt("return",bs.url);case 15:en.prev=15,en.t0=en.catch(1),console.error("Error while Uploading Base64 File::",en.t0),Be.roomClient._videosdkLogs&&Be.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:en.t0.message}});case 19:case"end":return en.stop()}},Qe,null,[[1,15]])}));return function(Qe){return we.apply(this,arguments)}}()),(0,_.A)(this,"fetchBase64File",function(){var we=(0,u.A)(o().mark(function Qe(Ve){var $t,dr,Pt,Ur,yn;return o().wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:if($t=Ve.url,dr=Ve.token,Gr.prev=1,$t&&dr){Gr.next=4;break}throw new Error("please provide url and token");case 4:return Gr.next=6,fetch($t,{headers:{Authorization:dr}});case 6:return Pt=Gr.sent,Gr.next=9,Pt.arrayBuffer();case 9:return Ur=Gr.sent,yn=window.btoa(new Uint8Array(Ur).reduce(function(bs,en){return bs+String.fromCharCode(en)},"")),Gr.abrupt("return",yn);case 14:Gr.prev=14,Gr.t0=Gr.catch(1),console.error("Error while fetching Base64 File::",Gr.t0),Be.roomClient._videosdkLogs&&Be.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:Gr.t0.message}});case 18:case"end":return Gr.stop()}},Qe,null,[[1,14]])}));return function(Qe){return we.apply(this,arguments)}}()),this.id=X,this.roomClient=Oe,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=ue,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new tn.EventEmitter,function(we,Qe,Ve){we.set(Sa(we,Qe),Ve)}(ee,this,new tn.EventEmitter),this.eventEmitter.setMaxListeners(9999),is(ee,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(we){return Be.handleError(we)}),this.roomClient.on("ADD_PEER",function(we){return Be.handlePeerAdd(we)}),this.roomClient.on("REMOVE_PEER",function(we){return Be.handlePeerRemove(we)}),this.roomClient.on("ADD_PRODUCER",function(we){return Be.handleProducerAdd(we)}),this.roomClient.on("UPDATE_PRODUCER",function(we){return Be.handleUpdateProducer(we)}),this.roomClient.on("REMOVE_PRODUCER",function(we){return Be.handleProducerRemove(we)}),this.roomClient.on("ADD_CONSUMER",function(we){return Be.handleConsumerAdd(we)}),this.roomClient.on("REMOVE_CONSUMER",function(we){return Be.handleConsumerRemove(we)}),this.roomClient.on("CONSUMER_RESUMED",function(we){return Be.handleConsumerResume(we)}),this.roomClient.on("CONSUMER_PAUSED",function(we){return Be.handleConsumerPause(we)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(we){return Be.handleParticipantMediaStateChanged(we)}),this.roomClient.on("CHAT_MESSAGE",function(we){return Be.handleNewChatMessage(we)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(we){return Be.handleSpeakerChange(we)}),this.roomClient.on("ENTRY_REQUESTED",function(we){return Be.handleEntryRequested(we)}),this.roomClient.on("ENTRY_RESPONDED",function(we){return Be.handleEntryResponded(we)}),this.roomClient.on("MEETING_JOINED",function(we){return Be.handleMeetingJoined(we)}),this.roomClient.on("MEETING_LEFT",function(we){return Be.handleMeetingLeft(we)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(we){Be.handleRecordingStateChanged(we)}),this.roomClient.on("RECORDING_STARTED",function(we){return Be.handleRecordingStarted(we)}),this.roomClient.on("RECORDING_STOPPED",function(we){return Be.handleRecordingStopped(we)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(we){Be.handleLivestreamStateChanged(we)}),this.roomClient.on("LIVESTREAM_STARTED",function(we){return Be.handleLivestreamStarted(we)}),this.roomClient.on("LIVESTREAM_STOPPED",function(we){return Be.handleLivestreamStopped(we)}),this.roomClient.on("HLS_STATE_CHANGED",function(we){Be.handleHlsStateChanged(we)}),this.roomClient.on("HLS_STARTED",function(we){Be.handleHlsStarted(we)}),this.roomClient.on("HLS_STOPPED",function(we){Be.handleHlsStopped(we)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(we){Be.handleTranscriptionStateChanged(we)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(we){Be.handleTranscriptionText(we)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(we){Be.handleParticipantResumeBySubManager(we)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(we){Be.handleParticipantPausedBySubManager(we)}),this.roomClient.on("WHITEBOARD_STARTED",function(we){return Be.handleWhiteboardStarted(we)}),this.roomClient.on("WHITEBOARD_STOPPED",function(we){return Be.handleWhiteboardStopped(we)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(we){return Be.handleVideoStateChanged(we)}),this.roomClient.on("VIDEO_SEEKED",function(we){return Be.handleVideoSeeked(we)}),this.roomClient.on("PIN_STATE_CHANGED",function(we){Be.handlePinStateChanged(we)}),this.roomClient.on("MIC_REQUESTED",function(we){return Be.handleMicRequested(we)}),this.roomClient.on("WEBCAM_REQUESTED",function(we){return Be.handleWebcamRequested(we)}),this.roomClient.on("CONNECTION_OPEN",function(we){return Be.handleConnectionOpen(we)}),this.roomClient.on("CONNECTION_CLOSE",function(we){return Be.handleConnectionClose(we)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(we){return Be.handleConnectionParticipantJoin(we)}),this.roomClient.on("SWITCH_ROOM",function(we){return Be.handleSwitchMeeting(we)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(we){return Be.handleConnectionChatMessage(we)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(we){Be.handleConnectionParticipantLeft(we)}),this.roomClient.on("PUBSUB_MESSAGE",function(we){return Sa(at,Be,Vn).call(Be,we)}),this.roomClient.on("PEER_MODE_CHANGED",function(we){return Sa(at,Be,Nn).call(Be,we)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(we){return Be.handleMeetingStateChanged(we)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(we){return Be.handleConsumersPaused(we)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(we){return Be.handleConsumersResumed(we)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(we){return Be.handleVideoQualityChanged(we)}),this.roomClient.on("ADD_CHARACTER",function(we){return Be.handleAddCharacter(we)}),this.roomClient.on("INIT_CHARACTER",function(we){return Be.handleInitCharacter(we)}),this.roomClient.on("REMOVE_CHARACTER",function(we){return Be.handleRemoveCharacter(we)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(we){return Be.handleCharacterStateChanged(we)}),this.roomClient.on("CHARACTER_MESSAGE",function(we){return Be.handleCharacterMessage(we)}),this.roomClient.on("USER_MESSAGE",function(we){return Be.handleUserMessage(we)}),this.roomClient.on("CHARACTER_DATA",function(we){return Be.handleOnCharacterData(we)}),this.roomClient.on("CHARACTER_ERROR",function(we){return Be.handleOnCharacterError(we)}),this.roomClient.on("E2EE_STATE_CHANGE",function(we){return Be.handleE2EEStateChange(we)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return Be.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(we){return Be.handleMediaRelayStart(we)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(we){return Be.handleMediaRelayStop(we)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(we){return Be.handleMediaRelayError(we)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(we){return Be.handleMediaRelayRequestResponse(we)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(we){return Be.handleMediaRelayRequest(we)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(Q){this.eventEmitter.listenerCount(Ds)>0&&this.eventEmitter.emit(Ds,Q)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(Q){this.roomClient.changeMode(Q)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(Q,X){this.roomClient.respondEntry(Q,X)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(Q)}},{key:"publishAudio",value:(me=(0,u.A)(o().mark(function Q(){var X,ue=arguments;return o().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return X=ue.length>0&&ue[0]!==void 0?ue[0]:void 0,Oe.next=3,this.roomClient.enableMic(X);case 3:return Oe.abrupt("return");case 4:case"end":return Oe.stop()}},Q,this)})),function(){return me.apply(this,arguments)})},{key:"unpublishAudio",value:(_e=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableMic();case 2:return X.abrupt("return");case 3:case"end":return X.stop()}},Q,this)})),function(){return _e.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(Q)}},{key:"publishVideo",value:(oe=(0,u.A)(o().mark(function Q(){var X,ue=arguments;return o().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return X=ue.length>0&&ue[0]!==void 0?ue[0]:void 0,this.roomClient.enableWebcam(X),Oe.abrupt("return");case 3:case"end":return Oe.stop()}},Q,this)})),function(){return oe.apply(this,arguments)})},{key:"unpublishVideo",value:(Pe=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return this.roomClient.disableWebcam(),X.abrupt("return");case 2:case"end":return X.stop()}},Q,this)})),function(){return Pe.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(Q)}},{key:"pubblishScreenShare",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(Q)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(Q){this.roomClient.sendChatMessage(Q);var X={text:Q,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(X)}},{key:"pauseAllStreams",value:function(Q){this.roomClient.pauseAllConsumers(Q)}},{key:"resumeAllStreams",value:function(Q){this.roomClient.resumeAllConsumers(Q)}},{key:"startRecording",value:function(Q,X,ue,Oe){this.roomClient.startRecording(Q,X,ue,Oe)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(Q){this.roomClient.startTranscription(Q)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(Q,X){this.roomClient.startLivestream(Q,X)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(Re=(0,u.A)(o().mark(function Q(X,ue){return o().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.roomClient.startHls(X,ue);case 2:case"end":return Oe.stop()}},Q,this)})),function(Q,X){return Re.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(Q){if(!Q.interactionId&&!Q.id)throw new Error("InteractionId or id is required");return new Et(On(On({},Q),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(ve=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getMics();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},Q,this)})),function(){return ve.apply(this,arguments)})},{key:"getWebcams",value:(ge=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getWebcams();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},Q,this)})),function(){return ge.apply(this,arguments)})},{key:"changeMic",value:function(Q){this.roomClient.changeMic(Q)}},{key:"changeWebcam",value:function(Q){this.roomClient.changeWebcam(Q)}},{key:"replaceWebcamStream",value:function(Q){this.roomClient.replaceWebcamStream(Q)}},{key:"setWebcamQuality",value:function(Q){this.roomClient.setWebcamQuality(Q)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(Q){var X=Q.link;this.roomClient.startVideo({link:X})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(Q){var X=Q.currentTime;this.roomClient.pauseVideo(X)}},{key:"seekVideo",value:function(Q){var X=Q.currentTime;this.roomClient.seekVideo(X)}},{key:"handlePeerAdd",value:function(Q){var X=Q.peer,ue=new Me(X);this.participants.set(ue.id,ue),this.eventEmitter.emit(Ii,ue),this.participants.size===1&&this.updateMainParticipant(ue.id)}},{key:"handlePeerRemove",value:function(Q){var X=Q.peerId,ue=this.participants.get(X);ue!=null&&(this.participants.delete(X),this.eventEmitter.emit(co,ue),this.activePresenterId===ue.id&&(this.activePresenterId=null,this.eventEmitter.emit(xa,this.activePresenterId)),this.mainParticipantId===ue.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(Q){var X=Q.producer,ue={id:X.id,rtpSender:X.rtpSender};this.localParticipant.addProducer(ue);var Oe=new nn(X);this.localParticipant.addStream(Oe),Oe.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(xa,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(Q){var X=Q.producer,ue=new nn(X);this.localParticipant.updateStream(ue)}},{key:"handleProducerRemove",value:function(Q){var X=Q.producerId;this.localParticipant.removeProducer(X);var ue=this.localParticipant.deleteStream(X);if(ue&&ue.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(xa,this.activePresenterId);var Oe=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Oe||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(Q){var X=Q.consumer,ue=Q.peerId,Oe=this.participants.get(ue)||this.characters.get(ue);if(Oe){var De={id:X.id,rtpReceiver:X.rtpReceiver};Oe.addConsumer(De);var bt=new nn(X);Oe.addStream(bt),this.eventEmitter.emit(yo,bt),bt.kind==="share"&&(this.activePresenterId=Oe.id,this.eventEmitter.emit(xa,this.activePresenterId),this.updateMainParticipant(Oe.id))}}},{key:"handleConsumerResume",value:function(Q){var X=Q.consumerId,ue=Q.peerId,Oe=this.participants.get(ue);Oe&&Oe.streamResumed(X)}},{key:"handleConsumerPause",value:function(Q){var X=Q.consumerId,ue=Q.peerId,Oe=this.participants.get(ue);Oe&&Oe.streamPaused(X)}},{key:"handleConsumerRemove",value:function(Q){var X=Q.consumerId,ue=Q.peerId,Oe=this.participants.get(ue)||this.characters.get(ue);if(Oe!=null&&Oe){Oe.removeConsumer(X);var De=Oe.deleteStream(X);if(this.eventEmitter.emit(oa,De),De&&De.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(xa,this.activePresenterId);var bt=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||bt||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(Q){var X=Q.peerId,ue=Q.kind,Oe=Q.newState,De=this.participants.get(X)||this.characters.get(X);this.localParticipant.id==X&&(De=this.localParticipant),De&&De&&(ue=="audio"?De.micOn=Oe:ue=="video"&&(De.webcamOn=Oe),De.updateParticipantMediaState(ue,Oe))}},{key:"handleParticipantPausedBySubManager",value:function(Q){var X=this.participants.get(Q.peerId);X&&X&&X.handleParticipantPause(Q)}},{key:"handleParticipantResumeBySubManager",value:function(Q){var X=this.participants.get(Q.peerId);X&&X&&X.handleParticipantResume(Q)}},{key:"handleSpeakerChange",value:function(Q){var X=Q.peerId;this.activeSpeakerId!==X&&(this.activeSpeakerId=X,this.eventEmitter.emit(lo,X),X&&X!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&X!==this.mainParticipantId&&this.updateMainParticipant(X))}},{key:"handleNewChatMessage",value:function(Q){var X=Q.senderId,ue={senderId:X,text:Q.text,timestamp:Q.timestamp};if(this.localParticipant.id===X)ue.senderName=this.localParticipant.displayName;else{var Oe=this.participants.get(X);Oe&&(ue.senderName=Oe.displayName)}this.messages.push(ue),this.eventEmitter.emit(vc,ue)}},{key:"updateMainParticipant",value:function(Q){this.mainParticipantId=Q;var X=null;X=Q===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(uo,X)}},{key:"handleEntryRequested",value:function(Q){var X=this,ue=Q.id,Oe=Q.name;this.eventEmitter.emit(yc,{participantId:ue,name:Oe,allow:function(){X.roomClient.respondEntry(ue,"allowed")},deny:function(){X.roomClient.respondEntry(ue,"denied")}})}},{key:"handleEntryResponded",value:function(Q){var X=Q.id,ue=Q.decision;this.eventEmitter.emit(po,X,ue)}},{key:"handleMeetingJoined",value:function(Q){var X=Q.peers,ue=Q.poll,Oe=Q.messages,De=Q.baseUrl,bt=Q.switchRoomId;typeof bt=="string"&&(this.id=bt),this.baseUrl=De,Oe.length>0&&(this.messages=Oe),this.eventEmitter.emit(Ja,{switchRoomId:bt||null,peers:X,poll:ue,messages:Oe})}},{key:"handleMeetingLeft",value:function(Q){this.eventEmitter.emit(Vs,Q)}},{key:"handleRecordingStateChanged",value:function(Q){this.recordingState=Q.status,this.eventEmitter.emit(ho,Q)}},{key:"handleLivestreamStateChanged",value:function(Q){this.livestreamState=Q.status,this.eventEmitter.emit(rr,Q)}},{key:"handleHlsStateChanged",value:function(Q){this.hlsState=Q.status,Q.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:Q.downstreamUrl,playbackHlsUrl:Q.playbackHlsUrl,livestreamUrl:Q.livestreamUrl}:Q.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(Ma,Q)}},{key:"handleTranscriptionStateChanged",value:function(Q){this.transcriptionState=Q.status,this.eventEmitter.emit(kc,Q)}},{key:"handleTranscriptionText",value:function(Q){this.eventEmitter.emit(Cc,Q)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(_c)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(fo)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(mo)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(go)}},{key:"handleHlsStarted",value:function(Q){this.eventEmitter.emit(lr,Q)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(bc)}},{key:"handleWhiteboardStarted",value:function(Q){this.eventEmitter.emit(vo,Q)}},{key:"handleWhiteboardStopped",value:function(Q){(function(X){if(X==null)throw new TypeError("Cannot destructure "+X)})(Q),this.eventEmitter.emit(wc)}},{key:"handleAddCharacter",value:function(Q){var X,ue=Q.id,Oe=(X=this.characters.get(ue))!==null&&X!==void 0?X:new Et(On(On({},Q),{},{state:tr.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(ue,Oe),this.eventEmitter.emit(Li,Oe),Oe.eventEmitter.emit(Li)}},{key:"handleInitCharacter",value:function(Q){this.characters.set(Q.id,Q)}},{key:"handleRemoveCharacter",value:function(Q){var X=Q.id;if(this.characters.has(X)){var ue=this.characters.get(X);this.eventEmitter.emit(ja,ue),ue.eventEmitter.emit(ja),this.characters.delete(X)}}},{key:"handleCharacterStateChanged",value:function(Q){var X=Q.id;this.characters.has(X)&&this.characters.get(X).handleCharacterStateChanged(Q)}},{key:"handleCharacterMessage",value:function(Q){var X=Q.id;this.characters.has(X)&&this.characters.get(X).handleCharacterMessage(Q)}},{key:"handleUserMessage",value:function(Q){var X=Q.id;this.characters.has(X)&&this.characters.get(X).handleUserMessage(Q)}},{key:"handleOnCharacterData",value:function(Q){var X=Q.id;this.characters.has(X)&&this.characters.get(X).handleCharacterData(Q)}},{key:"handleOnCharacterError",value:function(Q){var X=Q.id;this.characters.has(X)&&this.characters.get(X).handleCharacterError(Q)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var Q=this;(0,Ee.A)(this.participants.keys()).forEach(function(X){X!==Q.localParticipant.id&&Q.handlePeerRemove({peerId:X})})}},{key:"handleVideoStateChanged",value:function(Q){this.eventEmitter.emit(Sc,Q)}},{key:"handleVideoSeeked",value:function(Q){var X=Q.currentTime;this.eventEmitter.emit(xc,{currentTime:X})}},{key:"handlePinStateChanged",value:function(Q){var X=Q.peerId,ue=Q.state,Oe=Q.pinnedBy;this.eventEmitter.emit(Di,{participantId:X,state:ue,pinnedBy:Oe})}},{key:"handleMeetingStateChanged",value:function(Q){var X=Q.state;this.eventEmitter.emit(Ec,{state:X})}},{key:"handleConsumersPaused",value:function(Q){var X=Q.kind;this.eventEmitter.emit(wo,{kind:X})}},{key:"handleConsumersResumed",value:function(Q){var X=Q.kind;this.eventEmitter.emit(Mi,{kind:X})}},{key:"handleVideoQualityChanged",value:function(Q){var X=Q.peerId,ue=Q.prevQuality,Oe=Q.currentQuality,De=this.participants.get(X)||this.characters.get(X);De&&De&&De.videoQualityChanged(ue,Oe)}},{key:"handleMicRequested",value:function(Q){var X=this,ue=Q.peerId;this.eventEmitter.emit(xs,{participantId:ue,accept:function(){return X.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(Q){var X=this,ue=Q.peerId;this.eventEmitter.emit(Rc,{participantId:ue,accept:function(){return X.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(Q){var X=Q.roomId,ue=Q.peer,Oe=this.connections.get(X);Oe!=null&&Oe.meeting.participantJoin(ue)}},{key:"handleConnectionParticipantLeft",value:function(Q){var X=Q.roomId,ue=Q.peerId,Oe=this.connections.get(X);Oe!=null&&Oe.meeting.participantLeft(ue)}},{key:"handleConnectionOpen",value:function(Q){var X=Q.peers,ue=Q.roomId,Oe=Q.payload,De=new ps({roomId:ue,peers:X,payload:Oe});this.connections.set(De.id,De),this.eventEmitter.emit(La,De)}},{key:"handleConnectionClose",value:function(Q){var X=Q.roomId;this.connections.get(X)!=null&&(this.connections.delete(X),this.eventEmitter.emit(_o,X))}},{key:"handleMediaRelayError",value:function(Q){var X=Q.meetingId,ue=Q.error;this.eventEmitter.emit(xo,{meetingId:X,error:ue})}},{key:"handleMediaRelayRequest",value:function(Q){var X=this,ue=Q.peerId,Oe=Q.meetingId,De=Q.displayName;this.eventEmitter.emit(St,{participantId:ue,meetingId:Oe,displayName:De,accept:function(){return X.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:Oe,peerId:ue})},reject:function(){return X.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:Oe,peerId:ue})}})}},{key:"handleMediaRelayRequestResponse",value:function(Q){var X=Q.decision,ue=Q.decidedBy,Oe=Q.meetingId;this.eventEmitter.emit(fi,{decision:X,decidedBy:ue,meetingId:Oe})}},{key:"handleMediaRelayStart",value:function(Q){var X=Q.meetingId;this.eventEmitter.emit(ji,{meetingId:X})}},{key:"handleMediaRelayStop",value:function(Q){var X=Q.meetingId,ue=Q.reason;this.eventEmitter.emit(So,{meetingId:X,reason:ue})}},{key:"requestMediaRelay",value:(he=(0,u.A)(o().mark(function Q(X){var ue,Oe,De;return o().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(ue=X.destinationMeetingId,Oe=X.token,De=X.kinds,ue){bt.next=3;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 3:return bt.next=5,this.roomClient.requestMediaRelay(ue,Oe,De);case 5:case"end":return bt.stop()}},Q,this)})),function(Q){return he.apply(this,arguments)})},{key:"stopMediaRelay",value:(ne=(0,u.A)(o().mark(function Q(X){return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(X){ue.next=2;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 2:return ue.next=4,this.roomClient.stopMediaRelay(X);case 4:case"end":return ue.stop()}},Q,this)})),function(Q){return ne.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(ce=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.enableAdaptiveSubscription();case 2:case"end":return X.stop()}},Q,this)})),function(){return ce.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(Z=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableAdaptiveSubscription();case 2:case"end":return X.stop()}},Q,this)})),function(){return Z.apply(this,arguments)})},{key:"enableE2EE",value:(V=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!0);case 2:case"end":return X.stop()}},Q,this)})),function(){return V.apply(this,arguments)})},{key:"disableE2EE",value:(U=(0,u.A)(o().mark(function Q(){return o().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!1);case 2:case"end":return X.stop()}},Q,this)})),function(){return U.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(Q){var X=Q.roomId,ue=Q.token,Oe=Q.payload,De=Q.peerId,bt=Q.connectionPeerId,ut=Q.connectionRoomId,Ze=De?{meetingId:X,payload:Oe,token:ue,participantId:De}:{meetingId:X,payload:Oe,token:ue,connectionParticipantId:bt,connectionMeetingId:ut};this.eventEmitter.emit(bo,Ze)}},{key:"handleConnectionChatMessage",value:function(Q){var X=Q.roomId,ue=Q.peerId,Oe=Q.message,De=this.connections.get(X);De!=null&&De.meeting.sendChatMessageEvent({participantId:ue,message:Oe})}},{key:"handleE2EEStateChange",value:function(Q){var X=Q.peerId,ue=this.localParticipant.id==X?this.localParticipant:this.participants.get(X)||this.characters.get(X);ue&&ue&&ue.handleE2EEStateChange(Q)}},{key:"connectTo",value:(B=(0,u.A)(o().mark(function Q(X){var ue,Oe;return o().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return ue=X.meetingId,Oe=X.payload,De.next=3,this.roomClient.openConnection({roomId:ue,payload:Oe});case 3:case"end":return De.stop()}},Q,this)})),function(Q){return B.apply(this,arguments)})},{key:"switchTo",value:function(Q){var X=Q.meetingId,ue=Q.token;if(!X||typeof X!="string"||X.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:X,token:ue,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var Q;return(Q=this.roomClient._webcam)===null||Q===void 0?void 0:Q.device}},{key:"selectedMicrophoneDevice",get:function(){var Q;return(Q=this.roomClient._mic)===null||Q===void 0?void 0:Q.device}},{key:"on",value:function(Q,X){switch(Q){case Ii:case co:case lo:case xa:case uo:case vc:case yc:case po:case ho:case _c:case fo:case rr:case mo:case go:case lr:case bc:case Ma:case kc:case Cc:case yo:case oa:case vo:case wc:case Li:case ja:case Ja:case Vs:case Sc:case xc:case xs:case Rc:case Di:case La:case _o:case bo:case Ec:case hi:case wo:case Mi:case ji:case So:case xo:case St:case fi:case Ds:this.eventEmitter.on(Q,X);break;default:throw new Error("Invalid event type "+Q)}}},{key:"off",value:function(Q,X){switch(Q){case Ii:case co:case lo:case xa:case uo:case vc:case yc:case po:case ho:case _c:case fo:case rr:case mo:case go:case Ma:case lr:case bc:case kc:case Cc:case yo:case oa:case vo:case wc:case Li:case ja:case Ja:case Vs:case Sc:case xc:case xs:case Rc:case Di:case La:case _o:case bo:case Ec:case Ds:case ji:case So:case xo:case St:case fi:case hi:case wo:case Mi:this.eventEmitter.off(Q,X);break;default:throw new Error("Invalid event type.")}}}]);var B,U,V,Z,ce,ne,he,ge,ve,Re,Pe,oe,_e,me}();function Vn(B){var U=B.topic,V=B.message,Z=B.senderId,ce=B.timestamp,ne=B.senderName,he=B.id,ge=B.payload;U&&V&&is(ee,this).emit(U,{message:V,senderId:Z,timestamp:ce,topic:U,senderName:ne,id:he,payload:ge})}function Nn(B){var U=B.peerId,V=B.mode;U===this.localParticipant.id?this.localParticipant.mode=V:this.participants.get(U).mode=V,this.activePresenterId!==this.localParticipant.id||(0,Ae.kR)(V)||(this.activePresenterId=null,this.eventEmitter.emit(xa,this.activePresenterId)),this.eventEmitter.emit(hi,{participantId:U,mode:V})}var ur=a(7080),zu=a(5071),El=a(4973),Ro=a(9027);function Tc(B,U,V){return U=(0,je.A)(U),(0,it.A)(B,Hu()?Reflect.construct(U,V||[],(0,je.A)(B).constructor):U.apply(B,V))}function Hu(){try{var B=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hu=function(){return!!B})()}var Pc=function(B){function U(V,Z,ce,ne){return(0,i.A)(this,U),Tc(this,U,[V,Z,ce,ne])}return(0,ct.A)(U,B),(0,g.A)(U)}((0,g.A)(function B(U,V,Z,ce){(0,i.A)(this,B),this.deviceId=U,this.groupId=V,this.kind=Z,this.label=ce})),qu=function(B){function U(V,Z,ce,ne){return(0,i.A)(this,U),Tc(this,U,[V,Z,ce,ne])}return(0,ct.A)(U,B),(0,g.A)(U)}(Pc),kl=function(B){function U(V,Z,ce,ne){return(0,i.A)(this,U),Tc(this,U,[V,Z,ce,ne])}return(0,ct.A)(U,B),(0,g.A)(U)}(Pc),Ep=function(B){function U(V,Z,ce,ne){return(0,i.A)(this,U),Tc(this,U,[V,Z,ce,ne])}return(0,ct.A)(U,B),(0,g.A)(U)}(Pc),Rs={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},Xn=(a(328),a(7654));function ca(B,U){return B==null||U==null?NaN:B<U?-1:B>U?1:B>=U?0:NaN}function kp(B,U){return B==null||U==null?NaN:U<B?-1:U>B?1:U>=B?0:NaN}function Cp(B){let U,V,Z;function ce(ne,he,ge=0,ve=ne.length){if(ge<ve){if(U(he,he)!==0)return ve;do{const Re=ge+ve>>>1;V(ne[Re],he)<0?ge=Re+1:ve=Re}while(ge<ve)}return ge}return B.length!==2?(U=ca,V=(ne,he)=>ca(B(ne),he),Z=(ne,he)=>B(ne)-he):(U=B===ca||B===kp?B:qe,V=B,Z=B),{left:ce,center:function(ne,he,ge=0,ve=ne.length){const Re=ce(ne,he,ge,ve-1);return Re>ge&&Z(ne[Re-1],he)>-Z(ne[Re],he)?Re-1:Re},right:function(ne,he,ge=0,ve=ne.length){if(ge<ve){if(U(he,he)!==0)return ve;do{const Re=ge+ve>>>1;V(ne[Re],he)<=0?ge=Re+1:ve=Re}while(ge<ve)}return ge}}}function qe(){return 0}const Ku=Cp(ca),Gu=Ku.right,Em=(Cp(function(B){return B===null?NaN:+B}).center,Gu);function Tp(B,U){switch(arguments.length){case 0:break;case 1:this.range(B);break;default:this.range(U).domain(B)}return this}function Ba(){var B,U=[.5],V=[0,1],Z=1;function ce(ne){return ne!=null&&ne<=ne?V[Em(U,ne,0,Z)]:B}return ce.domain=function(ne){return arguments.length?(U=Array.from(ne),Z=Math.min(U.length,V.length-1),ce):U.slice()},ce.range=function(ne){return arguments.length?(V=Array.from(ne),Z=Math.min(U.length,V.length-1),ce):V.slice()},ce.invertExtent=function(ne){var he=V.indexOf(ne);return[U[he-1],U[he]]},ce.unknown=function(ne){return arguments.length?(B=ne,ce):B},ce.copy=function(){return Ba().domain(U).range(V).unknown(B)},Tp.apply(ce,arguments)}function $e(B,U){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(B);U&&(Z=Z.filter(function(ce){return Object.getOwnPropertyDescriptor(B,ce).enumerable})),V.push.apply(V,Z)}return V}function la(B){for(var U=1;U<arguments.length;U++){var V=arguments[U]!=null?arguments[U]:{};U%2?$e(Object(V),!0).forEach(function(Z){q(B,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):$e(Object(V)).forEach(function(Z){Object.defineProperty(B,Z,Object.getOwnPropertyDescriptor(V,Z))})}return B}function zs(B,U){if(!(B instanceof U))throw new TypeError("Cannot call a class as a function")}function km(B,U){for(var V=0;V<U.length;V++){var Z=U[V];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(B,ns(Z.key),Z)}}function Ms(B,U,V){return U&&km(B.prototype,U),Object.defineProperty(B,"prototype",{writable:!1}),B}function q(B,U,V){return(U=ns(U))in B?Object.defineProperty(B,U,{value:V,enumerable:!0,configurable:!0,writable:!0}):B[U]=V,B}function F(B,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(U&&U.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),Object.defineProperty(B,"prototype",{writable:!1}),U&&Y(B,U)}function $(B){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},$(B)}function Y(B,U){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,Z){return V.__proto__=Z,V},Y(B,U)}function fe(B,U){if(B==null)return{};var V,Z,ce=function(he,ge){if(he==null)return{};var ve,Re,Pe={},oe=Object.keys(he);for(Re=0;Re<oe.length;Re++)ve=oe[Re],ge.indexOf(ve)>=0||(Pe[ve]=he[ve]);return Pe}(B,U);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(B);for(Z=0;Z<ne.length;Z++)V=ne[Z],U.indexOf(V)>=0||Object.prototype.propertyIsEnumerable.call(B,V)&&(ce[V]=B[V])}return ce}function ke(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function tt(B){var U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var V,Z=$(B);if(U){var ce=$(this).constructor;V=Reflect.construct(Z,arguments,ce)}else V=Z.apply(this,arguments);return function(ne,he){if(he&&(typeof he=="object"||typeof he=="function"))return he;if(he!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ke(ne)}(this,V)}}function lt(B,U){for(;!Object.prototype.hasOwnProperty.call(B,U)&&(B=$(B))!==null;);return B}function He(){return He=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(B,U,V){var Z=lt(B,U);if(Z){var ce=Object.getOwnPropertyDescriptor(Z,U);return ce.get?ce.get.call(arguments.length<3?B:V):ce.value}},He.apply(this,arguments)}function zt(B,U,V,Z){return zt=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(ce,ne,he,ge){var ve,Re=lt(ce,ne);if(Re){if((ve=Object.getOwnPropertyDescriptor(Re,ne)).set)return ve.set.call(ge,he),!0;if(!ve.writable)return!1}if(ve=Object.getOwnPropertyDescriptor(ge,ne)){if(!ve.writable)return!1;ve.value=he,Object.defineProperty(ge,ne,ve)}else q(ge,ne,he);return!0},zt(B,U,V,Z)}function ot(B,U,V,Z,ce){if(!zt(B,U,V,Z||B)&&ce)throw new TypeError("failed to set property");return V}function Tt(B,U){return function(V){if(Array.isArray(V))return V}(B)||function(V,Z){var ce=V==null?null:typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(ce!=null){var ne,he,ge,ve,Re=[],Pe=!0,oe=!1;try{if(ge=(ce=ce.call(V)).next,Z===0){if(Object(ce)!==ce)return;Pe=!1}else for(;!(Pe=(ne=ge.call(ce)).done)&&(Re.push(ne.value),Re.length!==Z);Pe=!0);}catch(_e){oe=!0,he=_e}finally{try{if(!Pe&&ce.return!=null&&(ve=ce.return(),Object(ve)!==ve))return}finally{if(oe)throw he}}return Re}}(B,U)||pn(B,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zt(B){return function(U){if(Array.isArray(U))return Zr(U)}(B)||function(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}(B)||pn(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pn(B,U){if(B){if(typeof B=="string")return Zr(B,U);var V=Object.prototype.toString.call(B).slice(8,-1);return V==="Object"&&B.constructor&&(V=B.constructor.name),V==="Map"||V==="Set"?Array.from(B):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?Zr(B,U):void 0}}function Zr(B,U){(U==null||U>B.length)&&(U=B.length);for(var V=0,Z=new Array(U);V<U;V++)Z[V]=B[V];return Z}function ns(B){var U=function(V,Z){if(typeof V!="object"||V===null)return V;var ce=V[Symbol.toPrimitive];if(ce!==void 0){var ne=ce.call(V,Z);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(V)}(B,"string");return typeof U=="symbol"?U:String(U)}function Se(B,U){return function(V,Z){return Z.get?Z.get.call(V):Z.value}(B,Eo(B,U,"get"))}function Dt(B,U,V){return function(Z,ce,ne){if(ce.set)ce.set.call(Z,ne);else{if(!ce.writable)throw new TypeError("attempted to set read only private field");ce.value=ne}}(B,Eo(B,U,"set"),V),V}function Eo(B,U,V){if(!U.has(B))throw new TypeError("attempted to "+V+" private field on non-instance");return U.get(B)}function ar(B,U,V){if(!U.has(B))throw new TypeError("attempted to get private field on non-instance");return V}function Yu(B,U){if(U.has(B))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ht(B,U,V){Yu(B,U),U.set(B,V)}function hs(B,U){Yu(B,U),U.add(B)}var Oc="https://speed.cloudflare.com",Qu={autoStart:!0,downloadApiUrl:"".concat(Oc,"/__down"),uploadApiUrl:"".concat(Oc,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Oc,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Oc,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Ju={aimMeasurementScoring:{packetLoss:Ba([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:Ba([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:Ba([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:Ba([10,20,100,500],[10,5,0,-10,-20]),download:Ba([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:Ba([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Pp=function(B){var U=B.headers.get("server-timing");if(U){var V=U.match(/dur=([0-9.]+)/);if(V)return+V[1]}},Op=function(B){return B.responseStart-B.requestStart},Np=function(B){return B.responseEnd-B.responseStart},Ap=function(B){return B.ping+B.payloadDownloadTime},Ip=function(B){return B.ttfb},Dp=function(B,U){var V=B.duration,Z=B.transferSize,ce=V/1e3;return ce?8*(Z||1.005*+U)/ce:void 0},Mp=function(B,U){var V=B.duration/1e3;return V?8*U*1.005/V:void 0},Lp=Xn(function(B){return"0".repeat(B)}),Nc=new WeakMap,Ac=new WeakMap,Ic=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,Dc=new WeakMap,Ol=new WeakMap,Bi=new WeakMap,Nl=new WeakMap,Al=new WeakMap,ko=new WeakMap,Co=new WeakMap,To=new WeakMap,Fa=new WeakMap,Fi=new WeakMap,Po=new WeakMap,Ui=new WeakMap,Mc=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Ml=new WeakMap,Oo=new WeakSet,Ll=new WeakSet,No=new WeakSet,Xu=new WeakSet;function Lc(B){var U=this;B!==Se(this,ko)&&(Dt(this,ko,B),setTimeout(function(){return Se(U,Cl).call(U,Se(U,ko))}))}function Zu(B,U){var V=this,Z=Se(this,Bi)[B],ce=Z.bytes,ne=Z.dir,he=Se(this,To),ge=he[ne].hasOwnProperty(ce)?he[ne][ce]:{timings:[],numMeasurements:Se(this,Bi).filter(function(ve){var Re=ve.bytes,Pe=ve.dir;return ce===Re&&ne===Pe}).map(function(ve){return ve.count}).reduce(function(ve,Re){return ve+Re},0)};U&&ge.timings.push(U),ge.timings=ge.timings.slice(-ge.numMeasurements),he[ne][ce]=ge,U?setTimeout(function(){Se(V,Pl).call(V,la({type:ne,bytes:ce},U),he)}):Se(this,Tl).call(this,Se(this,Bi)[B],he)}function jc(){var B=this,U=Se(this,Bi),V=U[Se(this,Fa)];if(Se(this,Fi)>=V.count){var Z=Se(this,Co);if(Se(this,Ui)>this.finishRequestDuration&&!V.bypassMinDuration){var ce=V.dir;Se(this,Co)[ce]=!0,Object.values(Se(this,Co)).every(function(X){return X})&&Se(this,Dc).call(this,Se(this,To))}Dt(this,Fi,0),Dt(this,Ui,-1/0),performance.clearResourceTimings();do Dt(this,Fa,Se(this,Fa)+1);while(Se(this,Fa)<U.length&&Z[U[Se(this,Fa)].dir]);if(Se(this,Fa)>=U.length)return Dt(this,Co,{down:!0,up:!0}),ar(this,Oo,Lc).call(this,!1),void Se(this,Dc).call(this,Se(this,To));V=U[Se(this,Fa)]}var ne=Se(this,Fa);Se(this,Fi)===0&&ar(this,Ll,Zu).call(this,ne);var he=V,ge=he.bytes,ve=he.dir==="down",Re=Se(this,ve?Nl:Al),Pe=Object.assign({},Se(this,Nc));ve&&(Pe.bytes="".concat(ge));var oe,_e="".concat(Re.startsWith("http")||Re.startsWith("//")?"":window.location.origin).concat(Re,"?").concat(Object.entries(Pe).map(function(X){var ue=Tt(X,2),Oe=ue[0],De=ue[1];return"".concat(Oe,"=").concat(De)}).join("&")),me=Object.assign({},ve?{}:{method:"POST",body:Lp(ge)},Se(this,Ac)),Q=Dt(this,Dl,fetch(_e,me).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return B.getServerTime&&(oe=B.getServerTime(X)),X}).then(function(X){return X.text().then(function(ue){return Se(B,Ic)&&Se(B,Ic).call(B,{url:_e,headers:X.headers,body:ue}),ue})}).then(function(X,ue){if(Q._cancel)ue("cancelled");else{var Oe=performance.getEntriesByName(_e).slice(-1)[0],De={transferSize:Oe.transferSize,ttfb:Op(Oe),payloadDownloadTime:Np(Oe),serverTime:oe||-1,measTime:new Date};if(De.ping=Math.max(.01,De.ttfb-(oe||Se(B,Il))),De.duration=(ve?Ap:Ip)(De),De.bps=(ve?Dp:Mp)(De,ge),ve&&ge){var bt=+ge;De.transferSize&&(De.transferSize<bt||De.transferSize/bt>1.05)&&console.warn("Requested ".concat(bt,"B but received ").concat(De.transferSize,"B (").concat(Math.round(De.transferSize/bt*1e4)/100,"%)."))}ar(B,Ll,Zu).call(B,ne,De);var ut=De.duration;Dt(B,Ui,Se(B,Ui)<0?ut:Math.min(Se(B,Ui),ut)),Dt(B,Fi,Se(B,Fi)+1),Dt(B,Po,0),Se(B,Mc)?Dt(B,Ml,setTimeout(function(){return ar(B,No,jc).call(B)},Se(B,Mc))):ar(B,No,jc).call(B)}}).catch(function(X){var ue,Oe;Q._cancel||(console.warn("Error fetching ".concat(_e,": ").concat(X)),Dt(B,Po,(ue=Se(B,Po),Oe=ue++,ue)),Oe<20?ar(B,No,jc).call(B):(Dt(B,Po,0),ar(B,Oo,Lc).call(B,!1),Se(B,Ol).call(B,"Connection failed to ".concat(_e,". Gave up after ").concat(20," retries."))))}))}function jp(){var B=Se(this,Dl);B&&(B._cancel=!0)}var ed=function(){function B(U){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=V.downloadApiUrl,ce=V.uploadApiUrl,ne=V.throttleMs,he=ne===void 0?0:ne,ge=V.estimatedServerTime,ve=ge===void 0?0:ge;if(zs(this,B),hs(this,Xu),hs(this,No),hs(this,Ll),hs(this,Oo),Ht(this,Nc,{writable:!0,value:{}}),Ht(this,Ac,{writable:!0,value:{}}),q(this,"finishRequestDuration",1e3),q(this,"getServerTime",Pp),Ht(this,Ic,{writable:!0,value:function(Re){return Re}}),Ht(this,Cl,{writable:!0,value:function(){}}),Ht(this,Tl,{writable:!0,value:function(){}}),Ht(this,Pl,{writable:!0,value:function(){}}),Ht(this,Dc,{writable:!0,value:function(){}}),Ht(this,Ol,{writable:!0,value:function(){}}),Ht(this,Bi,{writable:!0,value:void 0}),Ht(this,Nl,{writable:!0,value:void 0}),Ht(this,Al,{writable:!0,value:void 0}),Ht(this,ko,{writable:!0,value:!1}),Ht(this,Co,{writable:!0,value:{down:!1,up:!1}}),Ht(this,To,{writable:!0,value:{down:{},up:{}}}),Ht(this,Fa,{writable:!0,value:0}),Ht(this,Fi,{writable:!0,value:0}),Ht(this,Po,{writable:!0,value:0}),Ht(this,Ui,{writable:!0,value:-1/0}),Ht(this,Mc,{writable:!0,value:0}),Ht(this,Il,{writable:!0,value:0}),Ht(this,Dl,{writable:!0,value:void 0}),Ht(this,Ml,{writable:!0,value:void 0}),!U)throw new Error("Missing measurements argument");if(!Z)throw new Error("Missing downloadApiUrl argument");if(!ce)throw new Error("Missing uploadApiUrl argument");Dt(this,Bi,U),Dt(this,Nl,Z),Dt(this,Al,ce),Dt(this,Mc,he),Dt(this,Il,Math.max(0,ve))}return Ms(B,[{key:"results",get:function(){return Se(this,To)}},{key:"qsParams",get:function(){return Se(this,Nc)},set:function(U){Dt(this,Nc,U)}},{key:"fetchOptions",get:function(){return Se(this,Ac)},set:function(U){Dt(this,Ac,U)}},{key:"responseHook",set:function(U){Dt(this,Ic,U)}},{key:"onRunningChange",set:function(U){Dt(this,Cl,U)}},{key:"onNewMeasurementStarted",set:function(U){Dt(this,Tl,U)}},{key:"onMeasurementResult",set:function(U){Dt(this,Pl,U)}},{key:"onFinished",set:function(U){Dt(this,Dc,U)}},{key:"onConnectionError",set:function(U){Dt(this,Ol,U)}},{key:"pause",value:function(){clearTimeout(Se(this,Ml)),ar(this,Xu,jp).call(this),ar(this,Oo,Lc).call(this,!1)}},{key:"play",value:function(){Se(this,ko)||(ar(this,Oo,Lc).call(this,!0),ar(this,No,jc).call(this))}}]),B}(),Bp=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Es=new WeakMap,jl=new WeakSet;function td(B){var U=this;Se(this,Es)&&(B?setTimeout(function(){return Se(U,Es).play()},20):Se(this,Es).pause())}var Fp=function(B){F(V,B);var U=tt(V);function V(Z){var ce,ne,he,ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=ge.measureParallelLatency,Re=ve!==void 0&&ve,Pe=ge.parallelLatencyThrottleMs,oe=Pe===void 0?100:Pe,_e=ge.downloadApiUrl,me=ge.uploadApiUrl,Q=ge.estimatedServerTime,X=Q===void 0?0:Q,ue=fe(ge,Bp);return zs(this,V),hs(ke(he=U.call(this,Z,la({downloadApiUrl:_e,uploadApiUrl:me,estimatedServerTime:X},ue))),jl),Ht(ke(he),Es,{writable:!0,value:void 0}),Re&&(Dt(ke(he),Es,new ed([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:_e,uploadApiUrl:me,estimatedServerTime:X,throttleMs:oe})),Se(ke(he),Es).qsParams={during:"".concat(Z[0].dir,"load")},ot((ce=ke(he),$(V.prototype)),"onRunningChange",ar(ke(he),jl,td),ce,!0),ot((ne=ke(he),$(V.prototype)),"onConnectionError",function(){return Se(ke(he),Es).pause()},ne,!0)),he}return Ms(V,[{key:"latencyResults",get:function(){return Se(this,Es)&&Se(this,Es).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Z){Se(this,Es)&&(Se(this,Es).onMeasurementResult=function(ce){return Z(ce)})}},{key:"fetchOptions",get:function(){return He($(V.prototype),"fetchOptions",this)},set:function(Z){ot($(V.prototype),"fetchOptions",Z,this,!0),Se(this,Es)&&(Se(this,Es).fetchOptions=Z)}},{key:"onRunningChange",set:function(Z){var ce=this;ot($(V.prototype),"onRunningChange",function(ne){ar(ce,jl,td).call(ce,ne),Z(ne)},this,!0)}},{key:"onConnectionError",set:function(Z){var ce=this;ot($(V.prototype),"onConnectionError",function(){Se(ce,Es)&&Se(ce,Es).pause(),Z.apply(void 0,arguments)},this,!0)}}]),V}(ed),Up=["measurementId","logApiUrl"],Ao=new WeakMap,Bc=new WeakMap,Fc=new WeakMap,$i=new WeakMap,Bl=new WeakSet,Fl=new WeakSet;function rd(B){Se(this,$i)&&(Dt(this,Fc,+B.headers.get("cf-meta-request-time")),Dt(this,Bc,B.body.slice(-300).split("___").pop()))}function nd(B){if(Se(this,$i)){var U={type:B.type,bytes:B.bytes,ping:Math.round(B.ping),ttfb:Math.round(B.ttfb),payloadDownloadTime:Math.round(B.payloadDownloadTime),duration:Math.round(B.duration),transferSize:Math.round(B.transferSize),serverTime:Math.round(B.serverTime),token:Se(this,Bc),requestTime:Se(this,Fc),measId:Se(this,Ao)};Dt(this,Bc,null),Dt(this,Fc,null),fetch(Se(this,$i),la({method:"POST",body:JSON.stringify(U)},this.fetchOptions))}}var sd=function(B){F(V,B);var U=tt(V);function V(Z){var ce,ne,he,ge,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=ve.measurementId,Pe=ve.logApiUrl,oe=fe(ve,Up);return zs(this,V),hs(ke(ge=U.call(this,Z,oe)),Fl),hs(ke(ge),Bl),Ht(ke(ge),Ao,{writable:!0,value:void 0}),Ht(ke(ge),Bc,{writable:!0,value:void 0}),Ht(ke(ge),Fc,{writable:!0,value:void 0}),Ht(ke(ge),$i,{writable:!0,value:void 0}),Dt(ke(ge),Ao,Re),Dt(ke(ge),$i,Pe),ot((ce=ke(ge),$(V.prototype)),"qsParams",Pe?{measId:Se(ke(ge),Ao)}:{},ce,!0),ot((ne=ke(ge),$(V.prototype)),"responseHook",function(_e){return ar(ke(ge),Bl,rd).call(ke(ge),_e)},ne,!0),ot((he=ke(ge),$(V.prototype)),"onMeasurementResult",function(_e){return ar(ke(ge),Fl,nd).call(ke(ge),_e)},he,!0),ge}return Ms(V,[{key:"qsParams",set:function(Z){ot($(V.prototype),"qsParams",Se(this,$i)?la({measId:Se(this,Ao)},Z):Z,this,!0)}},{key:"responseHook",set:function(Z){var ce=this;ot($(V.prototype),"responseHook",function(ne){Z(ne),ar(ce,Bl,rd).call(ce,ne)},this,!0)}},{key:"onMeasurementResult",set:function(Z){var ce=this;ot($(V.prototype),"onMeasurementResult",function(ne){for(var he=arguments.length,ge=new Array(he>1?he-1:0),ve=1;ve<he;ve++)ge[ve-1]=arguments[ve];Z.apply(void 0,[ne].concat(ge)),ar(ce,Fl,nd).call(ce,ne)},this,!0)}}]),V}(Fp),Uc=new WeakMap,Ul=new WeakMap,$l=new WeakMap,Wl=new WeakSet,Vl=new WeakSet,ad=new WeakSet,$p=function(){function B(U){if(zs(this,B),hs(this,ad),hs(this,Vl),hs(this,Wl),Ht(this,Uc,{writable:!0,value:!1}),Ht(this,Ul,{writable:!0,value:void 0}),Ht(this,$l,{writable:!0,value:void 0}),!U)throw new Error("Missing operation to perform");Dt(this,$l,U),this.play()}return Ms(B,[{key:"pause",value:function(){ar(this,ad,Wp).call(this),ar(this,Wl,id).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Se(this,Uc)||(ar(this,Wl,id).call(this,!0),ar(this,Vl,od).call(this))}}]),B}();function id(B){B!==Se(this,Uc)&&Dt(this,Uc,B)}function od(){var B=this,U=Dt(this,Ul,Se(this,$l).call(this).then(function(){!U._cancel&&ar(B,Vl,od).call(B)}))}function Wp(){var B=Se(this,Ul);B&&(B._cancel=!0)}var Io=new WeakMap,Vp=function(){function B(){var U=this,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=V.download,ce=V.upload;if(zs(this,B),q(this,"qsParams",{}),q(this,"fetchOptions",{}),Ht(this,Io,{writable:!0,value:[]}),!Z&&!ce)throw new Error("Missing at least one of download/upload config");[[Z,"download"],[ce,"upload"]].filter(function(he){return Tt(he,1)[0]}).forEach(function(he){var ge=Tt(he,2),ve=ge[0],Re=ge[1],Pe=ve.apiUrl,oe=ve.chunkSize;if(!Pe)throw new Error("Missing ".concat(Re," apiUrl argument"));if(!oe)throw new Error("Missing ".concat(Re," chunkSize argument"))});var ne=function(he){var ge=he.apiUrl,ve=he.qsParams,Re=ve===void 0?{}:ve,Pe=he.fetchOptions,oe=Pe===void 0?{}:Pe;return new $p(function(){var _e=Object.assign({},Re,U.qsParams),me="".concat(ge.startsWith("http")||ge.startsWith("//")?"":window.location.origin).concat(ge,"?").concat(Object.entries(_e).map(function(X){var ue=Tt(X,2),Oe=ue[0],De=ue[1];return"".concat(Oe,"=").concat(De)}).join("&")),Q=Object.assign({},oe,U.fetchOptions);return fetch(me,Q).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return X.text()})})};Z&&Se(this,Io).push(ne({apiUrl:Z.apiUrl,qsParams:{bytes:"".concat(Z.chunkSize)}})),ce&&Se(this,Io).push(ne({apiUrl:ce.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(ce.chunkSize)}}))}return Ms(B,[{key:"pause",value:function(){Se(this,Io).forEach(function(U){return U.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Se(this,Io).forEach(function(U){return U.play()})}}]),B}(),zp=["iceServers","acceptIceCandidate","dataChannelCfg"],Do=new WeakMap,$c=new WeakMap,Wc=new WeakMap,Mo=new WeakMap,Vc=new WeakMap,Hp=function(){function B(){var U=this,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=V.iceServers,ce=Z===void 0?[]:Z,ne=V.acceptIceCandidate,he=ne===void 0?function(me){var Q=me.protocol||"";if(!Q&&me.candidate){var X=me.candidate.split(" ");X.length>=3&&(Q=X[2])}return Q.toLowerCase()==="udp"}:ne,ge=V.dataChannelCfg,ve=ge===void 0?{ordered:!1,maxRetransmits:0}:ge,Re=fe(V,zp);zs(this,B),q(this,"onOpen",function(){}),q(this,"onClose",function(){}),q(this,"onMessageReceived",function(){}),Ht(this,Do,{writable:!0,value:!1}),Ht(this,$c,{writable:!0,value:void 0}),Ht(this,Wc,{writable:!0,value:void 0}),Ht(this,Mo,{writable:!0,value:void 0}),Ht(this,Vc,{writable:!0,value:void 0});var Pe=new RTCPeerConnection(la({iceServers:ce},Re)),oe=new RTCPeerConnection(la({iceServers:ce},Re)),_e=Pe.createDataChannel("channel",ve);_e.onopen=function(){Dt(U,Do,!0),U.onOpen()},_e.onclose=function(){return U.close()},oe.ondatachannel=function(me){var Q=me.channel;Q.onclose=function(){return U.close()},Q.onmessage=function(X){return U.onMessageReceived(X.data)},Dt(U,Vc,Q)},Pe.onicecandidate=function(me){me.candidate&&he(me.candidate)&&oe.addIceCandidate(me.candidate)},oe.onicecandidate=function(me){me.candidate&&he(me.candidate)&&Pe.addIceCandidate(me.candidate)},Pe.createOffer().then(function(me){return Pe.setLocalDescription(me)}).then(function(){return oe.setRemoteDescription(Pe.localDescription)}).then(function(){return oe.createAnswer()}).then(function(me){return oe.setLocalDescription(me)}).then(function(){return Pe.setRemoteDescription(oe.localDescription)}),Dt(this,$c,Pe),Dt(this,Wc,oe),Dt(this,Mo,_e),Dt(this,Do,!1)}return Ms(B,[{key:"send",value:function(U){return Se(this,Mo).send(U)}},{key:"close",value:function(){return Se(this,$c)&&Se(this,$c).close(),Se(this,Wc)&&Se(this,Wc).close(),Se(this,Mo)&&Se(this,Mo).close(),Se(this,Vc)&&Se(this,Vc).close(),Se(this,Do)&&this.onClose(),Dt(this,Do,!1),this}}]),B}(),zl=new WeakMap,zc=new WeakMap,Hl=new WeakMap,Wi=new WeakMap,cd=new WeakMap,ql=new WeakMap,qp=function(){function B(){var U=this,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=V.turnServerUri,ce=V.turnServerCredsApi,ne=V.turnServerCredsApiParser,he=ne===void 0?function(Ze){return{turnServerUser:Ze.username,turnServerPass:Ze.credential}}:ne,ge=V.turnServerCredsApiIncludeCredentials,ve=ge!==void 0&&ge,Re=V.turnServerUser,Pe=V.turnServerPass,oe=V.numMsgs,_e=oe===void 0?100:oe,me=V.batchSize,Q=me===void 0?10:me,X=V.batchWaitTime,ue=X===void 0?10:X,Oe=V.responsesWaitTime,De=Oe===void 0?5e3:Oe,bt=V.connectionTimeout,ut=bt===void 0?5e3:bt;if(zs(this,B),Ht(this,zl,{writable:!0,value:function(){}}),Ht(this,zc,{writable:!0,value:function(){}}),Ht(this,Hl,{writable:!0,value:function(){}}),q(this,"onMsgSent",function(){}),q(this,"onAllMsgsSent",function(){}),q(this,"onMsgReceived",function(){}),Ht(this,Wi,{writable:!0,value:{}}),Ht(this,cd,{writable:!0,value:void 0}),Ht(this,ql,{writable:!0,value:void 0}),!Z)throw new Error("Missing turnServerUri argument");if(!(Re&&Pe||ce))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Dt(this,ql,_e),(Re&&Pe?Promise.resolve({turnServerUser:Re,turnServerPass:Pe}):fetch(ce,{credentials:ve?"include":void 0}).then(function(Ze){return Ze.json()}).then(function(Ze){if(Ze.error)throw Ze.error;return Ze}).then(he)).catch(function(Ze){return Se(U,zl).call(U,Ze)}).then(function(Ze){var qt=Ze.turnServerUser,Be=Ze.turnServerPass,we=Dt(U,cd,new Hp({iceServers:[{urls:"turn:".concat(Z,"?transport=udp"),username:qt,credential:Be}],iceTransportPolicy:"relay"})),Qe=!1;setTimeout(function(){Qe||(we.close(),Se(U,zc).call(U,"ICE connection timeout!"))},ut);var Ve=Se(U,Wi);we.onOpen=function(){Qe=!0;var $t=U;(function dr(Pt){if(Pt<=_e){for(var Ur=Pt;Ur<=Math.min(_e,Pt+Q-1);)Ve[Ur]=!1,we.send(Ur),$t.onMsgSent(Ur),Ur++;setTimeout(function(){return dr(Ur)},ue)}else{$t.onAllMsgsSent(Object.keys(Ve).length);var yn=function(){we.close(),Se($t,Hl).call($t,$t.results)},Gr=setTimeout(yn,De),bs=Object.values(Se($t,Wi)).filter(function(en){return!en}).length;we.onMessageReceived=function(en){clearTimeout(Gr),Ve[en]=!0,$t.onMsgReceived(en),--bs<=0&&Object.values(Se($t,Wi)).every(function(ms){return ms})?yn():Gr=setTimeout(yn,De)}}})(1)},we.onMessageReceived=function($t){Ve[$t]=!0,U.onMsgReceived($t)}}).catch(function(Ze){return Se(U,zc).call(U,Ze.toString())})}return Ms(B,[{key:"onCredentialsFailure",set:function(U){Dt(this,zl,U)}},{key:"onConnectionError",set:function(U){Dt(this,zc,U)}},{key:"onFinished",set:function(U){Dt(this,Hl,U)}},{key:"results",get:function(){var U=Se(this,ql),V=Object.keys(Se(this,Wi)).length,Z=Object.entries(Se(this,Wi)).filter(function(ce){return!Tt(ce,2)[1]}).map(function(ce){return+Tt(ce,1)[0]});return{totalMessages:U,numMessagesSent:V,packetLoss:Z.length/V,lostMessages:Z}}}]),B}(),Kp=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Hs=new WeakMap,Gp=function(B){F(V,B);var U=tt(V);function V(){var Z,ce,ne,he,ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ge.downloadChunkSize,Re=ge.uploadChunkSize,Pe=ge.downloadApiUrl,oe=ge.uploadApiUrl,_e=fe(ge,Kp);return zs(this,V),Ht(ke(he=U.call(this,_e)),Hs,{writable:!0,value:void 0}),(ve||Re)&&(Dt(ke(he),Hs,new Vp({download:ve?{apiUrl:Pe,chunkSize:ve}:null,upload:Re?{apiUrl:oe,chunkSize:Re}:null})),ot((Z=ke(he),$(V.prototype)),"onCredentialsFailure",ot((ne=ke(he),$(V.prototype)),"onConnectionError",ot((ce=ke(he),$(V.prototype)),"onFinished",function(){return Se(ke(he),Hs).stop()},ce,!0),ne,!0),Z,!0)),he}return Ms(V,[{key:"qsParams",set:function(Z){Se(this,Hs)&&(Se(this,Hs).qsParams=Z)}},{key:"fetchOptions",set:function(Z){Se(this,Hs)&&(Se(this,Hs).fetchOptions=Z)}},{key:"onCredentialsFailure",set:function(Z){var ce=this;ot($(V.prototype),"onCredentialsFailure",function(){Z.apply(void 0,arguments),Se(ce,Hs)&&Se(ce,Hs).stop()},this,!0)}},{key:"onConnectionError",set:function(Z){var ce=this;ot($(V.prototype),"onConnectionError",function(){Z.apply(void 0,arguments),Se(ce,Hs)&&Se(ce,Hs).stop()},this,!0)}},{key:"onFinished",set:function(Z){var ce=this;ot($(V.prototype),"onFinished",function(){Z.apply(void 0,arguments),Se(ce,Hs)&&Se(ce,Hs).stop()},this,!0)}}]),V}(qp),Yp=["reachable"],Kl=Ms(function B(U){var V=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=Z.timeout,ne=ce===void 0?-1:ce,he=Z.fetchOptions,ge=he===void 0?{}:he;zs(this,B),q(this,"onFinished",function(){});var ve=!1,Re=function(Pe){var oe=Pe.reachable,_e=fe(Pe,Yp);ve||(ve=!0,V.onFinished(la({targetUrl:U,reachable:oe},_e)))};fetch(U,ge).then(function(Pe){Re({reachable:!0,response:Pe})}).catch(function(Pe){Re({reachable:!1,error:Pe})}),ne>0&&setTimeout(function(){return Re({reachable:!1,error:"Request timeout"})},ne)}),ld=function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!B.length)return 0;var V=B.slice().sort(function(he,ge){return he-ge}),Z=(B.length-1)*U,ce=Z%1;if(ce===0)return V[Math.round(Z)];var ne=[Math.floor,Math.ceil].map(function(he){return V[he(Z)]});return ne[0]+(ne[1]-ne[0])*ce},mi=new WeakMap,Hc=new WeakMap,Qp=function(){function B(U){var V=this;zs(this,B),q(this,"getLatencyPoints",function(Z){return Z.timings.map(function(ce){return ce.ping})}),q(this,"getLatency",function(Z){return ld(V.getLatencyPoints(Z),Se(V,mi).latencyPercentile)}),q(this,"getBandwidthPoints",function(Z){return Object.entries(Z).map(function(ce){var ne=Tt(ce,2),he=ne[0];return ne[1].timings.map(function(ge){var ve=ge.bps,Re=ge.duration,Pe=ge.ping,oe=ge.measTime,_e=ge.serverTime,me=ge.transferSize;return{bytes:+he,bps:ve,duration:Re,ping:Pe,measTime:oe,serverTime:_e,transferSize:me}})}).flat()}),q(this,"getBandwidth",function(Z){return ld(V.getBandwidthPoints(Z).filter(function(ce){return ce.duration>=Se(V,mi).bandwidthMinRequestDuration}).map(function(ce){return ce.bps}).filter(function(ce){return ce}),Se(V,mi).bandwidthPercentile)}),q(this,"getLoadedLatency",function(Z){return V.getLatency({timings:Se(V,Hc).call(V,Z)})}),q(this,"getLoadedJitter",function(Z){return V.getJitter({timings:Se(V,Hc).call(V,Z)})}),q(this,"getLoadedLatencyPoints",function(Z){return V.getLatencyPoints({timings:Se(V,Hc).call(V,Z)})}),q(this,"getPacketLoss",function(Z){return Z.packetLoss}),q(this,"getPacketLossDetails",function(Z){return Z}),q(this,"getReachability",function(Z){return!!Z.reachable}),q(this,"getReachabilityDetails",function(Z){return{host:Z.host,reachable:Z.reachable}}),Ht(this,mi,{writable:!0,value:void 0}),Ht(this,Hc,{writable:!0,value:function(Z){return Object.values(Z).filter(function(ce){return ce.timings.length&&Math.min.apply(Math,Zt(ce.timings.map(function(ne){return ne.duration})))>=Se(V,mi).loadedRequestMinDuration}).map(function(ce){return ce.sideLatency||[]}).flat().slice(-Se(V,mi).loadedLatencyMaxPoints)}}),Dt(this,mi,U)}return Ms(B,[{key:"getJitter",value:function(U){var V=this.getLatencyPoints(U);return V.length<2?null:V.reduce(function(Z,ce){var ne=Z.sumDeltas,he=ne===void 0?0:ne,ge=Z.prevLatency;return{sumDeltas:he+(ge!==void 0?Math.abs(ge-ce):0),prevLatency:ce}},{}).sumDeltas/(V.length-1)}}]),B}(),Jp=["bad","poor","average","good","great"],re={loadedLatencyIncrease:function(B){return B.latency&&(B.downLoadedLatency||B.upLoadedLatency)?Math.max(B.downLoadedLatency,B.upLoadedLatency)-B.latency:void 0}},W={packetLoss:0},z=new WeakMap,H=function(){function B(U){zs(this,B),Ht(this,z,{writable:!0,value:void 0}),Dt(this,z,U)}return Ms(B,[{key:"getScores",value:function(U){var V=Object.assign.apply(Object,Zt(Object.entries(Se(this,z).aimMeasurementScoring).map(function(Z){var ce=Tt(Z,2),ne=ce[0],he=ce[1],ge=re.hasOwnProperty(ne)?re[ne](U):U[ne];return ge===void 0?W.hasOwnProperty(ne)?q({},ne,W[ne]):{}:q({},ne,ge===void 0?0:+he(ge))})));return Object.assign.apply(Object,[{}].concat(Zt(Object.entries(Se(this,z).aimExperiencesDefs).filter(function(Z){return Tt(Z,2)[1].input.every(function(ce){return V.hasOwnProperty(ce)})}).map(function(Z){var ce,ne=Tt(Z,2),he=ne[0],ge=ne[1],ve=ge.input,Re=ge.pointThresholds,Pe=Math.max(0,(ce=ve.map(function(_e){return V[_e]}),ce.reduce(function(_e,me){return _e+me},0))),oe=Ba(Re,[0,1,2,3,4])(Pe);return q({},he,{points:Pe,classificationIdx:oe,classificationName:Jp[oe]})}))))}}]),B}(),K=new WeakMap,ie=new WeakMap,pe=new WeakMap,Ce=new WeakMap,Te=new WeakMap,ht=new WeakMap,Xe=new WeakMap,pt=new WeakMap,ft=function(){function B(U){var V=this;zs(this,B),q(this,"raw",void 0),q(this,"getUnloadedLatency",function(){return Se(V,Ce).call(V,"getLatency","latency")}),q(this,"getUnloadedJitter",function(){return Se(V,Ce).call(V,"getJitter","latency")}),q(this,"getUnloadedLatencyPoints",function(){return Se(V,Ce).call(V,"getLatencyPoints","latency",[])}),q(this,"getDownLoadedLatency",function(){return Se(V,Ce).call(V,"getLoadedLatency","download")}),q(this,"getDownLoadedJitter",function(){return Se(V,Ce).call(V,"getLoadedJitter","download")}),q(this,"getDownLoadedLatencyPoints",function(){return Se(V,Ce).call(V,"getLoadedLatencyPoints","download",[])}),q(this,"getUpLoadedLatency",function(){return Se(V,Ce).call(V,"getLoadedLatency","upload")}),q(this,"getUpLoadedJitter",function(){return Se(V,Ce).call(V,"getLoadedJitter","upload")}),q(this,"getUpLoadedLatencyPoints",function(){return Se(V,Ce).call(V,"getLoadedLatencyPoints","upload",[])}),q(this,"getDownloadBandwidth",function(){return Se(V,Ce).call(V,"getBandwidth","download")}),q(this,"getDownloadBandwidthPoints",function(){return Se(V,Ce).call(V,"getBandwidthPoints","download",[])}),q(this,"getUploadBandwidth",function(){return Se(V,Ce).call(V,"getBandwidth","upload")}),q(this,"getUploadBandwidthPoints",function(){return Se(V,Ce).call(V,"getBandwidthPoints","upload",[])}),q(this,"getPacketLoss",function(){return Se(V,Ce).call(V,"getPacketLoss","packetLoss")}),q(this,"getPacketLossDetails",function(){return Se(V,Ce).call(V,"getPacketLossDetails","packetLoss",void 0,!0)}),q(this,"getScores",function(){return Se(V,pe).getScores(V.getSummary())}),Ht(this,K,{writable:!0,value:void 0}),Ht(this,ie,{writable:!0,value:void 0}),Ht(this,pe,{writable:!0,value:void 0}),Ht(this,Ce,{writable:!0,value:function(Z,ce){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,he=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return V.raw.hasOwnProperty(ce)&&V.raw[ce].started?he&&V.raw[ce].error?{error:V.raw[ce].error}:Se(V,ie)[Z](V.raw[ce].results):ne}}),Ht(this,Te,{writable:!0,value:function(){return Se(V,Ce).call(V,"getReachability","v4Reachability")}}),Ht(this,ht,{writable:!0,value:function(){return Se(V,Ce).call(V,"getReachabilityDetails","v4Reachability")}}),Ht(this,Xe,{writable:!0,value:function(){return Se(V,Ce).call(V,"getReachability","v6Reachability")}}),Ht(this,pt,{writable:!0,value:function(){return Se(V,Ce).call(V,"getReachabilityDetails","v6Reachability")}}),Dt(this,K,U),this.clear(),Dt(this,ie,new Qp(Se(this,K))),Dt(this,pe,new H(Se(this,K)))}return Ms(B,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(U){return U.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Zt(Zt(new Set(Se(this,K).measurements.map(function(U){return U.type}))).map(function(U){return q({},U,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var U={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:Se(this,Te),v6Reachability:Se(this,Xe)};return Object.assign.apply(Object,Zt(Object.entries(U).map(function(V){var Z=Tt(V,2),ce=Z[0],ne=(0,Z[1])();return ne===void 0?{}:q({},ce,ne)})))}}]),B}(),le=function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return B&&Math.round(B*Math.pow(10,U))/Math.pow(10,U)},mt=function(B){return B.map(function(U){return le(U,2)})},st=function(B){return B.map(function(U){return{bytes:+U.bytes,bps:le(U.bps)}})},We={latencyMs:["getUnloadedLatencyPoints",mt],download:["getDownloadBandwidthPoints",st],upload:["getUploadBandwidthPoints",st],downLoadedLatencyMs:["getDownLoadedLatencyPoints",mt],upLoadedLatencyMs:["getUpLoadedLatencyPoints",mt],packetLoss:["getPacketLossDetails",function(B){return B.error?void 0:{numMessages:B.numMessagesSent,lossRatio:le(B.packetLoss,4)}}]},Ue=function(B,U){var V=U.apiUrl,Z={};Object.entries(We).forEach(function(ne){var he=Tt(ne,2),ge=he[0],ve=Tt(he[1],2),Re=ve[0],Pe=ve[1],oe=Pe===void 0?function(me){return me}:Pe,_e=B[Re]();_e&&(Z[ge]=oe(_e))});var ce=B.getScores();ce&&(Z.scores=Object.assign.apply(Object,[{}].concat(Zt(Object.entries(ce).map(function(ne){var he,ge=Tt(ne,2),ve=ge[0],Re=ge[1];return q({},ve,{points:(he=Re).points,classification:he.classificationName})}))))),fetch(V,{method:"POST",body:JSON.stringify(Z)})},Fe=["type"],gt=["numPackets"],Ye=["bytes"],vt=["latency","latencyUnderLoad","download","upload"],kt=function(){return"".concat(Math.round(1e16*Math.random()))},At=new WeakMap,Rt=new WeakMap,yt=new WeakMap,Jt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,kr=new WeakMap,vn=new WeakMap,qr=new WeakMap,Br=new WeakMap,Rn=new WeakMap,An=new WeakSet,zn=new WeakSet,Cr=new WeakSet,En=new WeakSet,Ln=new WeakSet,Hn=new WeakSet,Kr=new WeakSet,os=function(){function B(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zs(this,B),hs(this,Kr),hs(this,Hn),hs(this,Ln),hs(this,En),hs(this,Cr),hs(this,zn),hs(this,An),q(this,"onRunningChange",function(){}),q(this,"onResultsChange",function(){}),Ht(this,At,{writable:!0,value:function(){}}),Ht(this,Rt,{writable:!0,value:function(){}}),Ht(this,yt,{writable:!0,value:void 0}),Ht(this,Jt,{writable:!0,value:void 0}),Ht(this,Mt,{writable:!0,value:kt()}),Ht(this,Lt,{writable:!0,value:-1}),Ht(this,kr,{writable:!0,value:void 0}),Ht(this,vn,{writable:!0,value:1e6}),Ht(this,qr,{writable:!0,value:1e6}),Ht(this,Br,{writable:!0,value:!1}),Ht(this,Rn,{writable:!0,value:!1}),Dt(this,yt,Object.assign({},Qu,U,Ju)),Dt(this,Jt,new ft(Se(this,yt))),Se(this,yt).autoStart&&this.play()}return Ms(B,[{key:"results",get:function(){return Se(this,Jt)}},{key:"isRunning",get:function(){return Se(this,Br)}},{key:"isFinished",get:function(){return Se(this,Rn)}},{key:"onFinish",set:function(U){Dt(this,At,U)}},{key:"onError",set:function(U){Dt(this,Rt,U)}},{key:"pause",value:function(){vt.includes(ar(this,Cr,qn).call(this))&&Se(this,kr).pause(),ar(this,An,In).call(this,!1)}},{key:"play",value:function(){Se(this,Br)||(ar(this,An,In).call(this,!0),ar(this,Kr,on).call(this))}},{key:"restart",value:function(){ar(this,Ln,or).call(this),this.play()}}]),B}();function In(B){B!==Se(this,Br)&&(Dt(this,Br,B),this.onRunningChange(Se(this,Br)))}function Yt(B){var U=this;B!==Se(this,Rn)&&(Dt(this,Rn,B),B&&setTimeout(function(){return Se(U,At).call(U,U.results)}))}function qn(){return Se(this,Lt)<0||Se(this,Lt)>=Se(this,yt).measurements.length?null:Se(this,yt).measurements[Se(this,Lt)].type}function xt(){return Se(this,Jt).raw[ar(this,Cr,qn).call(this)]||void 0}function or(){ar(this,Hn,ln).call(this),Dt(this,Mt,kt()),Dt(this,Lt,-1),Dt(this,kr,void 0),ar(this,An,In).call(this,!1),ar(this,zn,Yt).call(this,!1),Se(this,Jt).clear()}function ln(){var B=Se(this,kr);B&&(B.onFinished=B.onConnectionError=B.onFail=B.onMsgReceived=B.onCredentialsFailure=B.onMeasurementResult=function(){},vt.includes(ar(this,Cr,qn).call(this))&&B.pause())}function on(){var B,U=this;if(!(vt.includes(ar(this,Cr,qn).call(this))&&ar(this,En,xt).call(this)&&ar(this,En,xt).call(this).started)||ar(this,En,xt).call(this).finished||ar(this,En,xt).call(this).finishedCurrentRound||ar(this,En,xt).call(this).error){if(Dt(this,Lt,(B=Se(this,Lt),++B)),Se(this,Lt)>=Se(this,yt).measurements.length)return ar(this,An,In).call(this,!1),void ar(this,zn,Yt).call(this,!0);var V,Z=Se(this,yt).measurements[Se(this,Lt)],ce=Z.type,ne=fe(Z,Fe),he=ar(this,En,xt).call(this),ge=Se(this,yt),ve=ge.downloadApiUrl,Re=ge.uploadApiUrl,Pe=ge.estimatedServerTime;switch(ce){case"v4Reachability":case"v6Reachability":(V=new Kl("https://".concat(ne.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(ut){he.finished=!0,he.results=la({host:ne.host},ut),U.onResultsChange({type:ce}),ar(U,Kr,on).call(U)};break;case"rpki":(V=new Kl("https://".concat(Se(this,yt).rpkiInvalidHost),{timeout:5e3})).onFinished=function(ut){(ut.response?ut.response.json():Promise.resolve()).then(function(Ze){he.finished=!0,he.results=la({host:Se(U,yt).rpkiInvalidHost,filteringInvalids:!ut.reachable},Ze?{asn:Ze.asn,name:Ze.name}:{}),U.onResultsChange({type:ce}),ar(U,Kr,on).call(U)})};break;case"nxdomain":(V=new Kl("https://".concat(ne.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(ut){he.finished=!0,he.results={host:ne.nxhost,reachable:ut.reachable},U.onResultsChange({type:ce}),ar(U,Kr,on).call(U)};break;case"packetLoss":case"packetLossUnderLoad":he.finished=!1;var oe=ne.numPackets,_e=fe(ne,gt),me=Se(this,yt),Q=me.turnServerUri,X=me.turnServerCredsApiUrl,ue=me.turnServerUser,Oe=me.turnServerPass,De=me.includeCredentials;(V=new Gp(la({turnServerUri:Q,turnServerCredsApi:X,turnServerCredsApiIncludeCredentials:De,turnServerUser:ue,turnServerPass:Oe,numMsgs:oe,downloadChunkSize:ne.loadDown?Se(this,vn):void 0,uploadChunkSize:ne.loadUp?Se(this,qr):void 0,downloadApiUrl:ve,uploadApiUrl:Re},_e))).onMsgReceived=function(){he.results=Object.assign({},V.results),U.onResultsChange({type:ce})},V.onFinished=function(){he.finished=!0,U.onResultsChange({type:ce}),ar(U,Kr,on).call(U)},V.onConnectionError=function(ut){he.error=ut,U.onResultsChange({type:ce}),Se(U,Rt).call(U,"Connection error while measuring packet loss: ".concat(ut)),ar(U,Kr,on).call(U)},V.onCredentialsFailure=function(){he.error="unable to get turn server credentials",U.onResultsChange({type:ce}),Se(U,Rt).call(U,"Error while measuring packet loss: unable to get turn server credentials."),ar(U,Kr,on).call(U)};break;case"latency":case"latencyUnderLoad":he.finished=!1,(V=new sd([{dir:"down",bytes:0,count:ne.numPackets,bypassMinDuration:!0}],{downloadApiUrl:ve,uploadApiUrl:Re,estimatedServerTime:Pe,logApiUrl:Se(this,yt).logMeasurementApiUrl,measurementId:Se(this,Mt),downloadChunkSize:ne.loadDown?Se(this,vn):void 0,uploadChunkSize:ne.loadUp?Se(this,qr):void 0})).fetchOptions={credentials:Se(this,yt).includeCredentials?"include":void 0},V.onMeasurementResult=V.onNewMeasurementStarted=function(ut,Ze){he.results=Object.assign({},Ze.down[0]),U.onResultsChange({type:ce})},V.onFinished=function(){he.finished=!0,U.onResultsChange({type:ce}),Se(U,Br)&&ar(U,Kr,on).call(U)},V.onConnectionError=function(ut){he.error=ut,U.onResultsChange({type:ce}),Se(U,Rt).call(U,"Connection error while measuring latency: ".concat(ut)),ar(U,Kr,on).call(U)},V.play();break;case"download":case"upload":if(he.finished||he.error)ar(this,Kr,on).call(this);else{delete he.finishedCurrentRound;var bt=Se(this,yt)["measure".concat(ce==="download"?"Down":"Up","loadLoadedLatency")];(V=new sd([la({dir:ce==="download"?"down":"up"},ne)],{downloadApiUrl:ve,uploadApiUrl:Re,estimatedServerTime:Pe,logApiUrl:Se(this,yt).logMeasurementApiUrl,measurementId:Se(this,Mt),measureParallelLatency:bt,parallelLatencyThrottleMs:Se(this,yt).loadedLatencyThrottle})).fetchOptions={credentials:Se(this,yt).includeCredentials?"include":void 0},V.finishRequestDuration=Se(this,yt).bandwidthFinishRequestDuration,V.onNewMeasurementStarted=function(ut){var Ze=ut.count,qt=ut.bytes,Be=he.results=Object.assign({},he.results);!Be.hasOwnProperty(qt)&&(Be[qt]={timings:[],numMeasurements:0,sideLatency:bt?[]:void 0}),Be[qt].numMeasurements-Be[qt].timings.length!==Ze&&(Be[qt].numMeasurements+=Ze,U.onResultsChange({type:ce}))},V.onMeasurementResult=function(ut){var Ze=ut.bytes,qt=fe(ut,Ye);he.results[Ze].timings.push(qt),he.results=Object.assign({},he.results),U.onResultsChange({type:ce})},V.onParallelLatencyResult=function(ut){he.results[ne.bytes].sideLatency.push(ut),he.results=Object.assign({},he.results),U.onResultsChange({type:ce})},V.onFinished=function(ut){var Ze=!Se(U,yt).measurements.slice(Se(U,Lt)+1).map(function(we){return we.type}).includes(ce),qt=Math.min.apply(Math,Zt(Object.values(ce==="download"?ut.down:ut.up).slice(-1)[0].timings.map(function(we){return we.duration})));if(Ze||!ne.bypassMinDuration&&qt>Se(U,yt).bandwidthFinishRequestDuration){he.finished=!0,U.onResultsChange({type:ce});var Be=.5*Object.keys(he.results).map(function(we){return+we}).sort(function(we,Qe){return Qe-we})[0];ce==="download"&&Dt(U,vn,Be),ce==="upload"&&Dt(U,qr,Be)}else he.finishedCurrentRound=!0;Se(U,Br)&&ar(U,Kr,on).call(U)},V.onConnectionError=function(ut){he.error=ut,U.onResultsChange({type:ce}),Se(U,Rt).call(U,"Connection error while measuring ".concat(ce,": ").concat(ut)),ar(U,Kr,on).call(U)},V.play()}}Dt(this,kr,V),he.started=!0,this.onResultsChange({type:ce})}else Se(this,kr).play()}var un=new WeakMap,jn=new WeakMap,ea=function(B){F(V,B);var U=tt(V);function V(Z){var ce,ne;zs(this,V);for(var he=arguments.length,ge=new Array(he>1?he-1:0),ve=1;ve<he;ve++)ge[ve-1]=arguments[ve];return Ht(ke(ne=U.call.apply(U,[this,Z].concat(ge))),un,{writable:!0,value:void 0}),Ht(ke(ne),jn,{writable:!0,value:function(Re){Se(ke(ne),un)&&Ue(Re,{apiUrl:Se(ke(ne),un)})}}),ot((ce=ke(ne),$(V.prototype)),"onFinish",Se(ke(ne),jn),ce,!0),Dt(ke(ne),un,Object.assign({},Qu,Z,Ju).logAimApiUrl),ne}return Ms(V,[{key:"onFinish",set:function(Z){var ce=this;ot($(V.prototype),"onFinish",function(ne){Z(ne),Se(ce,jn).call(ce,ne)},this,!0)}}]),V}(os),Xa=a(9633);function ua(B,U){var V=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!V){if(Array.isArray(B)||(V=function(ve,Re){if(ve){if(typeof ve=="string")return Ua(ve,Re);var Pe={}.toString.call(ve).slice(8,-1);return Pe==="Object"&&ve.constructor&&(Pe=ve.constructor.name),Pe==="Map"||Pe==="Set"?Array.from(ve):Pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pe)?Ua(ve,Re):void 0}}(B))||U){V&&(B=V);var Z=0,ce=function(){};return{s:ce,n:function(){return Z>=B.length?{done:!0}:{done:!1,value:B[Z++]}},e:function(ve){throw ve},f:ce}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,he=!0,ge=!1;return{s:function(){V=V.call(B)},n:function(){var ve=V.next();return he=ve.done,ve},e:function(ve){ge=!0,ne=ve},f:function(){try{he||V.return==null||V.return()}finally{if(ge)throw ne}}}}function Ua(B,U){(U==null||U>B.length)&&(U=B.length);for(var V=0,Z=Array(U);V<U;V++)Z[V]=B[V];return Z}var $a=[R],ks=!1,fs=function(){return(0,g.A)(function oe(){(0,i.A)(this,oe),(0,_.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function(oe){this.keyProvider=oe}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function(oe){if(!oe)throw new Error("'token' is empty, please provide it in config");this.apiKey=oe;var _e=T(Kt,void 0,E.apply(void 0,$a));window.STORE=_e,Wr.default.init({store:_e})}},{key:"getCameras",value:(Pe=(0,u.A)(o().mark(function oe(){var _e,me,Q,X;return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(ue.prev=0,_e=navigator.userAgent.includes("Firefox"),me=[],!_e){ue.next=8;break}return ue.next=6,new Promise(function(Oe,De){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var bt=(0,u.A)(o().mark(function ut(Ze){var qt;return o().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,navigator.mediaDevices.enumerateDevices();case 2:qt=Be.sent,me=qt.filter(function(we){return we.kind==="videoinput"}).map(function(we){return new qu(we.deviceId,we.groupId,we.kind,we.label)}),Oe(me),Ze.getTracks().forEach(function(we){return we.stop()});case 6:case"end":return Be.stop()}},ut)}));return function(ut){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getCameras()",bt),De(bt)})});case 6:ue.next=12;break;case 8:return ue.next=10,navigator.mediaDevices.enumerateDevices();case 10:Q=ue.sent,me=Q.filter(function(Oe){return Oe.kind==="videoinput"}).map(function(Oe){return new qu(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return ue.abrupt("return",me);case 15:ue.prev=15,ue.t0=ue.catch(0),X=ue.t0.message,ue.t0 instanceof TypeError&&ue.t0.name==="TypeError"&&(X=ur.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(X));case 20:case"end":return ue.stop()}},oe,null,[[0,15]])})),function(){return Pe.apply(this,arguments)})},{key:"getMicrophones",value:(Re=(0,u.A)(o().mark(function oe(){var _e,me,Q,X;return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(ue.prev=0,_e=navigator.userAgent.includes("Firefox"),me=[],!_e){ue.next=8;break}return ue.next=6,new Promise(function(Oe,De){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var bt=(0,u.A)(o().mark(function ut(Ze){var qt;return o().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,navigator.mediaDevices.enumerateDevices();case 2:qt=Be.sent,me=qt.filter(function(we){return we.kind==="audioinput"}).map(function(we){return new kl(we.deviceId,we.groupId,we.kind,we.label)}),Oe(me),Ze.getTracks().forEach(function(we){return we.stop()});case 6:case"end":return Be.stop()}},ut)}));return function(ut){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getMicrophones()",bt),De(bt)})});case 6:ue.next=12;break;case 8:return ue.next=10,navigator.mediaDevices.enumerateDevices();case 10:Q=ue.sent,me=Q.filter(function(Oe){return Oe.kind==="audioinput"}).map(function(Oe){return new kl(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return ue.abrupt("return",me);case 15:ue.prev=15,ue.t0=ue.catch(0),X=ue.t0.message,ue.t0 instanceof TypeError&&ue.t0.name==="TypeError"&&(X=ur.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(X));case 20:case"end":return ue.stop()}},oe,null,[[0,15]])})),function(){return Re.apply(this,arguments)})},{key:"getPlaybackDevices",value:(ve=(0,u.A)(o().mark(function oe(){var _e,me,Q,X;return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(ue.prev=0,_e=navigator.userAgent.includes("Firefox"),me=[],!_e){ue.next=8;break}return ue.next=6,new Promise(function(Oe,De){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var bt=(0,u.A)(o().mark(function ut(Ze){var qt;return o().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,navigator.mediaDevices.enumerateDevices();case 2:qt=Be.sent,me=qt.filter(function(we){return we.kind==="audiooutput"}).map(function(we){return new Ep(we.deviceId,we.groupId,we.kind,we.label)}),Oe(me),Ze.getTracks().forEach(function(we){return we.stop()});case 6:case"end":return Be.stop()}},ut)}));return function(ut){return bt.apply(this,arguments)}}()).catch(function(bt){console.error("Error in getPlaybackDevices()",bt),De(bt)})});case 6:ue.next=12;break;case 8:return ue.next=10,navigator.mediaDevices.enumerateDevices();case 10:Q=ue.sent,me=Q.filter(function(Oe){return Oe.kind==="audiooutput"}).map(function(Oe){return new Ep(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return ue.abrupt("return",me);case 15:ue.prev=15,ue.t0=ue.catch(0),X=ue.t0.message,ue.t0 instanceof TypeError&&ue.t0.name==="TypeError"&&(X="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(X));case 20:case"end":return ue.stop()}},oe,null,[[0,15]])})),function(){return ve.apply(this,arguments)})},{key:"getDevices",value:(ge=(0,u.A)(o().mark(function oe(){var _e,me,Q,X,ue,Oe;return o().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,navigator.mediaDevices.enumerateDevices();case 3:_e=De.sent,me=[],Q=ua(_e);try{for(Q.s();!(X=Q.n()).done;)ue=X.value,me.push(new Pc(ue.deviceId,ue.groupId,ue.kind,ue.label))}catch(bt){Q.e(bt)}finally{Q.f()}return De.abrupt("return",me);case 10:De.prev=10,De.t0=De.catch(0),Oe=De.t0.message,De.t0 instanceof TypeError&&(Oe=De.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":De.t0.message),console.error("An error occurred in getDevices(), ".concat(Oe));case 15:case"end":return De.stop()}},oe,null,[[0,10]])})),function(){return ge.apply(this,arguments)})},{key:"on",value:function(oe,_e){if(oe!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(oe,_e)}},{key:"addDeviceChangeEvent",value:function(){var oe=this;if(!ks){this.getDevices().then(function(me){oe.devices=me});try{navigator.mediaDevices.addEventListener("devicechange",function(){var me=(0,u.A)(o().mark(function Q(X){var ue,Oe,De,bt,ut;return o().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return ue=oe.devices,Ze.next=3,oe.getDevices();case 3:oe.devices=Ze.sent,Oe=new Array,De=ua(oe.devices),Ze.prev=6,ut=o().mark(function qt(){var Be;return o().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:Be=bt.value,ue.filter(function(Qe){return Qe.deviceId==Be.deviceId&&Qe.kind==Be.kind}).length==0?Oe.push(Be):ue=ue.filter(function(Qe){return!(Qe.deviceId==Be.deviceId&&Qe.kind==Be.kind)});case 3:case"end":return we.stop()}},qt)}),De.s();case 9:if((bt=De.n()).done){Ze.next=13;break}return Ze.delegateYield(ut(),"t0",11);case 11:Ze.next=9;break;case 13:Ze.next=18;break;case 15:Ze.prev=15,Ze.t1=Ze.catch(6),De.e(Ze.t1);case 18:return Ze.prev=18,De.f(),Ze.finish(18);case 21:Oe.length!=0&&oe.eventEmitter.emit("device-changed",{devices:oe.devices}),ue.length!=0&&oe.eventEmitter.emit("device-changed",{devices:oe.devices});case 23:case"end":return Ze.stop()}},Q,null,[[6,15,18,21]])}));return function(Q){return me.apply(this,arguments)}}()),ks=!0}catch(me){var _e=me.message;me instanceof TypeError&&(_e=me.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":me.message),console.error("An error occurred in device-change event, ".concat(_e))}}}},{key:"off",value:function(oe,_e){if(oe!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(oe,_e)}},{key:"checkPermissions",value:(he=(0,u.A)(o().mark(function oe(_e){var me,Q,X,ue,Oe;return o().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(_e||(_e=Rs.AUDIO_AND_VIDEO),me=new Map,!_e.includes(Rs.AUDIO)&&!_e.includes(Rs.AUDIO_AND_VIDEO)){De.next=15;break}return Q=!0,De.prev=4,De.next=7,navigator.permissions.query({name:"microphone"});case 7:(X=De.sent).state!="prompt"&&X.state!="denied"||(Q=!1),De.next=14;break;case 11:throw De.prev=11,De.t0=De.catch(4),Error("Browser does not support microphone permission check");case 14:me.set(Rs.AUDIO,Q);case 15:if(!_e.includes(Rs.VIDEO)&&!_e.includes(Rs.AUDIO_AND_VIDEO)){De.next=28;break}return ue=!0,De.prev=17,De.next=20,navigator.permissions.query({name:"camera"});case 20:(Oe=De.sent).state!="prompt"&&Oe.state!="denied"||(ue=!1),De.next=27;break;case 24:throw De.prev=24,De.t1=De.catch(17),Error("Browser does not support camera permission check");case 27:me.set(Rs.VIDEO,ue);case 28:return De.abrupt("return",me);case 29:case"end":return De.stop()}},oe,null,[[4,11],[17,24]])})),function(oe){return he.apply(this,arguments)})},{key:"requestPermission",value:(ne=(0,u.A)(o().mark(function oe(_e){var me,Q,X,ue,Oe,De,bt,ut,Ze,qt,Be,we,Qe;return o().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(_e||(_e=Rs.AUDIO_AND_VIDEO),me=new Map,!_e.includes(Rs.AUDIO_AND_VIDEO)){Ve.next=32;break}return X={audio:!0,video:!0},ue=!0,Ve.prev=5,Ve.next=8,navigator.mediaDevices.getUserMedia(X);case 8:Q=Ve.sent,Ve.next=30;break;case 11:if(Ve.prev=11,Ve.t0=Ve.catch(5),!(Ve.t0 instanceof DOMException)){Ve.next=27;break}Ve.t1=Ve.t0.name,Ve.next=Ve.t1==="NotAllowedError"?17:Ve.t1==="NotReadableError"?19:Ve.t1==="NotFoundError"?21:24;break;case 17:return Ve.t0.message==="Permission denied by system"&&(Oe=ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",25);case 19:return Oe=Cs(Ve.t0,"video"),Ve.abrupt("break",25);case 21:return Oe=ur.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Oe=ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",25);case 24:Oe=Ve.t0.message;case 25:Ve.next=28;break;case 27:Oe=Ve.t0 instanceof TypeError&&Ve.t0.name==="TypeError"?ur.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:Ve.t0.message;case 28:ue=!1,Oe&&console.error("An error occurred in request permission, ".concat(Oe));case 30:Q&&setTimeout(function(){Q.getTracks().forEach(function($t){$t.stop()})},100),me.set(Rs.AUDIO_AND_VIDEO,ue);case 32:if(!_e.includes(Rs.VIDEO)){Ve.next=62;break}return bt={audio:!1,video:!0},ut=!0,Ve.prev=35,Ve.next=38,navigator.mediaDevices.getUserMedia(bt);case 38:De=Ve.sent,Ve.next=60;break;case 41:if(Ve.prev=41,Ve.t2=Ve.catch(35),!(Ve.t2 instanceof DOMException)){Ve.next=57;break}Ve.t3=Ve.t2.name,Ve.next=Ve.t3==="NotAllowedError"?47:Ve.t3==="NotReadableError"?49:Ve.t3==="NotFoundError"?51:54;break;case 47:return Ve.t2.message==="Permission denied by system"&&(Ze=ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",55);case 49:return Ze=Cs(Ve.t2,"video"),Ve.abrupt("break",55);case 51:return Ze=ur.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ze=ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",55);case 54:Ze=Ve.t2.message;case 55:Ve.next=58;break;case 57:Ze=Ve.t2 instanceof TypeError&&Ve.t2.name==="TypeError"?ur.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:Ve.t2.message;case 58:ut=!1,Ze&&console.error("An error occurred in request permission, ".concat(Ze));case 60:De&&De.getTracks().forEach(function($t){$t.stop()}),me.set(Rs.VIDEO,ut);case 62:if(!_e.includes(Rs.AUDIO)){Ve.next=92;break}return Be={audio:!0,video:!1},we=!0,Ve.prev=65,Ve.next=68,navigator.mediaDevices.getUserMedia(Be);case 68:qt=Ve.sent,Ve.next=90;break;case 71:if(Ve.prev=71,Ve.t4=Ve.catch(65),!(Ve.t4 instanceof DOMException)){Ve.next=87;break}Ve.t5=Ve.t4.name,Ve.next=Ve.t5==="NotAllowedError"?77:Ve.t5==="NotReadableError"?79:Ve.t5==="NotFoundError"?81:84;break;case 77:return Ve.t4.message==="Permission denied by system"&&(Qe=ur.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",85);case 79:return Qe=Cs(Ve.t4,"audio"),Ve.abrupt("break",85);case 81:return Qe=ur.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Qe=ur.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ve.abrupt("break",85);case 84:Qe=Ve.t4.message;case 85:Ve.next=88;break;case 87:Qe=Ve.t4 instanceof TypeError&&Ve.t4.name==="TypeError"?ur.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:Ve.t4.message;case 88:we=!1,Qe&&console.error("An error occurred in request permission, ".concat(Qe));case 90:qt&&qt.getTracks().forEach(function($t){$t.stop()}),me.set(Rs.AUDIO,we);case 92:return Ve.abrupt("return",me);case 93:case"end":return Ve.stop()}},oe,null,[[5,11],[35,41],[65,71]])})),function(oe){return ne.apply(this,arguments)})},{key:"isInt",value:function(oe){return typeof oe=="number"&&oe%1==0}},{key:"getNetworkStats",value:(ce=(0,u.A)(o().mark(function oe(){var _e,me,Q,X,ue,Oe,De=arguments;return o().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return me=(_e=De.length>0&&De[0]!==void 0?De[0]:{}).timeoutDuration,Q=_e.baseUrl,X=Q===void 0?"api.videosdk.live":Q,me&&this.isInt(me)||(me=6e4),ue=new Promise(function(ut,Ze){setTimeout(function(){Ze("Not able to get NetworkStats due to timeout")},me)}),Oe=new Promise(function(ut,Ze){if(navigator.onLine){var qt=new ea({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(X,"/test-upload-speed"),downloadApiUrl:"https://".concat(X,"/test-download-speed")});qt.isRunning?(qt.onFinish=function(Be){ut({downloadSpeed:parseFloat(Number(Be.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Be.getUploadBandwidth()/1048576).toFixed(2))})},qt.onError=function(Be){Ze("Not able to get NetworkStats")}):Ze("Not able to get NetworkStats")}else Ze("Not able to get NetworkStats due to no Network")}),bt.abrupt("return",Promise.race([Oe,ue]));case 5:case"end":return bt.stop()}},oe,this)})),function(){return ce.apply(this,arguments)})},{key:"checkConnection",value:(Z=(0,u.A)(o().mark(function oe(){var _e,me,Q,X,ue,Oe,De=arguments;return o().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return me=(_e=De.length>0&&De[0]!==void 0?De[0]:{}).timeoutDuration,Q=_e.baseUrl,X=Q===void 0?"api.videosdk.live":Q,me&&this.isInt(me)||(me=6e4),ue=new Promise(function(ut,Ze){setTimeout(function(){Ze("TimeoutError: NetworkStats timeout")},me)}),Oe=new Promise(function(ut,Ze){navigator.onLine?fetch("https://".concat(X,"/ping")).then(function(qt){qt.text().then(function(Be){Be=="pong"?ut("Connection established"):Ze("ConnectionError: Server unreachable")})}).catch(function(qt){Ze("ConnectionError: Server unreachable")}):Ze("NetworkError: Offline")}),bt.abrupt("return",Promise.race([Oe,ue]));case 5:case"end":return bt.stop()}},oe,this)})),function(){return Z.apply(this,arguments)})},{key:"analytics",value:function(oe){var _e,me,Q;!oe&&navigator&&navigator.userAgent&&(me=navigator.userAgent,delete(Q=l().parse(me)).engine);try{var X;(X=oe)!==null&&X!==void 0&&X.browserUserAgent||(me=navigator.userAgent,delete(Q=l().parse(me)).engine)}catch{}oe&&oe.rawUserAgent&&(me=oe.rawUserAgent,delete(Q=l().parse(me)).engine),oe||(oe={});var ue={};ue.sdkType=oe.sdkType||"javascript",ue.sdkVersion=oe.sdkVersion||"0.2.9",ue.platform=oe.platform||((_e=Q)===null||_e===void 0||(_e=_e.platform)===null||_e===void 0?void 0:_e.type)||"",oe.browserUserAgent=="null"?ue.browserUserAgent=void 0:ue.browserUserAgent=Q,oe.deviceUserAgent&&(ue.deviceUserAgent=oe.deviceUserAgent),this._deviceInfo=ue}},{key:"initMeeting",value:function(oe){var _e,me=oe.meetingId,Q=oe.customCameraVideoTrack,X=Q===void 0?void 0:Q,ue=oe.customMicrophoneAudioTrack,Oe=ue===void 0?void 0:ue,De=oe.autoConsume,bt=De===void 0||De,ut=oe.preferredProtocol,Ze=oe.mode,qt=oe.multiStream,Be=qt===void 0||qt,we=oe.participantId,Qe=oe.name,Ve=oe.micEnabled,$t=oe.webcamEnabled,dr=oe.maxResolution,Pt=oe.metaData,Ur=oe.chatEnabled,yn=oe.useSpartialLayerAnalytics,Gr=oe.signalingBaseUrl,bs=oe.defaultCamera,en=oe.debugMode,ms=en===void 0||en;if(!me)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Lo=we?we.toString():O()({length:8}).toLowerCase(),qc=Qe||O()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof ut!="string"&&(ut="UDP_OVER_TCP"),(_e=ut)===null||_e===void 0?void 0:_e.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":ut=ut.toUpperCase();break;default:ut="UDP_OVER_TCP"}if(Ze||(Ze=Ae.nI.SEND_AND_RECV),Ze!==Ae.nI.SEND_AND_RECV&&Ze!==Ae.nI.SIGNALLING_ONLY&&Ze!==Ae.nI.RECV_ONLY&&Ze!==Ae.nI.VIEWER&&Ze!==Ae.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(Ae.nI.SEND_AND_RECV," or ").concat(Ae.nI.SIGNALLING_ONLY," or ").concat(Ae.nI.RECV_ONLY," "));if(Pt!=null&&(0,p.A)(Pt)!="object")throw new Error('"metaData" can only be object.');var ud=this._deviceInfo.sdkType==="react-native",Xp=ud?bs?bs==="front"?1:0:X?X.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:ud?1:0:0,dd=new Wr.default({roomId:me,peerId:Lo,secret:this.apiKey,device:"unknown",displayName:qc,mode:Ze,useSimulcast:Be,produce:!0,consume:!0,datachannel:Ur!==!1,micEnabled:Ve!==!1,webcamEnabled:$t!==!1,maxResolution:dr||"hd",useSpartialLayerAnalytics:yn,_deviceInfo:this._deviceInfo,customCameraVideoTrack:X,customMicrophoneAudioTrack:Oe,autoConsume:bt,preferredProtocol:ut,signalingBaseUrl:Gr,metaData:Pt,defaultCameraIndex:Xp,debugMode:ms,keyProvider:this.keyProvider});It.roomClient=dd;var Zp=new Me({id:Lo,displayName:qc,local:!0,mode:Ze,metaData:Pt});return new sr(me,Zp,dd)}},{key:"createCameraVideoTrack",value:(V=(0,u.A)(o().mark(function oe(_e){var me,Q,X,ue,Oe,De,bt,ut,Ze,qt,Be,we,Qe,Ve,$t,dr;return o().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(me=_e.cameraId,Q=me===void 0?void 0:me,X=_e.encoderConfig,ue=X===void 0?void 0:X,Oe=_e.facingMode,De=Oe===void 0?void 0:Oe,bt=_e.optimizationMode,ut=bt===void 0?void 0:bt,Ze=_e.multiStream,qt=Ze===void 0||Ze,!Q){Pt.next=6;break}return Pt.next=4,this.getCameras();case 4:(Be=Pt.sent)&&Be.some(function(Ur){return Ur.deviceId})&&(Be.some(function(Ur){return Ur.deviceId===Q})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return Pt.prev=6,we=ue?Ro.$.videoProfiles[ue]:Ro.$.videoProfiles.h360p_w640p,Qe={video:{deviceId:Q||void 0,facingMode:De||void 0,width:we.width,height:we.height,frameRate:we.frameRate}},Pt.next=11,(0,El.lp)(Qe);case 11:return Ve=Pt.sent,ut&&(Ve.contentHint=ut),Ve.encoderConfig=ue||"h360p_w640p",Ve.contentHint=ut||"",Ve.multiStream=qt,Ve.cameraId=Q,Pt.abrupt("return",Ve);case 20:if(Pt.prev=20,Pt.t0=Pt.catch(6),Pt.t0.name!=="SecurityError"){Pt.next=26;break}$t=ur.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,Pt.next=46;break;case 26:if(Pt.t0.name!=="DOMException"){Pt.next=30;break}$t=ur.q.ERROR_RN_CAMERA_NOT_FOUND.message,Pt.next=46;break;case 30:if(!(Pt.t0 instanceof DOMException)){Pt.next=45;break}Pt.t1=Pt.t0.name,Pt.next=Pt.t1==="NotAllowedError"?34:Pt.t1==="NotReadableError"?36:Pt.t1==="NotFoundError"?38:41;break;case 34:return $t=qs(Pt.t0,"video"),Pt.abrupt("break",43);case 36:return $t=Cs(Pt.t0,"video"),Pt.abrupt("break",43);case 38:return $t=ur.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&($t=ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Pt.abrupt("break",43);case 41:return $t=Pt.t0.message,Pt.abrupt("break",43);case 43:Pt.next=46;break;case 45:Pt.t0.message=="getUserMedia is not implemented in this browser"?(dr=ur.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,$t=dr.message):$t=Pt.t0.message;case 46:console.error("An error occurred in creating video track, ".concat($t));case 47:case"end":return Pt.stop()}},oe,this,[[6,20]])})),function(oe){return V.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(U=(0,u.A)(o().mark(function oe(_e){var me,Q,X,ue,Oe,De,bt,ut,Ze,qt,Be;return o().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return me=_e.encoderConfig,Q=me===void 0?void 0:me,X=_e.optimizationMode,ue=X===void 0?void 0:X,Oe=_e.withAudio,De=Oe===void 0?"enable":Oe,bt=_e.multiStream,ut=bt!==void 0&&bt,Ze=Q?Ro.$.screenShareProfiles[Q]:Ro.$.screenShareProfiles.h720p_15fps,qt={audio:De==="enable",video:{width:Ze.resolution.width,height:Ze.resolution.height,frameRate:Ze.frameRate}},we.next=5,(0,El.Zu)(qt);case 5:return Be=we.sent,ue&&(Be.contentHint=ue),Be.multiStream=ut,we.abrupt("return",Be);case 9:case"end":return we.stop()}},oe)})),function(oe){return U.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(B=(0,u.A)(o().mark(function oe(_e){var me,Q,X,ue,Oe,De,bt,ut,Ze,qt,Be,we;return o().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(me=_e.noiseConfig,Q=me===void 0?void 0:me,X=_e.encoderConfig,ue=X===void 0?void 0:X,Oe=_e.microphoneId,!(De=Oe===void 0?void 0:Oe)){Qe.next=6;break}return Qe.next=4,this.getMicrophones();case 4:(bt=Qe.sent)&&bt.some(function(Ve){return Ve.deviceId})&&(bt.some(function(Ve){return Ve.deviceId===De})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Qe.prev=6,ut=ue?Ro.$.audioProfiles[ue]:Ro.$.audioProfiles.speech_standard,Ze={audio:{deviceId:De,sampleRate:ut.sampleRate,echoCancellation:Q?Q&&Q.acousticEchoCancellation:ut.echoCancellation,autoGainControl:Q?Q&&Q.autoGainControl:ut.autoGainControl,noiseSuppression:Q?Q&&Q.noiseSuppression:ut.noiseSuppression,channelCount:ut.channelCount}},Qe.next=11,(0,El.lp)(Ze);case 11:return(qt=Qe.sent).encoderConfig=ue||"speech_standard",qt.microphoneId=De,Qe.abrupt("return",qt);case 17:if(Qe.prev=17,Qe.t0=Qe.catch(6),Qe.t0.name!=="SecurityError"){Qe.next=23;break}Be=ur.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Qe.next=43;break;case 23:if(Qe.t0.name!=="DOMException"){Qe.next=27;break}Be=ur.q.ERROR_RN_MIC_NOT_FOUND.message,Qe.next=43;break;case 27:if(!(Qe.t0 instanceof DOMException)){Qe.next=42;break}Qe.t1=Qe.t0.name,Qe.next=Qe.t1==="NotAllowedError"?31:Qe.t1==="NotReadableError"?33:Qe.t1==="NotFoundError"?35:38;break;case 31:return Be=qs(Qe.t0,"audio"),Qe.abrupt("break",40);case 33:return Be=Cs(Qe.t0,"audio"),Qe.abrupt("break",40);case 35:return Be=ur.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Be=ur.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Qe.abrupt("break",40);case 38:return Be=Qe.t0.message,Qe.abrupt("break",40);case 40:Qe.next=43;break;case 42:Qe.t0.message=="getUserMedia is not implemented in this browser"?(we=ur.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,Be=we.message):Be=Qe.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(Be));case 44:case"end":return Qe.stop()}},oe,this,[[6,17]])})),function(oe){return B.apply(this,arguments)})}]);var B,U,V,Z,ce,ne,he,ge,ve,Re,Pe}();function qs(B,U){return(B.message==="Permission denied"||B.message==="Permission dismissed"?U==="video"?ur.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:ur.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:B.message.includes("The request is not allowed by the user agent")?U==="video"?ur.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:ur.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:B.message==="Permission denied by system"?U==="video"?ur.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:ur.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:U==="video"?ur.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:ur.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Cs(B,U){return(B.message==="Device in use"?U==="video"?ur.q.ERROR_CAMERA_IN_USE:ur.q.ERROR_MICROPHONE_IN_USE:U==="video"?ur.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:ur.q.ERROR_MICROPHONE_IN_USE).message}(0,_.A)(fs,"devices",[]),(0,_.A)(fs,"eventEmitter",new tn),(0,_.A)(fs,"Constants",{errors:ur.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:tr,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:zu.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Ae.nI,permission:Rs});var da=fs})(),h})())})($E);var Yc=$E.exports;function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bf.apply(null,arguments)}var Tr="videosdk-live-react-sdk",nt={"participant-joined":Tr+"-participant-joined","participant-left":Tr+"-participant-left","speaker-changed":Tr+"-speaker-changed","presenter-changed":Tr+"-presenter-changed","main-participant-changed":Tr+"-main-participant-changed","entry-requested":Tr+"-entry-requested","entry-responded":Tr+"-entry-responded","recording-started":Tr+"-recording-started","recording-stopped":Tr+"-recording-stopped","chat-message":Tr+"-chat-message","meeting-joined":Tr+"-meeting-joined","meeting-left":Tr+"-meeting-left","live-stream-started":Tr+"-live-stream-started","live-stream-stopped":Tr+"-live-stream-stopped","video-state-changed":Tr+"-video-state-changed","video-seeked":Tr+"-video-seeked","webcam-requested":Tr+"-webcam-requested","mic-requested":Tr+"-mic-requested","pin-state-changed":Tr+"-pin-state-changed","connection-open":Tr+"-connection-open","connection-close":Tr+"-connection-close","switch-meeting":Tr+"-switch-meeting",error:Tr+"-error","hls-started":Tr+"-hls-started","hls-stopped":Tr+"-hls-stopped","hls-state-changed":Tr+"-hls-state-changed","recording-state-changed":Tr+"-recording-state-changed","livestream-state-changed":Tr+"-livestream-state-changed","meeting-state-changed":Tr+"-meeting-state-changed","participant-mode-changed":Tr+"-participant-mode-changed","transcription-state-changed":Tr+"-transcription-state-changed","transcription-text":Tr+"-transcription-text","character-joined":Tr+"-character-joined","character-left":Tr+"-character-left","whiteboard-started":Tr+"-whiteboard-started","whiteboard-stopped":Tr+"-whiteboard-stopped","paused-all-streams":Tr+"-paused-all-streams","resumed-all-streams":Tr+"-resumed-all-streams","media-relay-started":Tr+"-media-relay-started","media-relay-stopped":Tr+"-media-relay-stopped","media-relay-error":Tr+"-media-relay-error","media-relay-request-response":Tr+"-media-relay-request-response","media-relay-request-received":Tr+"-media-relay-request-received"},et=new ZM;et.setMaxListeners(9999);var WE=D.createContext(),VE=function(t){var r=t===void 0?{}:t,n=r.onParticipantJoined,s=n===void 0?function(){}:n,a=r.onParticipantLeft,h=a===void 0?function(){}:a,p=r.onSpeakerChanged,u=p===void 0?function(){}:p,i=r.onPresenterChanged,g=i===void 0?function(){}:i,_=r.onMainParticipantChanged,f=_===void 0?function(){}:_,o=r.onEntryRequested,w=o===void 0?function(){}:o,l=r.onEntryResponded,y=l===void 0?function(){}:l,d=r.onPausedAllStreams,m=d===void 0?function(){}:d,S=r.onResumedAllStreams,x=S===void 0?function(){}:S,k=r.onRecordingStarted,I=k===void 0?function(){}:k,T=r.onRecordingStopped,C=T===void 0?function(){}:T,E=r.onChatMessage,c=E===void 0?function(){}:E,b=r.onMeetingJoined,R=b===void 0?function(){}:b,P=r.onMeetingLeft,O=P===void 0?function(){}:P,N=r.onLiveStreamStarted,M=N===void 0?function(){}:N,L=r.onLiveStreamStopped,A=L===void 0?function(){}:L,j=r.onVideoStateChanged,G=j===void 0?function(){}:j,de=r.onVideoSeeked,te=de===void 0?function(){}:de,J=r.onWebcamRequested,ae=J===void 0?function(){}:J,be=r.onMicRequested,xe=be===void 0?function(){}:be,se=r.onPinStateChanged,ze=se===void 0?function(){}:se,Ie=r.onConnectionOpen,Ne=Ie===void 0?function(){}:Ie,Ee=r.onConnetionClose,Le=Ee===void 0?function(){}:Ee,dt=r.onSwitchMeeting,cr=dt===void 0?function(){}:dt,gr=r.onError,Ot=gr===void 0?function(){}:gr,xr=r.onHlsStarted,vr=xr===void 0?function(){}:xr,Bt=r.onHlsStopped,Qr=Bt===void 0?function(){}:Bt,Nt=r.onHlsStateChanged,Kt=Nt===void 0?function(){}:Nt,Wr=r.onRecordingStateChanged,tn=Wr===void 0?function(){}:Wr,Nr=r.onLivestreamStateChanged,Vr=Nr===void 0?function(){}:Nr,rn=r.onMeetingStateChanged,It=rn===void 0?function(){}:rn,nn=r.onParticipantModeChanged,Jr=nn===void 0?function(){}:nn,Fr=r.onCharacterJoined,Ar=Fr===void 0?function(){}:Fr,hn=r.onCharacterLeft,Hr=hn===void 0?function(){}:hn,wn=r.onMediaRelayStarted,fn=wn===void 0?function(){}:wn,Tn=r.onMediaRelayStopped,Sn=Tn===void 0?function(){}:Tn,Ft=r.onMediaRelayError,Pn=Ft===void 0?function(){}:Ft,Gn=r.onMediaRelayRequestResponse,sn=Gn===void 0?function(){}:Gn,er=r.onMediaRelayRequestReceived,Ge=er===void 0?function(){}:er;return D.useEffect(function(){return et.on(nt["participant-joined"],s),et.on(nt["participant-left"],h),et.on(nt["speaker-changed"],u),et.on(nt["presenter-changed"],g),et.on(nt["main-participant-changed"],f),et.on(nt["entry-requested"],w),et.on(nt["entry-responded"],y),et.on(nt["paused-all-streams"],m),et.on(nt["resumed-all-streams"],x),et.on(nt["recording-started"],I),et.on(nt["recording-stopped"],C),et.on(nt["chat-message"],c),et.on(nt["meeting-joined"],R),et.on(nt["meeting-left"],O),et.on(nt["live-stream-started"],M),et.on(nt["live-stream-stopped"],A),et.on(nt["video-state-changed"],G),et.on(nt["video-seeked"],te),et.on(nt["webcam-requested"],ae),et.on(nt["mic-requested"],xe),et.on(nt["pin-state-changed"],ze),et.on(nt["connection-open"],Ne),et.on(nt["connection-close"],Le),et.on(nt["switch-meeting"],cr),et.on(nt.error,Ot),et.on(nt["hls-started"],vr),et.on(nt["hls-stopped"],Qr),et.on(nt["hls-state-changed"],Kt),et.on(nt["recording-state-changed"],tn),et.on(nt["livestream-state-changed"],Vr),et.on(nt["meeting-state-changed"],It),et.on(nt["participant-mode-changed"],Jr),et.on(nt["character-joined"],Ar),et.on(nt["character-left"],Hr),et.on(nt["media-relay-started"],fn),et.on(nt["media-relay-stopped"],Sn),et.on(nt["media-relay-error"],Pn),et.on(nt["media-relay-request-response"],sn),et.on(nt["media-relay-request-received"],Ge),function(){et.off(nt["meeting-state-changed"],It),et.off(nt["participant-joined"],s),et.off(nt["participant-left"],h),et.off(nt["speaker-changed"],u),et.off(nt["presenter-changed"],g),et.off(nt["main-participant-changed"],f),et.off(nt["entry-requested"],w),et.off(nt["entry-responded"],y),et.off(nt["paused-all-streams"],m),et.off(nt["resumed-all-streams"],x),et.off(nt["recording-started"],I),et.off(nt["recording-stopped"],C),et.off(nt["chat-message"],c),et.off(nt["meeting-joined"],R),et.off(nt["meeting-left"],O),et.off(nt["live-stream-started"],M),et.off(nt["live-stream-stopped"],A),et.off(nt["video-state-changed"],G),et.off(nt["video-seeked"],te),et.off(nt["webcam-requested"],ae),et.off(nt["mic-requested"],xe),et.off(nt["pin-state-changed"],ze),et.off(nt["connection-open"],Ne),et.off(nt["connection-close"],Le),et.off(nt["switch-meeting"],cr),et.off(nt.error,Ot),et.off(nt["hls-started"],vr),et.off(nt["hls-stopped"],Qr),et.off(nt["hls-state-changed"],Kt),et.off(nt["recording-state-changed"],tn),et.off(nt["livestream-state-changed"],Vr),et.off(nt["participant-mode-changed"],Jr),et.off(nt["character-joined"],Ar),et.off(nt["character-left"],Hr),et.off(nt["media-relay-started"],fn),et.off(nt["media-relay-stopped"],Sn),et.off(nt["media-relay-error"],Pn),et.off(nt["media-relay-request-response"],sn),et.off(nt["media-relay-request-received"],Ge)}},[]),D.useContext(WE)},e7="0.3.11",t7=function(t){var r=t.children,n=t.config,s=t.token,a=t.joinWithoutUserInteraction,h=t.reinitialiseMeetingOnConfigChange,p=t.deviceInfo,u=t.keyProvider,i=D.useState(null),g=i[0],_=i[1],f=D.useState(null),o=f[0],w=f[1],l=D.useState(null),y=l[0],d=l[1],m=D.useState(null),S=m[0],x=m[1],k=D.useState(null),I=k[0],T=k[1],C=D.useState(!1),E=C[0],c=C[1],b=D.useState(!1),R=b[0],P=b[1],O=D.useState(!1),N=O[0],M=O[1],L=D.useState(!1),A=L[0],j=L[1],G=D.useState([]),de=G[0],te=G[1],J=D.useState(new Map),ae=J[0],be=J[1],xe=D.useState(new Map),se=xe[0],ze=xe[1],Ie=D.useState(new Map),Ne=Ie[0],Ee=Ie[1],Le=D.useState(!1),dt=Le[0],cr=Le[1],gr=D.useState(new Map),Ot=gr[0],xr=gr[1],vr=D.useState(!1),Bt=vr[0],Qr=vr[1],Nt=D.useState(!1),Kt=Nt[0],Wr=Nt[1],tn=D.useState("RECORDING_STOPPED"),Nr=tn[0],Vr=tn[1],rn=D.useState("LIVESTREAM_STOPPED"),It=rn[0],nn=rn[1],Jr=D.useState("HLS_STOPPED"),Fr=Jr[0],Ar=Jr[1],hn=D.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Hr=hn[0],wn=hn[1],fn=D.useState("TRANSCRIPTION_STOPPED"),Tn=fn[0],Sn=fn[1],Ft=D.useRef(),Pn=D.useRef(),Gn=D.useRef(),sn=D.useRef(),er=D.useRef(),Ge=D.useRef(u),Me=D.useRef(n),it=D.useRef(s),je=D.useRef(!1),ct=D.useRef(),tr=D.useMemo(function(){return h},[]);D.useEffect(function(){Ft.current=g},[g]),D.useEffect(function(){Pn.current=E},[E]),D.useEffect(function(){Gn.current=R},[R]),D.useEffect(function(){sn.current=N},[N]),D.useEffect(function(){er.current=A},[A]),D.useEffect(function(){Me.current=n},[n]),D.useEffect(function(){it.current=s},[s]),D.useEffect(function(){ct.current=Kt},[Kt]);var Ae=function(){_(null),w(null),d(null),x(null),T(null),c(!1),P(!1),M(!1),j(!1),te([]),cr(!1),be(new Map),ze(new Map),Ee(new Map),xr(new Map),Qr(!1),Wr(!1),Vr("RECORDING_STOPPED"),nn("LIVESTREAM_STOPPED"),Ar("HLS_STOPPED"),Sn("TRANSCRIPTION_STOPPED"),wn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Gt=function(ee){be(function(at){at.set(ee.id,ee);var sr=new Map(at);return sr}),et.emit(nt["participant-joined"],ee)},jt=function(ee){be(function(at){at.delete(ee.id);var sr=new Map(at);return sr}),et.emit(nt["participant-left"],ee)},hr=function(ee){var at,sr;T(ee),M(ee===(Ft==null||(at=Ft.current)===null||at===void 0||(sr=at.localParticipant)===null||sr===void 0?void 0:sr.id)),et.emit(nt["presenter-changed"],ee)},ir=function(ee){d(ee),et.emit(nt["main-participant-changed"],ee)},Rr=function(ee){x(ee),et.emit(nt["speaker-changed"],ee)},Je=function(ee){te(function(at){return[].concat(at,[ee])}),et.emit(nt["chat-message"],ee)},Wt=function(ee){et.emit(nt["entry-requested"],ee)},Ct=function(ee,at){et.emit(nt["entry-responded"],ee,at)},Ut=function(){j(!0),et.emit(nt["recording-started"])},Ir=function(){j(!1),et.emit(nt["recording-stopped"])},Er=function(ee){ee.track.readyState==="live"&&(ee.kind==="video"?P(!0):ee.kind==="audio"&&c(!0))},Mr=function(ee){ee.kind==="video"?P(!1):ee.kind==="audio"&&c(!1)},yr=function(ee){cr(!0),et.emit(nt["live-stream-started"],ee)},fr=function(){cr(!1),et.emit(nt["live-stream-stopped"])},zr=function(ee){Wr(!0),et.emit(nt["hls-started"],ee)},Wn=function(){Wr(!1),et.emit(nt["hls-stopped"])},Yn=function(ee){et.emit(nt["video-state-changed"],ee)},Ns=function(ee){et.emit(nt["video-seeked"],ee)},As=function(ee){et.emit(nt["webcam-requested"],ee)},Xs=function(ee){et.emit(nt["mic-requested"],ee)},ia=function(ee){ee.switchRoomId?(te(function(at){return[].concat(at,ee.messages)}),et.emit(nt["meeting-joined"],ee)):(je.current=!0,te(function(at){return[].concat(at,ee.messages)}),et.emit(nt["meeting-joined"],ee),Qr(!0))},Zs=function(){et.emit(nt["meeting-left"]);var ee=Ft.current;if(ee){var at;typeof(ee==null?void 0:ee.off)=="function"&&(ee.off("meeting-state-changed",Sr),ee.off("participant-joined",Gt),ee.off("participant-left",jt),ee.off("presenter-changed",hr),ee.off("main-participant-changed",ir),ee.off("speaker-changed",Rr),ee.off("entry-requested",Wt),ee.off("entry-responded",Ct),ee.off("chat-message",Je),ee.off("recording-started",Ut),ee.off("recording-stopped",Ir),ee.off("meeting-joined",ia),ee.off("meeting-left",Zs),ee.off("livestream-started",yr),ee.off("livestream-stopped",fr),ee.off("video-state-changed",Yn),ee.off("video-seeked",Ns),ee.off("webcam-requested",As),ee.off("mic-requested",Xs),ee.off("pin-state-changed",Qn),ee.off("paused-all-streams",Jn),ee.off("resumed-all-streams",wa),ee.off("connection-open",Et),ee.off("connection-close",Xt),ee.off("switch-meeting",Vt),ee.off("error",gn),ee.off("hls-started",zr),ee.off("hls-stopped",Wn),ee.off("recording-state-changed",nr),ee.off("livestream-state-changed",mr),ee.off("hls-state-changed",an),ee.off("participant-mode-changed",is),ee.off("whiteboard-stopped",xn),ee.off("whiteboard-started",ps),ee.off("transcription-state-changed",_r),ee.off("character-joined",On),ee.off("character-left",Is)),typeof(ee==null||(at=ee.localParticipant)===null||at===void 0?void 0:at.off)=="function"&&(ee.localParticipant.off("stream-enabled",Er),ee.localParticipant.off("stream-disabled",Mr)),Ae()}},Qn=function(ee){var at=ee.participantId,sr=ee.state,Vn=ee.pinnedBy;Ee(function(Nn){!sr.cam&&!sr.share?Nn.delete(at):Nn.set(at,sr);var ur=new Map(Nn);return ur}),et.emit(nt["pin-state-changed"],{participantId:at,state:sr,pinnedBy:Vn})},Jn=function(ee){var at=ee.kind;et.emit(nt["paused-all-streams"],{kind:at})},wa=function(ee){var at=ee.kind;et.emit(nt["resumed-all-streams"],{kind:at})},Et=function(ee){xr(function(at){at.set(ee.id,ee);var sr=new Map(at);return sr}),et.emit(nt["connection-open"],ee)},Xt=function(ee){xr(function(at){at.delete(ee);var sr=new Map(at);return sr}),et.emit(nt["connection-close"],ee)},Vt=function(ee){et.emit(nt["switch-meeting"],ee)},gn=function(ee){et.emit(nt.error,ee)},nr=function(ee){Vr(ee==null?void 0:ee.status),et.emit(nt["recording-state-changed"],ee)},mr=function(ee){nn(ee==null?void 0:ee.status),et.emit(nt["livestream-state-changed"],ee)},an=function(ee){Ar(ee==null?void 0:ee.status),(ee==null?void 0:ee.status)=="HLS_PLAYABLE"?wn({downstreamUrl:ee==null?void 0:ee.downstreamUrl,playbackHlsUrl:ee==null?void 0:ee.playbackHlsUrl,livestreamUrl:ee==null?void 0:ee.livestreamUrl}):(ee==null?void 0:ee.status)=="HLS_STOPPED"&&wn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),et.emit(nt["hls-state-changed"],ee)},Sr=function(ee){et.emit(nt["meeting-state-changed"],ee)},_r=function(ee){Sn(ee==null?void 0:ee.status),et.emit(nt["transcription-state-changed"],ee)},Xr=function(ee){et.emit(nt["transcription-text"],ee)},ps=function(ee){et.emit(nt["whiteboard-started"],ee)},xn=function(ee){et.emit(nt["whiteboard-stopped"],ee)},On=function(ee){ze(function(at){at.set(ee.id,ee);var sr=new Map(at);return sr}),et.emit(nt["character-joined"],ee)},Is=function(ee){ze(function(at){at.delete(ee.id);var sr=new Map(at);return sr}),et.emit(nt["character-left"],ee)},is=function(ee){var at,sr;be(function(Vn){var Nn=Vn.get(ee.participantId);Nn.mode=ee.mode,Vn.set(Nn.id,Nn);var ur=new Map(Vn);return ur}),ee.participantId===(Ft==null||(at=Ft.current)===null||at===void 0||(sr=at.localParticipant)===null||sr===void 0?void 0:sr.id)&&w(function(Vn){return Vn.mode=ee.mode,Vn}),et.emit(nt["participant-mode-changed"],ee)},Sa=function(ee){et.emit(nt["media-relay-started"],ee)},Ds=function(ee){et.emit(nt["media-relay-stopped"],ee)},Ja=function(ee){et.emit(nt["media-relay-error"],ee)},Vs=function(ee){et.emit(nt["media-relay-request-response"],ee)},hi=function(ee){et.emit(nt["media-relay-request-received"],ee)},Ii=function(){var ee=Yc.VideoSDK&&Yc.VideoSDK.initMeeting(Me.current);_(ee);var at=ee.localParticipant,sr=ee.participants,Vn=ee.characters;sr.set(at.id,at),be(sr),ze(Vn),w(at),ee.on("meeting-state-changed",Sr),ee.on("participant-joined",Gt),ee.on("participant-left",jt),ee.on("presenter-changed",hr),ee.on("main-participant-changed",ir),ee.on("speaker-changed",Rr),ee.on("entry-requested",Wt),ee.on("entry-responded",Ct),ee.on("chat-message",Je),ee.on("recording-started",Ut),ee.on("recording-stopped",Ir),ee.on("meeting-joined",ia),ee.on("meeting-left",Zs),ee.on("livestream-started",yr),ee.on("livestream-stopped",fr),ee.on("video-state-changed",Yn),ee.on("video-seeked",Ns),ee.on("webcam-requested",As),ee.on("mic-requested",Xs),ee.on("pin-state-changed",Qn),ee.on("paused-all-streams",Jn),ee.on("resumed-all-streams",wa),ee.on("connection-open",Et),ee.on("connection-close",Xt),ee.on("switch-meeting",Vt),ee.on("error",gn),ee.on("hls-started",zr),ee.on("hls-stopped",Wn),ee.on("recording-state-changed",nr),ee.on("livestream-state-changed",mr),ee.on("hls-state-changed",an),ee.on("participant-mode-changed",is),ee.on("transcription-state-changed",_r),ee.on("transcription-text",Xr),ee.on("whiteboard-started",ps),ee.on("whiteboard-stopped",xn),ee.on("character-joined",On),ee.on("character-left",Is),ee.on("media-relay-started",Sa),ee.on("media-relay-stopped",Ds),ee.on("media-relay-error",Ja),ee.on("media-relay-request-response",Vs),ee.on("media-relay-request-received",hi),ee.localParticipant.on("stream-enabled",Er),ee.localParticipant.on("stream-disabled",Mr),ee.join()},co=function(){var ee=Ft.current;ee&&ee.leave()},lo=function(){var ee=Ft.current;ee&&ee.end()},xa=function(ee){var at=Ft.current;at&&at.pauseAllStreams(ee)},uo=function(ee){var at=Ft.current;at&&at.resumeAllStreams(ee)},vc=function(ee,at,sr,Vn){var Nn=Ft.current;Nn&&Nn.startRecording(ee,at,sr,Vn)},yc=function(){var ee=Ft.current;if(ee){var at=er.current;at&&ee.stopRecording()}},po=function(ee){ee===void 0&&(ee=void 0);var at=Ft.current;at&&at.unmuteMic(ee)},ho=function(){var ee=Ft.current;ee&&ee.muteMic()},_c=function(ee){ee===void 0&&(ee=void 0);var at=Pn.current;at?ho():po(ee)},fo=function(){var ee=Ft.current;ee&&ee.disableWebcam()},rr=function(ee){ee===void 0&&(ee=void 0);var at=Ft.current;at&&at.enableWebcam(ee)},mo=function(ee){ee===void 0&&(ee=void 0);var at=Gn.current;at?fo():rr(ee)},go=function(ee){var at=ee.meetingId,sr=ee.token,Vn=Ft.current;Vn&&Vn.switchTo({meetingId:at,token:sr})},Ma=function(){var ee=Ft.current;ee&&ee.disableScreenShare()},lr=function(ee){ee===void 0&&(ee=void 0);var at=Ft.current;at&&at.enableScreenShare(ee)},bc=function(ee){ee===void 0&&(ee=void 0);var at=sn.current;at?Ma():lr(ee)},vo=function(ee){var at=Ft.current;at&&at.changeMode(ee)},wc=function(ee){var at=Ft.current;at&&at.sendChatMessage(ee)},Sc=function(ee,at){var sr=Ft.current;sr&&sr.respondEntry(ee,at)},xc=function(){try{var ee=Ft.current;return Promise.resolve(function(){if(ee)return Promise.resolve(ee.getMics())}())}catch(at){return Promise.reject(at)}},xs=function(){try{var ee=Ft.current;return Promise.resolve(function(){if(ee)return Promise.resolve(ee.getWebcams())}())}catch(at){return Promise.reject(at)}},Rc=function(ee){var at=Ft.current;at&&at.changeWebcam(ee)},yo=function(ee){var at=Ft.current;at&&at.replaceWebcamStream(ee)},oa=function(ee){var at=Ft.current;at&&at.changeMic(ee)},Di=function(ee){var at=ee.link,sr=Ft.current;sr&&sr.startVideo({link:at})},La=function(){var ee=Ft.current;ee&&ee.stopVideo()},_o=function(){var ee=Ft.current;ee&&ee.resumeVideo()},bo=function(ee){var at=ee.currentTime,sr=Ft.current;sr&&sr.pauseVideo({currentTime:at})},Ec=function(){var ee=Ft.current;ee&&ee.enableAdaptiveSubscription()},wo=function(){var ee=Ft.current;ee&&ee.disableAdaptiveSubscription()},Mi=function(ee){var at=ee.destinationMeetingId,sr=ee.token,Vn=ee.kinds,Nn=Ft.current;Nn&&Nn.requestMediaRelay({destinationMeetingId:at,token:sr,kinds:Vn})},kc=function(ee){var at=Ft.current;at&&at.stopMediaRelay(ee)},Cc=function(ee){var at=ee.currentTime,sr=Ft.current;sr&&sr.seekVideo({currentTime:at})},Li=function(ee,at){var sr=Ft.current;sr&&sr.startLivestream(ee,at)},ja=function(){var ee=Ft.current;ee&&ee.stopLivestream()},ji=function(ee){var at=ee.meetingId,sr=ee.payload;try{var Vn=Ft.current,Nn=function(){if(Vn)return Promise.resolve(Vn.connectTo({meetingId:at,payload:sr})).then(function(){})}();return Promise.resolve(Nn&&Nn.then?Nn.then(function(){}):void 0)}catch(ur){return Promise.reject(ur)}},So=function(ee,at){var sr=Ft.current;sr&&sr.startHls(ee,at)},xo=function(){var ee=Ft.current;ee&&ee.stopHls()},fi=function(){Yc.VideoSDK.config(it.current),Ge.current&&Yc.VideoSDK.setKeyProvider(Ge.current),p?Yc.VideoSDK.analytics(p):Yc.VideoSDK.analytics({sdkType:"react-web",sdkVersion:e7}),a&&Ii()};return D.useEffect(function(){fi()},[]),D.useEffect(function(){tr&&je.current&&(co(),fi(),!a&&Ii())},[n.meetingId,s,tr]),_t.createElement(WE.Provider,{value:{meetingId:g==null?void 0:g.id,meeting:g,baseUrl:g==null?void 0:g.baseUrl,localParticipant:o,mainParticipant:y,activeSpeakerId:S,participants:ae,characters:se,presenterId:I,localMicOn:E,localWebcamOn:R,localScreenShareOn:N,messages:de,isRecording:A,isLiveStreaming:dt,pinnedParticipants:Ne,connections:Ot,isHls:Kt,recordingState:Nr,livestreamState:It,hlsState:Fr,hlsUrls:Hr,transcriptionState:Tn,isMeetingJoined:Bt,selectedCameraDevice:g==null?void 0:g.selectedCameraDevice,selectedMicrophoneDevice:g==null?void 0:g.selectedMicrophoneDevice,join:Ii,leave:co,end:lo,pauseAllStreams:xa,resumeAllStreams:uo,startRecording:vc,stopRecording:yc,sendChatMessage:wc,respondEntry:Sc,muteMic:ho,unmuteMic:po,toggleMic:_c,disableWebcam:fo,enableWebcam:rr,toggleWebcam:mo,disableScreenShare:Ma,enableScreenShare:lr,toggleScreenShare:bc,switchTo:go,getMics:xc,getWebcams:xs,changeWebcam:Rc,replaceWebcamStream:yo,changeMic:oa,changeMode:vo,startVideo:Di,stopVideo:La,resumeVideo:_o,pauseVideo:bo,seekVideo:Cc,startLivestream:Li,stopLivestream:ja,connectTo:ji,startHls:So,stopHls:xo,enableAdaptiveSubscription:Ec,disableAdaptiveSubscription:wo,requestMediaRelay:Mi,stopMediaRelay:kc}},r)},r7=function(t,r){var n={},s=n.onStreamEnabled,a=s===void 0?function(){}:s,h=n.onStreamDisabled,p=h===void 0?function(){}:h,u=n.onMediaStatusChanged,i=u===void 0?function(){}:u,g=n.onVideoQualityChanged,_=g===void 0?function(){}:g,f=n.onStreamPaused,o=f===void 0?function(){}:f,w=n.onStreamResumed,l=w===void 0?function(){}:w,y=n.onProducerAdded,d=y===void 0?function(){}:y,m=n.onProducerRemoved,S=m===void 0?function(){}:m,x=n.onConsumerAdded,k=x===void 0?function(){}:x,I=n.onConsumerRemoved,T=I===void 0?function(){}:I,C=D.useState(null),E=C[0],c=C[1],b=D.useState(null),R=b[0],P=b[1],O=D.useState(null),N=O[0],M=O[1],L=D.useState(null),A=L[0],j=L[1],G=VE(),de=D.useMemo(function(){var er,Ge=G==null?void 0:G.participants,Me=G==null?void 0:G.localParticipant,it=G==null?void 0:G.activeSpeakerId,je=G==null?void 0:G.mainParticipant,ct=(G==null||(er=G.pinnedParticipants)===null||er===void 0?void 0:er.get(t))||{cam:!1,share:!1};return{participants:Ge,localParticipant:Me,activeSpeakerId:it,mainParticipant:je,pinState:ct}},[G]),te=de.participants,J=de.localParticipant,ae=de.activeSpeakerId,be=de.mainParticipant,xe=de.pinState,se=te==null?void 0:te.get(t),ze=D.useState(se==null?void 0:se.webcamOn),Ie=ze[0],Ne=ze[1],Ee=D.useState(se==null?void 0:se.micOn),Le=Ee[0],dt=Ee[1],cr=D.useState(se==null?void 0:se.mode),gr=cr[0],Ot=cr[1],xr=function(Ge){if(Ge.track.readyState==="live")switch(Ge.kind){case"video":E!=null&&c(null),c(Ge);break;case"audio":R!=null&&P(null),P(Ge);break;case"share":N!=null&&M(null),M(Ge);break;case"shareAudio":A!=null&&j(null),j(Ge);break}},vr=function(Ge){switch(Ge.kind){case"video":c(null);break;case"audio":P(null);break;case"share":M(null);break;case"shareAudio":j(null);break}},Bt=function(Ge){xr(Ge),a(Ge)},Qr=function(Ge){t===Ge.participantId&&Ot(Ge.mode)},Nt=function(Ge){vr(Ge),p(Ge)},Kt=function(Ge){var Me=Ge.peerId,it=Ge.prevQuality,je=Ge.currentQuality;_({peerId:Me,prevQuality:it,currentQuality:je})},Wr=function(Ge){var Me=Ge.kind,it=Ge.peerId,je=Ge.newStatus;Me=="audio"?dt(je):Me=="video"&&Ne(je),i({kind:Me,peerId:it,newStatus:je})},tn=function(Ge){se==null||se.setQuality(Ge)},Nr=function(Ge,Me){se==null||se.setViewPort(Ge,Me)},Vr=function(Ge){se==null||se.setScreenShareQuality(Ge)},rn=function(){se==null||se.enableMic()},It=function(){se==null||se.disableMic()},nn=function(){se==null||se.enableWebcam()},Jr=function(){se==null||se.disableWebcam()},Fr=function(Ge){se==null||se.pin(Ge)},Ar=function(Ge){se==null||se.unpin(Ge)},hn=function(){se==null||se.remove()},Hr=function(Ge){var Me=Ge===void 0?{}:Ge,it=Me.height,je=Me.width;return Promise.resolve(se==null?void 0:se.captureImage({height:it,width:je}))},wn=function(){return Promise.resolve(se==null?void 0:se.getAudioStats())},fn=function(){return Promise.resolve(se==null?void 0:se.getVideoStats())},Tn=function(){return Promise.resolve(se==null?void 0:se.getShareStats())},Sn=function(){return Promise.resolve(se==null?void 0:se.getShareAudioStats())},Ft=function(){se==null||se.consumeWebcamStreams()},Pn=function(){se==null||se.consumeMicStreams()},Gn=function(){se==null||se.stopConsumingWebcamStreams()},sn=function(){se==null||se.stopConsumingMicStreams()};return D.useEffect(function(){var er=se==null?void 0:se.streams;return er&&er.forEach(function(Ge){xr(Ge)}),se!=null&&se.micOn&&dt(Le),se!=null&&se.webcamOn&&Ne(Ie),se==null||se.on("stream-enabled",Bt),se==null||se.on("stream-disabled",Nt),se==null||se.on("stream-paused",function(Ge){o(Ge)}),se==null||se.on("stream-resumed",function(Ge){l(Ge)}),se==null||se.on("media-status-changed",Wr),se==null||se.on("video-quality-changed",Kt),se==null||se.on("producer-added",function(Ge){d(Ge)}),se==null||se.on("producer-removed",function(Ge){S(Ge)}),se==null||se.on("consumer-added",function(Ge){k(Ge)}),se==null||se.on("consumer-removed",function(Ge){T(Ge)}),et.on(nt["participant-mode-changed"],Qr),function(){se==null||se.off("stream-enabled",Bt),se==null||se.off("stream-disabled",Nt),se==null||se.off("media-status-changed",Wr),se==null||se.off("video-quality-changed",Kt),et.off(nt["participant-mode-changed"],Qr)}},[se]),{displayName:se==null?void 0:se.displayName,participant:se,webcamStream:E,micStream:R,screenShareStream:N,screenShareAudioStream:A,webcamOn:Ie||!!E,micOn:Le||!!R,mode:gr,metaData:se==null?void 0:se.metaData,screenShareOn:!!N,isLocal:(J==null?void 0:J.id)===t,isActiveSpeaker:ae===t,isMainParticipant:(be==null?void 0:be.id)===t,pinState:xe,consumeMicStreams:Pn,consumeWebcamStreams:Ft,stopConsumingMicStreams:sn,stopConsumingWebcamStreams:Gn,setQuality:tn,setScreenShareQuality:Vr,setViewPort:Nr,enableMic:rn,disableMic:It,enableWebcam:nn,disableWebcam:Jr,captureImage:Hr,pin:Fr,unpin:Ar,remove:hn,getAudioStats:wn,getVideoStats:fn,getShareStats:Tn,getShareAudioStats:Sn}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Yc.VideoSDK.Constants;D.forwardRef(function(e,t){var r=e.participantId,n=e.type,s=n===void 0?"video":n,a=e.containerStyle,h=a===void 0?{}:a,p=e.className,u=p===void 0?"":p,i=e.classNameVideo,g=i===void 0?"":i,_=e.videoStyle,f=_===void 0?{}:_,o=r7(r),w=o.webcamOn,l=o.webcamStream,y=o.isLocal,d=o.screenShareStream,m=o.screenShareOn,S=D.useRef(null);return D.useEffect(function(){var x=s==="share"?d:l,k=s==="share"?m:w;if(S.current)if(k&&x){var I=new MediaStream;I.addTrack(x.track),S.current.srcObject=I,S.current.setAttribute("playsinline",""),S.current.setAttribute("x5-playsinline",""),S.current.setAttribute("webkit-playsinline",""),S.current.play().catch(function(T){return console.error("videoRef.current.play() failed",T)})}else S.current.srcObject=null},[s].concat(s==="share"?[m,d]:s==="video"?[w,l]:[])),_t.createElement("div",{ref:t,className:"video-container participant-video-"+r+" "+(u||""),style:Bf({objectFit:s==="share"?"contain":"none",height:"100%"},h)},_t.createElement("video",{width:"100%",height:"100%",ref:S,autoPlay:!0,className:g,style:y&&s!=="share"?Bf({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},f):f}))});function n7({participantId:e}){return v.jsxs("div",{children:["Participant: ",e]})}function s7(){const[e,t]=D.useState(null),{join:r,participants:n}=VE({onMeetingJoined:()=>{t("JOINED")}}),s=()=>{t("JOINING"),r()};return v.jsx("div",{className:"container",children:e&&e=="JOINED"?v.jsx("div",{children:[...n.keys()].map(a=>v.jsx(n7,{participantId:a},a))}):e&&e=="JOINING"?v.jsx("p",{children:"Joining the meeting..."}):v.jsx("button",{onClick:s,children:"Join the meeting"})})}const a7=({meetingId:e,token:t,name:r})=>v.jsx(t7,{config:{meetingId:e,micEnabled:!0,webcamEnabled:!0,name:r,debugMode:!1},token:t,children:v.jsx(s7,{})}),i7=()=>{const[e,t]=D.useState(""),[r,n]=D.useState("");return D.useEffect(()=>{(async()=>{try{const a=await pr.post("http://localhost:3000/api/chat/get-token");t(a.data.roomId),n(a.data.token)}catch(a){console.error("Error getting meeting token",a)}})()},[]),e&&r?v.jsx(a7,{meetingId:e,token:r,name:"Dr. Vasu"}):v.jsx("div",{className:"text-center mt-10 text-xl",children:" Starting Video Call..."})};function o7(){return v.jsx(EP,{children:v.jsxs(VS,{children:[v.jsx(Ts,{path:"/",element:v.jsx(W6,{})}),v.jsx(Ts,{path:"/about",element:v.jsx(z6,{})}),v.jsx(Ts,{path:"/doctors",element:v.jsx(PD,{})}),v.jsx(Ts,{path:"/doctors/:id",element:v.jsx(OD,{})}),v.jsx(Ts,{path:"/book-appointment/:id",element:v.jsx(ND,{})}),v.jsx(Ts,{path:"/profile",element:v.jsx(AD,{})}),v.jsx(Ts,{path:"/appointments",element:v.jsx(ID,{})}),v.jsx(Ts,{path:"/admin",element:v.jsx(p8,{})}),v.jsx(Ts,{path:"/chat",element:v.jsx(FM,{})}),v.jsx(Ts,{path:"/dashboard/patient",element:v.jsx(zM,{})}),v.jsx(Ts,{path:"/dashboard/doctor",element:v.jsx(HM,{})}),v.jsx(Ts,{path:"/start-call",element:v.jsx(i7,{})}),v.jsx(Ts,{path:"/auth/*",element:v.jsx(VM,{})}),v.jsx(Ts,{path:"*",element:v.jsx("div",{children:"404 - Page Not Found"})})]})})}function c7(){return v.jsx(vP,{children:v.jsx(wP,{children:v.jsx(xP,{children:v.jsx(o7,{})})})})}Rg.createRoot(document.getElementById("root")).render(v.jsxs(_t.StrictMode,{children:[v.jsx(XA,{richColors:!0,position:"bottom-right"}),v.jsx(c7,{})]}));
